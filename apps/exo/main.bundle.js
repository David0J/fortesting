!function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);for(h&&h(e);u.length;)u.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},a={main:0},n=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var h=l;n.push([0,"vendors"]),i()}([function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(4),r=i.n(n),o=i(8);document.addEventListener("DOMContentLoaded",()=>{r.a.render(a.a.createElement(o.default,null),document.getElementById("exo"))})},,,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(9),r=i(35),o=i(158),l=i(290),c=i(291),h=i(297),d=i(306),u=i(307),p=i(308),m=i(296),g=i(310),_=i.n(g),f=i(304),y=i(305),b=i(311),T=i(318),v=i(341),E=i(346),x=i(348),S=i(350),I=i(354),N=i(384),w=i(463),A=i(469);i(472);function C(){return(C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={isMobile:this.isMobile(),isLandscape:this.isLandscape(),ready:!1,loading:!1,linkPath:"/",earthTipShown:!1,detailPanel:!1},this._pioneerRef=a.a.createRef(),this.planetBrowser=a.a.createRef(),this.homeController=a.a.createRef(),this.exoController=a.a.createRef(),this.footer=a.a.createRef(),this.detailOverlay=a.a.createRef(),this.wweOverlay=a.a.createRef(),this.menuOverlay=a.a.createRef(),this.link=a.a.createRef(),this.loading=a.a.createRef(),this.history=null,this.currentRoute=null,this.lastRoute=null,this._pioneer=null,this._scene=null,this._camera=null,this._managerTypes={sceneManager:h.default,cameraManager:d.default,comparisonManager:u.default,contentManager:p.default},this._managers={},this._starfield=null,this._createScene=this._createScene.bind(this),this._createViewportAndCamera=this._createViewportAndCamera.bind(this),this._initExo=this._initExo.bind(this),this._addPlacemarks=this._addPlacemarks.bind(this),this.setState=this.setState.bind(this),this.MainPathChanged=this.MainPathChanged.bind(this),this.isMobile=this.isMobile.bind(this),this.isLandscape=this.isLandscape.bind(this),this.openPlanetBrowser=this.openPlanetBrowser.bind(this),this.openMenuOverlay=this.openMenuOverlay.bind(this),this.openDetailPanel=this.openDetailPanel.bind(this),this.closeDetailPanel=this.closeDetailPanel.bind(this),this.openGalleryPage=this.openGalleryPage.bind(this),this.resetHomeView=this.resetHomeView.bind(this),this.getManager=this.getManager.bind(this),window.exoUI?window.exoUI.app=this:window.exoUI={app:this}}async componentDidMount(){window.app=this,window.Pioneer=r,this._pioneer=new r.Engine(this._pioneerRef.current),window.config&&(this._pioneer.getDownloader().setReplacement("STATIC_ASSETS_URL","https://"+window.config.staticUrl),this._pioneer.getDownloader().setReplacement("DYNAMIC_ASSETS_URL","https://"+window.config.dynamicUrl)),this._pioneer.setTime(r.TimeUtils.now()),this._pioneer.setTimeRate(1),await this._createScene(),await this._createViewportAndCamera();let t=this._addManager("content","contentManager",this._pioneer,window.config);await t.init();let e=this._addManager("camera","cameraManager",this._pioneer,this._scene,window.config),i=this._addManager("scene","sceneManager",this._pioneer,this._scene,e,this.isMobile),s=this._addManager("comparison","comparisonManager",this._pioneer,this._scene,this._planets);i.setContentManager(t),i.setPathChangeHandler(this.MainPathChanged),e.setContentManager(t),s.setContentManager(t),s.setCameraManager(e),this._initExo(),this._scrollable=!1,window.addEventListener("touchstart",t=>{this._scrollable=!1;let e=t.target;for(;null!==e.parentElement;){if(e.classList.contains("scrollable")){this._scrollable=!0;break}e=e.parentElement}},!1),window.addEventListener("touchmove",t=>{this._scrollable||t.preventDefault()},{passive:!1}),window.addEventListener("touchend",t=>{this._scrollable=!1});let a=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${a}px`),window.addEventListener("resize",t=>{let e=this.isMobile();this.state.isMobile;this.isLandscape();this.state.isLandscape;let i=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${i}px`),e&&window.scroll(0,0)}),await this._pioneer.waitUntilNextFrame(),this.setState({ready:!0})}_addManager(t,e,...i){let s=this._managerTypes[e];return void 0===this._managers[t]&&(this._managers[t]=new s(...i)),this._managers[t]}async _createScene(){this._scene=this._pioneer.addScene("main"),o.Entity.createGroup("stars",this._scene),o.Entity.createGroup("planets",this._scene),this._addPlacemarks(),o.Entity.create("sun",this._scene,{nameSuffix:"_fake"}),o.Entity.createGroup("planets",this._scene,{nameSuffix:"_fake"});let t=new r.Color(.87,.72,.04);this._planets=[this._scene.get("mercury_fake"),this._scene.get("venus_fake"),this._scene.get("earth_fake"),this._scene.get("mars_fake"),this._scene.get("jupiter_fake"),this._scene.get("saturn_fake"),this._scene.get("uranus_fake"),this._scene.get("neptune_fake")];const e=this._scene.get("sun");e.getComponentByType("lightSource")&&e.getComponentByType("lightSource").setEnabled(!1);const i=this._scene.get("sun_fake");i.getComponentByType("lightSource")&&i.getComponentByType("lightSource").setEnabled(!1);const s=i.getComponentByType("atmosphere");s&&s.setScaleHeight(2e4);let a=i.get("div");a.getDiv().classList.add("sun","fake"),a.setFadeWhenCloseToParent(!1),a.setFadeWhenCloseToCamera(!1),i.removeController(i.get("fixed")),i.setEnabled(!1),this._planets.forEach(e=>{let i=e.getComponentByType("trail");i.setColor(t),i.setEnabled(!1);let s=e.getComponentByType("div");s.getDiv().style.color="#dbb50a",s.setEnabled(!1),e.get("dynamo",0).getEntity().setParent(null),e.setEnabled(!1)}),o.Entity.create("scientist",this._scene).setEnabled(!1),o.Entity.create("school_bus",this._scene).setEnabled(!1);const n=this._scene.get("milky_way");return this._milkyway=n.addComponent("sprite"),this._milkyway.setTextureUrl(window.config.moduleUrl+"assets/image/generic/MilkyWay.png"),this._milkyway.setSize(new r.Vector2(12e17,12e17)),this._milkyway.setTransparent(!0),this._milkyway.setBlending("additive"),m.default.MISSIONS.forEach(t=>{o.Entity.create(t.id,this._scene)}),await this._scene.getLoadedPromise(),this._pioneer.waitUntilNextFrame()}async _createViewportAndCamera(){await o.Cameras.createFullSizeViewportAndCamera(this._scene),this._camera=this._scene.get("camera"),this._floodLight=this._camera.addComponent("lightSource"),this._floodLight.setEnabled(!1);let t=this._scene.addEntity("cameraTarget"),e=t.addController("fixed");const i=this._scene.get("earth");e.getEntity().setParent(i),e.setPosition(r.Vector3.Zero),e.setOrientation(r.Quaternion.Identity),t.addController("rotateByParentOrientation").setRotatingOrientation(!0)}_initExo(){let t=this._managers.content.dbObj;if(t.stars&&!m.default.isEmptyObj(t.stars)){this._pioneer.registerComponentType("Exostarfield",c.default),this._pioneer.registerComponentType("constellations",o.ConstellationsComponent),this._pioneer.registerControllerType("keplerianorbit",l.default),this._pioneer.registerComponentType("annulus",o.AnnulusComponent),this.sun=this._scene.get("sun"),this.sun.getComponentByType("div").getDiv().classList.add("sun"),this._starfield=this.sun.addComponent("Exostarfield","ExoMainstarfield"),this._starfield.init(t.stars,t.planets,this._managers.scene.updateLabel);let e=this.sun.addComponent("Exostarfield","ExoKeplercandidatefield");e.setInteractable(!1),e.init(this._managers.content.getDB("candidates"));let i=this.sun.addComponent("Exostarfield","ExoTESScandidatefield");i.setInteractable(!1),i.init(this._managers.content.getDB("tesscandidates"))}}_addPlacemarks(){let t=this._scene.get("earth"),e=this._scene.addEntity("placemarks");e.setParent(t),e.setCanOcclude(!1),e.setOcclusionRadius(t.getOcclusionRadius());let i=e.addController("fixed");i.setPosition(r.Vector3.Zero),i.setOrientation(r.Quaternion.Identity),e.addController("rotateByParentOrientation");for(let i in _.a){let s=_.a[i],a=10,n=o.Placemarks.addPlacemark(i,i,t,s.latLng[0],s.latLng[1],a);n.setParent(e);let r=n.get("div").getDiv();r.id=i,r.classList.add("placemark"),r.innerHTML='<div class="pin"></div><div class="content">'+s.text+"</div>"}}getManager(t){return void 0!==this._managers[t]?this._managers[t]:null}isMobile(){return window.matchMedia("(max-width: 64em)").matches}isLandscape(){return window.matchMedia("(orientation: landscape)").matches&&window.matchMedia("(max-height: 32em)").matches}openGalleryPage(t,e){e?this.planetBrowser.current.expandGalleryByNameType(t,e):(this.planetBrowser.current.open(),this.planetBrowser.current.activateGalleryPage(t))}openPlanetBrowser(){this.planetBrowser.current.open()}openMenuOverlay(){this.menuOverlay.current.open()}openDetailPanel(){window.parent.postMessage('{"message": "infoPanel", "open": 1}',"*"),this.setState({detailPanel:!0})}closeDetailPanel(){window.parent.postMessage('{"message": "infoPanel", "open": 0}',"*"),this.setState({detailPanel:!1})}resetHomeView(){this.homeController.current&&this.homeController.current.reset()}get pioneer(){return this._pioneer}get scene(){return this._scene}get camera(){return this._camera}MainPathChanged(t){if(!t||this.lastPath===t)return;this.lastPath=t,t="."===t[0]?t.substr(1):t;let e=window.config.moduleUrl;if(e="."===e[0]?e.substr(1):e,(t="/"===t?e:e+t)&&this.getManager("content")&&this.getManager("content").getDB("planets")&&this.getManager("content").getDB("stars")){const e=t.split("/"),i=e.indexOf("planet");if(i>=0&&i+1<e.length){const t=this.getManager("content").getDB("planets")[e[i+1]];if(!t)return;if(!this.getManager("content").getDB("stars")[t.pl_hostname])return}let s=e.indexOf("star");if(s<0&&(s=e.indexOf("system")),s>=0&&s+1<e.length){for(let i in f)if(f[i].stars)for(let a=0;a<f[i].stars.length;a++)if(f[i].stars[a].exo_id===e[s+1])return void this.history.push(t);for(let i=0;i<y.length;i+=1)if(y[i].exo_id===e[s+1])return void this.history.push(t);if(!this.getManager("content").getDB("stars")[e[s+1]])return}}this.history.push(t)}_propagateProps(t){let e=!!this.lastInfo;if(this.lastInfo)for(let i in this.lastInfo)this.lastInfo[i]!==t[i]&&(e=!0);e&&setTimeout(()=>{["homeController","exoController","footer","menuOverlay","wweOverlay"].map(t=>{this[t]&&this[t].current&&this[t].current.handleProps()})},300)}async checkLoading(t){if(!this.getManager)return null;const e=this.getManager("scene").getObjectById(t);if(!e||!e.get("model"))return null;const i=e.get("model");i.setForceLoaded(!0),this.loading&&this.loading.current&&this.loading.current.setState({loading:!0}),await i.getLoadedPromise(),this.loading&&this.loading.current&&this.loading.current.setState({loading:!1})}render(){const t=a.a.createElement("div",{className:"pioneer",ref:this._pioneerRef,style:{position:"absolute"}});let e=null,{isMobile:i,isLandscape:s,ready:o,earthTipShown:l,detailPanel:c}=this.state;if(o){const t=this.getManager("scene").getObjectById("earth"),o={isMobile:i,isLandscape:s,MainPathChanged:this.MainPathChanged,getManager:this.getManager},h={pioneer:this._pioneer,scene:this._scene};e=a.a.createElement(n.HashRouter,null,a.a.createElement(n.Route,{path:"/",render:e=>{null===this.history&&(this.history=e.history);let{pathname:s}=e.location,n=s?s.split("/"):[];n=n.filter(t=>t&&t.length>0);let d={};this.getManager("scene").select(null),this.getManager("scene").updateLabel(null);let u=0===n.length?"home":n[0];switch(this.lastRoute=this.currentRoute,this.currentRoute=u,this.getManager("scene").toggleConstellations(!1),u){case"home":d.category="all",d.controller=u,this.getManager("scene").showPlacemarks(!1),this.getManager("scene").setFilter(),this.getManager("camera").goToGalaxyView().then(()=>{this.getManager("scene").hideExoSystem(),this.getManager("scene").cleanExoSystems(),this.getManager("scene").deleteExoSystem(),this.getManager("scene").starFade(!0,2e3),this._propagateProps(d)}).catch(t=>{console.warn("e: ",t)});break;case"earth":if(t){const e=t.getComponentByType("spheroidLOD");if(e){const t=e.getTextureNames();if(t&&Array.isArray(t))for(let i=0;i<t.length;i++){const s=e.getTextureUrl(t[i]);e.setTexture(t[i],s,e.getTextureSizes(t[i]))}}}d.controller=u,["system","planet","star"].indexOf(this.lastRoute)>=0&&this.getManager("scene").setFilter();const e=[];for(let t=0;t<this._scene.getNumLightSources();t+=1){const i=this._scene.getLightSource(t).getEntity().getName();"sun"!==i&&"camera"!==i&&e.push(i)}for(let t=0;t<e.length;t+=1){const i=this._scene.get(e[t]);i&&i.getComponentByType("lightSource")&&i.getComponentByType("lightSource").setEnabled(!1)}this.getManager("camera").flyToEarth().then(()=>{this.getManager("scene").hideExoSystem(),this.getManager("scene").showPlacemarks(!0),this.getManager("scene").cleanExoSystems(),this.getManager("scene").deleteExoSystem(),this.getManager("scene").starFade(!0,1e3)}).catch(t=>{console.warn("e: ",t)});break;case"filter":d.controller="home",d.category=n[1],this.getManager("scene").showPlacemarks(!1),this.getManager("scene").hideExoSystem(),["system","planet","star"].indexOf(this.lastRoute)>=0&&(this.getManager("scene").setFilter(),this.getManager("camera").goToGalaxyView()),this.getManager("scene").cleanExoSystems(),this.getManager("scene").deleteExoSystem(),this._starfield.starFade(!0,1e3),this._propagateProps(d);break;case"facility":d.controller="home",d.observatory=n[1],this.getManager("scene").showPlacemarks(!1),this.getManager("scene").hideExoSystem(),this.getManager("camera").goToGalaxyView(),["system","planet","star"].indexOf(this.lastRoute)>=0&&this.getManager("scene").setFilter(),this.getManager("scene").cleanExoSystems(),this.getManager("scene").deleteExoSystem(),this.getManager("scene").starFade(!0,1e3),this._propagateProps(d);break;case"spacecraft":d.controller=u,d.id=n[1],this.getManager("scene").showPlacemarks(!1),["system","planet","star","earth"].indexOf(this.lastRoute)>=0&&this.getManager("scene").setFilter(),this.sun&&this.sun.getComponentByType("lightSource")&&this.sun.getComponentByType("lightSource").setEnabled(!0),this._pioneer.setTime(r.TimeUtils.now());for(let t=0;t<m.default.MISSIONS.length;t+=1)this._pioneer&&m.default.MISSIONS[t].id===d.id&&m.default.MISSIONS[t].frozenTime&&this._pioneer.setTime(m.default.MISSIONS[t].frozenTime);this.getManager("camera").flyToObject(d.id,u).then(()=>{this.getManager("scene").hideExoSystem(),this.getManager("scene").cleanExoSystems(),this.getManager("scene").deleteExoSystem(),this.getManager("scene").starFade(!0,1e3),this.checkLoading(d.id),this._propagateProps(d)}).catch(t=>{console.warn("e: ",t)});break;case"system":d.controller=u,d.id=n[1],this.getManager("scene").showPlacemarks(!1),this.getManager("scene").setExoSystem(d.id),this.getManager("scene").showExoSystem(),this.getManager("scene").setHabzone(!0),this.getManager("camera").flyToObject(d.id,u).then(()=>{this.getManager("scene").cleanExoSystems(),this.getManager("scene").starFade(!1,1e3),this._propagateProps(d)}).catch(t=>{console.warn("e: ",t)});break;case"star":case"planet":this.sun&&this.sun.getComponentByType("lightSource")&&this.sun.getComponentByType("lightSource").setEnabled(!1),d.controller=u,d.id=n[1],this.getManager("scene").showPlacemarks(!1),this.getManager("scene").setExoSystem(d.id),this.getManager("scene").showExoSystem(),this.getManager("scene").setHabzone(!1),this.getManager("camera").flyToObject(d.id,u).then(()=>{this.getManager("scene").cleanExoSystems(),this.getManager("scene").starFade(!1,1e3),this._propagateProps(d)}).catch(t=>{console.warn("e: ",t)})}if(window.parent&&window.config&&window.config.mbLink){let t=s.replace(/\/+/g,"/");t&&"/"!==t[0]&&(t="/"+t),t&&"/"!==t[t.length-1]&&(t+="/");let e=window.config.mbLink+t;window.parent.postMessage('{"message": "setState", "url": "'+e+'"}',"*")}this._propagateProps(d),this.lastInfo=d;const p="star"===d.controller&&y.filter(t=>t&&d&&t.exo_id===d.id).length>0;return a.a.createElement("div",{className:"ui"},a.a.createElement(v.default,C({openPlanetBrowser:this.openPlanetBrowser,openMenuOverlay:this.openMenuOverlay,resetHomeView:this.resetHomeView},o,h)),a.a.createElement(I.default,C({ref:this.planetBrowser,openPlanetBrowser:this.openPlanetBrowser},o)),a.a.createElement("div",null,"home"===d.controller||"earth"===d.controller?a.a.createElement(A.default,C({ref:this.homeController,info:d,getManager:this.getManager,openPlanetBrowser:this.openPlanetBrowser,earthTipShown:l,setParentState:this.setState},o)):a.a.createElement(S.default,C({ref:this.exoController,info:d},o)),a.a.createElement(b.default,C({id:d.id,controller:d.controller,getManager:this.getManager},h)),a.a.createElement(T.default,C({ref:this.footer,info:d,starField:this._starfield,openDetailPanel:this.openDetailPanel,openGalleryPage:this.openGalleryPage,resetHomeView:this.resetHomeView},o,h)),a.a.createElement("div",{className:"toggle-ui-desktop"},c&&(p?a.a.createElement(w.default,C({ref:this.wweOverlay,info:d,closeDetailPanel:this.closeDetailPanel},o)):a.a.createElement(N.default,C({ref:this.detailOverlay,info:d,closeDetailPanel:this.closeDetailPanel},o))))),i&&a.a.createElement(x.default,C({ref:this.menuOverlay,openPlanetBrowser:this.openPlanetBrowser,resetHomeView:this.resetHomeView},o,h)))}}))}return a.a.createElement("div",null,t,e,a.a.createElement(E.default,{ref:this.loading}))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(36);i.d(e,"Collection",(function(){return s.Collection})),i.d(e,"CollectionItem",(function(){return s.CollectionItem})),i.d(e,"DependencyGraph",(function(){return s.DependencyGraph})),i.d(e,"FastIterable",(function(){return s.FastIterable})),i.d(e,"FPS",(function(){return s.FPS})),i.d(e,"Freezable",(function(){return s.Freezable})),i.d(e,"MathUtils",(function(){return s.MathUtils})),i.d(e,"Reader",(function(){return s.Reader})),i.d(e,"Sort",(function(){return s.Sort})),i.d(e,"AER",(function(){return s.AER})),i.d(e,"BaseRef",(function(){return s.BaseRef})),i.d(e,"Cache",(function(){return s.Cache})),i.d(e,"Color",(function(){return s.Color})),i.d(e,"ComponentRef",(function(){return s.ComponentRef})),i.d(e,"ControllerRef",(function(){return s.ControllerRef})),i.d(e,"CubeMap",(function(){return s.CubeMap})),i.d(e,"EntityRef",(function(){return s.EntityRef})),i.d(e,"FastMap",(function(){return s.FastMap})),i.d(e,"FastSet",(function(){return s.FastSet})),i.d(e,"Geometry",(function(){return s.Geometry})),i.d(e,"Interval",(function(){return s.Interval})),i.d(e,"LatLonAlt",(function(){return s.LatLonAlt})),i.d(e,"LineMesh",(function(){return s.LineMesh})),i.d(e,"MaterialUtils",(function(){return s.MaterialUtils})),i.d(e,"MaterialUtilsPhong",(function(){return s.MaterialUtilsPhong})),i.d(e,"MaterialUtilsStandard",(function(){return s.MaterialUtilsStandard})),i.d(e,"OrbitalElements",(function(){return s.OrbitalElements})),i.d(e,"Pool",(function(){return s.Pool})),i.d(e,"Quaternion",(function(){return s.Quaternion})),i.d(e,"Rect",(function(){return s.Rect})),i.d(e,"ShaderFix",(function(){return s.ShaderFix})),i.d(e,"SpriteParticles",(function(){return s.SpriteParticles})),i.d(e,"TextureLOD",(function(){return s.TextureLOD})),i.d(e,"ThreeJsHelper",(function(){return s.ThreeJsHelper})),i.d(e,"Tile",(function(){return s.Tile})),i.d(e,"TimeUtils",(function(){return s.TimeUtils})),i.d(e,"Vector2",(function(){return s.Vector2})),i.d(e,"Vector3",(function(){return s.Vector3})),i.d(e,"Capabilities",(function(){return s.Capabilities})),i.d(e,"Config",(function(){return s.Config})),i.d(e,"Downloader",(function(){return s.Downloader})),i.d(e,"Engine",(function(){return s.Engine})),i.d(e,"Entity",(function(){return s.Entity})),i.d(e,"EntityItem",(function(){return s.EntityItem})),i.d(e,"Input",(function(){return s.Input})),i.d(e,"MaterialManager",(function(){return s.MaterialManager})),i.d(e,"Scene",(function(){return s.Scene})),i.d(e,"TextureLoader",(function(){return s.TextureLoader})),i.d(e,"TextureLoaderCompressed",(function(){return s.TextureLoaderCompressed})),i.d(e,"Types",(function(){return s.Types})),i.d(e,"Version",(function(){return s.Version})),i.d(e,"Viewport",(function(){return s.Viewport})),i.d(e,"BaseComponent",(function(){return s.BaseComponent})),i.d(e,"AtmosphereComponent",(function(){return s.AtmosphereComponent})),i.d(e,"CameraComponent",(function(){return s.CameraComponent})),i.d(e,"CMTSComponent",(function(){return s.CMTSComponent})),i.d(e,"CometTailComponent",(function(){return s.CometTailComponent})),i.d(e,"ConnectedSpriteComponent",(function(){return s.ConnectedSpriteComponent})),i.d(e,"DivComponent",(function(){return s.DivComponent})),i.d(e,"DynamicEnvironmentMapComponent",(function(){return s.DynamicEnvironmentMapComponent})),i.d(e,"GizmoComponent",(function(){return s.GizmoComponent})),i.d(e,"LabelComponent",(function(){return s.LabelComponent})),i.d(e,"LightSourceComponent",(function(){return s.LightSourceComponent})),i.d(e,"ModelComponent",(function(){return s.ModelComponent})),i.d(e,"OrbitalParticlesComponent",(function(){return s.OrbitalParticlesComponent})),i.d(e,"ParticleSprayComponent",(function(){return s.ParticleSprayComponent})),i.d(e,"RingsComponent",(function(){return s.RingsComponent})),i.d(e,"SkyboxComponent",(function(){return s.SkyboxComponent})),i.d(e,"SpheroidComponent",(function(){return s.SpheroidComponent})),i.d(e,"SpheroidLODComponent",(function(){return s.SpheroidLODComponent})),i.d(e,"SpoutComponent",(function(){return s.SpoutComponent})),i.d(e,"SpriteComponent",(function(){return s.SpriteComponent})),i.d(e,"StarfieldComponent",(function(){return s.StarfieldComponent})),i.d(e,"TrailComponent",(function(){return s.TrailComponent})),i.d(e,"BaseController",(function(){return s.BaseController})),i.d(e,"AlignController",(function(){return s.AlignController})),i.d(e,"AnimdataController",(function(){return s.AnimdataController})),i.d(e,"CoverageController",(function(){return s.CoverageController})),i.d(e,"DynamoController",(function(){return s.DynamoController})),i.d(e,"FixedController",(function(){return s.FixedController})),i.d(e,"FixedToParentController",(function(){return s.FixedToParentController})),i.d(e,"FreeFlyController",(function(){return s.FreeFlyController})),i.d(e,"GroundClampController",(function(){return s.GroundClampController})),i.d(e,"KeyframeController",(function(){return s.KeyframeController})),i.d(e,"LookController",(function(){return s.LookController})),i.d(e,"ModelAnimateController",(function(){return s.ModelAnimateController})),i.d(e,"OrbitController",(function(){return s.OrbitController})),i.d(e,"OrbitKeyframeController",(function(){return s.OrbitKeyframeController})),i.d(e,"OrbitalElementsController",(function(){return s.OrbitalElementsController})),i.d(e,"PickController",(function(){return s.PickController})),i.d(e,"RollController",(function(){return s.RollController})),i.d(e,"RotateController",(function(){return s.RotateController})),i.d(e,"RotateByParentOrientationController",(function(){return s.RotateByParentOrientationController})),i.d(e,"ScaleController",(function(){return s.ScaleController})),i.d(e,"SelectController",(function(){return s.SelectController})),i.d(e,"SetParentController",(function(){return s.SetParentController})),i.d(e,"SpinController",(function(){return s.SpinController})),i.d(e,"TapController",(function(){return s.TapController})),i.d(e,"TLEController",(function(){return s.TLEController})),i.d(e,"TransitionController",(function(){return s.TransitionController})),i.d(e,"TranslateController",(function(){return s.TranslateController})),i.d(e,"ZoomController",(function(){return s.ZoomController})),i.d(e,"THREE",(function(){return s.THREE})),i.d(e,"ThreeJsEffectComposer",(function(){return s.ThreeJsEffectComposer})),i.d(e,"ThreeJsGLTFLoader",(function(){return s.ThreeJsGLTFLoader})),i.d(e,"ThreeJsKTXLoader",(function(){return s.ThreeJsKTXLoader})),i.d(e,"ThreeJsOutlinePass",(function(){return s.ThreeJsOutlinePass})),i.d(e,"ThreeJsRenderPass",(function(){return s.ThreeJsRenderPass})),i.d(e,"ThreeJsUnrealBloomPass",(function(){return s.ThreeJsUnrealBloomPass})),i.d(e,"SatelliteJs",(function(){return s.SatelliteJs}))},function(t,e,i){"use strict";i.r(e);var s=i(37);i.d(e,"THREE",(function(){return s}));var a=i(38);i.d(e,"ThreeJsEffectComposer",(function(){return a.EffectComposer}));var n=i(43);i.d(e,"ThreeJsGLTFLoader",(function(){return n.GLTFLoader}));var r=i(44);i.d(e,"ThreeJsKTXLoader",(function(){return r.KTXLoader}));var o=i(45);i.d(e,"ThreeJsOutlinePass",(function(){return o.OutlinePass}));var l=i(46);i.d(e,"ThreeJsRenderPass",(function(){return l.RenderPass}));var c=i(47);i.d(e,"ThreeJsUnrealBloomPass",(function(){return c.UnrealBloomPass}));var h=i(49);i.d(e,"SatelliteJs",(function(){return h}));var d=i(50);i.d(e,"BaseRef",(function(){return d.default}));var u=i(51);i.d(e,"Collection",(function(){return u.Collection})),i.d(e,"CollectionItem",(function(){return u.CollectionItem}));var p=i(52);i.d(e,"DependencyGraph",(function(){return p.default}));var m=i(53);i.d(e,"FastIterable",(function(){return m.default}));var g=i(54);i.d(e,"FPS",(function(){return g.default}));var _=i(55);i.d(e,"Freezable",(function(){return _.default}));var f=i(56);i.d(e,"MathUtils",(function(){return f.default}));var y=i(57);i.d(e,"Pool",(function(){return y.default}));var b=i(58);i.d(e,"Reader",(function(){return b.default}));var T=i(59);i.d(e,"Sort",(function(){return T.default}));var v=i(60);i.d(e,"Tile",(function(){return v.default}));var E=i(61);i.d(e,"TimeUtils",(function(){return E.default}));var x=i(62);i.d(e,"AER",(function(){return x.default}));var S=i(63);i.d(e,"Color",(function(){return S.default}));var I=i(64);i.d(e,"FastMap",(function(){return I.default}));var N=i(65);i.d(e,"FastSet",(function(){return N.default}));var w=i(66);i.d(e,"Geometry",(function(){return w.default}));var A=i(67);i.d(e,"Interval",(function(){return A.default}));var C=i(68);i.d(e,"OrbitalElements",(function(){return C.default}));var P=i(69);i.d(e,"Rect",(function(){return P.default}));var M=i(70);i.d(e,"Quaternion",(function(){return M.default}));var R=i(71);i.d(e,"Vector2",(function(){return R.default}));var V=i(72);i.d(e,"Vector3",(function(){return V.default}));var O=i(73);i.d(e,"Cache",(function(){return O.default}));var F=i(74);i.d(e,"ComponentRef",(function(){return F.default}));var L=i(75);i.d(e,"ControllerRef",(function(){return L.default}));var z=i(76);i.d(e,"CubeMap",(function(){return z.default}));var D=i(77);i.d(e,"EntityRef",(function(){return D.default}));var U=i(78);i.d(e,"LatLonAlt",(function(){return U.default}));var k=i(79);i.d(e,"LineMesh",(function(){return k.default}));var j=i(80);i.d(e,"MaterialUtilsPhong",(function(){return j.default}));var H=i(81);i.d(e,"MaterialUtilsStandard",(function(){return H.default}));var G=i(82);i.d(e,"MaterialUtils",(function(){return G.default}));var B=i(83);i.d(e,"ShaderFix",(function(){return B.default}));var J=i(84);i.d(e,"SpriteParticles",(function(){return J.default}));var Y=i(85);i.d(e,"TextureLOD",(function(){return Y.default}));var $=i(86);i.d(e,"ThreeJsHelper",(function(){return $.default}));var Z=i(87);i.d(e,"Capabilities",(function(){return Z.default}));var Q=i(88);i.d(e,"Config",(function(){return Q.default}));var q=i(89);i.d(e,"Downloader",(function(){return q.default}));var X=i(90);i.d(e,"Engine",(function(){return X.default}));var K=i(91);i.d(e,"Entity",(function(){return K.default}));var W=i(92);i.d(e,"EntityItem",(function(){return W.default}));var tt=i(93);i.d(e,"Input",(function(){return tt.default}));var et=i(94);i.d(e,"MaterialManager",(function(){return et.default}));var it=i(102);i.d(e,"Scene",(function(){return it.default}));var st=i(103);i.d(e,"TextureLoader",(function(){return st.default}));var at=i(104);i.d(e,"TextureLoaderCompressed",(function(){return at.default}));var nt=i(105);i.d(e,"Version",(function(){return nt.default}));var rt=i(106);i.d(e,"Viewport",(function(){return rt.default}));var ot=i(107);i.d(e,"BaseComponent",(function(){return ot.default}));var lt=i(108);i.d(e,"AtmosphereComponent",(function(){return lt.default}));var ct=i(109);i.d(e,"CameraComponent",(function(){return ct.default}));var ht=i(110);i.d(e,"CMTSComponent",(function(){return ht.default}));var dt=i(111);i.d(e,"CometTailComponent",(function(){return dt.default}));var ut=i(112);i.d(e,"ConnectedSpriteComponent",(function(){return ut.default}));var pt=i(113);i.d(e,"DivComponent",(function(){return pt.default}));var mt=i(114);i.d(e,"DynamicEnvironmentMapComponent",(function(){return mt.default}));var gt=i(115);i.d(e,"GizmoComponent",(function(){return gt.default}));var _t=i(116);i.d(e,"LabelComponent",(function(){return _t.default}));var ft=i(117);i.d(e,"LightSourceComponent",(function(){return ft.default}));var yt=i(118);i.d(e,"ModelComponent",(function(){return yt.default}));var bt=i(119);i.d(e,"OrbitalParticlesComponent",(function(){return bt.default}));var Tt=i(120);i.d(e,"ParticleSprayComponent",(function(){return Tt.default}));var vt=i(121);i.d(e,"RingsComponent",(function(){return vt.default}));var Et=i(122);i.d(e,"SkyboxComponent",(function(){return Et.default}));var xt=i(123);i.d(e,"SpheroidComponent",(function(){return xt.default}));var St=i(124);i.d(e,"SpheroidLODComponent",(function(){return St.default}));var It=i(125);i.d(e,"SpoutComponent",(function(){return It.default}));var Nt=i(126);i.d(e,"SpriteComponent",(function(){return Nt.default}));var wt=i(127);i.d(e,"StarfieldComponent",(function(){return wt.default}));var At=i(128);i.d(e,"TrailComponent",(function(){return At.default}));var Ct=i(129);i.d(e,"BaseController",(function(){return Ct.default}));var Pt=i(130);i.d(e,"AlignController",(function(){return Pt.default}));var Mt=i(131);i.d(e,"AnimdataController",(function(){return Mt.default}));var Rt=i(132);i.d(e,"CoverageController",(function(){return Rt.default}));var Vt=i(133);i.d(e,"DynamoController",(function(){return Vt.default}));var Ot=i(134);i.d(e,"FixedController",(function(){return Ot.default}));var Ft=i(135);i.d(e,"FixedToParentController",(function(){return Ft.default}));var Lt=i(136);i.d(e,"FreeFlyController",(function(){return Lt.default}));var zt=i(137);i.d(e,"GroundClampController",(function(){return zt.default}));var Dt=i(138);i.d(e,"KeyframeController",(function(){return Dt.default}));var Ut=i(139);i.d(e,"LookController",(function(){return Ut.default}));var kt=i(140);i.d(e,"ModelAnimateController",(function(){return kt.default}));var jt=i(141);i.d(e,"OrbitController",(function(){return jt.default}));var Ht=i(142);i.d(e,"OrbitKeyframeController",(function(){return Ht.default}));var Gt=i(143);i.d(e,"OrbitalElementsController",(function(){return Gt.default}));var Bt=i(144);i.d(e,"PickController",(function(){return Bt.default}));var Jt=i(145);i.d(e,"RollController",(function(){return Jt.default}));var Yt=i(146);i.d(e,"RotateController",(function(){return Yt.default}));var $t=i(147);i.d(e,"RotateByParentOrientationController",(function(){return $t.default}));var Zt=i(148);i.d(e,"ScaleController",(function(){return Zt.default}));var Qt=i(149);i.d(e,"SelectController",(function(){return Qt.default}));var qt=i(150);i.d(e,"SetParentController",(function(){return qt.default}));var Xt=i(151);i.d(e,"SpinController",(function(){return Xt.default}));var Kt=i(152);i.d(e,"TapController",(function(){return Kt.default}));var Wt=i(153);i.d(e,"TLEController",(function(){return Wt.default}));var te=i(154);i.d(e,"TransitionController",(function(){return te.default}));var ee=i(155);i.d(e,"TranslateController",(function(){return ee.default}));var ie=i(156);i.d(e,"ZoomController",(function(){return ie.default}));var se=i(157);i.d(e,"Types",(function(){return se.default}))},,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);i(36);e.default=class{constructor(t){this._scene=t,this._ref=null,this._refChangedCallback=null}get(){return this.update(),this._ref}setRefChangedCallback(t){this._refChangedCallback=t}update(){}_setRef(t){if(null===t||t.isEnabled()||(t=null),this._ref!==t){const e=this._ref;this._ref=t,null!==this._refChangedCallback&&this._refChangedCallback(e,this._ref)}}}},function(t,e,i){"use strict";i.r(e),i.d(e,"CollectionItem",(function(){return s})),i.d(e,"Collection",(function(){return a}));class s{constructor(t,e,i){this._type=t,this._typeIndex=0,this._name=e,this._collectionParent=i}getType(){return this._type}getTypeIndex(){return this._typeIndex}__setTypeIndex(t){this._typeIndex=t}getName(){return this._name}__getCollectionParent(){return this._collectionParent}__destroy(){}}class a{constructor(t,e){this._parent=t,this._types=e,this._items=[],this._itemNames=new Map}get(t){if("number"==typeof t)return this._items[t]||null;if("string"==typeof t)return this._itemNames.get(t)||null;throw new Error("The param nameOrIndex must be a string or number.")}getByType(t,e=0){for(let i=0;i<this._items.length;i++){const s=this._items[i];if(s.getType()===t&&s.getTypeIndex()===e)return s}return null}add(t,e="",i){if(""!==e&&this._itemNames.has(e))throw new Error("Already added '"+e+"'.");const s=this._types.get(t);if(void 0===t)throw new Error("Type '"+t+"' not found.");try{const a=new s(t,e,this._parent);if(void 0!==i){let t=this._items.length;for(let e=0;e<this._items.length;e++)this._items[e]===i&&(t=e);this._items.splice(t,0,a)}else this._items.push(a);""!==e&&this._itemNames.set(e,a);let n=0;for(let e=0;e<this._items.length;e++){const i=this._items[e];i.getType()===t&&(i.__setTypeIndex(n),n+=1)}return a}catch(i){throw new Error(`While adding "${e}" of type "${t}": ${i}`)}}remove(t){let e,i,s;if("string"==typeof t){s=this._itemNames.get(t),e=t;for(let t=this._items.length-1;t>=0;t--)if(this._items[t]===s){i=t;break}}else if("number"==typeof t)i=t,e=(s=this._items[t]).getName();else{e=(s=t).getName();for(let t=this._items.length-1;t>=0;t--)if(this._items[t]===s){i=t;break}}if(void 0!==s&&void 0!==i){const t=this._items[i].getType();this._items.splice(i,1),""!==e&&this._itemNames.delete(e);let a=0;for(let e=0;e<this._items.length;e++){const i=this._items[e];i.getType()===t&&(i.__setTypeIndex(a),a+=1)}s.__destroy()}}clear(){for(let t=this._items.length-1;t>=0;t--)this._items[t].__destroy();this._items=[],this._itemNames.clear()}get size(){return this._items.length}__destroy(){for(let t=this._items.length-1;t>=0;t--)this._items[t].__destroy()}}},function(t,e,i){"use strict";i.r(e);class s{constructor(t){this.item=t,this.permanentMark=!1,this.temporaryMark=!1}}e.default=class{constructor(){this._updateItemCallback=null,this._compareItemCallback=null,this._nodes=new Map,this._sortedNodes=[],this._needsSorting=!1}setUpdateItemCallback(t){this._updateItemCallback=t}setCompareItemCallback(t){this._compareItemCallback=t}addItem(t){const e=new s(t);this._nodes.set(t,e),this._needsSorting=!0}removeItem(t){this._nodes.delete(t)&&(this._needsSorting=!0)}needsSorting(){this._needsSorting=!0}update(){if(this._needsSorting){for(const t of this._nodes.values())t.permanentMark=!1,t.temporaryMark=!1;this._sortedNodes=[];const t=this._nodes.values();for(;;){const e=t.next();if(e.done)break;if(!this._visit(e.value))break}this._needsSorting=!1}for(let t=0,e=this._sortedNodes.length;t<e;t++)this._updateItemCallback(this._sortedNodes[t].item)}_visit(t){if(t.permanentMark)return!0;if(t.temporaryMark)throw new Error("Dependency cycle in graph: "+t.item);t.temporaryMark=!0;for(const e of this._nodes.values()){let i=!1;if(this._compareItemCallback&&(i=this._compareItemCallback(t.item,e.item)),i)try{this._visit(e)}catch(e){throw new Error(e.message+" ← "+t.item)}}return t.temporaryMark=!1,t.permanentMark=!0,this._sortedNodes.push(t),!0}}},function(t,e,i){"use strict";i.r(e);e.default=class{getAt(t){throw new Error}get size(){throw new Error}}},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(){this._numberOfSamples=100,this._samples=new Array(this._numberOfSamples),this._index=0}getNumberOfSamples(){return this._numberOfSamples}setNumberOfSamples(t){this._numberOfSamples=t,this._samples=new Array(this._numberOfSamples)}getFPS(){let t=0;for(let e=0;e<this._samples.length;e++)t+=this._samples[e];return this._samples.length/t}update(t){this._samples[this._index]=t,this._index=(this._index+1)%this._samples.length}}},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(){this._frozen=!1}throwIfFrozen(){if(this._frozen)throw new TypeError("The object is frozen.")}isFrozen(){return this._frozen}freeze(){this._frozen=!0}thaw(){this._frozen=!1}}},function(t,e,i){"use strict";i.r(e);e.default=class{static get pi(){return 3.141592653589793}static get twoPi(){return 6.283185307179586}static get halfPi(){return 1.5707963267948966}static angle(t,e){return t=this.wrap(t,0,2*Math.PI),(e=this.wrap(e,0,2*Math.PI))-t>Math.PI?t-e+2*Math.PI:t-e>Math.PI?e-t+2*Math.PI:Math.abs(e-t)}static clamp(t,e,i){return Math.min(Math.max(e,t),i)}static clamp01(t){return Math.min(Math.max(0,t),1)}static wrap(t,e,i){let s=(t-e)%(i-e)+e;return s<e&&(s+=i-e),s}static lerp(t,e,i){return(1-i)*t+i*e}static lerpAngle(t,e,i){return t=this.wrap(t,-Math.PI,+Math.PI),(e=this.wrap(e,-Math.PI,+Math.PI))-t>Math.PI&&(t+=2*Math.PI),t-e>Math.PI&&(e+=2*Math.PI),this.wrap(this.lerp(t,e,i),-Math.PI,+Math.PI)}static radToDeg(t){return 57.29577951308232*t}static degToRad(t){return.01745329251994329*t}static ceilPow2(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.log(2)))}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.FastIterable{constructor(t){super(),this._type=t,this._objects=[],this._free=[],this._freeLength=0,this._constructorFunction=()=>new this._type,this._destructorFunction=()=>{}}setConstructorFunction(t){this._constructorFunction=t}setDestructorFunction(t){this._destructorFunction=t}get(){let t=null;if(this._freeLength>0)t=this._objects[this._free[this._freeLength-1]],this._freeLength-=1;else{const e=this._objects.push(this._constructorFunction())-1;this._objects[e]._poolIndex=e,t=this._objects[e]}return t._poolUsed=!0,t}release(t){const e=t;void 0!==e._poolIndex&&(this._freeLength>=this._free.length?this._free.push(e._poolIndex):this._free[this._freeLength]=e._poolIndex,this._freeLength+=1,e._poolUsed=!1)}clean(t){if(void 0===t||t>=(this._objects.length-this._freeLength)/this._objects.length){for(let t=0;t<this._freeLength;t++){const e=this._free[t];this._destructorFunction(this._objects[e]),this._objects.splice(e,1);for(let t=e,i=this._objects.length;t<i;t++)this._objects[t]._poolIndex-=1;for(let i=t+1,s=this._freeLength;i<s;i++)this._free[i]>e&&(this._free[i]-=1)}this._free=[],this._freeLength=0}}getAsArray(){return this._objects}isUsed(t){return t._poolUsed}areAnyUsed(){return this._freeLength<this._objects.length}getAt(t){return this._objects[t]}get size(){return this._objects.length}}},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(t){this._dataView=new DataView(t),this._offset=0}isAtEnd(){return this._offset>=this._dataView.byteLength}readByte(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}readFloat32(){const t=this._dataView.getFloat32(this._offset,!0);return this._offset+=4,t}readFloat64(){const t=this._dataView.getFloat64(this._offset,!0);return this._offset+=8,t}readUInt8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}readUInt16(){const t=this._dataView.getUint16(this._offset,!0);return this._offset+=2,t}readUInt32(){const t=this._dataView.getUint32(this._offset,!0);return this._offset+=4,t}readUInt64(){let t=this._dataView.getUint32(this._offset,!0);return t=t<<32||this._dataView.getUint32(this._offset+4,!0),this._offset+=8,t}readInt8(){const t=this._dataView.getInt8(this._offset);return this._offset+=1,t}readInt16(){const t=this._dataView.getInt16(this._offset,!0);return this._offset+=2,t}readInt32(){const t=this._dataView.getInt32(this._offset,!0);return this._offset+=4,t}readInt64(){let t=this._dataView.getInt32(this._offset,!0);return t=t<<32||this._dataView.getInt32(this._offset+4,!0),this._offset+=8,t}readLine(){const t=[];for(;;){const e=this.readByte(),i=String.fromCharCode(e);if("\r"!==i){if("\n"===i)break;t.push(e)}}if("undefined"!=typeof TextEncoder){const e=new TextDecoder,i=new Uint8Array(t);return e.decode(i)}return this._utf8ArrayToStr(t)}readString(t){const e=[];for(;;){const i=this.readByte();if(void 0===t&&0===i)break;if(e.push(i),void 0!==t&&e.length===t)break}if("undefined"!=typeof TextEncoder){const t=new TextDecoder,i=new Uint8Array(e);return t.decode(i)}return this._utf8ArrayToStr(e)}_utf8ArrayToStr(t){let e=0,i=0,s=0,a=0,n="",r=0;const o=t.length;for(;r<o;)switch(e=t[r],r+=1,e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(e);break;case 12:case 13:i=0|t[r],r+=1,n+=String.fromCharCode((31&e)<<6|63&i);break;case 14:i=0|t[r],s=0|t[r+=1],r+=1,n+=String.fromCharCode((15&e)<<12|(63&i)<<6|(63&s)<<0);break;case 15:i=0|t[r],s=0|t[r+=1],a=0|t[r+=1],r+=1,n+=String.fromCharCode((7&e)<<18|(63&i)<<12|(63&s)<<6|(63&a)<<0)}return n}}},function(t,e,i){"use strict";i.r(e);e.default=class{static getIndex(t,e,i){let s=0,a=e.length;if(void 0===i)for(;s<a;){const i=s+a>>>1;e[i]<t?s=i+1:a=i}else for(;s<a;){const n=s+a>>>1;i(e[n],t)?s=n+1:a=n}return s}static add(t,e,i,s){let a=this.getIndex(t,e,i);if(void 0===s)for(;a<e.length&&e[a]===t;)a+=1;else for(;a<e.length&&s(e[a],t);)a+=1;e.splice(a,0,t)}static remove(t,e,i,s){const a=this.getIndex(t,e,i);let n=!1;return a<e.length&&(void 0===s&&e[a]===t?n=!0:void 0!==s&&s(e[a],t)&&(n=!0)),n&&e.splice(a,1),n}}},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(t){this._parent=t,this._children=[],this._active=!1,this._loaded=!1,this._destroyed=!1,this._transitioning=!1}getParent(){return this._parent}async forceLoad(){return this._transitioning=!0,this.load().then(()=>(this._loaded=!0,this.activate())).then(()=>{this._active=!0,this._transitioning=!1})}check(){return this._destroyed||this._transitioning||(0===this._children.length&&this.checkSplit()?this._split():this._children.length>0&&this.checkJoin()&&this._join()),this._transitioning}get children(){return this._children}createNewTile(t,e,i){return null}checkSplit(){return!1}checkJoin(){return!1}async load(){}async unload(){}async activate(){}async deactivate(){}destroy(){this._destroyed=!0;for(let t=0;t<this._children.length;t++)this._children[t].destroy();this._transitioning||(this._active?this.deactivate().then(()=>{this.unload()}).catch(t=>{throw t}):this._loaded&&this.unload())}_split(){const t=[],e=[];this._splitAndLoad(t,e),Promise.all(t).then(()=>{const t=[];for(let i=0;i<e.length;i++)e[i]._loaded&&!e[i]._destroyed?t.push(e[i].activate().then(async()=>{if(this._destroyed)return this.deactivate().then(()=>{this.unload()}).catch(t=>{throw t});e[i]._active=!0,e[i]._transitioning=!1}).catch(t=>{throw t})):e[i]._transitioning=!1;return this._active&&t.push(this.deactivate().then(()=>{this._active=!1}).catch(t=>{throw t})),t}).then(()=>{this._loaded?this.unload().then(()=>{this._loaded=!1,this._transitioning=!1}).catch(t=>{throw t}):this._transitioning=!1}).catch(t=>{throw t})}_join(){if(this._checkIfDescendantsAreTransitioning())return;const t=[];this._transitioning=!0,this._markDescendantsAsTransitioning(t),this.load().then(async()=>{if(this._destroyed)return this.unload();this._loaded=!0}).then(()=>{const e=[];for(let i=0;i<t.length;i++)e.push(t[i].deactivate().then(()=>{t[i]._active=!1}).catch(t=>{throw t}));return this._destroyed||e.push(this.activate().then(async()=>{if(this._destroyed)return this.deactivate().then(()=>{this.unload()}).catch(t=>{throw t});this._active=!0}).catch(t=>{throw t})),Promise.all(e)}).then(()=>{const e=[];for(let i=0;i<t.length;i++)e.push(t[i].unload().then(()=>{t[i]._loaded=!1}).catch(t=>{throw t}));return Promise.all(e)}).then(()=>{this._children=[],this._transitioning=!1}).catch(t=>{throw t})}_splitAndLoad(t,e){this._transitioning=!0;for(let i=0;i<2;i++)for(let s=0;s<2;s++){const a=this.createNewTile(this,i,s);null!==a&&(this._children.push(a),a.checkSplit()?a._splitAndLoad(t,e):(a._transitioning=!0,t.push(a.load().then(async()=>{if(a._destroyed)return a.unload();a._loaded=!0}).catch(t=>{throw t}))),e.push(a))}}_checkIfDescendantsAreTransitioning(){for(let t=0;t<this._children.length;t++){const e=this._children[t];if(e._transitioning)return!0;if(e._checkIfDescendantsAreTransitioning())return!0}return!1}_markDescendantsAsTransitioning(t){for(let e=0;e<this._children.length;e++){const i=this._children[e];i._transitioning=!0,i._active&&t.push(i),i._markDescendantsAsTransitioning(t)}}}},function(t,e,i){"use strict";i.r(e);class s{static now(){return s.unixToEt(Date.now()/1e3)}static etToUnix(t){let e=0;for(let i=0;i<a.length;i++)t+946727957.816+e>=a[i]+1&&(e-=1);return t+946727957.816+e}static unixToEt(t){let e=0;for(let i=0;i<a.length;i++)t>=a[i]+1&&(e+=1);return t-946727957.816+e}static get leapSeconds(){return a}}const a=[Date.UTC(1972,5,30,23,59,59)/1e3,Date.UTC(1972,11,31,23,59,59)/1e3,Date.UTC(1973,11,31,23,59,59)/1e3,Date.UTC(1974,11,31,23,59,59)/1e3,Date.UTC(1975,11,31,23,59,59)/1e3,Date.UTC(1976,11,31,23,59,59)/1e3,Date.UTC(1977,11,31,23,59,59)/1e3,Date.UTC(1978,11,31,23,59,59)/1e3,Date.UTC(1979,11,31,23,59,59)/1e3,Date.UTC(1981,5,30,23,59,59)/1e3,Date.UTC(1982,5,30,23,59,59)/1e3,Date.UTC(1983,5,30,23,59,59)/1e3,Date.UTC(1985,5,30,23,59,59)/1e3,Date.UTC(1987,11,31,23,59,59)/1e3,Date.UTC(1989,11,31,23,59,59)/1e3,Date.UTC(1990,11,31,23,59,59)/1e3,Date.UTC(1992,5,30,23,59,59)/1e3,Date.UTC(1993,5,30,23,59,59)/1e3,Date.UTC(1994,5,30,23,59,59)/1e3,Date.UTC(1995,11,31,23,59,59)/1e3,Date.UTC(1997,5,30,23,59,59)/1e3,Date.UTC(1998,11,31,23,59,59)/1e3,Date.UTC(2005,11,31,23,59,59)/1e3,Date.UTC(2008,11,31,23,59,59)/1e3,Date.UTC(2012,5,30,23,59,59)/1e3,Date.UTC(2015,5,30,23,59,59)/1e3,Date.UTC(2016,11,31,23,59,59)/1e3];e.default=s},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}constructor(t=0,e=0,i=0){super(),this._azimuth=t,this._elevation=e,this._range=i}get azimuth(){return this._azimuth}set azimuth(t){this.throwIfFrozen(),this._azimuth=t}get elevation(){return this._elevation}set elevation(t){this.throwIfFrozen(),this._elevation=t}get range(){return this._range}set range(t){this.throwIfFrozen(),this._range=t}toString(t=!1){return t?"["+s.MathUtils.radToDeg(this._azimuth)+", "+s.MathUtils.radToDeg(this._elevation)+", "+this._range+"]":"["+this._azimuth+", "+this._elevation+", "+this._range+"]"}copy(t){this.throwIfFrozen(),this._azimuth=t._azimuth,this._elevation=t._elevation,this._range=t._range}set(t,e,i){this.throwIfFrozen(),this._azimuth=t,this._elevation=e,this._range=i}setFromVector(t){this.throwIfFrozen(),this._range=t.magnitude(),this._elevation=Math.asin(t.z/this._range),this._azimuth=Math.atan2(t.y,t.x)}}const n=new s.Pool(a);e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}static get Black(){return r}static get Clear(){return o}constructor(t=1,e=1,i=1,s=1){super(),this._r=t,this._g=e,this._b=i,this._a=s}get r(){return this._r}set r(t){this.throwIfFrozen(),this._r=t}get g(){return this._g}set g(t){this.throwIfFrozen(),this._g=t}get b(){return this._b}set b(t){this.throwIfFrozen(),this._b=t}get a(){return this._a}set a(t){this.throwIfFrozen(),this._a=t}toString(){return"["+this._r+", "+this._g+", "+this._b+", "+this._a+"]"}copy(t){this.throwIfFrozen(),this._r=t._r,this._g=t._g,this._b=t._b,this._a=t._a}set(t,e,i,s=1){this.throwIfFrozen(),this._r=t,this._g=e,this._b=i,this._a=s}add(t,e){this.throwIfFrozen(),this._r=t._r+e._r,this._g=t._g+e._g,this._b=t._b+e._b,this._a=t._a+e._a}sub(t,e){this.throwIfFrozen(),this._r=t._r-e._r,this._g=t._g-e._g,this._b=t._b-e._b,this._a=t._a-e._a}mult(t,e){this.throwIfFrozen(),this._r=t._r*e,this._g=t._g*e,this._b=t._b*e,this._a=t._a*e}addMult(t,e,i){this.throwIfFrozen(),this._r=t._r+e._r*i,this._g=t._g+e._g*i,this._b=t._b+e._b*i,this._a=t._a+e._a*i}div(t,e){this.throwIfFrozen(),this._r=t._r/e,this._g=t._g/e,this._b=t._b/e,this._a=t._a/e}scale(t,e){this.throwIfFrozen(),this._r=t._r*e._r,this._g=t._g*e._g,this._b=t._b*e._b,this._a=t._a*e._a}value(){return(this._r+this._g+this._b)/3}min(){return Math.min(this._r,this._g,this._b)}max(){return Math.max(this._r,this._g,this._b)}lerp(t,e,i){this.throwIfFrozen(),this._r=s.MathUtils.lerp(t._r,e._r,i),this._g=s.MathUtils.lerp(t._g,e._g,i),this._b=s.MathUtils.lerp(t._b,e._b,i),this._a=s.MathUtils.lerp(t._a,e._a,i)}}const n=new s.Pool(a),r=new a(0,0,0,1);r.freeze();const o=new a(0,0,0,1);o.freeze(),e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{constructor(t,e){this.key=t,this.value=e}}e.default=class extends s.FastIterable{constructor(t){if(super(),this._entries=[],this._keyMap=new Map,void 0!==t)for(const e of t)this._entries.push(new a(e.key,e.value)),this._keyMap.set(e.key,this._entries.length-1)}has(t){return this._keyMap.has(t)}get(t){const e=this._keyMap.get(t);if(void 0!==e)return this._entries[e].value}set(t,e){const i=this._keyMap.get(t);void 0!==i?this._entries[i].value=e:(this._entries.push(new a(t,e)),this._keyMap.set(t,this._entries.length-1))}delete(t){const e=this._keyMap.get(t);if(void 0!==e){this._entries.splice(e,1),this._keyMap.delete(t);for(const t of this._keyMap)t[1]>e&&this._keyMap.set(t[0],t[1]-1);return!0}return!1}clear(){this._entries=[],this._keyMap.clear()}getAt(t){return this._entries[t]}get size(){return this._entries.length}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.FastIterable{constructor(t){if(super(),this._values=[],this._valueMap=new Map,void 0!==t)for(const e of t)this._values.push(e),this._valueMap.set(e,this._values.length-1)}has(t){return this._valueMap.has(t)}add(t){return void 0===this._valueMap.get(t)&&(this._values.push(t),this._valueMap.set(t,this._values.length-1)),this}delete(t){const e=this._valueMap.get(t);if(void 0!==e){this._values.splice(e,1),this._valueMap.delete(t);for(const t of this._valueMap)t[1]>e&&this._valueMap.set(t[0],t[1]-1);return!0}return!1}clear(){this._values=[],this._valueMap.clear()}getAt(t){return this._values[t]}get size(){return this._values.length}}},function(t,e,i){"use strict";i.r(e);i(36);e.default=class{static getLineSphereIntersectionWithSphereAtOrigin(t,e,i){const s=t.dot(t),a=t.dot(e),n=e.dot(e),r=a*a+(i*i-s)*n;return r<0?Number.NaN:(-a-Math.sqrt(r))/n}static getLineSphereIntersectionWithLineStartAtOrigin(t,e,i,s){const a=e.dot(e),n=e.dot(i),r=n*n+(s*s-i.dot(i))*a;if(r<0)t.min=t.max=Number.NaN;else{const e=Math.sqrt(r);t.min=(n-e)/a,t.max=(n+e)/a}}static getLLAFromXYZOnSphere(t,e,i){const s=e.magnitudeXY();t.lon=Math.atan2(e.y,e.x),t.lat=Math.atan(e.z/s),t.alt=e.magnitude()-i}static getXYZFromLLAOnSphere(t,e,i){t.x=(i+e.alt)*Math.cos(e.lat)*Math.cos(e.lon),t.y=(i+e.alt)*Math.cos(e.lat)*Math.sin(e.lon),t.z=(i+e.alt)*Math.sin(e.lat)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}static get Infinite(){return r}constructor(t=0,e=0){super(),this._min=t,this._max=e}get min(){return this._min}set min(t){this.throwIfFrozen(),this._min=t}get max(){return this._max}set max(t){this.throwIfFrozen(),this._max=t}toString(){return"["+this._min+", "+this._max+"]"}copy(t){this.throwIfFrozen(),this._min=t._min,this._max=t._max}set(t,e){this.throwIfFrozen(),this._min=t,this._max=e}length(){return this._max-this._min}clamp(t){return Math.min(Math.max(this._min,t),this._max)}expandTo(t){this.throwIfFrozen(),this._min=Math.min(this._min,t),this._max=Math.max(this._max,t)}contains(t){return this._min<=t&&t<this._max}intersects(t){return this._min<t._max&&t._min<this._max}intersection(t,e){this.throwIfFrozen(),this._min=Math.max(t._min,e._min),this._max=Math.min(t._max,e._max),this._max<this._min&&(this._max=this._min)}union(t,e){this.throwIfFrozen(),this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}}const n=new s.Pool(a),r=new a(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY);r.freeze(),e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(36);class a{constructor(){this.epoch=0,this.eccentricity=0,this.semiMajorAxis=0,this.meanAngularMotion=0,this.meanAnomalyAtEpoch=0,this.orbitOrientation=new s.Quaternion}copy(t){this.epoch=t.epoch,this.eccentricity=t.eccentricity,this.semiMajorAxis=t.semiMajorAxis,this.meanAnomalyAtEpoch=t.meanAnomalyAtEpoch,this.meanAngularMotion=t.meanAngularMotion,this.orbitOrientation.copy(t.orbitOrientation)}projectFromMeanAnomaly(t,e,i){if(this.eccentricity<1){const s=this.getEccentricAnomalyFromMeanAnomaly(i),a=this.semiMajorAxis*(1-this.eccentricity*Math.cos(s)),n=this.meanAngularMotion*this.semiMajorAxis*this.semiMajorAxis/a;t.x=this.semiMajorAxis*(Math.cos(s)-this.eccentricity),t.y=this.semiMajorAxis*Math.sqrt(1-this.eccentricity*this.eccentricity)*Math.sin(s),e.x=-n*Math.sin(s),e.y=n*Math.sqrt(1-this.eccentricity*this.eccentricity)*Math.cos(s)}else{const s=this.getEccentricAnomalyFromMeanAnomaly(i),a=-this.semiMajorAxis*(1-this.eccentricity*Math.cosh(s)),n=this.meanAngularMotion*this.semiMajorAxis*this.semiMajorAxis/a;t.x=this.semiMajorAxis*(this.eccentricity-Math.cosh(s)),t.y=this.semiMajorAxis*Math.sqrt(this.eccentricity*this.eccentricity-1)*Math.sinh(s),e.x=-n*Math.sinh(s),e.y=n*Math.sqrt(this.eccentricity*this.eccentricity-1)*Math.cosh(s)}t.z=0,e.z=0,t.rotate(this.orbitOrientation,t),e.rotate(this.orbitOrientation,e)}project(t,e,i){let a=this.meanAnomalyAtEpoch+this.meanAngularMotion*(i-this.epoch);this.eccentricity<1&&(a=s.MathUtils.wrap(a,-s.MathUtils.pi,+s.MathUtils.pi)),this.projectFromMeanAnomaly(t,e,a)}getTrueAnomalyFromPosition(t){const e=s.Vector3.pool.get();return e.rotateInverse(this.orbitOrientation,t),Math.atan2(e.y,e.x)}getMeanAnomalyFromTrueAnomaly(t){let e=0,i=0;return this.eccentricity<1?i=(e=2*Math.atan(Math.tan(t/2)*Math.sqrt((1-this.eccentricity)/(1+this.eccentricity))))-this.eccentricity*Math.sin(e):(e=2*Math.atanh(Math.tan(t/2)*Math.sqrt((this.eccentricity-1)/(1+this.eccentricity))),i=this.eccentricity*Math.sinh(e)-e),i}getEccentricAnomalyFromMeanAnomaly(t){if(this.eccentricity<1){let e=t;this.eccentricity>=.8&&(e=Math.sign(t)*s.MathUtils.pi);for(let i=0;i<20;i++){const i=(e-this.eccentricity*Math.sin(e)-t)/(this.eccentricity*Math.cos(e)-1);if(e+=i,Math.abs(i)<.00174532925)break}return e}{let e=Math.log(2*Math.abs(t)/Math.E+1.8);this.eccentricity<=1.2&&(e=Math.log(2*Math.abs(t)/Math.E+1.8)),t<0&&(e*=-1);for(let i=0;i<20;i++){const i=(e-this.eccentricity*Math.sinh(e)+t)/(this.eccentricity*Math.cosh(e)-1);if(e+=i,Math.abs(i)<.00174532925)break}return e}}getMeanAnomalyFromEccentricAnomaly(t){if(this.eccentricity<1){const e=t-this.eccentricity*Math.sin(t);return s.MathUtils.wrap(e,-Math.PI,+Math.PI)}return this.eccentricity*Math.sinh(t)-t}getTrueAnomalyFromEccentricAnomaly(t){return this.eccentricity<1?2*Math.atan(Math.sqrt((1+this.eccentricity)/(1-this.eccentricity))*Math.tan(t/2)):2*Math.atan(Math.sqrt((1+this.eccentricity)/(this.eccentricity-1))*Math.tanh(t/2))}getEccentricAnomalyFromTrueAnomaly(t){if(this.eccentricity<1){const e=2*Math.atan2(Math.tan(t/2),Math.sqrt((1+this.eccentricity)/(1-this.eccentricity)));return s.MathUtils.wrap(e,-Math.PI,+Math.PI)}return 2*Math.atanh(Math.sqrt((this.eccentricity-1)/(this.eccentricity+1))*Math.tan(t/2))}getInclination(){const t=s.Vector3.pool.get();this.orbitOrientation.getAxis(t,2);const e=t.angle(s.Vector3.ZAxis);return s.Vector3.pool.release(t),e}getLongitudeOfAscendingNode(){const t=s.Vector3.pool.get();this.orbitOrientation.getAxis(t,2);const e=Math.atan2(t.x,-t.y);return s.Vector3.pool.release(t),s.MathUtils.wrap(e,0,s.MathUtils.twoPi)}getArgumentOfPeriapsis(){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();this.orbitOrientation.getAxis(t,2),t.set(-t.y,t.x,0),this.orbitOrientation.getAxis(e,0);const i=t.angle(e);return s.Vector3.pool.release(e),s.Vector3.pool.release(t),s.MathUtils.wrap(i,0,s.MathUtils.twoPi)}getPeriod(){return s.MathUtils.twoPi/this.meanAngularMotion}getPeriapsis(){return this.semiMajorAxis*(1-this.eccentricity)}getApoapsis(){return this.semiMajorAxis*(1+this.eccentricity)}setOrbitOrientationFromElements(t,e,i){const a=s.Vector3.pool.get(),n=s.Vector3.pool.get(),r=s.Quaternion.pool.get();a.set(Math.cos(e),Math.sin(e),0),n.set(Math.sin(e)*Math.sin(t),-Math.cos(e)*Math.sin(t),Math.cos(t)),this.orbitOrientation.setFromAxes(a,void 0,n),r.setFromAxisAngle(n,i),this.orbitOrientation.mult(r,this.orbitOrientation),s.Quaternion.pool.release(r),s.Vector3.pool.release(n),s.Vector3.pool.release(a)}setFromPositionAndVelocity(t,e,i,a){const n=1/a;this.epoch=i;const r=s.Vector3.pool.get();r.cross(t,e);const o=s.Vector3.pool.get(),l=s.Vector3.pool.get();l.normalize(t),o.cross(e,r),o.mult(o,n),o.sub(o,l),this.eccentricity=o.magnitude();const c=r.dot(r)*n;this.semiMajorAxis=c/(1-this.eccentricity*this.eccentricity),this.eccentricity>1&&(this.semiMajorAxis*=-1);let h=Math.acos(s.MathUtils.clamp(o.dot(l)/this.eccentricity,-1,1));t.dot(e)<0&&(h*=-1),h<-Math.PI&&(h+=s.MathUtils.twoPi),h>=Math.PI&&(h-=s.MathUtils.twoPi),o.normalize(o),r.normalize(r),this.orbitOrientation.setFromAxes(o,void 0,r),s.Vector3.pool.release(l),s.Vector3.pool.release(r),s.Vector3.pool.release(o);const d=this.getEccentricAnomalyFromTrueAnomaly(h);this.meanAnomalyAtEpoch=this.getMeanAnomalyFromEccentricAnomaly(d),this.meanAngularMotion=Math.sqrt(a/(this.semiMajorAxis*this.semiMajorAxis*this.semiMajorAxis))}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}constructor(t=0,e=0,i=0,a=0){super(),this._origin=new s.Vector2(t,e),this._size=new s.Vector2(i,a)}freeze(){this._origin.freeze(),this._size.freeze()}thaw(){this._origin.thaw(),this._size.thaw()}get origin(){return this._origin}get size(){return this._size}toString(){return"[Origin: ("+this._origin.x+", "+this._origin.y+"), Size: ("+this._size.x+", "+this._size.y+")]"}copy(t){this._origin.copy(t._origin),this._size.copy(t._size)}set(t,e,i,s){this._origin.set(t,e),this._size.set(i,s)}contains(t){return this._origin.x<=t.x&&t.x<this._origin.x+this._size.x&&this._origin.y<=t.y&&t.y<this._origin.y+this._size.y}intersects(t){return this._origin.x+this._size.x>t._origin.x&&t._origin.x+t._size.x>this._origin.x&&this._origin.y+this._size.y>t._origin.y&&t._origin.y+t._size.y>this._origin.y}}const n=new s.Pool(a);e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}static get NaN(){return o}static get Identity(){return r}constructor(t=1,e=0,i=0,s=0){super(),this._w=t,this._x=e,this._y=i,this._z=s}get w(){return this._w}set w(t){this.throwIfFrozen(),this._w=t}get x(){return this._x}set x(t){this.throwIfFrozen(),this._x=t}get y(){return this._y}set y(t){this.throwIfFrozen(),this._y=t}get z(){return this._z}set z(t){this.throwIfFrozen(),this._z=t}getAngle(){return 2*Math.acos(this._w)}copy(t){this.throwIfFrozen(),this._w=t._w,this._x=t._x,this._y=t._y,this._z=t._z}copyFromThreeJs(t){this.throwIfFrozen(),this._w=t.w,this._x=t.x,this._y=t.y,this._z=t.z}set(t,e,i,s){this.throwIfFrozen(),this._w=t,this._x=e,this._y=i,this._z=s}setFromAxisAngle(t,e){this.throwIfFrozen();const i=Math.sin(e/2);this._w=Math.cos(e/2),this._x=i*t.x,this._y=i*t.y,this._z=i*t.z}setFromAxes(t,e,i){let a;this.throwIfFrozen(),void 0===t?(a=t=s.Vector3.pool.get(),t.cross(e,i)):void 0===e?(a=e=s.Vector3.pool.get(),e.cross(i,t)):void 0===i&&(a=i=s.Vector3.pool.get(),i.cross(t,e));const n=t.x+e.y+i.z;if(n>0){const s=2*Math.sqrt(n+1);this._w=.25*s,this._x=(e.z-i.y)/s,this._y=(i.x-t.z)/s,this._z=(t.y-e.x)/s}else if(t.x>e.y&&t.x>i.z){const s=2*Math.sqrt(1+t.x-e.y-i.z);this._w=(e.z-i.y)/s,this._x=.25*s,this._y=(e.x+t.y)/s,this._z=(i.x+t.z)/s}else if(e.y>i.z){const s=2*Math.sqrt(1+e.y-i.z-t.x);this._w=(i.x-t.z)/s,this._x=(e.x+t.y)/s,this._y=.25*s,this._z=(i.y+e.z)/s}else{const s=2*Math.sqrt(1+i.z-t.x-e.y);this._w=(t.y-e.x)/s,this._x=(i.x+t.z)/s,this._y=(i.y+e.z)/s,this._z=.25*s}s.Vector3.pool.release(a)}setFromEuler(t,e,i){this.throwIfFrozen();const s=.5*t,a=.5*e,n=.5*i,r=Math.cos(s),o=Math.sin(s),l=Math.cos(a),c=Math.sin(a),h=Math.cos(n),d=Math.sin(n);this._w=r*l*h+o*c*d,this._x=o*l*h-r*c*d,this._y=r*c*h+o*l*d,this._z=r*l*d-o*c*h}setFromVectorFromTo(t,e){const i=s.Vector3.pool.get(),a=t.dot(e);if(a>=1)this.set(1,0,0,0);else if(a<=-1)this.set(0,1,0,0);else{i.cross(t,e),i.normalize(i);const s=Math.acos(a);this.setFromAxisAngle(i,s)}s.Vector3.pool.release(i)}setFromAxis(t,e){const i=s.Vector3.pool.get(),a=s.Vector3.pool.get();i.normalize(t),a.cross(i,s.Vector3.XAxis),a.isZero()&&a.cross(i,s.Vector3.YAxis),a.normalize(a),0===e?this.setFromAxes(i,a,void 0):1===e?this.setFromAxes(void 0,i,a):2===e&&this.setFromAxes(a,void 0,i),s.Vector3.pool.release(i),s.Vector3.pool.release(a)}toString(){return"["+this._w+", "+this._x+", "+this._y+", "+this._z+"]"}isNaN(){return!(this._w<=0||this._w>0)}magnitude(){return Math.sqrt(this._w*this._w+this._x*this._x+this._y*this._y+this._z*this._z)}normalize(t){this.throwIfFrozen();const e=t.magnitude();e>0&&(this._w=t._w/e,this._x=t._x/e,this._y=t._y/e,this._z=t._z/e)}inverse(t){this.throwIfFrozen(),this._w=t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z}mult(t,e){this.throwIfFrozen();const i=a.pool.get();i._w=t._w*e._w-t._x*e._x-t._y*e._y-t._z*e._z,i._x=t._w*e._x+t._x*e._w+t._y*e._z-t._z*e._y,i._y=t._w*e._y-t._x*e._z+t._y*e._w+t._z*e._x,i._z=t._w*e._z+t._x*e._y-t._y*e._x+t._z*e._w,this.copy(i),a.pool.release(i)}multInverseL(t,e){this.throwIfFrozen();const i=a.pool.get();i._w=t._w*e._w+t._x*e._x+t._y*e._y+t._z*e._z,i._x=t._w*e._x-t._x*e._w-t._y*e._z+t._z*e._y,i._y=t._w*e._y+t._x*e._z-t._y*e._w-t._z*e._x,i._z=t._w*e._z-t._x*e._y+t._y*e._x-t._z*e._w,this.copy(i),a.pool.release(i)}multInverseR(t,e){this.throwIfFrozen();const i=a.pool.get();i._w=+t._w*e._w+t._x*e._x+t._y*e._y+t._z*e._z,i._x=-t._w*e._x+t._x*e._w-t._y*e._z+t._z*e._y,i._y=-t._w*e._y+t._x*e._z+t._y*e._w-t._z*e._x,i._z=-t._w*e._z-t._x*e._y+t._y*e._x+t._z*e._w,this.copy(i),a.pool.release(i)}scaleAngle(t,e){this.throwIfFrozen();const i=Math.acos(t._w),s=Math.sin(i);if(0===s)return void this.copy(t);const a=Math.sin(i*e);this._w=Math.cos(i*e),this._x=t._x/s*a,this._y=t._y/s*a,this._z=t._z/s*a}angle(t){return 2*Math.acos(this._w*t._w+this._x*t._x+this._y*t._y+this._z*t._z)}slerp(t,e,i){this.throwIfFrozen();let s=t._w*e._w+t._x*e._x+t._y*e._y+t._z*e._z,a=1;if(s<0&&(a=-1,s=-s),s<=.9995){const n=Math.acos(s),r=a*Math.sin((1-i)*n)/Math.sin(n),o=Math.sin(i*n)/Math.sin(n);this._w=r*t._w+o*e._w,this._x=r*t._x+o*e._x,this._y=r*t._y+o*e._y,this._z=r*t._z+o*e._z}else{const s=a*(1-i),n=i;this._w=s*t._w+n*e._w,this._x=s*t._x+n*e._x,this._y=s*t._y+n*e._y,this._z=s*t._z+n*e._z,this.normalize(this)}}getAxis(t,e){void 0===e?(t.set(this._x,this._y,this._z),t.normalize(t)):0===e?(t.x=this._w*this._w+this._x*this._x-this._y*this._y-this._z*this._z,t.y=2*this._w*this._z+2*this._x*this._y,t.z=2*this._x*this._z-2*this._w*this._y):1===e?(t.x=2*this._y*this._x-2*this._w*this._z,t.y=this._w*this._w-this._x*this._x+this._y*this._y-this._z*this._z,t.z=2*this._x*this._w+2*this._y*this._z):2===e&&(t.x=2*this._y*this._w+2*this._z*this._x,t.y=2*this._z*this._y-2*this._w*this._x,t.z=this._w*this._w-this._x*this._x-this._y*this._y+this._z*this._z)}}const n=new s.Pool(a),r=new a;r.freeze();const o=new a(Number.NaN,Number.NaN,Number.NaN,Number.NaN);o.freeze(),e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}static get NaN(){return c}static get Zero(){return r}static get XAxis(){return o}static get YAxis(){return l}constructor(t=0,e=0){super(),this._x=t,this._y=e}get x(){return this._x}set x(t){this.throwIfFrozen(),this._x=t}get y(){return this._y}set y(t){this.throwIfFrozen(),this._y=t}toString(){return"["+this._x+", "+this._y+"]"}equals(t){return this._x===t._x&&this._y===t._y}isZero(){return 0===this._x&&0===this._y}isNaN(){return!((this._x<=0||this._x>0)&&(this._y<=0||this._y>0))}copy(t){this.throwIfFrozen(),this._x=t._x,this._y=t._y}copyFromThreeJs(t){this.throwIfFrozen(),this._x=t.x,this._y=t.y}set(t,e){this.throwIfFrozen(),this._x=t,this._y=e}neg(t){this.throwIfFrozen(),this._x=-t._x,this._y=-t._y}add(t,e){this.throwIfFrozen(),this._x=t._x+e._x,this._y=t._y+e._y}sub(t,e){this.throwIfFrozen(),this._x=t._x-e._x,this._y=t._y-e._y}mult(t,e){this.throwIfFrozen(),this._x=t._x*e,this._y=t._y*e}addMult(t,e,i){this.throwIfFrozen(),this._x=t._x+e._x*i,this._y=t._y+e._y*i}div(t,e){this.throwIfFrozen(),this._x=t._x/e,this._y=t._y/e}scale(t,e){this.throwIfFrozen(),this._x=t._x*e._x,this._y=t._y*e._y}scaleInv(t,e){this.throwIfFrozen(),this._x=t._x/e._x,this._y=t._y/e._y}dot(t){return this._x*t._x+this._y*t._y}cross(t){return this._x*t._y-this._y*t._x}magnitudeSqr(){return this._x*this._x+this._y*this._y}magnitude(){return Math.sqrt(this.magnitudeSqr())}normalize(t){this.throwIfFrozen();const e=t.magnitude();e>0&&(this._x=t._x/e,this._y=t._y/e)}setMagnitude(t,e){this.throwIfFrozen(),this.normalize(t),this._x*=e,this._y*=e}angle(t){const e=this.magnitude()*t.magnitude();return e>0?Math.acos(s.MathUtils.clamp(this.dot(t)/e,-1,1)):Number.NaN}clamp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.clamp(t._x,e._x,i._x),this._y=s.MathUtils.clamp(t._y,e._y,i._y)}lerp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.lerp(t._x,e._x,i),this._y=s.MathUtils.lerp(t._y,e._y,i)}}const n=new s.Pool(a),r=new a;r.freeze();const o=new a(1,0);o.freeze();const l=new a(0,1);l.freeze();const c=new a(Number.NaN,Number.NaN);c.freeze(),e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}static get NaN(){return p}static get Zero(){return r}static get XAxis(){return o}static get YAxis(){return l}static get ZAxis(){return c}static get XAxisNeg(){return h}static get YAxisNeg(){return d}static get ZAxisNeg(){return u}constructor(t=0,e=0,i=0){super(),this._x=t,this._y=e,this._z=i}get x(){return this._x}set x(t){this.throwIfFrozen(),this._x=t}get y(){return this._y}set y(t){this.throwIfFrozen(),this._y=t}get z(){return this._z}set z(t){this.throwIfFrozen(),this._z=t}toString(){return"["+this._x+", "+this._y+", "+this._z+"]"}equals(t){return this._x===t._x&&this._y===t._y&&this._z===t._z}isZero(){return 0===this._x&&0===this._y&&0===this._z}isNaN(){return!((this._x<=0||this._x>0)&&(this._y<=0||this._y>0)&&(this._z<=0||this._z>0))}copy(t){this.throwIfFrozen(),this._x=t._x,this._y=t._y,this._z=t._z}copyFromThreeJs(t){this.throwIfFrozen(),this._x=t.x,this._y=t.y,this._z=t.z}set(t,e,i){this.throwIfFrozen(),this._x=t,this._y=e,this._z=i}setFromAER(t){this.throwIfFrozen();const e=Math.cos(t.elevation);this._x=t.range*e*Math.cos(t.azimuth),this._y=t.range*e*Math.sin(t.azimuth),this._z=t.range*Math.sin(t.elevation)}neg(t){this.throwIfFrozen(),this._x=-t._x,this._y=-t._y,this._z=-t._z}add(t,e){this.throwIfFrozen(),this._x=t._x+e._x,this._y=t._y+e._y,this._z=t._z+e._z}sub(t,e){this.throwIfFrozen(),this._x=t._x-e._x,this._y=t._y-e._y,this._z=t._z-e._z}mult(t,e){this.throwIfFrozen(),this._x=t._x*e,this._y=t._y*e,this._z=t._z*e}addMult(t,e,i){this.throwIfFrozen(),this._x=t._x+e._x*i,this._y=t._y+e._y*i,this._z=t._z+e._z*i}div(t,e){this.throwIfFrozen(),this._x=t._x/e,this._y=t._y/e,this._z=t._z/e}scale(t,e){this.throwIfFrozen(),this._x=t._x*e._x,this._y=t._y*e._y,this._z=t._z*e._z}scaleInv(t,e){this.throwIfFrozen(),this._x=t._x/e._x,this._y=t._y/e._y,this._z=t._z/e._z}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z}cross(t,e){this.throwIfFrozen();const i=t._y*e._z-t._z*e._y,s=t._z*e._x-t._x*e._z,a=t._x*e._y-t._y*e._x;this._x=i,this._y=s,this._z=a}magnitudeSqr(){return this._x*this._x+this._y*this._y+this._z*this._z}magnitude(){return Math.sqrt(this.magnitudeSqr())}magnitudeXY(){return Math.sqrt(this._x*this._x+this._y*this._y)}normalize(t){this.throwIfFrozen();const e=t.magnitude();e>0?(this._x=t._x/e,this._y=t._y/e,this._z=t._z/e):this.copy(t)}setMagnitude(t,e){this.throwIfFrozen(),this.normalize(t),this._x*=e,this._y*=e,this._z*=e}distance(t){const e=this._x-t._x,i=this._y-t._y,s=this._z-t._z;return Math.sqrt(e*e+i*i+s*s)}angle(t){const e=this.magnitude()*t.magnitude();return e>0?Math.acos(s.MathUtils.clamp(this.dot(t)/e,-1,1)):Number.NaN}angleAroundAxis(t,e){const i=a.pool.get(),s=a.pool.get();i.addMult(this,e,-this.dot(e)),s.addMult(t,e,-t.dot(e));let n=i.angle(s);return i.cross(i,s),i.dot(e)<0&&(n*=-1),a.pool.release(i),a.pool.release(s),n}clamp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.clamp(t._x,e._x,i._x),this._y=s.MathUtils.clamp(t._y,e._y,i._y),this._z=s.MathUtils.clamp(t._z,e._z,i._z)}lerp(t,e,i){this.throwIfFrozen(),this._x=s.MathUtils.lerp(t._x,e._x,i),this._y=s.MathUtils.lerp(t._y,e._y,i),this._z=s.MathUtils.lerp(t._z,e._z,i)}slerp(t,e,i){this.throwIfFrozen();const a=t.magnitude(),n=e.magnitude();if(a>0&&n>0){const r=Math.acos(s.MathUtils.clamp(t.dot(e)/(a*n),-1,1));if(Math.abs(r)>.01745327777){const s=1/Math.sin(r),o=Math.sin((1-i)*r)*s,l=Math.sin(i*r)*s;this.mult(t,o/a),this.addMult(this,e,l/n),this.mult(this,(1-i)*a+i*n)}else this.lerp(t,e,i)}}rotate(t,e){this.throwIfFrozen();const i=t.w*e._x+t.y*e._z-t.z*e._y,s=t.w*e._y+t.z*e._x-t.x*e._z,a=t.w*e._z+t.x*e._y-t.y*e._x,n=-t.x*e._x-t.y*e._y-t.z*e._z;this._x=i*t.w-n*t.x-s*t.z+a*t.y,this._y=s*t.w-n*t.y-a*t.x+i*t.z,this._z=a*t.w-n*t.z-i*t.y+s*t.x}rotateInverse(t,e){this.throwIfFrozen();const i=t.w*e._x-t.y*e._z+t.z*e._y,s=t.w*e._y-t.z*e._x+t.x*e._z,a=t.w*e._z-t.x*e._y+t.y*e._x,n=t.x*e._x+t.y*e._y+t.z*e._z;this._x=i*t.w+n*t.x+s*t.z-a*t.y,this._y=s*t.w+n*t.y+a*t.x-i*t.z,this._z=a*t.w+n*t.z+i*t.y-s*t.x}setNormalTo(t,e){const i=e._x*(t._y*t._y+t._z*t._z)-t._x*(t._y*e._y+t._z*e._z),s=e._y*(t._z*t._z+t._x*t._x)-t._y*(t._z*e._z+t._x*e._x),a=e._z*(t._x*t._x+t._y*t._y)-t._z*(t._x*e._x+t._y*e._y);this._x=i,this._y=s,this._z=a,this.normalize(this)}}const n=new s.Pool(a),r=new a;r.freeze();const o=new a(1,0,0);o.freeze();const l=new a(0,1,0);l.freeze();const c=new a(0,0,1);c.freeze();const h=new a(-1,0,0);o.freeze();const d=new a(0,-1,0);l.freeze();const u=new a(0,0,-1);c.freeze();const p=new a(Number.NaN,Number.NaN,Number.NaN);p.freeze(),e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.FastIterable{constructor(t=null,e=null){super(),this._keysToEntries=new s.FastMap,this._itemToKeys=new Map,this._itemConstructor=t,this._itemDestructor=e}get(t){const e=this._keysToEntries.get(t);if(void 0===e){const e={item:this._itemConstructor(t),count:1};return this._keysToEntries.set(t,e),this._itemToKeys.set(e.item,t),e.item}return e.count+=1,e.item}release(t){const e=this._itemToKeys.get(t);if(void 0!==e){const i=this._keysToEntries.get(e);i.count-=1,0===i.count&&(this._itemDestructor(i.item),this._keysToEntries.delete(e),this._itemToKeys.delete(t))}}getAt(t){return this._keysToEntries.getAt(t).value.item}get size(){return this._keysToEntries.size}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseRef{constructor(t){super(t),this._entityName="",this._componentName="",this._componentType="",this._componentTypeIndex=0}getEntityName(){return this._entityName}getComponentName(){return this._componentName}getComponentType(){return this._componentType}getComponentTypeIndex(){return this._componentTypeIndex}setByName(t,e){this._entityName=t,this._componentName=e,this._componentType=""}setByType(t,e,i=0){this._entityName=t,this._componentType=e,this._componentTypeIndex=i,this._componentName=""}update(){if(""===this._entityName||""===this._componentName&&""===this._componentType)this._setRef(null);else if(""!==this._componentName){const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getComponent(this._componentName);this._setRef(e)}else this._setRef(null)}else{const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getComponentByType(this._componentType,this._componentTypeIndex);this._setRef(e)}else this._setRef(null)}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseRef{constructor(t){super(t),this._entityName="",this._controllerName="",this._controllerType="",this._controllerTypeIndex=0}getEntityName(){return this._entityName}getControllerName(){return this._controllerName}getControllerType(){return this._controllerType}getControllerTypeIndex(){return this._controllerTypeIndex}setByName(t,e){this._entityName=t,this._controllerName=e,this._controllerType=""}setByType(t,e,i=0){this._entityName=t,this._controllerType=e,this._controllerTypeIndex=i,this._controllerName=""}update(){if(""===this._entityName||""===this._controllerName&&""===this._controllerType)this._setRef(null);else if(""!==this._controllerName){const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getController(this._controllerName);this._setRef(e)}else this._setRef(null)}else{const t=this._scene.getEntity(this._entityName);if(null!==t&&t.isEnabled()){const e=t.getControllerByType(this._controllerType,this._controllerTypeIndex);this._setRef(e)}else this._setRef(null)}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{static xyzToUVFace(t,e,i=this._defaultCubeMapFaceFrames){let a;for(let n=0;n<6;n++){const r=i[n],o=r[2];let l=0,c=0,h=0,d=!1;o===s.Vector3.XAxis||o===s.Vector3.XAxisNeg?(l=e.x,c=e.y,h=e.z,d=o===s.Vector3.XAxisNeg):o===s.Vector3.YAxis||o===s.Vector3.YAxisNeg?(l=e.y,c=e.z,h=e.x,d=o===s.Vector3.YAxisNeg):(l=e.z,c=e.x,h=e.y,d=o===s.Vector3.ZAxisNeg),Math.abs(l)>=Math.abs(c)&&Math.abs(l)>=Math.abs(h)&&(l>=0&&!d||l<0&&d)&&(a=r,t.z=n)}if(void 0===a)return void t.set(NaN,NaN,NaN);let n=a[2].x*e.x+a[2].y*e.y+a[2].z*e.z;n<0&&(n=1),t.x=(a[0].x*e.x+a[0].y*e.y+a[0].z*e.z)/n,t.y=(a[1].x*e.x+a[1].y*e.y+a[1].z*e.z)/n,t.x=.5*(t.x+1),t.y=.5*(t.y+1)}}a._defaultCubeMapFaceFrames=[[s.Vector3.YAxis,s.Vector3.ZAxis,s.Vector3.XAxis],[s.Vector3.XAxisNeg,s.Vector3.ZAxis,s.Vector3.YAxis],[s.Vector3.YAxisNeg,s.Vector3.ZAxis,s.Vector3.XAxisNeg],[s.Vector3.XAxis,s.Vector3.ZAxis,s.Vector3.YAxisNeg],[s.Vector3.YAxis,s.Vector3.XAxisNeg,s.Vector3.ZAxis],[s.Vector3.YAxis,s.Vector3.XAxis,s.Vector3.ZAxisNeg]],e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseRef{constructor(t,e){super(t),this._name=void 0!==e?e:""}getName(){return this._name}setName(t){this._name=t}update(){if(""===this._name)null!==this._ref&&this._setRef(null);else if(null===this._ref||this._ref.isDestroyed()||!this._ref.isEnabled()||this._ref.getName()!==this._name){const t=this._scene.getEntity(this._name);this._setRef(t)}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Freezable{static get pool(){return n}constructor(t=0,e=0,i=0){super(),this._lat=t,this._lon=e,this._alt=i}get lat(){return this._lat}set lat(t){this.throwIfFrozen(),this._lat=t}get lon(){return this._lon}set lon(t){this.throwIfFrozen(),this._lon=t}get alt(){return this._alt}set alt(t){this.throwIfFrozen(),this._alt=t}toString(t=!1){return t?"["+s.MathUtils.radToDeg(this._lat)+", "+s.MathUtils.radToDeg(this._lon)+", "+this._alt+"]":"["+this._lat+", "+this._lon+", "+this._alt+"]"}copy(t){this.throwIfFrozen(),this._lat=t._lat,this._lon=t._lon,this._alt=t._alt}set(t,e,i){this.throwIfFrozen(),this._lat=t,this._lon=e,this._alt=i}}const n=new s.Pool(a);e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{constructor(t){this._component=t,this._alphaMultiplier=1,this._position=new s.Vector3,this._orientation=new s.Quaternion,this._scale=1,this._dashGapLength=0,this._dashLength=1,this._threeJsObjects=[],this._threeJsMaterial=null,this._threeJsMaterial=t.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("line"),t.getThreeJsMaterials().push(this._threeJsMaterial),this._threeJsMaterial.uniforms.alphaMultiplier.value=this._alphaMultiplier,this._threeJsMaterial.uniforms.dashLength.value=this._dashLength,this._threeJsMaterial.uniforms.dashGapLength.value=this._dashGapLength}setPositions(t){if(t.length%2!=0)throw new Error("Number of positions in the LineMesh must be even.");this._adjustVerticesInGeometries(2*t.length);const e=s.Vector3.pool.get(),i=s.Vector3.pool.get(),n=s.Vector3.pool.get(),r=s.Vector3.pool.get(),o=s.Vector3.pool.get();let l=0;for(let n=0;n<this._threeJsObjects.length;n++){const r=this._threeJsObjects[n].geometry.getAttribute("position"),c=r.array;for(let r=0;r<c.length/(2*a._floatsPerVertex);r++){const h=r+n*(a._verticesPerGeometry/2);c[2*r*a._floatsPerVertex+0]=t[h].x,c[2*r*a._floatsPerVertex+1]=t[h].y,c[2*r*a._floatsPerVertex+2]=t[h].z,c[(2*r+1)*a._floatsPerVertex+0]=t[h].x,c[(2*r+1)*a._floatsPerVertex+1]=t[h].y,c[(2*r+1)*a._floatsPerVertex+2]=t[h].z,h%2==0?t[h].equals(t[s.MathUtils.wrap(h-1,0,t.length)])?(e.copy(t[s.MathUtils.wrap(h-2,0,t.length)]),i.copy(t[h+1])):(e.copy(t[h]),i.copy(t[h+1]),l=0):h%2==1&&(t[h].equals(t[s.MathUtils.wrap(h+1,0,t.length)])?(e.copy(t[h-1]),i.copy(t[s.MathUtils.wrap(h+2,0,t.length)])):(e.copy(t[h-1]),i.copy(t[h])),o.sub(t[h],t[h-1]),l+=o.magnitude()),c[2*r*a._floatsPerVertex+3]=e.x,c[2*r*a._floatsPerVertex+4]=e.y,c[2*r*a._floatsPerVertex+5]=e.z,c[(2*r+1)*a._floatsPerVertex+3]=e.x,c[(2*r+1)*a._floatsPerVertex+4]=e.y,c[(2*r+1)*a._floatsPerVertex+5]=e.z,c[2*r*a._floatsPerVertex+6]=i.x,c[2*r*a._floatsPerVertex+7]=i.y,c[2*r*a._floatsPerVertex+8]=i.z,c[(2*r+1)*a._floatsPerVertex+6]=i.x,c[(2*r+1)*a._floatsPerVertex+7]=i.y,c[(2*r+1)*a._floatsPerVertex+8]=i.z,c[2*r*a._floatsPerVertex+14]=l,c[(2*r+1)*a._floatsPerVertex+14]=l}r.data.needsUpdate=!0}s.Vector3.pool.release(n),s.Vector3.pool.release(r),s.Vector3.pool.release(e),s.Vector3.pool.release(i),s.Vector3.pool.release(o)}setColors(t){if(t.length%2!=0)throw new Error("Number of colors in the LineMesh must be even.");this._adjustVerticesInGeometries(2*t.length);for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e].geometry.getAttribute("color"),s=i.array;for(let i=0;i<s.length/(2*a._floatsPerVertex);i++){const n=i+e*(a._verticesPerGeometry/2);s[2*i*a._floatsPerVertex+9]=t[n].r,s[2*i*a._floatsPerVertex+10]=t[n].g,s[2*i*a._floatsPerVertex+11]=t[n].b,s[2*i*a._floatsPerVertex+12]=t[n].a,s[(2*i+1)*a._floatsPerVertex+9]=t[n].r,s[(2*i+1)*a._floatsPerVertex+10]=t[n].g,s[(2*i+1)*a._floatsPerVertex+11]=t[n].b,s[(2*i+1)*a._floatsPerVertex+12]=t[n].a}i.data.needsUpdate=!0}}setWidths(t){if("number"==typeof t)for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e].geometry.getAttribute("width"),s=i.array;for(let e=0;e<s.length/(2*a._floatsPerVertex);e++)s[2*e*a._floatsPerVertex+13]=t,s[(2*e+1)*a._floatsPerVertex+13]=-t;i.data.needsUpdate=!0}else{if(t.length%2!=0)throw new Error("Number of widths in the LineMesh must be even.");this._adjustVerticesInGeometries(2*t.length);for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e].geometry.getAttribute("width"),s=i.array;for(let i=0;i<s.length/(2*a._floatsPerVertex);i++){const n=i+e*(a._verticesPerGeometry/2);s[2*i*a._floatsPerVertex+13]=t[n],s[(2*i+1)*a._floatsPerVertex+13]=-t[n]}i.data.needsUpdate=!0}}}setDashLength(t,e){this._dashLength=t,this._dashGapLength=e,s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"dashLength",this._dashLength),s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"dashGapLength",this._dashGapLength)}setScale(t){this._scale=t,s.ThreeJsHelper.setScale(this._threeJsObjects,t)}getAlphaMultiplier(){return this._alphaMultiplier}setAlphaMultiplier(t){this._alphaMultiplier=t,s.ThreeJsHelper.setUniformNumber(this._threeJsMaterial,"alphaMultiplier",this._alphaMultiplier)}prepareForRender(t){const e=s.Vector2.pool.get();if("spout"===t.getType()){const i=t;e.set(.1*i.getRenderWidth(),.5*i.getRenderWidth()*.1)}else e.copy(t.getViewport().getBounds().size);s.ThreeJsHelper.setUniformVector2(this._threeJsMaterial,"pixelSize",e),s.Vector2.pool.release(e)}_adjustVerticesInGeometries(t){const e=Math.ceil(t/a._verticesPerGeometry);for(;this._threeJsObjects.length>e;){const t=this._threeJsObjects[this._threeJsObjects.length-1];s.ThreeJsHelper.destroyObject(t),this._threeJsObjects.splice(this._threeJsObjects.length-1,1);for(let e=0,i=this._component.getThreeJsObjects().length;e<i;e++)if(this._component.getThreeJsObjects()[e]===t){this._component.getThreeJsObjects().splice(e,1);break}}if(this._threeJsObjects.length<e){this._threeJsObjects.length>0&&this._setupThreeJsGeometry(this._threeJsObjects[this._threeJsObjects.length-1].geometry,a._verticesPerGeometry);for(let i=this._threeJsObjects.length;i<e;i++){const e=s.ThreeJsHelper.createMeshObject(this._component,this._threeJsMaterial,[],!1);this._threeJsObjects.push(e),this._component.getThreeJsObjects().push(e);const n=Math.min(t-i*a._verticesPerGeometry,a._verticesPerGeometry);this._setupThreeJsGeometry(e.geometry,n),s.ThreeJsHelper.setPosition(e,this._position),s.ThreeJsHelper.setOrientation(e,this._orientation),s.ThreeJsHelper.setScale(e,this._scale),e.frustumCulled=!1}}else if(e>0){const i=this._threeJsObjects[e-1].geometry,s=t-(e-1)*a._verticesPerGeometry;i.getAttribute("position").array.length!==s*a._floatsPerVertex&&this._setupThreeJsGeometry(i,s)}}_setupThreeJsGeometry(t,e){const i=new Float32Array(e*a._floatsPerVertex),n=new s.THREE.InterleavedBuffer(i,a._floatsPerVertex);t.setAttribute("position",new s.THREE.InterleavedBufferAttribute(n,3,0,!1)),t.setAttribute("positionPrev",new s.THREE.InterleavedBufferAttribute(n,3,3,!1)),t.setAttribute("positionNext",new s.THREE.InterleavedBufferAttribute(n,3,6,!1)),t.setAttribute("color",new s.THREE.InterleavedBufferAttribute(n,4,9,!1)),t.setAttribute("width",new s.THREE.InterleavedBufferAttribute(n,1,13,!1)),t.setAttribute("dashOffset",new s.THREE.InterleavedBufferAttribute(n,1,14,!1));const r=new Uint16Array(6*e/4);for(let t=0;t<e/4;t++)r[6*t+0]=4*t,r[6*t+1]=4*t+2,r[6*t+2]=4*t+3,r[6*t+3]=4*t,r[6*t+4]=4*t+3,r[6*t+5]=4*t+1;t.setIndex(new s.THREE.BufferAttribute(r,1))}}a._floatsPerVertex=15,a._verticesPerGeometry=65536,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{static get(){null===a._material&&(a._material=new s.THREE.ShaderMaterial({uniforms:{entityPos:new s.THREE.Uniform(new s.THREE.Vector3),ambientLightColor:new s.THREE.Uniform(new s.THREE.Color),lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),color:new s.THREE.Uniform(new s.THREE.Color(1,1,1)),specularColor:new s.THREE.Uniform(new s.THREE.Color(1,1,1)),specularIntensity:new s.THREE.Uniform(0),specularHardness:new s.THREE.Uniform(50),colorTexture:new s.THREE.Uniform(null),normalTexture:new s.THREE.Uniform(null),specularTexture:new s.THREE.Uniform(null),nightTexture:new s.THREE.Uniform(null),decalTexture:new s.THREE.Uniform(null),normalScale:new s.THREE.Uniform(new s.THREE.Vector2),numShadowEntities:new s.THREE.Uniform(0),shadowEntityPositions:new s.THREE.Uniform([new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3]),shadowEntityRadii:new s.THREE.Uniform([0,0,0,0,0]),shadowEntityRayleighAmount:new s.THREE.Uniform([0,0,0,0,0]),shadowRingsInnerRadius:new s.THREE.Uniform(0),shadowRingsOuterRadius:new s.THREE.Uniform(0),shadowRingsTexture:new s.THREE.Uniform(null),shadowRingsNormal:new s.THREE.Uniform(new s.THREE.Vector3),atmospherePosition:new s.THREE.Uniform(new s.THREE.Vector3(0,0,0)),atmosphereOrientation:new s.THREE.Uniform(new s.THREE.Vector4(1,0,0,0)),atmosphereEquatorialRadius:new s.THREE.Uniform(1),atmospherePolarRadius:new s.THREE.Uniform(1),atmosphereDensity:new s.THREE.Uniform(0),atmosphereScaleHeight:new s.THREE.Uniform(1),atmosphereEmissivity:new s.THREE.Uniform(0),atmosphereColor:new s.THREE.Uniform(new s.THREE.Vector3(0,0,0)),atmosphereSunBrightness:new s.THREE.Uniform(1),atmosphereSunsetColor:new s.THREE.Uniform(new s.THREE.Vector3(0,0,0)),atmosphereSunsetIntensity:new s.THREE.Uniform(0),atmosphereGroundIsSpheroid:new s.THREE.Uniform(0)},vertexShader:"\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tattribute vec4 tangent;\n\t\t\t\t\t\tvarying vec4 viewTangent;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\tattribute vec2 normalUV;\n\t\t\t\t\t\tvarying vec2 vNormalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\tattribute vec2 specularUV;\n\t\t\t\t\t\tvarying vec2 vSpecularUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\tattribute vec2 nightUV;\n\t\t\t\t\t\tvarying vec2 vNightUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\tattribute vec2 decalUV;\n\t\t\t\t\t\tvarying vec2 vDecalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec2 vColorUV;\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\tvarying vec3 cameraSpaceNormal;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tviewTangent = vec4((modelMatrix * vec4(tangent.xyz, 0.0)).xyz, tangent.w);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvColorUV = uv;\n\t\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\t\tvNormalUV = normalUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\t\tvSpecularUV = specularUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\t\tvNightUV = nightUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\t\tvDecalUV = decalUV;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tcameraSpacePosition = (modelMatrix * vec4(position, 1.)).xyz;\n\t\t\t\t\t\tcameraSpaceNormal = (modelMatrix * vec4(normal, 0.)).xyz;\n\t\t\t\t\t\tvec4 viewPosition = viewMatrix * vec4(cameraSpacePosition, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\t#ifndef saturate\n\t\t\t\t\t\t#define saturate(a) clamp(a, 0.0, 1.0)\n\t\t\t\t\t#endif\n\t\t\t\t\tuniform mat3 normalMatrix;\n\n\t\t\t\t\t// External lighting and camera.\n\t\t\t\t\tuniform vec3 entityPos;\n\n\t\t\t\t\t// Lights\n\t\t\t\t\tuniform vec3 ambientLightColor;\n\t\t\t\t\tuniform vec3 lightPositions[5];\n\t\t\t\t\tuniform vec3 lightColors[5];\n\t\t\t\t\tuniform float lightRadii[5];\n\t\t\t\t\tuniform int numLights;\n\n\t\t\t\t\t// Shading.\n\t\t\t\t\tuniform vec3 color;\n\t\t\t\t\tuniform vec3 specularColor;\n\t\t\t\t\tuniform float specularIntensity;\n\t\t\t\t\tuniform float specularHardness;\n\n\t\t\t\t\t// Shadow Entities.\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tuniform int numShadowEntities;\n\t\t\t\t\t\tuniform vec3 shadowEntityPositions[5];\n\t\t\t\t\t\tuniform float shadowEntityRadii[5];\n\t\t\t\t\t\tuniform float shadowEntityRayleighAmount[5];\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\tuniform float shadowRingsInnerRadius;\n\t\t\t\t\t\tuniform float shadowRingsOuterRadius;\n\t\t\t\t\t\tuniform sampler2D shadowRingsTexture;\n\t\t\t\t\t\tuniform vec3 shadowRingsNormal;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Textures.\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform sampler2D normalTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularMap\n\t\t\t\t\t\tuniform sampler2D specularTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightMap\n\t\t\t\t\t\tuniform sampler2D nightTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalMap\n\t\t\t\t\t\tuniform sampler2D decalTexture;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Modifications on the textures.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform vec2 normalScale;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// The varying attributes.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvarying vec4 viewTangent;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\tvarying vec2 vNormalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\tvarying vec2 vSpecularUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\tvarying vec2 vNightUV;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\tvarying vec2 vDecalUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec2 vColorUV;\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\tvarying vec3 cameraSpaceNormal;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvec3 getNormalFromMap() {\n\t\t\t\t\t\t\tvec3 normal = normalize(cameraSpaceNormal);\n\t\t\t\t\t\t\tvec3 tangent = normalize(viewTangent.xyz);\n\t\t\t\t\t\t\tvec3 bitangent = normalize(cross(normal, tangent));\n\t\t\t\t\t\t\tif (viewTangent.w < 0.0) {\n\t\t\t\t\t\t\t\tbitangent *= -1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmat3 transform = mat3(tangent, bitangent, normal);\n\t\t\t\t\t\t\t#ifdef normalUVs\n\t\t\t\t\t\t\t\tvec2 uv = vNormalUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 uv = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec3 normalFromMap = texture2D(normalTexture, uv).rgb * 2.0 - 1.0;\n\t\t\t\t\t\t\tnormalFromMap.xy *= vec2(1, -1);\n\t\t\t\t\t\t\tnormalFromMap.xy *= normalScale;\n\t\t\t\t\t\t\treturn normalize(transform * normalFromMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef colorTextureEnvironment\n\t\t\t\t\t\tvec4 getColorFromEnvironmentMap(sampler2D environmentTexture, vec3 positionDir, vec3 normal) {\n\t\t\t\t\t\t\tvec3 r = reflect(positionDir, normal);\n\t\t\t\t\t\t\tfloat m = 2. * sqrt(r.x * r.x + r.y * r.y + (r.z + 1.) * (r.z + 1.));\n\t\t\t\t\t\t\tvec2 uv = r.xy / m + .5;\n\t\t\t\t\t\t\treturn vec4(texture2D(environmentTexture, uv).rgb, 1.);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tvec3 applyRayleighScattering(vec3 color, float amount) {\n\t\t\t\t\t\t\tfloat value = (color.r + color.g + color.b);\n\t\t\t\t\t\t\tfloat rFactor = 1.0; // 6.3^-4 / 6.3^-4\n\t\t\t\t\t\t\tfloat gFactor = 1.602; // 5.6^-4 / 6.3^-4\n\t\t\t\t\t\t\tfloat bFactor = 3.228; // 4.7^-4 / 6.3^-4\n\t\t\t\t\t\t\tcolor.r *= pow(rFactor, -amount);\n\t\t\t\t\t\t\tcolor.g *= pow(gFactor, -amount);\n\t\t\t\t\t\t\tcolor.b *= pow(bFactor, -amount);\n\t\t\t\t\t\t\tcolor = color / (color.r + color.g + color.b) * value;\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 getLightColorFromShadowEntities(vec3 lightColor, vec3 lightDir, vec3 lightPosition, float lightRadius, vec3 normal) {\n\t\t\t\t\t\t\tvec3 color = lightColor;\n\t\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\t\tif (i >= numShadowEntities) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvec3 origin = cameraSpacePosition - shadowEntityPositions[i];\n\t\t\t\t\t\t\t\tvec3 axis = normalize(shadowEntityPositions[i] - lightPosition);\n\t\t\t\t\t\t\t\tfloat originOffset = dot(origin, axis);\n\t\t\t\t\t\t\t\tif (originOffset > 0.0) {\n\t\t\t\t\t\t\t\t\tfloat e = length(origin - dot(origin, axis) * axis);\n\t\t\t\t\t\t\t\t\tfloat ld = dot(cameraSpacePosition - lightPosition, axis);\n\t\t\t\t\t\t\t\t\tfloat sd = dot(cameraSpacePosition - shadowEntityPositions[i], axis);\n\t\t\t\t\t\t\t\t\tfloat lr = lightRadius;\n\t\t\t\t\t\t\t\t\tfloat sr = shadowEntityRadii[i];\n\t\t\t\t\t\t\t\t\tfloat e0 = abs(sr * ld - lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat e1 = (sr * ld + lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat lightLevel = 0.0;\n\t\t\t\t\t\t\t\t\tif (e1 < 0.0 || sd < 0.0) { // light in front of shadow entity\n\t\t\t\t\t\t\t\t\t\tlightLevel = 1.0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (e0 < e1) {\n\t\t\t\t\t\t\t\t\t\tfloat m = 1.0 - saturate(pow(atan(sr / sd) / atan(lr / ld), 2.0));\n\t\t\t\t\t\t\t\t\t\tlightLevel = mix(m, 1.0, saturate(shadowEntityRayleighAmount[i] / 10.0 + (e - e0) / (e1 - e0))); // soft light\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlightLevel = e < e0 ? 0.0 : 1.0; // 0 radius light.\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcolor = lightLevel * applyRayleighScattering(color, (1.0 - lightLevel) * shadowEntityRayleighAmount[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\tvec3 getLightColorFromShadowRings(vec3 lightColor, vec3 lightDir) {\n\t\t\t\t\t\t\tvec3 position = cameraSpacePosition - entityPos;\n\t\t\t\t\t\t\thighp float d = dot(position, shadowRingsNormal) / dot(lightDir, shadowRingsNormal);\n\t\t\t\t\t\t\thighp vec3 pointOnDisc = -d * lightDir + position;\n\t\t\t\t\t\t\thighp float lengthOnDisc = length(pointOnDisc - dot(pointOnDisc, shadowRingsNormal) * shadowRingsNormal);\n\t\t\t\t\t\t\thighp float u = (lengthOnDisc - shadowRingsInnerRadius) / (shadowRingsOuterRadius - shadowRingsInnerRadius);\n\t\t\t\t\t\t\thighp float shadow = 1.0 - texture2D(shadowRingsTexture, vec2(u, 0.0), 0.0).a;\n\t\t\t\t\t\t\tif (shadowRingsInnerRadius <= lengthOnDisc && lengthOnDisc <= shadowRingsOuterRadius && d > 0.0) {\n\t\t\t\t\t\t\t\treturn lightColor * saturate(shadow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn lightColor;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// ATMOSPHERE\n\n\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\tuniform vec3 atmospherePosition;\n\t\t\t\t\t\tuniform vec4 atmosphereOrientation;\n\t\t\t\t\t\tuniform float atmosphereEquatorialRadius;\n\t\t\t\t\t\tuniform float atmospherePolarRadius;\n\t\t\t\t\t\tuniform float atmosphereDensity;\n\t\t\t\t\t\tuniform float atmosphereScaleHeight;\n\t\t\t\t\t\tuniform vec3 atmosphereColor;\n\t\t\t\t\t\tuniform float atmosphereEmissivity;\n\t\t\t\t\t\tuniform float atmosphereSunBrightness;\n\t\t\t\t\t\tuniform vec3 atmosphereSunsetColor;\n\t\t\t\t\t\tuniform float atmosphereSunsetIntensity;\n\t\t\t\t\t\tuniform float atmosphereGroundIsSpheroid;\n\n\t\t\t\t\t\tconst int atmosphereNumIterations = 5;\n\n\t\t\t\t\t\t// Inverse rotate a vector by a quaternion.\n\t\t\t\t\t\tvec3 quatRotInv(vec4 q, vec3 v) {\n\t\t\t\t\t\t\tfloat tx = q.w * v.x - q.y * v.z + q.z * v.y;\n\t\t\t\t\t\t\tfloat ty = q.w * v.y - q.z * v.x + q.x * v.z;\n\t\t\t\t\t\t\tfloat tz = q.w * v.z - q.x * v.y + q.y * v.x;\n\t\t\t\t\t\t\tfloat tw = q.x * v.x + q.y * v.y + q.z * v.z;\n\t\t\t\t\t\t\tfloat x = tx * q.w + tw * q.x + ty * q.z - tz * q.y;\n\t\t\t\t\t\t\tfloat y = ty * q.w + tw * q.y + tz * q.x - tx * q.z;\n\t\t\t\t\t\t\tfloat z = tz * q.w + tw * q.z + tx * q.y - ty * q.x;\n\t\t\t\t\t\t\treturn vec3(x, y, z);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Given an origin and direction, computes the sampling start and end as distance from the origin in the direction.\n\t\t\t\t\t\tvoid getStartEndSamples(out float start, out float end, vec3 origin, vec3 direction, float maxDistance, float groundRadius, float atmosphereScaleHeight) {\n\t\t\t\t\t\t\t// Get the along the ray perpendicular to the sphere.\n\t\t\t\t\t\t\tfloat perpD = -dot(origin, direction);\n\t\t\t\t\t\t\tvec3 perp = origin + direction * perpD;\n\n\t\t\t\t\t\t\t// Figure out the sample distance.\n\t\t\t\t\t\t\tfloat atmosphereRadius = groundRadius + atmosphereScaleHeight * 6.0;\n\t\t\t\t\t\t\tfloat chordHalfLength = sqrt(max(0.0, atmosphereRadius * atmosphereRadius - dot(perp, perp)));\n\n\t\t\t\t\t\t\t// Figure out starting and ending sample points.\n\t\t\t\t\t\t\tstart = max(0.0, perpD - chordHalfLength);\n\t\t\t\t\t\t\tend = min(maxDistance, perpD + chordHalfLength);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Gets the density of the atmosphere at a given position.\n\t\t\t\t\t\tfloat getDensity(vec3 position, float radius, float density, float atmosphereScaleHeight) {\n\t\t\t\t\t\t\treturn density * exp((radius - length(position)) / atmosphereScaleHeight);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Returns 0 if the ray does not intersect and 1.0 if the ray very intersects (with a gradient inbetween).\n\t\t\t\t\t\tfloat getDayLevel(vec3 origin, vec3 direction, float radius, float scaleHeight) {\n\t\t\t\t\t\t\tfloat blendHeight = scaleHeight * radius / 200.0;\n\t\t\t\t\t\t\tfloat perpD = -dot(origin, direction);\n\t\t\t\t\t\t\tfloat depth = radius - sqrt(dot(origin, origin) - sign(perpD) * perpD * perpD);\n\t\t\t\t\t\t\tif (depth < 0.0) { // day\n\t\t\t\t\t\t\t\treturn 1.0 - max(0.0, 0.25 * depth / blendHeight + 0.25);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse { // night\n\t\t\t\t\t\t\t\treturn 1.0 - min(1.0, 0.75 * depth / blendHeight + 0.25);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adjusts the color if one of the RGB values is greater than 1.0.\n\t\t\t\t\t\tvec3 adjustOverbrightness(vec3 color) {\n\t\t\t\t\t\t\tfloat maxColor = max(color.r, max(color.g, color.b));\n\t\t\t\t\t\t\tif (maxColor > 1.0) {\n\t\t\t\t\t\t\t\tfloat f = (maxColor - 1.0) / maxColor;\n\t\t\t\t\t\t\t\tcolor.r = min(1.0, pow(color.r / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t\tcolor.g = min(1.0, pow(color.g / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t\tcolor.b = min(1.0, pow(color.b / maxColor, 1.0 / maxColor));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfloat easeInOut(float x, float sharpness) {\n\t\t\t\t\t\t\tfloat b = sharpness;\n\t\t\t\t\t\t\tif (x < 0.5) {\n\t\t\t\t\t\t\t\treturn max(0.0, (pow(b, 2.0 * x) - 1.0) / (2.0 * (b - 1.0)));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn min(1.0, 1.0 - (pow(b, 2.0 * (1.0 - x)) - 1.0) / (2.0 * (b - 1.0)));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Calculates a glow around the light direction.\n\t\t\t\t\t\tfloat glow(float spread, float amount, float lightDotCamera) {\n\t\t\t\t\t\t\treturn amount * spread / (1.0 + spread - lightDotCamera);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Adjust the incoming light for the atmosphere.\n\t\t\t\t\t\tvec4 getAtmosphereColor(vec3 incomingLight, vec3 lightPosition) {\n\t\t\t\t\t\t\t// Get position, camera, and light relative to the atmosphere center.\n\t\t\t\t\t\t\thighp vec3 position = cameraSpacePosition - atmospherePosition;\n\t\t\t\t\t\t\thighp vec3 cameraPosition = -atmospherePosition;\n\n\t\t\t\t\t\t\t// Get position, camera, and light relative to the atmosphere orientation.\n\t\t\t\t\t\t\tposition = quatRotInv(atmosphereOrientation, position);\n\t\t\t\t\t\t\tcameraPosition = quatRotInv(atmosphereOrientation, cameraPosition);\n\n\t\t\t\t\t\t\t// Convert everything into a sphere frame.\n\t\t\t\t\t\t\tfloat spheroidRatio = atmosphereEquatorialRadius / atmospherePolarRadius;\n\t\t\t\t\t\t\tposition.z *= spheroidRatio;\n\t\t\t\t\t\t\tcameraPosition.z *= spheroidRatio;\n\n\t\t\t\t\t\t\t// If the ground is a spheroid, get to be the right position.\n\t\t\t\t\t\t\tposition = normalize(position) * atmosphereEquatorialRadius;\n\n\t\t\t\t\t\t\thighp vec3 cameraToPosition = position - cameraPosition;\n\t\t\t\t\t\t\thighp float cameraToPositionDist = length(cameraToPosition / 1.0e8) * 1.0e8;\n\t\t\t\t\t\t\thighp vec3 cameraToPositionUnit = cameraToPosition / cameraToPositionDist;\n\n\t\t\t\t\t\t\t// This will be the final color.\n\t\t\t\t\t\t\tvec4 color = vec4(0.0);\n\n\t\t\t\t\t\t\t// Get the start and end of the sampling from the camera to the position.\n\t\t\t\t\t\t\tfloat start;\n\t\t\t\t\t\t\tfloat end;\n\t\t\t\t\t\t\tgetStartEndSamples(start, end, cameraPosition, cameraToPositionUnit, cameraToPositionDist, atmosphereEquatorialRadius, atmosphereScaleHeight);\n\t\t\t\t\t\t\tfloat step = 1.0 / float(atmosphereNumIterations - 1);\n\t\t\t\t\t\t\tfloat stepDist = step * (end - start);\n\n\t\t\t\t\t\t\t// Do the sampling.\n\t\t\t\t\t\t\tfloat totalDensity = 0.0;\n\t\t\t\t\t\t\tfloat segmentStart = start;\n\t\t\t\t\t\t\tfor (int j = 0; j < atmosphereNumIterations; j++) {\n\t\t\t\t\t\t\t\t// Get the distance that this segment covers.\n\t\t\t\t\t\t\t\tfloat segDist = stepDist;\n\t\t\t\t\t\t\t\tif (j == 0 || j == atmosphereNumIterations - 1) {\n\t\t\t\t\t\t\t\t\tsegDist *= 0.5;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Get the segment start that we're looking at.\n\t\t\t\t\t\t\t\tvec3 p = cameraPosition + segmentStart * cameraToPositionUnit;\n\n\t\t\t\t\t\t\t\t// Get the density at that segment start. It'll be the density for the whole segment.\n\t\t\t\t\t\t\t\tfloat densityAtP = getDensity(p, atmosphereEquatorialRadius, atmosphereDensity, atmosphereScaleHeight);\n\n\t\t\t\t\t\t\t\t// Add it to the total density.\n\t\t\t\t\t\t\t\ttotalDensity += densityAtP * segDist;\n\n\t\t\t\t\t\t\t\t// Next step.\n\t\t\t\t\t\t\t\tsegmentStart += stepDist;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Apply emissivity to the light color.\n\t\t\t\t\t\t\tvec3 sunLightColor = mix(incomingLight, vec3(1.0, 1.0, 1.0), atmosphereEmissivity);\n\n\t\t\t\t\t\t\t// Apply the total density to the transparency of the atmosphere.\n\t\t\t\t\t\t\tcolor.a = clamp(pow(3.0 * totalDensity, 0.3), 0.0, 1.0);\n\n\t\t\t\t\t\t\t// Multiply it all together with the source light color.\n\t\t\t\t\t\t\tcolor.rgb = sunLightColor * atmosphereColor * clamp(pow(15.0 * totalDensity / (atmosphereDensity * atmosphereEquatorialRadius), 0.2), 0.75, 1.0);\n\n\t\t\t\t\t\t\t// Make it more opaque when lower down.\n\t\t\t\t\t\t\tcolor.a *= 1.0 + 0.5 * getDensity(cameraPosition, atmosphereEquatorialRadius, 1.0, atmosphereScaleHeight);\n\n\t\t\t\t\t\t\t// Clamp it to make it clean for the day/night transition.\n\t\t\t\t\t\t\tcolor.a = clamp(color.a, 0.0, 1.0);\n\n\t\t\t\t\t\t\t// Get the light position in the sphere entity-space.\n\t\t\t\t\t\t\tlightPosition = quatRotInv(atmosphereOrientation, lightPosition);\n\t\t\t\t\t\t\tlightPosition.z *= spheroidRatio;\n\t\t\t\t\t\t\thighp vec3 lightToPosition = position - lightPosition;\n\t\t\t\t\t\t\thighp vec3 lightToPositionUnit = normalize(lightToPosition / 1.0e8);\n\n\t\t\t\t\t\t\t// Get the day level, from 0 to 1, and apply it to the alpha.\n\t\t\t\t\t\t\tfloat ambientLightIntensity = min(1.0, length(ambientLightColor));\n\t\t\t\t\t\t\tvec3 dayRefUp = normalize(cameraPosition + end * cameraToPositionUnit);\n\t\t\t\t\t\t\tfloat dayLevel = -dot(lightToPositionUnit, dayRefUp);\n\t\t\t\t\t\t\tfloat lightIntensity = mix(dayLevel, 0.0, ambientLightIntensity);\n\t\t\t\t\t\t\tcolor.a *= mix(atmosphereEmissivity, 1.0, easeInOut(0.25 * 700.0 * atmosphereDensity + 1.0 * lightIntensity, 2.0));\n\n\t\t\t\t\t\t\t// Add broader sun glare.\n\t\t\t\t\t\t\tfloat lightDotCamera = max(0.0, -dot(lightToPositionUnit, cameraToPositionUnit));\n\t\t\t\t\t\t\tcolor.rgb *= sunLightColor * (1.0 + atmosphereSunBrightness * color.a * glow(0.04, 0.125, lightDotCamera));\n\n\t\t\t\t\t\t\t// Apply the sunset.\n\t\t\t\t\t\t\tfloat sunsetAmount = mix(atmosphereSunsetIntensity * easeInOut(0.5 * (1.0 - abs(dayLevel)), 4.0), 0.0, ambientLightIntensity);\n\t\t\t\t\t\t\tcolor.rgb = color.rgb * mix(vec3(1.0), atmosphereSunsetColor, clamp(sunsetAmount, 0.0, 1.0));\n\n\t\t\t\t\t\t\t// Adjust for values that are greater than one.\n\t\t\t\t\t\t\tcolor.rgb = adjustOverbrightness(color.rgb);\n\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\t// Get the camera direction to the position.\n\t\t\t\t\t\tvec3 positionDir = normalize(cameraSpacePosition);\n\n\t\t\t\t\t\t// Calculate the normal.\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tvec3 normal = getNormalFromMap();\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tvec3 normal = normalize(cameraSpaceNormal);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// The diffuse light.\n\t\t\t\t\t\tvec3 diffuseLight = ambientLightColor;\n\t\t\t\t\t\tvec3 specularLight = vec3(0, 0, 0);\n\t\t\t\t\t\tvec4 atmosphereColor = vec4(0, 0, 0, 0);\n\n\t\t\t\t\t\t// For each light,\n\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tif (i >= numLights) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Get lighting angles.\n\t\t\t\t\t\t\tvec3 lightDir = normalize(cameraSpacePosition - lightPositions[i]);\n\t\t\t\t\t\t\tfloat lightCosAngle = -dot(lightDir, normal);\n\n\t\t\t\t\t\t\t// If an atmosphere is being used, brighten up the surface a bit, depending on the density of the atmosphere.\n\t\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\t\tlightCosAngle += 0.25 * 700.0 * atmosphereDensity;\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\t// Get the incoming light after shadows.\n\t\t\t\t\t\t\tvec3 incomingLight = lightColors[i];\n\t\t\t\t\t\t\t#if !defined(colorMapEmmissive) | !defined(nightMapEmmissive) | !defined(decalMapEmmissive)\n\t\t\t\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\t\t\t\tincomingLight = getLightColorFromShadowEntities(incomingLight, lightDir, lightPositions[i], lightRadii[i], normal);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t\t#ifdef shadowRings\n\t\t\t\t\t\t\t\t\tincomingLight = getLightColorFromShadowRings(incomingLight, lightDir);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\t// Diffuse shading.\n\t\t\t\t\t\t\tdiffuseLight += incomingLight * saturate(lightCosAngle);\n\n\t\t\t\t\t\t\t// Specular shading.\n\t\t\t\t\t\t\tvec3 reflectedLightDir = reflect(lightDir, normal);\n\t\t\t\t\t\t\tvec3 halfVector = normalize(-lightDir - positionDir);\n\t\t\t\t\t\t\tfloat phongHighlight = 0.25 * pow(saturate(-dot(reflectedLightDir, positionDir)), specularHardness / 2.0);\n\t\t\t\t\t\t\tfloat blinnHighlight = 4.0 * pow(saturate(dot(halfVector, normal)), specularHardness);\n\t\t\t\t\t\t\tfloat specularAngle = phongHighlight + pow(1.0 - saturate(-dot(positionDir, normal)), specularHardness / 12.0) * blinnHighlight;\n\t\t\t\t\t\t\tspecularLight += saturate(lightCosAngle * 20.0) * specularAngle * incomingLight;\t\n\n\t\t\t\t\t\t\t// Atmosphere shading.\n\t\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\t\tif (length(lightPositions[i]) > 0.0) { // don't use a camera light\n\t\t\t\t\t\t\t\t\tatmosphereColor += getAtmosphereColor(incomingLight, lightPositions[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdiffuseLight = saturate(diffuseLight);\n\n\t\t\t\t\t\t// If there's ambience, remove the direct light components.\n\t\t\t\t\t\tspecularLight *= vec3(1, 1, 1) - ambientLightColor;\n\n\t\t\t\t\t\t// Main Color map.\n\t\t\t\t\t\tvec4 colorPixel = vec4(1, 0, 1, 1);\n\t\t\t\t\t\t#ifdef colorTextureEnvironment\n\t\t\t\t\t\t\tcolorPixel = getColorFromEnvironmentMap(colorTexture, positionDir, normal);\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tcolorPixel = texture2D(colorTexture, vColorUV) * vec4(color, 1);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#ifdef baseColor\n\t\t\t\t\t\t\tcolorPixel = vec4(color, 1);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Apply diffuse shading.\n\t\t\t\t\t\t#ifndef colorMapEmmissive\n\t\t\t\t\t\t\tcolorPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tgl_FragColor = colorPixel;\n\n\t\t\t\t\t\t// Specular Map\n\t\t\t\t\t\tvec3 specularPixel = specularColor * specularIntensity;\n\t\t\t\t\t\t#ifdef specularMap\n\t\t\t\t\t\t\t#ifdef specularUVs\n\t\t\t\t\t\t\t\tvec2 specularUV = vSpecularUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 specularUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tspecularPixel = specularColor * texture2D(specularTexture, specularUV).r;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Apply specular Shading\n\t\t\t\t\t\tgl_FragColor.rgb += specularLight * specularPixel;\n\n\t\t\t\t\t\t// Night-Side Map\n\t\t\t\t\t\t#ifdef nightMap\n\t\t\t\t\t\t\tfloat ambientLightIntensity = min(1.0, length(ambientLightColor));\n\t\t\t\t\t\t\t#ifdef nightUVs\n\t\t\t\t\t\t\t\tvec2 nightUV = vNightUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 nightUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec4 nightPixel = texture2D(nightTexture, nightUV);\n\t\t\t\t\t\t\t#ifndef nightMapEmmissive\n\t\t\t\t\t\t\t\tnightPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tgl_FragColor = mix(gl_FragColor, nightPixel, 1.0 - min(1.0, length(ambientLightColor + diffuseLight)));//(1.0 - ambientLightIntensity) * saturate(0.5 - length(diffuseLight)));\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Decal Map\n\t\t\t\t\t\t#ifdef decalMap\n\t\t\t\t\t\t\t#ifdef decalUVs\n\t\t\t\t\t\t\t\tvec2 decalUV = vDecalUV;\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 decalUV = vColorUV;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tvec4 decalPixel = texture2D(decalTexture, decalUV);\n\t\t\t\t\t\t\t#ifndef decalMapEmmissive\n\t\t\t\t\t\t\t\tdecalPixel *= vec4(diffuseLight, 1.0);\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(gl_FragColor.rgb, decalPixel.rgb, decalPixel.a);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Atmosphere\n\t\t\t\t\t\t#ifdef atmosphere\n\t\t\t\t\t\t\tgl_FragColor.rgb = mix(gl_FragColor.rgb, atmosphereColor.rgb, clamp(atmosphereColor.a, 0.0, 1.0));\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}"}));const t=a._material.clone();for(let e=0;e<t.uniforms.shadowEntityPositions.value.length;e++)t.uniforms.shadowEntityPositions.value[e]=a._material.uniforms.shadowEntityPositions.value[e].clone();return s.ThreeJsHelper.setupLogDepthBuffering(t),t.extensions.derivatives=!0,t.needsUpdate=!0,t}}a._material=null,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{static get(){null===a._material&&(a._material=new s.THREE.ShaderMaterial({uniforms:{ambientLightColor:new s.THREE.Uniform(new s.THREE.Color),lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),environmentIntensity:new s.THREE.Uniform(1),gammaCorrectionFactor:new s.THREE.Uniform(1),entityPos:new s.THREE.Uniform(new s.THREE.Vector3),color:new s.THREE.Uniform(new s.THREE.Color(1,1,1)),metalness:new s.THREE.Uniform(0),roughness:new s.THREE.Uniform(0),emissiveColor:new s.THREE.Uniform(new s.THREE.Color(0,0,0)),colorTexture:new s.THREE.Uniform(null),roughnessTexture:new s.THREE.Uniform(null),metalnessTexture:new s.THREE.Uniform(null),normalTexture:new s.THREE.Uniform(null),emissiveTexture:new s.THREE.Uniform(null),numShadowEntities:new s.THREE.Uniform(0),shadowEntityPositions:new s.THREE.Uniform([new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3,new s.THREE.Vector3]),shadowEntityRadii:new s.THREE.Uniform([0,0,0,0,0]),shadowEntityRayleighAmount:new s.THREE.Uniform([0,0,0,0,0]),envTexture:new s.THREE.Uniform(null),maxMipLevel:new s.THREE.Uniform(0),dynEnvTexture:new s.THREE.Uniform(null),dynEnvFaceSize:new s.THREE.Uniform(0),normalScale:new s.THREE.Uniform(new s.THREE.Vector2)},vertexShader:"\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tattribute vec4 tangent;\n\t\t\t\t\t\tvarying vec4 localTangent;\n\t\t\t\t\t\tvarying vec3 localNormal;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 modelNormal;\n\t\t\t\t\t#endif\n\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\tvarying vec2 localUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tlocalTangent = tangent;\n\t\t\t\t\t\t\tlocalNormal = normal;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tmodelNormal = normalize((modelMatrix * vec4(normal, 0.)).xyz);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\t\tlocalUV = uv;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tcameraSpacePosition = (modelMatrix * vec4(position, 1.)).xyz;\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4(position, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\t#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\t\t\t\t\t#define EPSILON 1e-6\n\t\t\t\t\t#define PI 3.14159265359\n\t\t\t\t\t#define RECIPROCAL_PI 0.31830988618\n\t\t\t\t\t#define RECIPROCAL_PI2 0.15915494\n\t\t\t\t\t#ifndef saturate\n\t\t\t\t\t\t#define saturate(a) clamp( a, 0.0, 1.0 )\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat pow2( float x ) { return x*x; }\n\n\t\t\t\t\tuniform mat4 modelMatrix;\n\n\t\t\t\t\t// Lights\n\t\t\t\t\tuniform vec3 ambientLightColor;\n\t\t\t\t\tuniform vec3 lightPositions[5];\n\t\t\t\t\tuniform vec3 lightColors[5];\n\t\t\t\t\tuniform float lightRadii[5];\n\t\t\t\t\tuniform int numLights;\n\t\t\t\t\tuniform float environmentIntensity;\n\t\t\t\t\tuniform float gammaCorrectionFactor;\n\n\t\t\t\t\t// External lighting and camera.\n\t\t\t\t\tuniform vec3 entityPos;\n\n\t\t\t\t\t// Textures.\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tuniform sampler2D roughnessTexture;\n\t\t\t\t\tuniform sampler2D metalnessTexture;\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform sampler2D normalTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef emissiveMap\n\t\t\t\t\t\tuniform sampler2D emissiveTexture;\n\t\t\t\t\t#endif\n\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\tuniform sampler2D dynEnvTexture;\n\t\t\t\t\t\tuniform float dynEnvFaceSize;\n\t\t\t\t\t#elif defined( envMap )\n\t\t\t\t\t\t#ifdef envIsCube\n\t\t\t\t\t\t\tuniform samplerCube envTexture;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tuniform sampler2D envTexture;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tuniform vec2 normalScale;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Shadow Entities.\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tuniform int numShadowEntities;\n\t\t\t\t\t\tuniform vec3 shadowEntityPositions[5];\n\t\t\t\t\t\tuniform float shadowEntityRadii[5];\n\t\t\t\t\t\tuniform float shadowEntityRayleighAmount[5];\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// Scalars\n\t\t\t\t\tuniform vec3 color;\n\t\t\t\t\tuniform float roughness;\n\t\t\t\t\tuniform float metalness;\n\t\t\t\t\tuniform vec3 emissiveColor;\n\n\t\t\t\t\t// The varying attributes.\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvarying vec4 localTangent;\n\t\t\t\t\t\tvarying vec3 localNormal;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 modelNormal;\n\t\t\t\t\t#endif\n\t\t\t\t\t#if defined(normalMap) || defined(colorMap) || defined(roughnessMap) || defined(metalnessMap) || defined(emissiveMap)\n\t\t\t\t\t\tvarying vec2 localUV;\n\t\t\t\t\t#endif\n\t\t\t\t\tvarying vec3 cameraSpacePosition;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tstruct PhysicalMaterial {\n\t\t\t\t\t\tvec3 diffuseColor;\n\t\t\t\t\t\tvec3 specularColor;\n\t\t\t\t\t\tfloat specularRoughness;\n\t\t\t\t\t};\n\t\t\t\t\tstruct IncidentLight {\n\t\t\t\t\t\tvec3 color;\n\t\t\t\t\t\tvec3 direction;\n\t\t\t\t\t};\n\n\t\t\t\t\tstruct ReflectedLight {\n\t\t\t\t\t\tvec3 directDiffuse;\n\t\t\t\t\t\tvec3 directSpecular;\n\t\t\t\t\t\tvec3 indirectDiffuse;\n\t\t\t\t\t\tvec3 indirectSpecular;\n\t\t\t\t\t};\n\n\t\t\t\t\tstruct GeometricContext {\n\t\t\t\t\t\tvec3 normal;\n\t\t\t\t\t\tvec3 viewDir;\n\t\t\t\t\t};\n\n\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\tvec3 getNormalFromMap() {\n\t\t\t\t\t\t\tvec3 normal = normalize(localNormal);\n\t\t\t\t\t\t\tvec3 tangent = normalize(localTangent.xyz);\n\t\t\t\t\t\t\tvec3 bitangent = normalize(cross(normal, tangent));\n\t\t\t\t\t\t\tif (localTangent.w < 0.0) {\n\t\t\t\t\t\t\t\tbitangent *= -1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmat3 transform = mat3(tangent, bitangent, normal);\n\t\t\t\t\t\t\tvec3 normalFromMap = texture2D(normalTexture, localUV).rgb * 2.0 - 1.0;\n\t\t\t\t\t\t\tnormalFromMap.xy *= vec2(1, -1);\n\t\t\t\t\t\t\tnormalFromMap.xy *= normalScale;\n\t\t\t\t\t\t\treturn normalize(transform * normalFromMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\tvec3 applyRayleighScattering(vec3 color, float amount) {\n\t\t\t\t\t\t\tfloat value = (color.r + color.g + color.b);\n\t\t\t\t\t\t\tif (value > 0.0) {\n\t\t\t\t\t\t\t\tfloat rFactor = 1.0; // 6.3^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat gFactor = 1.602; // 5.6^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tfloat bFactor = 3.228; // 4.7^-4 / 6.3^-4\n\t\t\t\t\t\t\t\tcolor.r *= pow(rFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.g *= pow(gFactor, -amount);\n\t\t\t\t\t\t\t\tcolor.b *= pow(bFactor, -amount);\n\t\t\t\t\t\t\t\tcolor = value * color / (color.r + color.g + color.b);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvec3 getLightColorFromShadowEntities(vec3 lightColor, vec3 lightDir, vec3 lightPosition, float lightRadius, vec3 normal) {\n\t\t\t\t\t\t\tvec3 color = lightColor;\n\t\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\t\tif (i >= numShadowEntities) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvec3 origin = cameraSpacePosition - shadowEntityPositions[i];\n\t\t\t\t\t\t\t\tvec3 axis = normalize(shadowEntityPositions[i] - lightPosition);\n\t\t\t\t\t\t\t\tfloat originOffset = dot(origin, axis);\n\t\t\t\t\t\t\t\tif (originOffset > 0.0) {\n\t\t\t\t\t\t\t\t\tfloat e = length(origin - dot(origin, axis) * axis);\n\t\t\t\t\t\t\t\t\tfloat ld = dot(cameraSpacePosition - lightPosition, axis);\n\t\t\t\t\t\t\t\t\tfloat sd = dot(cameraSpacePosition - shadowEntityPositions[i], axis);\n\t\t\t\t\t\t\t\t\tfloat lr = lightRadius;\n\t\t\t\t\t\t\t\t\tfloat sr = shadowEntityRadii[i];\n\t\t\t\t\t\t\t\t\tfloat e0 = abs(sr * ld - lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat e1 = (sr * ld + lr * sd) / (ld - sd);\n\t\t\t\t\t\t\t\t\tfloat lightLevel = 0.0;\n\t\t\t\t\t\t\t\t\tif (e1 < 0.0 || sd < 0.0) { // light in front of shadow entity\n\t\t\t\t\t\t\t\t\t\tlightLevel = 1.0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (e0 < e1) {\n\t\t\t\t\t\t\t\t\t\tfloat m = 1.0 - saturate(pow(atan(sr / sd) / atan(lr / ld), 2.0));\n\t\t\t\t\t\t\t\t\t\tlightLevel = mix(m, 1.0, saturate(shadowEntityRayleighAmount[i] / 10.0 + (e - e0) / (e1 - e0))); // soft light\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tlightLevel = e < e0 ? 0.0 : 1.0; // 0 radius light.\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcolor = lightLevel * applyRayleighScattering(color, (1.0 - lightLevel) * shadowEntityRayleighAmount[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn color;\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\t\t\t\t\t\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\t\t\t\t\t}\n\n\t\t\t\t\t// These use optimizations found in https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf.\n\n\t\t\t\t\t// The Smith-method geometry function. Calculates the ratio of incident light that is blocked by the microfacets to never reach the viewer.\n\t\t\t\t\t// alpha is the roughness^2\n\t\t\t\t\t// dotNL is the normal · the light vector.\n\t\t\t\t\t// dotNV is the normal · the view vector.\n\t\t\t\t\tfloat G_GGX_SmithCorrelated( float alpha, float dotNL, float dotNV ) {\n\t\t\t\t\t\tfloat a2 = pow2( alpha );\n\t\t\t\t\t\t// Get the light direction part of the geometry function.\n\t\t\t\t\t\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\t\t\t\t\t\t// Get the view direction part of the geometry function.\n\t\t\t\t\t\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\t\t\t\t\t\t// It would normally be be gv * gl, but this is using an optimization by Heitz (2014),\n\t\t\t\t\t\t// including the BRDF denominator, simplifying the results.\n\t\t\t\t\t\treturn 0.5 / max( gv + gl, EPSILON );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The Trowbridge-Reitz normal distribution function. Calculates the relative surface area microfacets exactly aligned to the halfway vector, how \"smooth\" the surface is.\n\t\t\t\t\t// alpha is the roughness^2.\n\t\t\t\t\t// dotNH is the normal · the halfway vector.\n\t\t\t\t\tfloat D_GGX( float alpha, float dotNH ) {\n\t\t\t\t\t\tfloat a2 = pow2( alpha );\n\t\t\t\t\t\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\t\t\t\t\t\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The Schlick approximation for the Fresnel equation.\n\t\t\t\t\t// Since metallic and non-metallic surfaces have different equations, this function combines the two by approximation.\n\t\t\t\t\t// specularColor is the specular color at normal incidence.\n\t\t\t\t\t// dotLH is the light direction · the halfway vector.\n\t\t\t\t\tvec3 F_Schlick( vec3 specularColor, float dotLH ) {\n\t\t\t\t\t\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\t\t\t\t\t\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\t\t\t\t\t}\n\n\t\t\t\t\t// The specular part of the main BRDF function that describes the weighting function for the sum of every incoming light.\n\t\t\t\t\t// It uses the Cook-Torrance model.\n\t\t\t\t\tvec3 BRDF_Specular_GGX( IncidentLight incidentLight, GeometricContext geometry, vec3 specularColor, float roughness ) {\n\t\t\t\t\t\tfloat alpha = pow2( roughness );\n\t\t\t\t\t\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\t\t\t\t\t\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\t\t\t\t\t\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\t\t\t\t\t\tvec3 F = F_Schlick( specularColor, dotLH );\n\t\t\t\t\t\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\t\t\t\t\tfloat D = D_GGX( alpha, dotNH );\n\t\t\t\t\t\treturn F * ( G * D );\n\t\t\t\t\t}\n\n\t\t\t\t\t// The diffuse part of the main BRDF function.\n\t\t\t\t\tvec3 BRDF_Diffuse_Lambert( vec3 diffuseColor ) {\n\t\t\t\t\t\treturn RECIPROCAL_PI * diffuseColor;\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat BlinnExponentToGGXRoughness( float blinnExponent ) {\n\t\t\t\t\t\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat GGXRoughnessToBlinnExponent( float ggxRoughness ) {\n\t\t\t\t\t\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n\t\t\t\t\t}\n\n\t\t\t\t\tvec2 integrateSpecularBRDF( float dotNV, float roughness ) {\n\t\t\t\t\t\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\t\t\t\t\t\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\t\t\t\t\t\tvec4 r = roughness * c0 + c1;\n\t\t\t\t\t\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\t\t\t\t\t\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\t\t\t\t\t}\n\n\t\t\t\t\tvec3 BRDF_Specular_GGX_Environment( GeometricContext geometry, vec3 specularColor, float roughness ) {\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\t\t\t\t\t\treturn specularColor * brdf.x + brdf.y;\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid BRDF_Specular_Multiscattering_Environment( GeometricContext geometry, vec3 specularColor, float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\t\t\t\t\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\t\t\t\t\tvec3 F = F_Schlick( specularColor, dotNV );\n\t\t\t\t\t\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\t\t\t\t\t\tvec3 FssEss = F * brdf.x + brdf.y;\n\t\t\t\t\t\tfloat Ess = brdf.x + brdf.y;\n\t\t\t\t\t\tfloat Ems = 1.0 - Ess;\n\t\t\t\t\t\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\t\t\t\t\t\tsingleScatter += FssEss;\n\t\t\t\t\t\tmultiScatter += Fms * Ems;\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat opacity = 1.0;\n\n\t\t\t\t\tuniform float reflectivity;\n\t\t\t\t\tuniform int maxMipLevel;\n\n\t\t\t\t\t// Returns the radiance: the incoming light * the cos(light angle to the normal)\n\t\t\t\t\tvec3 getIncomingLight( IncidentLight directLight, GeometricContext geometry) {\n\t\t\t\t\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\t\t\t\t\treturn (dotNL * directLight.color);\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat getSpecularMIPLevel( float blinnShininessExponent, int maxMIPLevel ) {\n\t\t\t\t\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\t\t\t\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\t\t\t\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t\t\t\t\t}\n\n\t\t\t\t\t#ifdef envIsCubeUV\n\t\t\t\t\t\tuniform int inputEncoding;\n\t\t\t\t\t\tuniform int outputEncoding;\n\t\t\t\t\t\tvec4 inputTexelToLinear( vec4 value ) {\n\t\t\t\t\t\t\tif ( inputEncoding == 0 ) {\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t} else if ( inputEncoding == 1 ) {\n\t\t\t\t\t\t\t\treturn sRGBToLinear( value );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 2 ) {\n\t\t\t\t\t\t\t\treturn RGBEToLinear( value );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 3 ) {\n\t\t\t\t\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 4 ) {\n\t\t\t\t\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\t\t\t\t\t\t\t} else if ( inputEncoding == 5 ) {\n\t\t\t\t\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn GammaToLinear( value, 2.2 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\t\t\t\t\t\t\treturn inputTexelToLinear( color );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// These defines must match with PMREMGenerator\n\t\t\t\t\t\t#define cubeUV_maxMipLevel 8.0\n\t\t\t\t\t\t#define cubeUV_minMipLevel 4.0\n\t\t\t\t\t\t#define cubeUV_maxTileSize 256.0\n\t\t\t\t\t\t#define cubeUV_minTileSize 16.0\n\t\t\t\t\t\t// These shader functions convert between the UV coordinates of a single face of\n\t\t\t\t\t\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t\t\t\t\t\t// sampling a textureCube (not generally normalized ).\n\t\t\t\t\t\tfloat getFace( vec3 direction ) {\n\t\t\t\t\t\t\tvec3 absDirection = abs( direction );\n\t\t\t\t\t\t\tfloat face = - 1.0;\n\t\t\t\t\t\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\t\t\t\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn face;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// RH coordinate system; PMREM face-indexing convention\n\t\t\t\t\t\tvec2 getUV( vec3 direction, float face ) {\n\t\t\t\t\t\t\tvec2 uv;\n\t\t\t\t\t\t\tif ( face == 0.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\t\t\t\t\t\t\t} else if ( face == 1.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\t\t\t\t\t\t\t} else if ( face == 2.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\t\t\t\t\t\t\t} else if ( face == 3.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\t\t\t\t\t\t\t} else if ( face == 4.0 ) {\n\t\t\t\t\t\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn 0.5 * ( uv + 1.0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec3 bilinearCubeUV( sampler2D environmentMap, vec3 direction, float mipInt ) {\n\t\t\t\t\t\t\tfloat face = getFace( direction );\n\t\t\t\t\t\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\t\t\t\t\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\t\t\t\t\t\tfloat faceSize = exp2( mipInt );\n\t\t\t\t\t\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\t\t\t\t\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\t\t\t\t\t\tvec2 f = fract( uv );\n\t\t\t\t\t\t\tuv += 0.5 - f;\n\t\t\t\t\t\t\tif ( face > 2.0 ) {\n\t\t\t\t\t\t\t\tuv.y += faceSize;\n\t\t\t\t\t\t\t\tface -= 3.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuv.x += face * faceSize;\n\t\t\t\t\t\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\t\t\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\t\t\t\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\t\t\t\t\t\tuv *= texelSize;\n\t\t\t\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tuv.x += texelSize;\n\t\t\t\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tuv.y += texelSize;\n\t\t\t\t\t\t\tvec3 br = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tuv.x -= texelSize;\n\t\t\t\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D( environmentMap, uv ) ).rgb;\n\t\t\t\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\t\t\t\treturn mix( tm, bm, f.y );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#define r0 1.0\n\t\t\t\t\t\t#define v0 0.339\n\t\t\t\t\t\t#define m0 - 2.0\n\t\t\t\t\t\t#define r1 0.8\n\t\t\t\t\t\t#define v1 0.276\n\t\t\t\t\t\t#define m1 - 1.0\n\t\t\t\t\t\t#define r4 0.4\n\t\t\t\t\t\t#define v4 0.046\n\t\t\t\t\t\t#define m4 2.0\n\t\t\t\t\t\t#define r5 0.305\n\t\t\t\t\t\t#define v5 0.016\n\t\t\t\t\t\t#define m5 3.0\n\t\t\t\t\t\t#define r6 0.21\n\t\t\t\t\t\t#define v6 0.0038\n\t\t\t\t\t\t#define m6 4.0\n\t\t\t\t\t\tfloat roughnessToMip( float roughness ) {\n\t\t\t\t\t\t\tfloat mip = 0.0;\n\t\t\t\t\t\t\tif ( roughness >= r1 ) {\n\t\t\t\t\t\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t\t\t\t\t\t} else if ( roughness >= r4 ) {\n\t\t\t\t\t\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t\t\t\t\t\t} else if ( roughness >= r5 ) {\n\t\t\t\t\t\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t\t\t\t\t\t} else if ( roughness >= r6 ) {\n\t\t\t\t\t\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn mip;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvec4 textureCubeUV( sampler2D environmentMap, vec3 sampleDir, float roughness ) {\n\t\t\t\t\t\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\t\t\t\t\t\tfloat mipF = fract( mip );\n\t\t\t\t\t\t\tfloat mipInt = floor( mip );\n\t\t\t\t\t\t\tvec3 color0 = bilinearCubeUV( environmentMap, sampleDir, mipInt );\n\t\t\t\t\t\t\tif ( mipF == 0.0 ) {\n\t\t\t\t\t\t\t\treturn vec4( color0, 1.0 );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvec3 color1 = bilinearCubeUV( environmentMap, sampleDir, mipInt + 1.0 );\n\t\t\t\t\t\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t// Converts an XY in cylindrical space to a face (z) with coordinates within that face (xy).\n\t\t\t\t\t\tvec3 xyzToUvFace(vec3 xyz, float pixelSize) {\n\t\t\t\t\t\t\t// Figure out which basis we're using.\n\t\t\t\t\t\t\tvec3 basis[3];\n\t\t\t\t\t\t\tfloat face;\n\t\t\t\t\t\t\tif (xyz.x * xyz.x >= xyz.y * xyz.y && xyz.x * xyz.x >= xyz.z * xyz.z) {\n\t\t\t\t\t\t\t\tif (xyz.x >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(1, 0, 0);\n\t\t\t\t\t\t\t\t\tface = 0.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, -1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(-1, 0, 0);\n\t\t\t\t\t\t\t\t\tface = 2.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyz.y * xyz.y >= xyz.x * xyz.x && xyz.y * xyz.y >= xyz.z * xyz.z) {\n\t\t\t\t\t\t\t\tif (xyz.y >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(-1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, 1, 0);\n\t\t\t\t\t\t\t\t\tface = 1.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, -1, 0);\n\t\t\t\t\t\t\t\t\tface = 3.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tif (xyz.z >= 0.0) {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(-1, 0, 0); basis[2] = vec3(0, 0, 1);\n\t\t\t\t\t\t\t\t\tface = 4.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(1, 0, 0); basis[2] = vec3(0, 0, -1);\n\t\t\t\t\t\t\t\t\tface = 5.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Convert into the uv basis from the xyz basis.\n\t\t\t\t\t\t\tfloat z = basis[2].x * xyz.x + basis[2].y * xyz.y + basis[2].z * xyz.z;\n\t\t\t\t\t\t\tif (z < 0.0) {\n\t\t\t\t\t\t\t\tz = 1.0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvec2 uv = vec2(\n\t\t\t\t\t\t\t\t(basis[0].x * xyz.x + basis[0].y * xyz.y + basis[0].z * xyz.z) / z,\n\t\t\t\t\t\t\t\t(basis[1].x * xyz.x + basis[1].y * xyz.y + basis[1].z * xyz.z) / z);\n\n\t\t\t\t\t\t\t// Convert from -1 to +1, to 0 to 1.\n\t\t\t\t\t\t\tuv = 0.5 * (uv + vec2(1.0));\n\n\t\t\t\t\t\t\t// Convert to pixel-space.\n\t\t\t\t\t\t\tuv *= pixelSize;\n\n\t\t\t\t\t\t\t// Shrink to ignore 1 pixel borders.\n\t\t\t\t\t\t\tuv.x = (pixelSize - 2.0) / pixelSize * uv.x + 1.0;\n\t\t\t\t\t\t\tuv.y = (pixelSize - 2.0) / pixelSize * uv.y + 1.0;\n\n\t\t\t\t\t\t\t// Convert back to unit-space.\n\t\t\t\t\t\t\tuv /= pixelSize;\n\n\t\t\t\t\t\t\treturn vec3(uv, face);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Gets the dynamic environmental lighting given the outward direction.\n\t\t\t\t\t\tvec3 getEnvLight(vec3 direction, float roughness) {\n\t\t\t\t\t\t\t// Get the mip levels.\n\t\t\t\t\t\t\tfloat mipLevel = pow(roughness, 0.25) * (log2(dynEnvFaceSize) - 2.0);\n\t\t\t\t\t\t\tfloat mipLevel0 = floor(mipLevel);\n\t\t\t\t\t\t\tfloat mipLevel1 = floor(mipLevel) + 1.0;\n\t\t\t\t\t\t\tfloat mipLevelU = mipLevel - mipLevel0;\n\t\t\t\t\t\t\tfloat mipSizeX0 = pow(2.0, -mipLevel0);\n\t\t\t\t\t\t\tfloat mipOffsetY0 = 1.0 - pow(2.0, -mipLevel0);\n\t\t\t\t\t\t\tfloat mipSizeX1 = pow(2.0, -mipLevel1);\n\t\t\t\t\t\t\tfloat mipOffsetY1 = 1.0 - pow(2.0, -mipLevel1);\n\t\t\t\t\t\t\t// Get UV within a mip of cube faces.\n\t\t\t\t\t\t\tvec3 uvFace0 = xyzToUvFace(direction, dynEnvFaceSize * mipSizeX0);\n\t\t\t\t\t\t\tvec3 uvFace1 = xyzToUvFace(direction, dynEnvFaceSize * mipSizeX1);\n\t\t\t\t\t\t\tvec2 faceOffset = vec2(mod(uvFace0.z, 3.0) / 3.0, floor(uvFace0.z / 3.0) / 2.0);\n\t\t\t\t\t\t\tvec2 uvInMip0 = vec2(faceOffset.x + uvFace0.x / 3.0, faceOffset.y + uvFace0.y / 2.0);\n\t\t\t\t\t\t\tvec2 uvInMip1 = vec2(faceOffset.x + uvFace1.x / 3.0, faceOffset.y + uvFace1.y / 2.0);\n\t\t\t\t\t\t\t// Get the UVs within the textures.\n\t\t\t\t\t\t\tvec2 uv0 = vec2(uvInMip0.x * mipSizeX0 * 0.75, 0.5 * uvInMip0.y * mipSizeX0 + mipOffsetY0);\n\t\t\t\t\t\t\tvec2 uv1 = vec2(uvInMip1.x * mipSizeX1 * 0.75, 0.5 * uvInMip1.y * mipSizeX1 + mipOffsetY1);\n\t\t\t\t\t\t\tvec3 color0 = texture2D(dynEnvTexture, uv0).rgb;  // Not using sRGB here, since the phong shader (most used in reflections) outputs linear\n\t\t\t\t\t\t\tvec3 color1 = texture2D(dynEnvTexture, uv1).rgb;\n\t\t\t\t\t\t\treturn mix(color0, color1, mipLevelU) * environmentIntensity * ((PI - 1.0) * roughness + 1.0);\n\t\t\t\t\t\t}\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec3 getLightProbeIndirectRadiance( GeometricContext geometry, float blinnShininessExponent, int maxMIPLevel ) {\n\t\t\t\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t\t\t\t\t#if defined( envMap )\n\t\t\t\t\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\t\t\t\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t\t\t\t\t\tvec3 queryReflectVec = vec3( reflectVec.x, reflectVec.yz );\n\t\t\t\t\t\t\t#ifdef envIsCube\n\t\t\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(textureCubeLodEXT( envTexture, queryReflectVec, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(textureCube( envTexture, queryReflectVec, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#elif defined( envIsCubeUV )\n\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(textureCubeUV( envTexture, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent )));\n\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tvec2 sampleUV;\n\t\t\t\t\t\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\t\t\t\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(texture2DLodEXT( envTexture, sampleUV, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\tvec4 envMapColor = sRGBToLinear(texture2D( envTexture, sampleUV, specularMIPLevel ));\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\treturn envMapColor.rgb * environmentIntensity;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\treturn vec3(0, 0, 0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}\n\n\t\t\t\t\t// Given the directLight, accumulates onto the reflectedLight the irradiance as the BRDF function.\n\t\t\t\t\tvoid RE_Direct_Physical( IncidentLight directLight, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getIncomingLight( directLight, geometry );\n\t\t\t\t\t\tirradiance *= PI;\n\t\t\t\t\t\tfloat clearCoatDHR = 0.0;\n\t\t\t\t\t\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\t\t\t\t\t\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid RE_IndirectDiffuse_Physical( vec3 irradiance, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid RE_IndirectSpecular_Physical( vec3 radiance, vec3 irradiance, vec3 clearCoatRadiance, GeometricContext geometry, PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t\t\t\t\t\tfloat clearCoatDHR = 0.0;\n\t\t\t\t\t\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t\t\t\t\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t\t\t\t\t}\n\n\t\t\t\t\t#define RE_Direct RE_Direct_Physical\n\t\t\t\t\t#define Material_BlinnShininessExponent( material ) GGXRoughnessToBlinnExponent( material.specularRoughness )\n\t\t\t\t\t#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical\n\t\t\t\t\t#define RE_IndirectSpecular RE_IndirectSpecular_Physical\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tvec4 diffuseColor = vec4( color, 1.0 );\n\t\t\t\t\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t\t\t\t\t\t#ifdef colorMap\n\t\t\t\t\t\t\tvec4 texelColor = sRGBToLinear(texture2D(colorTexture, localUV));\n\t\t\t\t\t\t\tdiffuseColor *= texelColor;\n\t\t\t\t\t\t\topacity = texelColor.a;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// PBR variables\n\t\t\t\t\t\tfloat roughnessFactor;\n\t\t\t\t\t\tfloat metalnessFactor;\n\n\t\t\t\t\t\troughnessFactor = roughness;\n\t\t\t\t\t\t#ifdef roughnessMap\n\t\t\t\t\t\t\troughnessFactor *= texture2D( roughnessTexture, localUV ).g;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tmetalnessFactor = metalness;\n\t\t\t\t\t\t#ifdef metalnessMap\n\t\t\t\t\t\t\tmetalnessFactor *= texture2D( metalnessTexture, localUV ).b;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tPhysicalMaterial material;\n\t\t\t\t\t\tmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\t\t\t\t\t\tmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n\t\t\t\t\t\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n\t\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\t\tgeometry.viewDir = -normalize(cameraSpacePosition);\n\t\t\t\t\t\t#ifdef normalMap\n\t\t\t\t\t\t\tgeometry.normal = normalize((modelMatrix * vec4(getNormalFromMap(), 0.)).xyz);\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tgeometry.normal = modelNormal;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Env Light\n\t\t\t\t\t\tvec3 irradiance = ambientLightColor;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\tirradiance += getEnvLight(geometry.normal, 1.0);\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec3 radiance = ambientLightColor / 2.0;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\tradiance += getEnvLight(reflect(-geometry.viewDir, geometry.normal), material.specularRoughness);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Add emissivity.\n\t\t\t\t\t\tvec3 totalEmissiveRadiance = vec3(0, 0, 0);\n\t\t\t\t\t\t#ifdef emissiveMap\n\t\t\t\t\t\t\ttotalEmissiveRadiance = emissiveColor * sRGBToLinear(texture2D(emissiveTexture, localUV)).rgb;\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// Add direct radiance.\n\t\t\t\t\t\tvec3 totalDirectIrradiance = ambientLightColor / 2.0;\n\t\t\t\t\t\t#ifdef dynEnvMap\n\t\t\t\t\t\t\ttotalDirectIrradiance += getEnvLight(reflect(-geometry.viewDir, geometry.normal), material.specularRoughness);\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// For each light,\n\t\t\t\t\t\tfor (int i = 0; i < 5; i++) {\n\t\t\t\t\t\t\tif (i >= numLights) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\t\t\tdirectLight.color = lightColors[i];\n\t\t\t\t\t\t\tdirectLight.direction = -normalize(cameraSpacePosition - lightPositions[i]);\n\t\t\t\t\t\t\t#ifdef shadowEntities\n\t\t\t\t\t\t\t\tdirectLight.color = getLightColorFromShadowEntities(directLight.color, directLight.direction, lightPositions[i], lightRadii[i], geometry.normal);\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t\tRE_Direct(directLight, geometry, material, reflectedLight);\n\n\t\t\t\t\t\t\tradiance += getLightProbeIndirectRadiance(geometry, Material_BlinnShininessExponent(material), maxMipLevel);\n\t\t\t\t\t\t\tRE_IndirectDiffuse(irradiance, geometry, material, reflectedLight);\n\t\t\t\t\t\t\tRE_IndirectSpecular(radiance, irradiance, vec3(0.0), geometry, material, reflectedLight);\n\n\t\t\t\t\t\t\t// Modify env light by total incoming light.\n\t\t\t\t\t\t\ttotalDirectIrradiance += getIncomingLight(directLight, geometry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multiply in the direct irradiance.\n\t\t\t\t\t\treflectedLight.indirectSpecular *= totalDirectIrradiance;\n\n\t\t\t\t\t\t// If there's ambience, remove the direct light components.\n\t\t\t\t\t\treflectedLight.directDiffuse *= vec3(1, 1, 1) - ambientLightColor;\n\t\t\t\t\t\treflectedLight.directSpecular *= vec3(1, 1, 1) - ambientLightColor;\n\n\t\t\t\t\t\t// Add the reflected light to the outgoing light.\n\t\t\t\t\t\tvec3 outgoingLight = totalEmissiveRadiance + reflectedLight.directDiffuse + reflectedLight.directSpecular + reflectedLight.indirectDiffuse + reflectedLight.indirectSpecular;\n\n\t\t\t\t\t\t// Set the frag color based on the total outgoing light.\n\t\t\t\t\t\tgl_FragColor = vec4( outgoingLight, opacity );\n\n\t\t\t\t\t\t// Gamma correction\n\t\t\t\t\t\tgl_FragColor = vec4( pow( abs(gl_FragColor.rgb), vec3( 1.0 / gammaCorrectionFactor ) ), gl_FragColor.a );\n\n\t\t\t\t\t\t// Convert to sRGB.\n\t\t\t\t\t\tgl_FragColor = LinearTosRGB(gl_FragColor);\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}"}));const t=a._material.clone();for(let e=0;e<t.uniforms.shadowEntityPositions.value.length;e++)t.uniforms.shadowEntityPositions.value[e]=a._material.uniforms.shadowEntityPositions.value[e].clone();return s.ThreeJsHelper.setupLogDepthBuffering(t),s.Capabilities.hasGLExtension("EXT_shader_texture_lod")&&(t.extensions.shaderTextureLOD=!0),t.extensions.derivatives=!0,t.needsUpdate=!0,t}}a._material=null,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{static setLightSourceUniforms(t,e,i){const a=e.getScene(),n=s.Color.pool.get();for(let e=0,s=a.getNumLightSources();e<Math.min(s,5);e++){const s=a.getLightSource(e);if(null!==s){const a=s.getEntity().getCameraSpacePosition(i),r=1;n.mult(s.getColor(),r);const o=null===s.getEntity().getComponentByType("camera")?s.getEntity().getOcclusionRadius():Number.NaN;for(let i=0,s=t.length;i<s;i++)t[i].uniforms.lightPositions.value[e].set(a.x,a.y,a.z),t[i].uniforms.lightColors.value[e].set(n.r,n.g,n.b),t[i].uniforms.lightRadii.value[e]=o}}for(let e=0,i=t.length;e<i;e++)t[e].uniforms.numLights.value=a.getNumLightSources();s.Color.pool.release(n)}static setUniforms(t,e,i,n,r,o){const l=i.getScene().getEngine().getTime(),c=i.getScene().getAmbientLightColor();a.setLightSourceUniforms(t,i,e);for(let a=0,h=t.length;a<h;a++){const h=t[a],d=h.uniforms;if(s.Capabilities.hasFragDepth()||(d.nearDistance.value=e.getAutoNearDistance(),d.midDistance.value=e.getAutoMidDistance()),h instanceof s.THREE.RawShaderMaterial)void 0!==d.time&&(d.time.value=s.MathUtils.wrap(l,0,3600));else{const r=i.getCameraSpacePosition(e);if(d.entityPos.value.set(r.x,r.y,r.z),d.ambientLightColor.value.setRGB(c.r,c.g,c.b),void 0!==n&&n.length>0){let t=0;for(let i=0;i<n.length;i++){const s=n[i];if("string"!=typeof s){const i=s.getCameraSpacePosition(e);d.shadowEntityPositions.value[t].set(i.x,i.y,i.z),d.shadowEntityRadii.value[t]=s.getOcclusionRadius();const a=s.get("atmosphere");d.shadowEntityRayleighAmount.value[t]=null!==a?5*a.getSunsetIntensity():0,t+=1}else d.shadowEntityRadii.value[t]=0}d.numShadowEntities.value=t}if(t[a].defines.shadowRings){const t=i.get("rings");if(null!==t){const e=s.Vector3.pool.get();i.getOrientation().getAxis(e,2),d.shadowRingsInnerRadius.value=t.getInnerRadius(),d.shadowRingsOuterRadius.value=t.getOuterRadius(),d.shadowRingsTexture.value=t.getTopTexture(),d.shadowRingsNormal.value.set(e.x,e.y,e.z),s.Vector3.pool.release(e)}}}if(null===r||"loaded"!==r.getLoadState()||r.isExcludedFromCamera(e)||void 0===d.atmospherePosition)!0===h.defines.atmosphere&&(delete h.defines.atmosphere,h.needsUpdate=!0);else{const t=r.getSpheroid(),i=r.getEntity().getCameraSpacePosition(e),s=r.getEntity().getOrientation(),a=r.getColor(),n=r.getSunsetColor();d.atmospherePosition.value.set(i.x,i.y,i.z),d.atmosphereOrientation.value.set(s.x,s.y,s.z,s.w),null!==t?(d.atmosphereEquatorialRadius.value=t.getEquatorialRadius(),d.atmospherePolarRadius.value=t.getPolarRadius()):(d.atmosphereEquatorialRadius.value=0,d.atmospherePolarRadius.value=0),d.atmosphereDensity.value=r.getDensity(),d.atmosphereScaleHeight.value=r.getScaleHeight(),d.atmosphereEmissivity.value=r.getEmissivity(),d.atmosphereColor.value.set(a.r,a.g,a.b),d.atmosphereSunsetColor.value.set(n.r,n.g,n.b),d.atmosphereSunsetIntensity.value=r.getSunsetIntensity(),d.atmosphereGroundIsSpheroid.value=o?1:0,void 0===h.defines.atmosphere&&(h.defines.atmosphere=!0,h.needsUpdate=!0)}}}}a.get=s.MaterialUtilsPhong.get,a.getPBR=s.MaterialUtilsStandard.get,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class{static fix(t,e){const i=s.Capabilities.isWebGL2(),a=s.Capabilities.hasFragDepth();return i?"vertex"===e?"#version 300 es\n\t\t\t\t\t#define attribute in\n\t\t\t\t\t#define varying out\n\t\t\t\t\t#define texture2D texture\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\t\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t\t"+t:"#version 300 es\n\t\t\t\t\t#define varying in\n\t\t\t\t\tout highp vec4 pc_fragColor;\n\t\t\t\t\t#define gl_FragColor pc_fragColor\n\t\t\t\t\t#define gl_FragDepthEXT gl_FragDepth\n\t\t\t\t\t#define texture2D texture\n\t\t\t\t\t#define textureCube texture\n\t\t\t\t\t#define texture2DProj textureProj\n\t\t\t\t\t#define texture2DLodEXT textureLod\n\t\t\t\t\t#define texture2DProjLodEXT textureProjLod\n\t\t\t\t\t#define textureCubeLodEXT textureLod\n\t\t\t\t\t#define texture2DGradEXT textureGrad\n\t\t\t\t\t#define texture2DProjGradEXT textureProjGrad\n\t\t\t\t\t#define textureCubeGradEXT textureGrad\n\t\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t\tprecision highp float;\n\t\t\t\t\tprecision highp int;\n\t\t\t\t\t"+t:(a?"\n\t\t\t\t#extension GL_EXT_frag_depth : enable\n\t\t\t\t#define L_EXT_frag_depth true\n\t\t\t\t":"")+"\n\t\t\t\tprecision highp float;\n\t\t\t\tprecision highp int;\n\t\t\t\t"+t}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class{constructor(t){this._component=t,this._relativeToEntityOrientation=!0,this._offsetArray=new Float32Array(0),this._colorArray=new Float32Array(0),this._scaleArray=new Float32Array(0),this._threeJsGeometry=null,this._threeJsMaterial=null,this._threeJsObject=null,this._threeJsGeometry=new s.THREE.InstancedBufferGeometry,this._threeJsGeometry.setAttribute("position",new s.THREE.BufferAttribute(new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1]),3)),this._threeJsGeometry.setIndex(new s.THREE.BufferAttribute(new Uint16Array([0,1,2,2,3,0]),1)),this._threeJsGeometry.setAttribute("offset",new s.THREE.InstancedBufferAttribute(this._offsetArray,3)),this._threeJsGeometry.setAttribute("color",new s.THREE.InstancedBufferAttribute(this._colorArray,4)),this._threeJsGeometry.setAttribute("scale",new s.THREE.InstancedBufferAttribute(this._scaleArray,1)),this._threeJsMaterial=this._component.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("sprite_particles"),this._threeJsObject=s.ThreeJsHelper.createMeshObjectGivenGeometry(t,this._threeJsMaterial,this._threeJsGeometry)}getThreeJsObject(){return this._threeJsObject}getThreeJsMaterial(){return this._threeJsMaterial}setParticleOffsets(t){this._setAttribute("offset",t,3)}setParticleColors(t){this._setAttribute("color",t,4)}setParticleScales(t){this._setAttribute("scale",t,1)}getRelativeToEntityOrientation(){return this._relativeToEntityOrientation}setRelativeToEntityOrientation(t){this._relativeToEntityOrientation=t}prepareForRender(t){s.ThreeJsHelper.setPositionToEntity(this._threeJsObject,this._component.getEntity(),t),this._relativeToEntityOrientation&&s.ThreeJsHelper.setOrientationToEntity(this._threeJsObject,this._component.getEntity())}_setAttribute(t,e,i){let a=this._threeJsGeometry.getAttribute(t);a instanceof s.THREE.InstancedBufferAttribute&&a.count!==e.length/i&&(this._offsetArray=new Float32Array(e.length/i*3),this._colorArray=new Float32Array(e.length/i*4),this._scaleArray=new Float32Array(e.length/i*1),this._threeJsGeometry.instanceCount=e.length/i,this._threeJsGeometry.setAttribute("offset",new s.THREE.InstancedBufferAttribute(this._offsetArray,3)),this._threeJsGeometry.setAttribute("color",new s.THREE.InstancedBufferAttribute(this._colorArray,4)),this._threeJsGeometry.setAttribute("scale",new s.THREE.InstancedBufferAttribute(this._scaleArray,1))),(a=this._threeJsGeometry.getAttribute(t))instanceof s.THREE.InstancedBufferAttribute&&(a.copyArray(e),a.needsUpdate=!0)}}},function(t,e,i){"use strict";i.r(e);i(36);e.default=class{constructor(t){this._engine=t.getEntity().getScene().getEngine(),this._component=t,this._uniform=null,this._url="",this._sizes=[],this._currentSize=0,this._forcedSize=void 0,this._useCompressed=!1,this._loadedPromise=Promise.resolve(),this._loading=!1}getUrl(){return this._url}setUrl(t){this._url=t,this._currentSize=0}getUniform(){return this._uniform}setUniform(t){this._uniform=t,this._currentSize=0}getSizes(){return this._sizes.slice()}setSizes(t){this._sizes=t.slice(),this._currentSize=0}getCurrentSize(){return this._currentSize}getForcedSize(){return this._forcedSize}setForcedSize(t){this._forcedSize=t}getUseCompression(){return this._useCompression}setUseCompression(t){this._useCompression=t,this._currentSize=0}getLoadedPromise(){return this._loadedPromise}update(){if(this._loading||null===this._uniform)return;if(""===this._url||0===this._sizes.length||"loaded"!==this._component.getLoadState()&&void 0===this._forcedSize)return void(null!==this._uniform.value&&(this._uniform.value.dispose(),this._uniform.value=null,this._currentSize=0));let t=this._sizes[0];t=void 0!==this._forcedSize?this._forcedSize:this._component.getEntity().getGreatestPixelSpaceExtentsRadius();let e=0;for(;e+1<this._sizes.length&&this._sizes[e]<t&&this._sizes[e+1]<=this._engine.getConfig().getValue("maxTextureSize");)e++;this._currentSize!==this._sizes[e]&&(this._currentSize=this._sizes[e],this._loadTexture(this._currentSize))}_loadTexture(t){const e=this._url.replace("$SIZE",t.toString());this._loading=!0;const i=this._useCompression?this._engine.getTextureLoaderCompressed():this._engine.getTextureLoader();this._loadedPromise=i.loadIntoUniform(this._uniform,e,!0).then(()=>{this._loading=!1}).catch(t=>{throw Error(t)})}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{static createGeometry(t,e){const i=new s.THREE.BufferGeometry;if(e){let e=0;for(let i=0;i<t.length;i++)e+=t[i].dimensions;const a=new s.THREE.InterleavedBuffer(new Float32Array(0),e);let n=0;for(let e=0;e<t.length;e++)i.setAttribute(t[e].name,new s.THREE.InterleavedBufferAttribute(a,t[e].dimensions,n)),n+=t[e].dimensions}else for(let e=0;e<t.length;e++)i.setAttribute(t[e].name,new s.THREE.BufferAttribute(new Float32Array(0),t[e].dimensions));return i.setIndex(new s.THREE.BufferAttribute(new Uint16Array(0),1)),i}static setupObject(t,e){e.name=t+"."+Math.floor(1e4*Math.random()),e.matrixAutoUpdate=!1,e.frustumCulled=!1,e.visible=!1,t.getEntity().getScene().getThreeJsScene().add(e)}static createMeshObjectGivenGeometry(t,e,i){const a=new s.THREE.Mesh(i,e);return this.setupObject(t,a),a}static createMeshObject(t,e,i,s){const a=this.createGeometry(i,s);return this.createMeshObjectGivenGeometry(t,e,a)}static destroyGeometry(t){t.dispose()}static destroyObject(t){for(;t.children.length>0;)this.destroyObject(t.children[t.children.length-1]);null!==t.parent&&t.parent.remove(t),t instanceof s.THREE.Mesh&&this.destroyGeometry(t.geometry)}static destroyMaterial(t){const e=t.uniforms;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t].value&&void 0!==e[t].value.dispose&&e[t].value.dispose();t.dispose()}static destroyAllObjectsAndMaterials(t){const e=t.getThreeJsObjects(),i=t.getThreeJsMaterials();for(let t=0;t<e.length;t++)this.destroyObject(e[t]);for(let t=0;t<i.length;t++)this.destroyMaterial(i[t])}static setPosition(t,e){if(t)if(Array.isArray(t))for(let i=0,s=t.length;i<s;i++)t[i].position.set(e.x,e.y,e.z);else t.position.set(e.x,e.y,e.z)}static setPositionToEntity(t,e,i,a,n){if(!t)return;const r=e.getCameraSpacePosition(i);if(this._tempThreeJsVector3.set(r.x,r.y,r.z),a){const t=s.Vector3.pool.get();n?t.rotate(e.getOrientation(),a):t.copy(a),this._tempThreeJsVector3.x+=t.x,this._tempThreeJsVector3.y+=t.y,this._tempThreeJsVector3.z+=t.z,s.Vector3.pool.release(t)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].position.copy(this._tempThreeJsVector3);else t.position.copy(this._tempThreeJsVector3)}static setScale(t,e){if(t)if(Array.isArray(t))for(let i=0,s=t.length;i<s;i++)"number"==typeof e?t[i].scale.set(e,e,e):t[i].scale.set(e.x,e.y,e.z);else"number"==typeof e?t.scale.set(e,e,e):t.scale.set(e.x,e.y,e.z)}static setOrientation(t,e){if(t)if(s.BaseComponent._tempThreeJsQuaternion.set(e.x,e.y,e.z,e.w),Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);else t.setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion)}static setOrientationToBillboard(t,e,i){if(!t)return;const a=s.Quaternion.pool.get(),n=s.Vector3.pool.get(),r=s.Vector3.pool.get();if(n.normalize(e.getCameraSpacePosition(i)),i.getEntity().getOrientation().getAxis(r,0),r.setNormalTo(n,r),a.setFromAxes(r,void 0,n),s.BaseComponent._tempThreeJsQuaternion.set(a.x,a.y,a.z,a.w),Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);else t.setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);s.Quaternion.pool.release(a),s.Vector3.pool.release(n),s.Vector3.pool.release(r)}static setOrientationToEntity(t,e,i){if(!t)return;const a=e.getOrientation();if(void 0===i)s.BaseComponent._tempThreeJsQuaternion.set(a.x,a.y,a.z,a.w);else{const t=s.Quaternion.pool.get();t.mult(a,i),s.BaseComponent._tempThreeJsQuaternion.set(t.x,t.y,t.z,t.w),s.Quaternion.pool.release(t)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;e++)t[e].setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion);else t.setRotationFromQuaternion(s.BaseComponent._tempThreeJsQuaternion)}static useInDynEnvMap(t,e){e?t.layers.enable(1):t.layers.disable(1)}static setVertices(t,e,i){const a=t.getAttribute(e);a instanceof s.THREE.BufferAttribute&&(a.array.length===i.length?(a.copyArray(i),a.needsUpdate=!0):t.setAttribute(e,new s.THREE.BufferAttribute(i,t.getAttribute(e).itemSize)))}static setIndices(t,e){const i=t.getIndex();i.array.length===e.length?(i.copyArray(e),i.needsUpdate=!0):t.setIndex(new s.THREE.BufferAttribute(e,1))}static computeTangents(t){t.computeTangents()}static setRenderOrder(t,e){t&&(t.renderOrder=e)}static setupLogDepthBuffering(t){s.Capabilities.hasFragDepth()?(t.defines={L_EXT_frag_depth:!0},t.extensions.fragDepth=!0):(t.uniforms.nearDistance=new s.THREE.Uniform(1e-4),t.uniforms.midDistance=new s.THREE.Uniform(3)),t.needsUpdate=!0}static loadTexture(t,e,i,s){const a=t.getEntity().getScene().getEngine();return(s?a.getTextureLoaderCompressed():a.getTextureLoader()).loadTexture(e,i)}static loadTextureFromCanvas(t){const e=new s.THREE.CanvasTexture(t);return e.magFilter=s.THREE.NearestFilter,e.minFilter=s.THREE.NearestFilter,e.flipY=!1,e.needsUpdate=!0,e}static async loadTextureIntoUniform(t,e,i,s,a,n){if(!e)return;const r=t.getEntity().getScene().getEngine(),o=n?r.getTextureLoaderCompressed():r.getTextureLoader(),l=await o.loadTexture(s,a);if(t.getThreeJsMaterials().includes(e)){const s=e.uniforms[i];if(void 0===s)throw new Error(`Material in ${t} doesn't have uniform name '${i}'.`);null!==s.value&&s.value.dispose(),s.value=l}else l.dispose()}static setOverlay(t,e){t&&(t.depthFunc=e?s.THREE.AlwaysDepth:s.THREE.LessEqualDepth)}static setTransparent(t,e){t&&(t.transparent=e,t.depthWrite=!e)}static setBlending(t,e){if(t){switch(e){case"normal":t.blending=s.THREE.NormalBlending;break;case"additive":t.blending=s.THREE.AdditiveBlending;break;case"subtractive":t.blending=s.THREE.SubtractiveBlending;break;case"multiply":t.blending=s.THREE.MultiplyBlending;break;case"custom":t.blending=s.THREE.CustomBlending;break;default:t.blending=s.THREE.NoBlending}t.needsUpdate=!0}}static setDefine(t,e,i){i&&!t.defines[e]?(t.defines[e]=!0,t.needsUpdate=!0):i||!0!==t.defines[e]||(delete t.defines[e],t.needsUpdate=!0)}static setUniformNumber(t,e,i){t&&(t.uniforms[e].value=i)}static setUniformVector2(t,e,i){t&&t.uniforms[e].value.set(i.x,i.y)}static setUniformVector3(t,e,i){t&&t.uniforms[e].value.set(i.x,i.y,i.z)}static setUniformColorRGB(t,e,i){t&&t.uniforms[e].value.set(i.r,i.g,i.b)}static setUniformColorRGBA(t,e,i,s=1){t&&t.uniforms[e].value.set(i.r,i.g,i.b,i.a*s)}static setUniformQuaternion(t,e,i){t&&t.uniforms[e].value.set(i.x,i.y,i.z,i.w)}static setUniformTexture(t,e,i){t&&(null!==t.uniforms[e].value&&t.uniforms[e].value.dispose(),t.uniforms[e].value=i)}}a._tempThreeJsVector3=new s.THREE.Vector3,e.default=a},function(t,e,i){"use strict";i.r(e);const s=new Map;let a=null,n="";const r=new Map([["astc","astc"],["s3tc","dxt"],["pvrtc","pvrtc"],["etc","etc2"],["etc1","etc1"]]);e.default=class{static isWebGL2(){return"undefined"!=typeof WebGL2RenderingContext&&a instanceof WebGL2RenderingContext}static hasFragDepth(){return this.isWebGL2()||this.hasGLExtension("EXT_frag_depth")}static hasGLExtension(t){if(null===a)return!1;let e=s.get(t);return void 0===e&&(e=null!==a.getExtension(t),s.set(t,e)),e}static __getCompressedTextureExtension(){return n}static __setContext(t){a=t,r.forEach((t,e)=>{!0!==this.hasGLExtension("WEBGL_compressed_texture_"+e)&&!0!==this.hasGLExtension("WEBKIT_WEBGL_compressed_texture_"+e)||""===n&&(n=t)})}}},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(){this._valueMap=new Map,this._callbacksMap=new Map,this.setValue("maxTextureSize",512),this.setValue("useTextureCompression",!0),this.setValue("fontFamily","Arial"),this.setValue("fontSize",16),this.setValue("gammaCorrection",1)}getValue(t){return this._valueMap.get(t)}setValue(t,e){if(this._valueMap.get(t)!==e){this._valueMap.set(t,e);const i=this._callbacksMap.get(t);if(i)for(let s=0;s<i.length;s++)i[s](t,e)}}addEventListener(t,e){let i=this._callbacksMap.get(t);void 0===i&&(i=[],this._callbacksMap.set(t,i)),i.push(e)}removeEventListener(t,e){const i=this._callbacksMap.get(t);if(i)for(let t=0;t<i.length;t++)if(i[t]===e){i.splice(t,1);break}}}},function(t,e,i){"use strict";i.r(e);class s{constructor(t,e){this.url=t,this.actualUrl=e,this.progress=0,this.totalBytes=0,this.content=void 0,this.status="downloading",this.errorMessage=""}}class a{constructor(t,e){this.download=new s(t,e),this.promise=null,this.progressCallbacks=[],this.request=null}}e.default=class{constructor(){this._replacements=new Map,this._currentDownloads=new Map}getReplacement(t){return this._replacements.get(t)}setReplacement(t,e){this._replacements.set(t,e)}cancel(t){const e=this.processUrl(t),i=this._currentDownloads.get(e);void 0!==i&&null!==i.request&&i.request.abort()}processUrl(t){let e=t;for(const[t,i]of this._replacements)e=e.replace("$"+t,i);return e}download(t,e,i){const s=this.processUrl(t);let n=this._currentDownloads.get(s);return void 0!==n&&null!==n.promise?(i&&n.progressCallbacks.push(i),n.promise):(n=new a(t,s),this._currentDownloads.set(s,n),n.promise=new Promise(t=>{const i=new XMLHttpRequest;i.addEventListener("load",()=>{200<=i.status&&i.status<=299?(n.download.content=i.response,n.download.status="completed"):(n.download.content=void 0,n.download.status="failed"),this._currentDownloads.delete(n.download.actualUrl),t(n.download)}),i.addEventListener("progress",t=>{n.download.progress=t.lengthComputable?t.loaded/t.total:0,n.download.totalBytes=t.lengthComputable?t.total:0;for(const t of n.progressCallbacks)t(n.download)}),i.addEventListener("abort",()=>{n.download.content=void 0,n.download.status="cancelled",this._currentDownloads.delete(n.download.actualUrl),t(n.download)}),i.addEventListener("error",()=>{n.download.content=void 0,n.download.status="failed",n.download.errorMessage=i.statusText,this._currentDownloads.delete(n.download.actualUrl),t(n.download)}),i.responseType=e?"arraybuffer":"text",n.request=i,i.open("GET",s),i.send()}),n.promise)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class{constructor(t){if(!(t instanceof HTMLDivElement))throw new Error("The root div param is not an actual div element.");this._rootDiv=t,this._canvas=null,this._renderSize=new s.Vector2,this._renderSize.freeze(),this._input=new s.Input(this),this._config=new s.Config,this._downloader=new s.Downloader,this._textureLoader=null,this._textureLoaderCompressed=null,this._materialManager=null,this._scenes=new s.Collection(this,new Map([["scene",s.Scene]])),this._viewports=new s.Collection(this,new Map([["viewport",s.Viewport]])),this._lastAppTime=Date.now(),this._realDeltaTime=0,this._fps=new s.FPS,this._fpsLimit=Number.POSITIVE_INFINITY,this._time=0,this._timeRate=0,this._callbacks=[],this._callbacksToRemove=[],this._thisLoop=this._loop.bind(this),this._threeJsRenderer=null,this._viewportDiv=null,"relative"!==this._rootDiv.style.position&&"absolute"!==this._rootDiv.style.position&&(this._rootDiv.style.position="relative"),this._rootDiv.style.userSelect="none",this._rootDiv.style.webkitUserSelect="none",this._rootDiv.style.touchAction="none",this._canvas=document.createElement("canvas"),this._canvas.style.position="absolute",this._canvas.style.left="0px",this._canvas.style.top="0px",this._canvas.style.width="100%",this._canvas.style.height="100%",this._rootDiv.appendChild(this._canvas),this._viewportDiv=document.createElement("div"),this._viewportDiv.style.position="absolute",this._viewportDiv.style.left="0px",this._viewportDiv.style.top="0px",this._viewportDiv.style.width="100%",this._viewportDiv.style.height="100%",this._viewportDiv.style.overflow="hidden",this._rootDiv.appendChild(this._viewportDiv);try{this._threeJsRenderer=new s.THREE.WebGLRenderer({canvas:this._canvas,antialias:!0}),this._threeJsRenderer.setScissorTest(!0),this._threeJsRenderer.setPixelRatio(window.devicePixelRatio),this._textureLoader=new s.TextureLoader(this._downloader,this._threeJsRenderer),this._textureLoaderCompressed=new s.TextureLoaderCompressed(this._downloader,this._config,this._threeJsRenderer),s.THREE.Cache.enabled=!1;const t=this._threeJsRenderer.getContext().getShaderInfoLog.bind(this._threeJsRenderer.getContext());this._threeJsRenderer.getContext().getShaderInfoLog=e=>{const i=t(e);return i.includes("GL_ARB_gpu_shader5")?"":i},s.Capabilities.__setContext(this._threeJsRenderer.getContext()),this._materialManager=new s.MaterialManager(this._downloader),window.addEventListener("beforeunload",()=>{this._threeJsRenderer.forceContextLoss()})}catch(t){throw console.log(t),t}requestAnimationFrame(this._thisLoop)}getVersion(){return s.Version}getRootDiv(){return this._rootDiv}getRenderSize(){return this._renderSize}getCanvas(){return this._canvas}getViewportDiv(){return this._viewportDiv}getConfig(){return this._config}getInput(){return this._input}getDownloader(){return this._downloader}getTextureLoader(){return this._textureLoader}getTextureLoaderCompressed(){return this._textureLoaderCompressed}getMaterialManager(){return this._materialManager}getScene(t){return this._scenes.get(t)}getNumScenes(){return this._scenes.size}addScene(t){return this._scenes.add("scene",t)}removeScene(t){this._scenes.remove(t)}get(t,e,i,s=0){const a=this._scenes.get(t);return void 0===e||null===a?a:a.get(e,i,s)}getViewport(t){return this._viewports.get(t)}getNumViewports(){return this._viewports.size}addViewport(t=""){return this._viewports.add("viewport",t)}removeViewport(t){this._viewports.remove(t)}getTime(){return this._time}setTime(t){this._time=t}getTimeRate(){return this._timeRate}setTimeRate(t){this._timeRate=t}getFPS(){return this._fps.getFPS()}getFPSLimit(){return this._fpsLimit}setFPSLimit(t){this._fpsLimit=t}getDeltaTime(){return this._realDeltaTime}registerComponentType(t,e){if(s.Types.Components.has(t))throw new Error("Already registered component type '"+t+"'.");s.Types.Components.set(t,e)}unregisterComponentType(t){s.Types.Components.delete(t)}registerControllerType(t,e){if(s.Types.Controllers.has(t))throw new Error("Already registered controller type '"+t+"'.");s.Types.Controllers.set(t,e)}unregisterControllerType(t){s.Types.Controllers.delete(t)}waitUntilNextFrame(){return new Promise(t=>{this.addCallback(()=>{t()},!1)})}addCallback(t,e){this._callbacks.push({callback:t,recurring:e})}removeCallback(t){this._callbacksToRemove.push(t)}__getThreeJsRenderer(){return this._threeJsRenderer}_loop(){try{const t=Date.now();if(this._realDeltaTime=(t-this._lastAppTime)/1e3,this._realDeltaTime<1/this._fpsLimit)return void requestAnimationFrame(this._thisLoop);this._lastAppTime=t,this._fps.update(this._realDeltaTime),this._time+=this._timeRate*this._realDeltaTime,this._renderSize.x===this._rootDiv.clientWidth&&this._renderSize.y===this._rootDiv.clientHeight||(this._renderSize.thaw(),this._renderSize.set(this._rootDiv.clientWidth,this._rootDiv.clientHeight),this._renderSize.freeze(),this._threeJsRenderer.setSize(this._renderSize.x,this._renderSize.y,!1));for(let t=0;t<this._scenes.size;t++)this._scenes.get(t).__update();for(let t=0;t<this._viewports.size;t++)this._viewports.get(t).__updateViewportVariables();for(let t=0;t<this._scenes.size;t++)this._scenes.get(t).__updateVisuals();this._threeJsRenderer.setViewport(0,0,this._renderSize.x,this._renderSize.y),this._threeJsRenderer.setScissor(0,0,this._renderSize.x,this._renderSize.y),this._threeJsRenderer.clear();for(let t=0;t<this._viewports.size;t++)this._viewports.get(t).__render();for(let t=0;t<this._callbacks.length;t++)this._callbacks[t].callback(),this._callbacks[t].recurring||this._callbacksToRemove.push(this._callbacks[t].callback);for(let t=0,e=this._callbacksToRemove.length;t<e;t++)for(let e=0,i=this._callbacks.length;e<i;e++)if(this._callbacks[e].callback===this._callbacksToRemove[t]){this._callbacks.splice(e,1);break}this._input.__resetStatesForNextFrame()}catch(t){throw console.log(t),t}requestAnimationFrame(this._thisLoop)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);function a(t,e){return t[0]<e[0]}function n(t,e){return t[0]===e[0]}function r(t,e){return t[0]<e}e.default=class extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._enabled=!0,this._disabledByAncestor=!1,this._destroyed=!1,this._parent=null,this._lastParent=null,this._children=[],this._parentingTable=[],this._position=new s.Vector3(Number.NaN,Number.NaN,Number.NaN),this._position.freeze(),this._velocity=new s.Vector3(Number.NaN,Number.NaN,Number.NaN),this._velocity.freeze(),this._orientation=new s.Quaternion(Number.NaN,Number.NaN,Number.NaN,Number.NaN),this._orientation.freeze(),this._angularVelocity=new s.Vector3(Number.NaN,Number.NaN,Number.NaN),this._angularVelocity.freeze(),this._cameraSpacePosition=new s.FastMap,this._normalSpacePosition=new s.FastMap,this._pixelSpacePosition=new s.FastMap,this._normalSpaceExtentsRadius=new s.FastMap,this._pixelSpaceExtentsRadius=new s.FastMap,this._greatestPixelSpaceExtentsRadius=0,this._components=new s.Collection(this,s.Types.Components),this._controllers=new s.Collection(this,s.Types.Controllers),this._occlusionRadius=0,this._extentsRadius=0,this._canOcclude=!0,this._positionCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._positionCoverage.freeze(),this._orientationCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._orientationCoverage.freeze(),this._isInPositionCoverage=!1,this._isInOrientationCoverage=!1}getScene(){return this.__getCollectionParent()}isEnabled(){return this._enabled&&!this._disabledByAncestor}isDisabledByAncestor(){return this._disabledByAncestor}setEnabled(t){this._enabled!==t&&(this._enabled=t,this._updateEnabled())}_updateEnabled(){for(let t=0;t<this._components.size;t++)this._components.get(t).__updateLoadState();for(let t=0,e=this._children.length;t<e;t++)this._children[t]._updateDisabledByAncestor()}_updateDisabledByAncestor(){let t=!1,e=this._parent;for(;null!==e;){if(!e._enabled||e._disabledByAncestor){t=!0;break}e=e._parent}this._disabledByAncestor!==t&&(this._disabledByAncestor=t,this._updateEnabled())}isDestroyed(){return this._destroyed}getPosition(){return this._position}setPosition(t){this._position.thaw(),this._position.copy(t),this._position.freeze()}getVelocity(){return this._velocity}setVelocity(t){this._velocity.thaw(),this._velocity.copy(t),this._velocity.freeze()}getOrientation(){return this._orientation}setOrientation(t){this._orientation.thaw(),this._orientation.copy(t),this._orientation.freeze()}getAngularVelocity(){return this._angularVelocity}setAngularVelocity(t){this._angularVelocity.thaw(),this._angularVelocity.copy(t),this._angularVelocity.freeze()}getPositionRelativeToEntity(t,e,i,a){let n=this;if(t.copy(e),void 0===a){const e=this.getLowestCommonAncestor(i);if(null===e)return void t.copy(s.Vector3.NaN);for(t.add(t,n.getPosition());n!==e;)n=n.getParent(),t.add(t,n.getPosition());if(null!==i)for(n=i,t.sub(t,n.getPosition());n!==e;)n=n.getParent(),t.sub(t,n.getPosition())}else{const e=this.getScene(),r=s.Vector3.pool.get(),o=this.getLowestCommonAncestorAtTime(i,a);if(null!==o){for(n.getPositionAtTime(r,a),t.add(t,r);n!==o;){const i=n.getParentAtTime(a);if(null===(n=e.getEntity(i)))return void t.copy(s.Vector3.NaN);n.getPositionAtTime(r,a),t.add(t,r)}if(null!==i)for((n=i).getPositionAtTime(r,a),t.sub(t,r);n!==o;){const i=n.getParentAtTime(a);if(null===(n=e.getEntity(i)))return void t.copy(s.Vector3.NaN);n.getPositionAtTime(r,a),t.sub(t,r)}}else t.copy(s.Vector3.NaN);s.Vector3.pool.release(r)}}getVelocityRelativeToEntity(t,e,i,a){let n=this;if(t.copy(e),void 0===a){const e=this.getLowestCommonAncestor(i);if(null===e)return void t.copy(s.Vector3.NaN);for(t.add(t,n.getVelocity());n!==e;)n=n.getParent(),t.add(t,n.getVelocity());if(null!==i)for(n=i,t.sub(t,n.getVelocity());n!==e;)n=n.getParent(),t.sub(t,n.getVelocity())}else{const e=this.getScene(),r=s.Vector3.pool.get(),o=this.getLowestCommonAncestorAtTime(i,a);if(null!==o){for(n.getVelocityAtTime(r,a),t.add(t,r);n!==o;){const i=n.getParentAtTime(a);if(null===(n=e.getEntity(i)))return void t.copy(s.Vector3.NaN);n.getVelocityAtTime(r,a),t.add(t,r)}if(null!==i)for((n=i).getVelocityAtTime(r,a),t.sub(t,r);n!==o;){const i=n.getParentAtTime(a);if(null===(n=e.getEntity(i)))return void t.copy(s.Vector3.NaN);n.getVelocityAtTime(r,a),t.sub(t,r)}}else t.copy(s.Vector3.NaN);s.Vector3.pool.release(r)}}getPositionAtTime(t,e){if(this.isEnabled())if(void 0===e)t.copy(this._position);else if(t.set(Number.NaN,Number.NaN,Number.NaN),this._controllers.size>0)for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.hasModifiedState("position")&&s.getCoverage().contains(e)&&s.isEnabled()&&s.__updatePositionAtTime(t,e)}else t.copy(this._position);else t.set(Number.NaN,Number.NaN,Number.NaN)}getVelocityAtTime(t,e){if(this.isEnabled())if(void 0===e)t.copy(this._velocity);else if(t.set(Number.NaN,Number.NaN,Number.NaN),this._controllers.size>0)for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.hasModifiedState("velocity")&&s.getCoverage().contains(e)&&s.isEnabled()&&s.__updateVelocityAtTime(t,e)}else t.copy(this._velocity);else t.set(Number.NaN,Number.NaN,Number.NaN)}getOrientationAtTime(t,e){if(this.isEnabled())if(void 0===e)t.copy(this._orientation);else if(t.set(Number.NaN,Number.NaN,Number.NaN,Number.NaN),this._controllers.size>0)for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.hasModifiedState("orientation")&&s.getCoverage().contains(e)&&s.isEnabled()&&s.__updateOrientationAtTime(t,e)}else t.copy(this._orientation);else t.set(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}getOcclusionRadius(){return this._occlusionRadius}getExtentsRadius(){return this._extentsRadius}setOcclusionRadius(t){this._occlusionRadius=t}setExtentsRadius(t){this._extentsRadius=t}getPositionCoverage(){return this._positionCoverage}getOrientationCoverage(){return this._orientationCoverage}isInPositionCoverage(){return this._isInPositionCoverage}isInOrientationCoverage(){return this._isInOrientationCoverage}__updateCoverage(){let t=0,e=0;this._positionCoverage.thaw(),this._orientationCoverage.thaw(),this._positionCoverage.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY),this._orientationCoverage.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let i=0;i<this._controllers.size;i++){const s=this._controllers.get(i);s.isEnabled()&&(s.hasModifiedState("position")&&(this._positionCoverage.union(this._positionCoverage,s.getCoverage()),t++),s.hasModifiedState("orientation")&&(this._orientationCoverage.union(this._orientationCoverage,s.getCoverage()),e++))}0===t&&this._positionCoverage.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),0===e&&this._orientationCoverage.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._positionCoverage.freeze(),this._orientationCoverage.freeze()}canOcclude(){return this._canOcclude}setCanOcclude(t){this._canOcclude=t}isOccludingPosition(t,e){if(!this._canOcclude||!this.isInPositionCoverage())return!1;const i=Math.min(this._occlusionRadius,this.getCameraSpacePosition(t).magnitude()),a=s.Interval.pool.get();s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(a,e,this.getCameraSpacePosition(t),i);const n=a.min<a.max&&0<=a.min+a.max&&a.min+a.max<2;return s.Interval.pool.release(a),n}getParent(){return this._parent}getParentAtTime(t){const e=s.Sort.getIndex(t,this._parentingTable,r);return e<this._parentingTable.length&&t===this._parentingTable[e][0]?this._parentingTable[e][1]:e>0?this._parentingTable[e-1][1]:""}setParent(t){if(t===this._parent)return;const e=s.Vector3.pool.get();if(this.getPositionRelativeToEntity(e,s.Vector3.Zero,t),e.isNaN()||this.setPosition(e),s.Vector3.pool.release(e),null!==this._parent)for(let t=0;t<this._parent._children.length;t++){this._parent._children[t]===this&&this._parent._children.splice(t,1)}this._parent=t,null!==this._parent&&this._parent._children.push(this),this._clearCameraReferences(),this._updateDisabledByAncestor()}_clearCameraReferences(){this._cameraSpacePosition.clear(),this._normalSpacePosition.clear(),this._pixelSpacePosition.clear(),this._normalSpaceExtentsRadius.clear(),this._pixelSpaceExtentsRadius.clear();for(let t=0,e=this._components.size;t<e;t++){this._components.get(t).__clearCameraDependentsBase()}for(let t=0,e=this._children.length;t<e;t++)this._children[t]._clearCameraReferences()}getNumChildren(){return this._children.length}getChild(t){return this._children[t]}getLowestCommonAncestor(t){if(null===t)return null;let e=this,i=t,s=0,a=0;for(;null!==e.getParent();)s+=1,e=e.getParent();for(;null!==i.getParent();)a+=1,i=i.getParent();for(e=this,i=t;s>a;)s-=1,e=e.getParent();for(;a>s;)a-=1,i=i.getParent();for(;e!==i&&null!==e;)e=e.getParent(),i=i.getParent();return e}getLowestCommonAncestorAtTime(t,e){if(null===t)return null;let i=this,s=t,a=0,n=0;const r=this.getScene();for(;;){const t=i.getParentAtTime(e);if(""===t)break;const s=r.getEntity(t);if(null===s)return null;a+=1,i=s}for(;;){const t=s.getParentAtTime(e);if(""===t)break;const i=r.getEntity(t);if(null===i)return null;n+=1,s=i}for(i=this,s=t;a>n;){a-=1;const t=i.getParentAtTime(e),s=r.getEntity(t);if(null===s)return null;i=s}for(;n>a;){n-=1;const t=s.getParentAtTime(e),i=r.getEntity(t);if(null===i)return null;s=i}for(;i!==s&&null!==i;){const t=i.getParentAtTime(e),a=r.getEntity(t);if(null===a)return null;i=a;const n=s.getParentAtTime(e),o=r.getEntity(n);if(null===o)return null;s=o}return i}getNumParentingTableEntries(){return this._parentingTable.length}getParentingTableEntry(t){return this._parentingTable[t]}addParentingTableEntry(t,e){s.Sort.add([t,e],this._parentingTable,a,n)}removeParentingTableEntry(t){const e=s.Sort.getIndex(t,this._parentingTable,r);e<this._parentingTable.length&&this._parentingTable[e][0]===t&&this._parentingTable.splice(e)}getNumComponents(){return this._components.size}getComponent(t){return this._components.get(t)}getComponentByType(t,e=0){return this._components.getByType(t,e)}addComponent(t,e,i){return this._components.add(t,e,i)}removeComponent(t){this._components.remove(t)}clearComponents(){this._components.clear()}getNumControllers(){return this._controllers.size}getController(t){return this._controllers.get(t)}getControllerByType(t,e=0){return this._controllers.getByType(t,e)}addController(t,e,i){const s=this._controllers.add(t,e,i);return this.__updateCoverage(),s}removeController(t){this._controllers.remove(t),this.__updateCoverage()}clearControllers(){this._controllers.clear(),this.__updateCoverage()}getCameraSpacePosition(t){const e=this._cameraSpacePosition.get(t);return void 0!==e?e:s.Vector3.NaN}getNormalSpacePosition(t){const e=this._normalSpacePosition.get(t);return void 0!==e?e:s.Vector3.NaN}getPixelSpacePosition(t){const e=this._pixelSpacePosition.get(t);return void 0!==e?e:s.Vector2.NaN}getNormalSpaceOcclusionRadius(t){return 0!==this._extentsRadius?this.getNormalSpaceExtentsRadius(t)*this._occlusionRadius/this._extentsRadius:0}getNormalSpaceExtentsRadius(t){const e=this._normalSpaceExtentsRadius.get(t);return void 0!==e?e:Number.NaN}getPixelSpaceOcclusionRadius(t){return 0!==this._extentsRadius?this.getPixelSpaceExtentsRadius(t)*this._occlusionRadius/this._extentsRadius:0}getPixelSpaceExtentsRadius(t){const e=this._pixelSpaceExtentsRadius.get(t);return void 0!==e?e:Number.NaN}getGreatestPixelSpaceOcclusionRadius(){return 0!==this._extentsRadius?this.getGreatestPixelSpaceExtentsRadius()*this._occlusionRadius/this._extentsRadius:0}getGreatestPixelSpaceExtentsRadius(){return this._greatestPixelSpaceExtentsRadius}__setCameraDependentVariables(t,e){const i=t.getViewport();if(null===i)return;let a=this._cameraSpacePosition.get(t);void 0===a?(a=new s.Vector3,this._cameraSpacePosition.set(t,a)):a.thaw(),a.copy(e),a.freeze();let n=this._normalSpacePosition.get(t);void 0===n?(n=new s.Vector3,this._normalSpacePosition.set(t,n)):n.thaw(),t.getNormalSpacePositionFromCameraSpacePosition(n,a),n.freeze();let r=this._pixelSpacePosition.get(t);void 0===r?(r=new s.Vector2,this._pixelSpacePosition.set(t,r)):r.thaw(),i.getPixelSpacePositionFromNormalSpacePosition(r,n),r.freeze();const o=t.getNormalSpaceRadiusFromRadius(this._extentsRadius,a.magnitude());this._normalSpaceExtentsRadius.set(t,o);const l=i.getPixelSpaceRadiusFromNormalSpaceRadius(o);this._pixelSpaceExtentsRadius.set(t,l)}__removeCameraDependents(t){this._cameraSpacePosition.delete(t),this._normalSpacePosition.delete(t),this._pixelSpacePosition.delete(t),this._normalSpaceExtentsRadius.delete(t),this._pixelSpaceExtentsRadius.delete(t);for(let e=0;e<this._components.size;e++)this._components.get(e).__removeCameraDependentsBase(t)}get(t,e=0){const i=this._components.getByType(t,e);return null!==i?i:this._controllers.getByType(t,e)}getLoadedPromise(){const t=[];if(this.isEnabled()){for(let e=0;e<this._controllers.size;e++)t.push(this._controllers.get(e).getLoadedPromise());for(let e=0;e<this._components.size;e++)t.push(this._components.get(e).getLoadedPromise())}return Promise.all(t).then()}toString(){return this.getName()}__destroy(){this._destroyed=!0,super.__destroy();for(let t=0;t<this._children.length;t++)this._children[t].setParent(null);null!==this._parent&&this.setParent(null),this._controllers.__destroy(),this._components.__destroy()}__updateParent(t){const e=this.getParentAtTime(t);if(""!==e){const t=this.getScene().getEntity(e);t!==this._parent&&this.setParent(t)}this._parent!==this._lastParent&&(this.getScene().getControllerDependencyGraph().needsSorting(),this._lastParent=this._parent)}__updateIsInCoverages(t){this._isInPositionCoverage=this._positionCoverage.contains(t),this._isInOrientationCoverage=this._orientationCoverage.contains(t);for(let t=0;t<this._components.size;t++)this._components.get(t).__updateLoadState()}__updateVisuals(){this._greatestPixelSpaceExtentsRadius=0;for(let t=0,e=this._pixelSpaceExtentsRadius.size;t<e;t++){const e=this._pixelSpaceExtentsRadius.getAt(t).value;this._greatestPixelSpaceExtentsRadius<e&&(this._greatestPixelSpaceExtentsRadius=e)}for(let t=0,e=this._components.size;t<e;t++){const e=this._components.get(t);e.isEnabled()&&e.__updateBase()}}__updateCameraVariables(t,e,i){if(this.isEnabled()){const a=s.Vector3.pool.get();this===t.getEntity()?a.set(0,0,0):i?a.sub(e.getCameraSpacePosition(t),e.getPosition()):a.add(e.getCameraSpacePosition(t),this._position),this.__setCameraDependentVariables(t,a),this._canOcclude&&this.getPixelSpaceOcclusionRadius(t)>=1&&t.__addToOccludingEntities(this),s.Vector3.pool.release(a);for(let e=0,i=this._components.size;e<i;e++){const i=this._components.get(e);i!==t&&i.isEnabled()&&i.__updateCameraVariablesBase(t)}}null===this._parent||!i&&this!==t.getEntity()||this._parent.__updateCameraVariables(t,this,!0);for(let i=0,s=this._children.length;i<s;i++){const s=this._children[i];s!==e&&s.__updateCameraVariables(t,this,!1)}}__prepareForRender(t){for(let e=0,i=this._components.size;e<i;e++){const i=this._components.get(e);"camera"!==i.getType()&&i.__prepareForRenderBase(t)}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._enabled=!0,this._destroyed=!1}getEntity(){return this.__getCollectionParent()}isDestroyed(){return this._destroyed}__destroy(){this._destroyed=!0,super.__destroy()}isEnabled(){return this._enabled}setEnabled(t){this._enabled=t}getLoadedPromise(){return Promise.resolve()}__update(){}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{constructor(){this.identifier=0,this.pressedPosition=new s.Vector2,this.pressedTime=0,this.lastFramePosition=new s.Vector2,this.thisFramePosition=new s.Vector2}}e.default=class{constructor(t){this._engine=t,this._activeViewport=null,this._draggedOffset=new s.Vector2,this._draggedOffset.freeze(),this._zoomedOffset=0,this._rotatedOffset=0,this._shiftPressed=!1,this._controlPressed=!1,this._keysPressed=new Set,this._maxSelectTime=.5,this._maxSelectDistance=5,this._cursorPosition=new s.Vector2,this._selected=!1,this._selectedPosition=new s.Vector2,this._selectedPosition.freeze(),this._touches=[],window.addEventListener("keydown",t=>{t.target instanceof HTMLElement&&["INPUT","SELECT","TEXTAREA"].includes(t.target.tagName)||("Control"===t.key?this._controlPressed=!0:"Shift"===t.key&&(this._shiftPressed=!0),this._keysPressed.add(t.key.toLowerCase()))}),window.addEventListener("keyup",t=>{"Control"===t.key?this._controlPressed=!1:"Shift"===t.key&&(this._shiftPressed=!1),this._keysPressed.delete(t.key.toLowerCase())}),this._engine.getRootDiv().addEventListener("mousedown",t=>{if(0===t.button&&(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),0===this._touches.length)){const e=this._engine.getRootDiv().getBoundingClientRect();let i=null;for(let t=0;t<this._touches.length;t++)0===this._touches[t].identifier&&(i=this._touches[t]);null===i&&(i=new a),i.identifier=0,i.pressedPosition.set(t.clientX-e.left,t.clientY-e.top),i.pressedTime=Date.now(),i.lastFramePosition.copy(i.pressedPosition),i.thisFramePosition.copy(i.pressedPosition),this._touches.push(i),this._updateActiveViewport()}}),window.addEventListener("mousemove",t=>{const e=this._engine.getRootDiv().getBoundingClientRect();if(1===this._touches.length&&0===this._touches[0].identifier){const i=this._touches[0];i.thisFramePosition.set(t.clientX-e.left,t.clientY-e.top),this._draggedOffset.thaw(),this._draggedOffset.sub(i.thisFramePosition,i.lastFramePosition);const s=Math.max(Math.abs(i.thisFramePosition.x-i.pressedPosition.x),Math.abs(i.thisFramePosition.y-i.pressedPosition.y));(Date.now()-i.pressedTime)/1e3<=this._maxSelectTime&&s<=this._maxSelectDistance&&this._draggedOffset.set(0,0),this._draggedOffset.freeze()}this._touches.length<=1&&this._cursorPosition.set(t.clientX-e.left,t.clientY-e.top)}),window.addEventListener("mouseup",t=>{if(0===t.button&&1===this._touches.length&&0===this._touches[0].identifier){const e=this._engine.getRootDiv().getBoundingClientRect(),i=this._touches[0];i.thisFramePosition.set(t.clientX-e.left,t.clientY-e.top);const s=Math.max(Math.abs(i.thisFramePosition.x-i.pressedPosition.x),Math.abs(i.thisFramePosition.y-i.pressedPosition.y));(Date.now()-i.pressedTime)/1e3<=this._maxSelectTime&&s<=this._maxSelectDistance&&(this._selected=!0,this._selectedPosition.thaw(),this._selectedPosition.copy(i.thisFramePosition),this._selectedPosition.freeze()),this._touches.splice(0,1)}}),this._engine.getRootDiv().addEventListener("wheel",t=>{this._zoomedOffset+=Math.sign(t.deltaY),t.preventDefault()},{passive:!1}),this._engine.getRootDiv().addEventListener("touchstart",t=>{const e=this._engine.getRootDiv().getBoundingClientRect();for(let i=0;i<t.changedTouches.length;i++){const s=t.changedTouches[i];let n=null;for(let t=0;t<this._touches.length;t++)this._touches[t].identifier===s.identifier&&(n=this._touches[t]);null===n&&(n=new a),n.identifier=s.identifier,n.pressedPosition.thaw(),n.pressedPosition.set(s.pageX-window.pageXOffset-e.left,s.pageY-window.pageYOffset-e.top),n.pressedPosition.freeze(),n.pressedTime=Date.now(),n.lastFramePosition.copy(n.pressedPosition),n.thisFramePosition.copy(n.pressedPosition),this._touches.push(n),1===this._touches.length&&this._cursorPosition.copy(n.thisFramePosition),this._updateActiveViewport()}},{passive:!1}),window.addEventListener("touchmove",t=>{const e=this._engine.getRootDiv().getBoundingClientRect();for(let i=0;i<t.changedTouches.length;i++){const a=t.changedTouches[i];for(let t=0;t<this._touches.length;t++){const n=this._touches[t];if(n.identifier===a.identifier)if(n.thisFramePosition.set(a.pageX-window.pageXOffset-e.left,a.pageY-window.pageYOffset-e.top),1===this._touches.length){this._draggedOffset.thaw(),this._draggedOffset.sub(n.thisFramePosition,n.lastFramePosition);const t=Math.max(Math.abs(n.thisFramePosition.x-n.pressedPosition.x),Math.abs(n.thisFramePosition.y-n.pressedPosition.y));(Date.now()-n.pressedTime)/1e3<=this._maxSelectTime&&t<=this._maxSelectDistance&&this._draggedOffset.set(0,0),this._draggedOffset.freeze(),this._cursorPosition.copy(n.thisFramePosition)}else if(2===this._touches.length){const t=s.Vector2.pool.get();t.sub(this._touches[i].thisFramePosition,this._touches[1-i].thisFramePosition);const e=s.Vector2.pool.get();e.sub(this._touches[i].thisFramePosition,this._touches[i].lastFramePosition);const a=e.dot(t)/t.magnitude()/e.magnitude(),r=e.cross(t)/t.magnitude()/e.magnitude();a<-.7?this._zoomedOffset+=-(a+.7)*e.magnitude():a>.7?this._zoomedOffset+=-(a-.7)*e.magnitude():this._rotatedOffset+=r*e.magnitude(),s.Vector2.pool.release(e),s.Vector2.pool.release(t);const o=Math.max(Math.abs(n.thisFramePosition.x-n.pressedPosition.x),Math.abs(n.thisFramePosition.y-n.pressedPosition.y));(Date.now()-n.pressedTime)/1e3<=this._maxSelectTime&&o<=this._maxSelectDistance&&(this._zoomedOffset=0,this._rotatedOffset=0)}}}}),window.addEventListener("touchend",t=>{const e=this._engine.getRootDiv().getBoundingClientRect();for(let i=0;i<t.changedTouches.length;i++){const s=t.changedTouches[i];for(let t=0;t<this._touches.length;t++){const i=this._touches[t];if(i.identifier===s.identifier){if(i.thisFramePosition.set(s.pageX-window.pageXOffset-e.left,s.pageY-window.pageYOffset-e.top),1===this._touches.length){const t=Math.max(Math.abs(i.thisFramePosition.x-i.pressedPosition.x),Math.abs(i.thisFramePosition.y-i.pressedPosition.y));(Date.now()-i.pressedTime)/1e3<=this._maxSelectTime&&t<=this._maxSelectDistance&&(this._selected=!0,this._selectedPosition.thaw(),this._selectedPosition.copy(i.thisFramePosition),this._selectedPosition.freeze())}this._touches.splice(t,1)}}}}),window.addEventListener("touchcancel",()=>{})}getActiveViewport(){return this._activeViewport}getDraggedOffset(){return this._draggedOffset}getZoomedOffset(){return this._zoomedOffset}isShiftPressed(){return this._shiftPressed}isControlPressed(){return this._controlPressed}isKeyPressed(t){return this._keysPressed.has(t)}isSelected(){return this._selected}getSelectedPosition(){return this._selectedPosition}getCursorPosition(){return this._cursorPosition}__setActiveViewport(t){this._activeViewport=t}__resetStatesForNextFrame(){for(let t=0;t<this._touches.length;t++)this._touches[t].lastFramePosition.copy(this._touches[t].thisFramePosition);this._selected=!1,this._altSelected=!1,this._draggedOffset.thaw(),this._draggedOffset.set(0,0),this._draggedOffset.freeze(),this._zoomedOffset=0,this._rotatedOffset=0}_updateActiveViewport(){this._activeViewport=null;for(let t=this._engine.getNumViewports()-1;t>=0;t--){const e=this._engine.getViewport(t).getBounds();if(this._engine.getViewport(t).isEnabled()&&e.contains(this._touches[0].pressedPosition)){this._activeViewport=this._engine.getViewport(t);break}}}}},function(t,e,i){"use strict";i.r(e);var s=i(36),a=i(95),n=i(96),r=i(97),o=i(98),l=i(99),c=i(100),h=i(101);class d{constructor(t){this.value=t,this.useCount=0}}e.default=class{constructor(t){this._downloader=t,this._cache=new Map,this._clonedMaterials=new Map,this._promises=new Map,this._preload()}async get(t){let e=this._cache.get(t);if(void 0===e){const i=this._promises.get(t);void 0!==i&&(e=await i)}if(void 0===e){const i=await this._downloader.download(t,!1);if("completed"!==i.status||"string"!=typeof i.content)throw new Error('Failed to download material "'+t+'".');const s=JSON.parse(i.content);e=new d(await this._load(t,s)),this._cache.set(t,e)}return e.useCount+=1,this._clone(e.value,t)}getPreloaded(t){const e=this._cache.get(t);if(void 0===e)throw new Error('Invalid pre-loaded material "'+t+'".');return e.useCount+=1,this._clone(e.value,t)}release(t){const e=this._clonedMaterials.get(t);if(void 0===e)return;this._clonedMaterials.delete(t);const i=this._cache.get(e);i&&(i.useCount-=1,0===i.useCount&&(this._unload(i.value),this._cache.delete(e)))}_unload(t){const e=t.uniforms;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&null!==e[t].value&&void 0!==e[t].value.dispose&&e[t].value.dispose();t.dispose()}_preload(){const t=new Map;t.set("basic",a),t.set("basic_alpha",n),t.set("line",r),t.set("plumes",o),t.set("sprite",l),t.set("sprite_particles",c),t.set("trail",h.default);for(const[e,i]of t){const t=this._load(e,i),s=new d(t);s.useCount+=1,this._cache.set(e,s)}}_load(t,e){try{const t={};if(e.uniforms)for(const[i,a]of Object.entries(e.uniforms))["modelMatrix","modelViewMatrix","projectionMatrix","viewMatrix","normalMatrix","cameraPosition"].includes(i)||(t[i]=new s.THREE.Uniform(this._getUniformValueFromType(a)));let i=!1,a=!0,n=s.THREE.FrontSide,r=s.THREE.NoBlending;if(e.properties){switch(!0===e.properties.transparent&&(i=!0),!1===e.properties.depthWrite&&(a=!1),e.properties.side){case"front":n=s.THREE.FrontSide;break;case"back":n=s.THREE.BackSide;break;case"double":n=s.THREE.DoubleSide}switch(e.properties.blending){case"normal":r=s.THREE.NormalBlending;break;case"additive":r=s.THREE.AdditiveBlending;break;case"subtractive":r=s.THREE.SubtractiveBlending;break;case"multiply":r=s.THREE.MultiplyBlending;break;case"custom":r=s.THREE.CustomBlending}}if("object"!=typeof e.vertex||"string"!=typeof e.vertex.code)throw new Error("Missing vertex stage code.");if("object"!=typeof e.fragment||"string"!=typeof e.fragment.code)throw new Error("Missing fragment stage code.");if(Array.isArray(e.vertex.extensions)){let t="";for(const i of e.vertex.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#extension GL_"+i+": enable\n");for(const i of e.vertex.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#define L_"+i+" true\n"),s.Capabilities.isWebGL2()&&"EXT_frag_depth"===i&&(t+="#define L_"+i+" true\n");e.vertex.code=t+e.vertex.code}if(Array.isArray(e.fragment.extensions)){let t="";for(const i of e.fragment.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#extension GL_"+i+": enable\n");for(const i of e.fragment.extensions)s.Capabilities.hasGLExtension(i)&&(t+="#define L_"+i+" true\n");e.fragment.code=t+e.fragment.code}const o=new s.THREE.RawShaderMaterial({uniforms:t,vertexShader:s.ShaderFix.fix(e.vertex.code,"vertex"),fragmentShader:s.ShaderFix.fix(e.fragment.code,"fragment"),transparent:i,depthWrite:a,side:n,blending:r});return o.needsUpdate=!0,o}catch(e){throw new Error('while processing material "'+t+'", '+e.message)}}_getUniformValueFromType(t){switch(t=t.replace(/.* /,"")){case"int":case"float":return 0;case"ivec2":case"vec2":return new s.THREE.Vector2(0,0);case"ivec3":case"vec3":return new s.THREE.Vector3(0,0,0);case"ivec4":case"vec4":return new s.THREE.Vector4(0,0,0,0);case"mat3":return new s.THREE.Matrix3;case"mat4":return new s.THREE.Matrix4;case"sampler2D":case"samplerCube":return null}if(t.endsWith("]")){const e=t.indexOf("["),i=t.indexOf("]"),s=t.substring(0,e),a=Number.parseInt(t.substring(e+1,i)),n=[];for(let t=0;t<a;t++)n.push(this._getUniformValueFromType(s));return n}throw new Error("Unrecognized type: "+t+".")}_clone(t,e){const i=t.clone();for(const[e,i]of Object.entries(t.uniforms)){const s=i.value;if(Array.isArray(s)){const i=s[0];if(i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)){t.uniforms[e].value=[];for(let i=0;i<s.length;i++)t.uniforms[e].value[i]=s[i].clone()}}}return i.needsUpdate=!0,this._clonedMaterials.set(i,e),i}}},function(t){t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","color":"vec4"},"properties":{},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform vec4 color;\\nvarying highp float vDepth;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color;\\n}\\n"}}')},function(t){t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","color":"vec4"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"normal"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform vec4 color;\\nvarying highp float vDepth;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color;\\n}\\n"}}')},function(t){t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","pixelSize":"vec2","alphaMultiplier":"float","dashLength":"float","dashGapLength":"float"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"additive"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec3 positionPrev;\\nattribute vec3 positionNext;\\nattribute vec4 color;\\nattribute float width;\\nattribute float dashOffset;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nuniform vec2 pixelSize;\\nvarying highp float vDepth;\\nvarying vec4 fColor;\\nvarying float fDashOffset;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 line_offset_func(vec4 projected_center, vec4 projected_position_prev, vec4 projected_position_next, vec4 view_position, vec4 view_position_prev, vec4 view_position_next, vec2 pixel_size, float width) {\\n\\tfloat aspectRatio = pixel_size.x / pixel_size.y;\\n\\tvec2 ndc_center = projected_center.xy / view_position.y;\\n\\tvec2 ndc_position_prev = projected_position_prev.xy / view_position_prev.y;\\n\\tvec2 ndc_position_next = projected_position_next.xy / view_position_next.y;\\n\\tndc_center.y /= aspectRatio;\\n\\tndc_position_prev.y /= aspectRatio;\\n\\tndc_position_next.y /= aspectRatio;\\n\\tvec2 l0 = normalize(ndc_center - ndc_position_prev);\\n\\tvec2 l1 = normalize(ndc_position_next - ndc_center);\\n\\tvec2 offset;\\n\\tif (ndc_center == ndc_position_prev) {\\n\\t\\toffset = vec2(-l1.y, l1.x);\\n\\t}\\n\\telse if (ndc_center == ndc_position_next) {\\n\\t\\toffset = vec2(-l0.y, l0.x);\\n\\t}\\n\\telse {\\n\\t\\toffset = normalize(vec2(-l0.y - l1.y, l0.x + l1.x));\\n\\t\\twidth /= max(0.25, sqrt((1.0 + dot(l0, l1)) / 2.0));\\n\\t}\\n\\toffset *= width * 0.5 / pixel_size.x;\\n\\toffset.y *= aspectRatio;\\n\\tndc_center.y *= aspectRatio;\\n\\treturn vec4((ndc_center + offset) * view_position.y, projected_center.z, view_position.y);\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 view_positionPrev = mv3_mult_func(modelViewMatrix, positionPrev, 1.0);\\n\\tvec4 view_positionNext = mv3_mult_func(modelViewMatrix, positionNext, 1.0);\\n\\tvec4 projected_center = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 projected_positionPrev = mv4_mult_func(projectionMatrix, view_positionPrev);\\n\\tvec4 projected_positionNext = mv4_mult_func(projectionMatrix, view_positionNext);\\n\\tvec4 projected_position = line_offset_func(projected_center, projected_positionPrev, projected_positionNext, view_position, view_positionPrev, view_positionNext, pixelSize, width);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n\\tfColor = color;\\n\\tfDashOffset = dashOffset;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform float alphaMultiplier;\\nuniform float dashLength;\\nuniform float dashGapLength;\\nvarying highp float vDepth;\\nvarying vec4 fColor;\\nvarying float fDashOffset;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvec4 alpha_mult_func(vec4 color, float alpha) {\\n\\treturn vec4(color.rgb, color.a * alpha);\\n}\\nvec4 line_dash_func(vec4 color, float dashOffset, float dashLength, float dashGapLength) {\\n\\tfloat u = mod(dashOffset, dashLength + dashGapLength);\\n\\tfloat alpha = float(u < dashLength);\\n\\treturn vec4(color.rgb, color.a * alpha);\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tvec4 color = alpha_mult_func(fColor, alphaMultiplier);\\n\\tvec4 lineDash = line_dash_func(color, fDashOffset, dashLength, dashGapLength);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = lineDash;\\n}\\n"}}')},function(t){t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","colorTexture":"sampler2D","colorMultiplier":"vec4","speed":"float","time":"float"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"normal"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec2 uv;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n\\tvUV = uv;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform sampler2D colorTexture;\\nuniform vec4 colorMultiplier;\\nuniform float speed;\\nuniform float time;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvec2 v2_construct_func(float x, float y) {\\n\\treturn vec2(x, y);\\n}\\nfloat s_mult_func(float s1, float s2) {\\n\\treturn s1 * s2;\\n}\\nfloat s_mod_func(float s1, float s2) {\\n\\treturn mod(s1, s2);\\n}\\nvec2 v2s_mult_func(vec2 v, float s) {\\n\\treturn v * s;\\n}\\nvec2 v2_add_func(vec2 v1, vec2 v2) {\\n\\treturn v1 + v2;\\n}\\nvec4 texture_func(sampler2D tex, vec2 uv) {\\n\\treturn texture2D(tex, uv);\\n}\\nvec4 v4v4_mult_func(vec4 v1, vec4 v2) {\\n\\treturn v1 * v2;\\n}\\nfloat s_sub_func(float s1, float s2) {\\n\\treturn s1 - s2;\\n}\\nvec4 alpha_mult_func(vec4 color, float alpha) {\\n\\treturn vec4(color.rgb, color.a * alpha);\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tvec2 yAxis = v2_construct_func(0.0, 1.0);\\n\\tfloat yMultiplier = s_mult_func(time, speed);\\n\\tfloat yMultiplierMod = s_mod_func(yMultiplier, 1.0);\\n\\tvec2 uvOffset = v2s_mult_func(yAxis, yMultiplierMod);\\n\\tvec2 finalUV = v2_add_func(vUV, uvOffset);\\n\\tvec4 textureOffset = texture_func(colorTexture, finalUV);\\n\\tvec4 color = v4v4_mult_func(textureOffset, colorMultiplier);\\n\\tfloat fade = s_sub_func(1.0, vUV.y);\\n\\tvec4 color_with_fade = alpha_mult_func(color, fade);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color_with_fade;\\n}\\n"}}')},function(t){t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float","pixelBased":"float","color":"vec4","colorTexture":"sampler2D"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"normal"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec2 uv;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nuniform float pixelBased;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvec4 pixel_based_func(float pixelBased, vec4 projectedPosition) {\\n\\tif (pixelBased != 0.0) {\\n\\t\\tprojectedPosition /= abs(projectedPosition.w);\\n\\t}\\n\\treturn projectedPosition;\\n}\\nvoid main() {\\n\\tvec4 view_position = mv3_mult_func(modelViewMatrix, position, 1.0);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tvec4 pixel_based_projected_position = pixel_based_func(pixelBased, log_depth_vert);\\n\\tgl_Position = pixel_based_projected_position;\\n\\tvDepth = projected_position.w;\\n\\tvUV = uv;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nuniform vec4 color;\\nuniform sampler2D colorTexture;\\nvarying highp float vDepth;\\nvarying vec2 vUV;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nvec4 texture_func(sampler2D tex, vec2 uv) {\\n\\treturn texture2D(tex, uv);\\n}\\nvec4 v4v4_mult_func(vec4 v1, vec4 v2) {\\n\\treturn v1 * v2;\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tvec4 textureColor = texture_func(colorTexture, vUV);\\n\\tvec4 finalColor = v4v4_mult_func(textureColor, color);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = finalColor;\\n}\\n"}}')},function(t){t.exports=JSON.parse('{"uniforms":{"modelViewMatrix":"mat4","projectionMatrix":"highp mat4","nearDistance":"float","midDistance":"float"},"properties":{"transparent":true,"depthWrite":false,"side":"double","blending":"additive"},"vertex":{"extensions":["EXT_frag_depth"],"code":"attribute vec3 position;\\nattribute vec4 color;\\nattribute vec3 offset;\\nattribute float scale;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float nearDistance;\\nuniform float midDistance;\\nvarying highp float vDepth;\\nvarying vec4 fColor;\\nvarying vec2 fPosition;\\nvec4 v4v4_add_func(vec4 v1, vec4 v2) {\\n\\treturn v1 + v2;\\n}\\nvec4 mv4_mult_func(mat4 m, vec4 v) {\\n\\treturn m * v;\\n}\\nvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\\n\\t#ifndef L_EXT_frag_depth\\n\\t\\tfloat z = projectedPosition.w;\\n\\t\\tif (z < midDistance) {\\n\\t\\t\\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\\n\\t\\t\\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\\n\\t\\t\\tprojectedPosition.z *= projectedPosition.w;\\n\\t\\t}\\n\\t#else\\n\\t\\tprojectedPosition.w = viewPosition.y;\\n\\t#endif\\n\\treturn projectedPosition;\\n}\\nvec4 mv3_mult_func(mat4 m, vec3 v, float w) {\\n\\treturn m * vec4(v, w);\\n}\\nvec4 v3s_extend_func(vec3 v, float s) {\\n\\treturn vec4(v, s);\\n}\\nvec4 v4s_mult_func(vec4 v, float s) {\\n\\treturn v * s;\\n}\\nvoid main() {\\n\\tvec4 view_offset = mv3_mult_func(modelViewMatrix, offset, 1.0);\\n\\tvec4 position_v4 = v3s_extend_func(position, 0.0);\\n\\tvec4 position_scaled = v4s_mult_func(position_v4, scale);\\n\\tvec4 view_position = v4v4_add_func(view_offset, position_scaled);\\n\\tvec4 projected_position = mv4_mult_func(projectionMatrix, view_position);\\n\\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\\n\\tgl_Position = log_depth_vert;\\n\\tvDepth = projected_position.w;\\n\\tfColor = color;\\n\\tfPosition = position.xz;\\n}\\n"},"fragment":{"extensions":["EXT_frag_depth"],"code":"precision mediump float;\\nuniform highp mat4 projectionMatrix;\\nvarying highp float vDepth;\\nvarying vec4 fColor;\\nvarying vec2 fPosition;\\nhighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\\n\\t\\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\\n\\t#else\\n\\t\\treturn 0.0;\\n\\t#endif\\n}\\nfloat v2_length_func(vec2 v) {\\n\\treturn length(v);\\n}\\nfloat s_sub_func(float s1, float s2) {\\n\\treturn s1 - s2;\\n}\\nvec4 v4_construct_func(float x, float y, float z, float w) {\\n\\treturn vec4(x, y, z, w);\\n}\\nvec4 v4s_mult_func(vec4 v, float s) {\\n\\treturn v * s;\\n}\\nvoid main() {\\n\\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\\n\\tfloat distance_from_center = v2_length_func(fPosition);\\n\\tfloat distance_from_edge = s_sub_func(1.0, distance_from_center);\\n\\tvec4 c2olor = v4_construct_func(1.0, 1.0, 1.0, 1.0);\\n\\tvec4 color = v4s_mult_func(fColor, distance_from_edge);\\n\\t#ifdef L_EXT_frag_depth\\n\\t\\tgl_FragDepthEXT = log_depth_frag;\\n\\t#endif\\n\\tgl_FragColor = color;\\n}\\n"}}')},function(t,e,i){"use strict";i.r(e),e.default={uniforms:{modelViewMatrix:"mat4",projectionMatrix:"highp mat4",nearDistance:"float",midDistance:"float",pixelSize:"vec2",alphaMultiplier:"float",dashLength:"float",dashGapLength:"float",indexStart:"float",indexCount:"float",indexLength:"float",color:"vec4",alphaFade:"float",widthMin:"float",widthMax:"float"},properties:{transparent:!0,depthWrite:!1,side:"double",blending:"additive"},vertex:{extensions:["EXT_frag_depth"],code:"\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec3 positionPrev;\n\t\t\tattribute vec3 positionNext;\n\t\t\tattribute float side;\n\t\t\tattribute float index;\n\t\t\tattribute float dashOffset;\n\n\t\t\tuniform mat4 modelViewMatrix;\n\t\t\tuniform mat4 projectionMatrix;\n\t\t\tuniform float nearDistance;\n\t\t\tuniform float midDistance;\n\t\t\tuniform vec2 pixelSize;\n\t\t\tuniform float indexStart;\n\t\t\tuniform float indexCount;\n\t\t\tuniform float indexLength;\n\t\t\tuniform float widthMin;\n\t\t\tuniform float widthMax;\n\n\t\t\tvarying highp float vDepth;\n\t\t\tvarying vec4 fColor;\n\t\t\tvarying float fDashOffset;\n\t\t\tvarying float fIndexU;\n\n\t\t\tvec4 line_offset_func(float indexU, vec4 projected_center, vec4 projected_position_prev, vec4 projected_position_next, vec4 view_position, vec4 view_position_prev, vec4 view_position_next) {\n\t\t\t\tfloat aspectRatio = pixelSize.x / pixelSize.y;\n\t\t\t\tvec2 ndc_center = projected_center.xy / view_position.y;\n\t\t\t\tvec2 ndc_position_prev = projected_position_prev.xy / view_position_prev.y;\n\t\t\t\tvec2 ndc_position_next = projected_position_next.xy / view_position_next.y;\n\t\t\t\tndc_center.y /= aspectRatio;\n\t\t\t\tndc_position_prev.y /= aspectRatio;\n\t\t\t\tndc_position_next.y /= aspectRatio;\n\n\t\t\t\tfloat width = side * mix(widthMin, widthMax, indexU);\n\n\t\t\t\tvec2 l0 = normalize(ndc_center - ndc_position_prev);\n\t\t\t\tvec2 l1 = normalize(ndc_position_next - ndc_center);\n\t\t\t\tvec2 offset;\n\t\t\t\tif (ndc_center == ndc_position_prev) {\n\t\t\t\t\toffset = vec2(-l1.y, l1.x);\n\t\t\t\t}\n\t\t\t\telse if (ndc_center == ndc_position_next) {\n\t\t\t\t\toffset = vec2(-l0.y, l0.x);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\toffset = normalize(vec2(-l0.y - l1.y, l0.x + l1.x));\n\t\t\t\t\twidth /= max(0.25, sqrt((1.0 + dot(l0, l1)) / 2.0));\n\t\t\t\t}\n\t\t\t\toffset *= width * 0.5 / pixelSize.x;\n\t\t\t\toffset.y *= aspectRatio;\n\t\t\t\tndc_center.y *= aspectRatio;\n\t\t\t\treturn vec4((ndc_center + offset) * view_position.y, projected_center.z, view_position.y);\n\t\t\t}\n\n\t\t\tvec4 log_depth_vert_func(vec4 projectedPosition, vec4 viewPosition, float nearDistance, float midDistance) {\n\t\t\t\t#ifndef L_EXT_frag_depth\n\t\t\t\t\tfloat z = projectedPosition.w;\n\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\tprojectedPosition.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\tprojectedPosition.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\tprojectedPosition.z *= projectedPosition.w;\n\t\t\t\t\t}\n\t\t\t\t#else\n\t\t\t\t\tprojectedPosition.w = viewPosition.y;\n\t\t\t\t#endif\n\t\t\t\treturn projectedPosition;\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\tfloat indexU = mod(index - indexStart + indexLength, indexLength) / (indexCount - 1.0);\n\t\t\t\tvec4 view_position = modelViewMatrix * vec4(position, 1.0);\n\t\t\t\tvec4 view_positionPrev = modelViewMatrix * vec4(positionPrev, 1.0);\n\t\t\t\tvec4 view_positionNext = modelViewMatrix * vec4(positionNext, 1.0);\n\t\t\t\tvec4 projected_position = projectionMatrix * view_position;\n\t\t\t\tvec4 projected_positionPrev = projectionMatrix * view_positionPrev;\n\t\t\t\tvec4 projected_positionNext = projectionMatrix * view_positionNext;\n\n\t\t\t\tprojected_position = line_offset_func(indexU, projected_position, projected_positionPrev, projected_positionNext, view_position, view_positionPrev, view_positionNext);\n\t\t\t\tvec4 log_depth_vert = log_depth_vert_func(projected_position, view_position, nearDistance, midDistance);\n\t\t\t\tgl_Position = log_depth_vert;\n\t\t\t\tvDepth = projected_position.w;\n\t\t\t\tfIndexU = indexU;\n\t\t\t\tfDashOffset = dashOffset;\n\t\t\t}\n\t\t"},fragment:{extensions:["EXT_frag_depth"],code:"\n\t\t\tprecision mediump float;\n\n\t\t\tuniform highp mat4 projectionMatrix;\n\t\t\tuniform vec4 color;\n\t\t\tuniform float alphaMultiplier;\n\t\t\tuniform float alphaFade;\n\t\t\tuniform float dashLength;\n\t\t\tuniform float dashGapLength;\n\t\t\tuniform highp float indexStart;\n\t\t\tuniform highp float indexCount;\n\t\t\tuniform highp float indexLength;\n\n\t\t\tvarying highp float vDepth;\n\t\t\tvarying float fIndexU;\n\t\t\tvarying float fDashOffset;\n\n\t\t\thighp float log_depth_frag_func(highp float fragDepth, mat4 projectionMatrix) {\n\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\thighp float logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\treturn projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t#else\n\t\t\t\t\treturn 0.0;\n\t\t\t\t#endif\n\t\t\t}\n\n\t\t\tvec4 line_dash_func(vec4 color, float dashOffset, float dashLength, float dashGapLength) {\n\t\t\t\tfloat u = mod(dashOffset, dashLength + dashGapLength);\n\t\t\t\tfloat alpha = float(u < dashLength);\n\t\t\t\treturn vec4(color.rgb, color.a * alpha);\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\thighp float log_depth_frag = log_depth_frag_func(vDepth, projectionMatrix);\n\t\t\t\tvec4 color = color * mix(alphaFade, 1.0, fIndexU) * alphaMultiplier;\n\t\t\t\tvec4 lineDash = line_dash_func(color, fDashOffset, dashLength, dashGapLength);\n\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\tgl_FragDepthEXT = log_depth_frag;\n\t\t\t\t#endif\n\t\t\t\tgl_FragColor = lineDash;\n\t\t\t}"}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._entities=new s.Collection(this,new Map([["entity",s.Entity]])),this._controllerDependencyGraph=new s.DependencyGraph,this._ambientLightColor=new s.Color(.02,.02,.02),this._ambientLightColor.freeze(),this._lightSources=[],this._threeJsScene=null,this._threeJsScene=new s.THREE.Scene,this._controllerDependencyGraph.setUpdateItemCallback((function(t){t.getEntity().isEnabled()&&t.getCoverage().contains(t.getEntity().getScene().getEngine().getTime())&&t.isEnabled()&&t.__update()})),this._controllerDependencyGraph.setCompareItemCallback((function(t,e){if(t===e)return!1;if(!(t.getEntity().isEnabled()&&e.getEntity().isEnabled()&&t.isEnabled()&&e.isEnabled()))return!1;const i=t.getEntity().getScene().getEngine().getTime();if(!t.getCoverage().contains(i)||!e.getCoverage().contains(i))return!1;if(t.getEntity()===e.getEntity()){const i=t.getEntity();for(let s=0,a=i.getNumControllers();s<a;s++){const a=i.getController(s);if(e===a)return!0;if(t===a)break}}if(t.getEntity().getParent()===e.getEntity()){if(t.hasModifiedState("position")&&e.hasModifiedState("position")||t.hasModifiedState("velocity")&&e.hasModifiedState("velocity"))return!0;for(const i of e.__modifiedStates)if(t.hasDependentState("parent",i))return!0}for(const i of e.__modifiedStates)if(t.hasDependentState(e.getEntity().getName(),i))return!0;return!1}))}getEngine(){return this.__getCollectionParent()}getEntity(t){return this._entities.get(t)}getNumEntities(){return this._entities.size}addEntity(t){return this._entities.add("entity",t)}removeEntity(t){this._entities.remove(t)}get(t,e,i=0){const s=this._entities.get(t);return void 0===e||null===s?s:s.get(e,i)}getControllerDependencyGraph(){return this._controllerDependencyGraph}getAmbientLightColor(){return this._ambientLightColor}setAmbientLightColor(t){this._ambientLightColor.thaw(),this._ambientLightColor.copy(t),this._ambientLightColor.freeze()}__addLightSource(t,e=0){for(let i=0,s=this._lightSources.length;i<s;i++){const s=this._lightSources[i];if(s.getEntityName()===t&&s.getComponentTypeIndex()===e)throw new Error(`Light source on ${t} with type index ${e} already added.`)}const i=new s.ComponentRef(this);i.setByType(t,"lightSource",e),this._lightSources.push(i)}__removeLightSource(t,e=0){for(let i=0,s=this._lightSources.length;i<s;i++){const s=this._lightSources[i];if(s.getEntityName()===t&&s.getComponentTypeIndex()===e)return void this._lightSources.splice(i,1)}throw new Error(`Light source on ${t} with type index ${e} not found.`)}getLightSource(t){return 0<=t&&t<this._lightSources.length?this._lightSources[t].get():null}getNumLightSources(){return this._lightSources.length}getLoadedPromise(){const t=[];for(let e=0,i=this._entities.size;e<i;e++)t.push(this._entities.get(e).getLoadedPromise());return Promise.all(t).then()}__destroy(){super.__destroy(),this._entities.__destroy()}getThreeJsScene(){return this._threeJsScene}__update(){const t=this.getEngine().getTime();for(let e=this._entities.size-1;e>=0;e--){const i=this._entities.get(e);i.__updateParent(t),i.__updateIsInCoverages(t)}this._controllerDependencyGraph.update()}__updateVisuals(){for(let t=this._entities.size-1;t>=0;t--){const e=this._entities.get(t);e.isInPositionCoverage()&&e.isEnabled()&&this._entities.get(t).__updateVisuals()}}__removeCameraDependents(t){for(let e=this._entities.size-1;e>=0;e--)this._entities.get(e).__removeCameraDependents(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.THREE.Loader{constructor(t,e){super(),this._downloader=t,this._renderer=e,this._crossOrigin="anonymous",this._path=void 0,this._white=null,this._black=null,this._clear=null,this._pink=null,this._threeJsTextureLoader=new s.THREE.TextureLoader,this._threeJsTextureLoader.setCrossOrigin(this._crossOrigin),this._threeJsTextureLoader.setPath(this._path),this._white=a._newTexture(new s.Color(1,1,1,1)),this._black=a._newTexture(new s.Color(0,0,0,1)),this._clear=a._newTexture(new s.Color(0,0,0,0)),this._pink=a._newTexture(new s.Color(1,105/255,180/255,1)),s.THREE.DefaultLoadingManager.addHandler(/.$/i,this)}async loadIntoUniform(t,e,i){return this.loadTexture(e,i).then(e=>{null!==t.value&&t.value.dispose(),t.value=e})}async loadCubeTexture(t,e){const i=new s.THREE.CubeTexture,a=[];for(let s=0;s<6;s++){const r=t.replace("$FACE",n[s]);a.push(new Promise(t=>{this.loadTexture(r,e).then(e=>{i.images[s]=e.image,t()})}))}return Promise.all(a).then(()=>(i.needsUpdate=!0,i))}async loadTexture(t,e){return new Promise((i,s)=>{this.load(t,t=>{i(t)},void 0,(t,e)=>{s(new Error("Failed to load "+e))},e)})}generateEnvMap(t){let e=t;if(!(t instanceof s.THREE.CubeTexture)){const i={depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!0,minFilter:s.THREE.LinearMipMapLinearFilter,magFilter:s.THREE.LinearFilter};e=new s.THREE.WebGLCubeRenderTarget(512,i).fromEquirectangularTexture(this._renderer,t).texture}const i=new s.THREE.PMREMGenerator(this._renderer);return i.compileEquirectangularShader(),i.fromEquirectangular(e).texture}load(t,e,i,a,n){let r=null;if("white"===(t=this._downloader.processUrl(t))?r=this._white:"black"===t?r=this._black:"clear"===t?r=this._clear:"pink"===t&&(r=this._pink),null!==r)e(r);else if(t.includes(".mp4")){const i=document.createElement("video");i.src=t,i.autoplay=!0,i.loop=!1,(r=new s.THREE.VideoTexture(i)).format=s.THREE.RGBAFormat,r.flipY=!1,r.needsUpdate=!0,e(r)}else this._threeJsTextureLoader.load(t,t=>{t.flipY=!1,!1===n&&(t.minFilter=s.THREE.LinearFilter,t.generateMipmaps=!1),t.needsUpdate=!0,e(t)},void 0,e=>{a(e,t)});return r}get crossOrigin(){return this._crossOrigin}set crossOrigin(t){this._crossOrigin=t,this._threeJsTextureLoader&&this._threeJsTextureLoader.setCrossOrigin(this._crossOrigin)}setCrossOrigin(t){return this.crossOrigin=t,this}get path(){return this._path}set path(t){this._path=t,this._threeJsTextureLoader&&this._threeJsTextureLoader.setPath(this._path)}setPath(t){return this.path=t,this}static _newTexture(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d");return i.fillStyle="rgba("+255*t.r+","+255*t.g+","+255*t.b+","+255*t.a+")",i.fillRect(0,0,1,1),new s.THREE.CanvasTexture(e)}}const n=["posx","negx","posy","negy","posz","negz"];e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.TextureLoader{constructor(t,e,i){super(t,i),this._config=e,this._threeJsKTXLoader=new s.ThreeJsKTXLoader,this._threeJsKTXLoader.setCrossOrigin(this._crossOrigin),this._threeJsKTXLoader.setPath(this._path)}load(t,e,i,a,n){if(null!==t.match(/_n\.[^.]+$/))return super.load(t,e,i,a,n);let r=null;return"white"===(t=this._downloader.processUrl(t))?r=this._white:"black"===t?r=this._black:"clear"===t?r=this._clear:"pink"===t&&(r=this._pink),null!==r?e(r):(t=t.replace(/\.(\w+)$/,"-"+s.Capabilities.__getCompressedTextureExtension()+".ktx"),this._threeJsKTXLoader.load(t,t=>{t.flipY=!1,t.needsUpdate=!0,!1===n&&(t.minFilter=s.THREE.LinearFilter,t.generateMipmaps=!1),t.ktxFormat=t.format,e(t)},void 0,e=>{a(e,t)})),r}}},function(t,e,i){"use strict";i.r(e),e.default="39.0.0"},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.CollectionItem{constructor(t,e,i){super(t,e,i),this._enabled=!0,this._camera=null,this._div=document.createElement("div"),this._bounds=new s.Rect(0,0,0,0),this._bounds.freeze(),this._backgroundColor=new s.Color(0,0,0,1),this._backgroundColor.freeze(),this._threeJsBackgroundColor=new s.THREE.Color,this._div.style.position="absolute",this._div.style.overflow="hidden",this._div.id=e||"",this._div.classList.add("viewport"),this._enabled||(this._div.style.display="none"),this.getEngine().getViewportDiv().appendChild(this._div);const a=this.getEngine().getRootDiv();this._bounds.thaw(),this._bounds.set(this._div.offsetLeft-a.offsetLeft,this._div.offsetTop-a.offsetTop,this._div.offsetWidth,this._div.offsetHeight),this._bounds.freeze();const n=this.getEngine().getInput();null===n.getActiveViewport()&&n.__setActiveViewport(this)}getEngine(){return this.__getCollectionParent()}getDiv(){return this._div}getBounds(){return this._bounds}getBackgroundColor(){return this._backgroundColor}setBackgroundColor(t){this._backgroundColor.thaw(),this._backgroundColor=t,this._backgroundColor.freeze(),this._threeJsBackgroundColor.setRGB(this._backgroundColor.r,this._backgroundColor.g,this._backgroundColor.b)}getCamera(){return this._camera}setCamera(t){this._camera=t,null!==this._camera&&this._camera.__setViewport(this)}isEnabled(){return this._enabled}setEnabled(t){this._enabled=t,this._enabled?this._div.style.display="block":this._div.style.display="none"}getNormalSpacePositionFromPixelSpacePosition(t,e){t.x=2*(e.x-this._bounds.origin.x)/this._bounds.size.x-1,t.y=1-2*(e.y-this._bounds.origin.y)/this._bounds.size.y,t.z=1}getPixelSpacePositionFromNormalSpacePosition(t,e){t.x=this._bounds.size.x*(e.x+1)/2+this._bounds.origin.x,t.y=this._bounds.size.y*(1-e.y)/2+this._bounds.origin.y}getPixelSpaceRadiusFromNormalSpaceRadius(t){return t*Math.max(this._bounds.size.x,this._bounds.size.y)}getNormalSpaceRadiusFromPixelSpaceRadius(t){return t/Math.max(this._bounds.size.x,this._bounds.size.y)}__destroy(){super.__destroy(),this._div.parentNode.removeChild(this._div)}__updateViewportVariables(){this._enabled&&(this._bounds.thaw(),this._bounds.set(this._div.offsetLeft,this._div.offsetTop,this._div.offsetWidth,this._div.offsetHeight),this._bounds.freeze(),null!==this._camera&&this._camera.__updateCameraVariablesForConnectedScene())}__render(){if(!this._enabled)return;const t=this.getEngine().__getThreeJsRenderer(),e=this.getEngine().getRootDiv().offsetHeight-this._div.offsetTop-this._div.offsetHeight;t.setViewport(this._bounds.origin.x,e,this._bounds.size.x,this._bounds.size.y),t.setScissor(this._bounds.origin.x,e,this._bounds.size.x,this._bounds.size.y),this._threeJsBackgroundColor.setRGB(this._backgroundColor.r,this._backgroundColor.g,this._backgroundColor.b),t.setClearColor(this._threeJsBackgroundColor,this._backgroundColor.a),null!==this._camera?(this._camera.__prepareForRender(),this._camera.__render()):this.getEngine().__getThreeJsRenderer().clear()}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.EntityItem{constructor(t,e,i){super(t,e,i),this._radius=.5,this._pixelSpaceRadiusPerCamera=new s.FastMap,this._greatestPixelSpaceRadius=0,this._loadState="unloaded",this._forceLoaded=!1,this._resourcesLoadedCallback=null,this._resourcesUnloadedCallback=null,this._loadedPromise=Promise.resolve(),this._excludedCameras=new Set,this._threeJsObjects=[],this._threeJsMaterials=[],this._usesEntityOrientation=!1}__destroy(){"loaded"===this._loadState&&this._unloadResources(),super.__destroy()}setEnabled(t){super.setEnabled(t),this.__updateLoadState()}getRadius(){return this._radius}__setRadius(t){this._radius=t}getPixelSpaceRadiusInCamera(t){return this._pixelSpaceRadiusPerCamera.get(t)}getGreatestPixelSpaceRadius(){return this._greatestPixelSpaceRadius}getThreeJsObjects(){return this._threeJsObjects}getThreeJsMaterials(){return this._threeJsMaterials}getThreeJsObjectByName(t){for(let e=0;e<this._threeJsObjects.length;e++){const i=this._threeJsObjects[e];if(i.name===t)return i}return null}getLoadState(){return this._loadState}setForceLoaded(t){this._forceLoaded=t,this._forceLoaded&&"unloaded"===this._loadState&&this._loadResources()}__updateLoadState(){const t=this.getEntity(),e=t.isEnabled()&&this.isEnabled(),i=t.isInPositionCoverage()&&(t.isInOrientationCoverage()||!this._usesEntityOrientation);e&&(this._forceLoaded||i&&this._greatestPixelSpaceRadius>.5)&&"unloaded"===this._loadState?this._loadResources():e&&(this._forceLoaded||i&&!(this._greatestPixelSpaceRadius<.25))||"loaded"!==this._loadState||this._unloadResources()}resetResources(){"loading"===this._loadState?this._loadState="unloaded":"loaded"===this._loadState&&this._unloadResources()}setResourcesLoadedCallback(t){this._resourcesLoadedCallback=t}setResourcesUnloadedCallback(t){this._resourcesUnloadedCallback=t}_loadResources(){this._loadState="loading",this._loadedPromise=this.__loadResources().then(()=>{"loading"===this._loadState?(this._loadState="loaded",null!==this._resourcesLoadedCallback&&this._resourcesLoadedCallback()):this._unloadResources()})}_unloadResources(){this.__unloadResources(),this._loadState="unloaded",this._threeJsObjects=[],this._threeJsMaterials=[],null!==this._resourcesUnloadedCallback&&this._resourcesUnloadedCallback()}__loadResources(){return Promise.resolve()}__unloadResources(){}getLoadedPromise(){return this._loadedPromise}__updateCameraVariablesBase(t){const e=t.getViewport(),i=t.getNormalSpaceRadiusFromRadius(this._radius,this.getEntity().getCameraSpacePosition(t).magnitude()),s=e.getPixelSpaceRadiusFromNormalSpaceRadius(i);this._pixelSpaceRadiusPerCamera.set(t,s),this.__updateCameraVariables(t)}__updateBase(){this._greatestPixelSpaceRadius=0;for(let t=0,e=this._pixelSpaceRadiusPerCamera.size;t<e;t++){const e=this._pixelSpaceRadiusPerCamera.getAt(t).value;this._greatestPixelSpaceRadius<e&&(this._greatestPixelSpaceRadius=e)}this.__updateLoadState(),this.__update()}__prepareForRenderBase(t){if("loaded"===this._loadState)if(this._excludedCameras.has(t))for(let t=0;t<this._threeJsObjects.length;t++)this._threeJsObjects[t].visible=!1;else{for(let t=0;t<this._threeJsObjects.length;t++)this._threeJsObjects[t].visible=!0;if(this.__prepareForRender(t),!s.Capabilities.hasFragDepth())for(let e=0;e<this._threeJsMaterials.length;e++){const i=this._threeJsMaterials[e].uniforms;void 0!==i.nearDistance&&(i.nearDistance.value=t.getAutoNearDistance(),i.midDistance.value=t.getAutoMidDistance())}for(let t=0;t<this._threeJsObjects.length;t++)this._threeJsObjects[t].updateMatrix()}}__updateCameraVariables(t){}__prepareForRender(t){}getUsesEntityOrientation(){return this._usesEntityOrientation}__setUsesEntityOrientation(t){this._usesEntityOrientation=t,this.__updateLoadState()}isExcludedFromCamera(t){return this._excludedCameras.has(t)}setExcludedFromCamera(t,e){!e&&this._excludedCameras.has(t)?this._excludedCameras.delete(t):e&&!this._excludedCameras.has(t)&&(this.__removeCameraDependents(t),this._excludedCameras.add(t))}__removeCameraDependentsBase(t){this._pixelSpaceRadiusPerCamera.delete(t),this.__removeCameraDependents(t)}__clearCameraDependentsBase(){this._pixelSpaceRadiusPerCamera.clear(),this.__clearCameraDependents()}__removeCameraDependents(t){}__clearCameraDependents(){}toString(){let t=0;for(let e=0,i=this.getEntity().getNumComponents();e<i;e++){const i=this.getEntity().getComponent(e);if(this===i)break;this.getType()===i.getType()&&(t+=1)}return this.getEntity().getName()+"."+this.getType()+"."+t}}a._tempThreeJsQuaternion=new s.THREE.Quaternion,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);const a="\n\tattribute vec3 position;\n\tuniform mat4 projectionMatrix;\n\tuniform mat4 modelViewMatrix;\n\n\tuniform float scaleHeight;\n\tuniform float equatorialRadius;\n\tuniform float polarRadius;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvarying vec3 localPosition;\n\n\tvoid main() {\n\t\tfloat scaleHeightMultiplier = 20.0;\n\t\tlocalPosition = vec3(position.x * (equatorialRadius + scaleHeight * scaleHeightMultiplier), position.y * (equatorialRadius + scaleHeight * scaleHeightMultiplier), position.z * (polarRadius + scaleHeight * scaleHeightMultiplier));\n\t\tvec4 viewPosition = modelViewMatrix * vec4(localPosition, 1.);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",n="\n\tuniform vec3 lightPositions[5];\n\tuniform vec3 lightColors[5];\n\tuniform int numLights;\n\n\tuniform float density;\n\tuniform float scaleHeight;\n\tuniform float equatorialRadius;\n\tuniform float polarRadius;\n\tuniform vec3 cameraPosition;\n\tuniform vec4 entityOrientation;\n\tuniform vec3 color;\n\tuniform float emissivity;\n\tuniform float sunBrightness;\n\tuniform vec3 sunsetColor;\n\tuniform float sunsetIntensity;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvarying vec3 localPosition;\n\n\tconst int numIterations = 5;\n\n\t// Inverse rotate a vector by a quaternion.\n\tvec3 quatRotInv(vec4 q, vec3 v) {\n\t\tfloat tx = q.w * v.x - q.y * v.z + q.z * v.y;\n\t\tfloat ty = q.w * v.y - q.z * v.x + q.x * v.z;\n\t\tfloat tz = q.w * v.z - q.x * v.y + q.y * v.x;\n\t\tfloat tw = q.x * v.x + q.y * v.y + q.z * v.z;\n\t\tfloat x = tx * q.w + tw * q.x + ty * q.z - tz * q.y;\n\t\tfloat y = ty * q.w + tw * q.y + tz * q.x - tx * q.z;\n\t\tfloat z = tz * q.w + tw * q.z + tx * q.y - ty * q.x;\n\t\treturn vec3(x, y, z);\n\t}\n\n\t// Given an origin and direction, computes the sampling start and end as distance from the origin in the direction.\n\tvoid getStartEndSamples(out float start, out float end, vec3 origin, vec3 direction, float maxDistance, float groundRadius, float atmosphereScaleHeight) {\n\t\t// Get the along the ray perpendicular to the sphere.\n\t\tfloat perpD = -dot(origin, direction);\n\t\tvec3 perp = origin + direction * perpD;\n\n\t\t// Figure out the sample distance.\n\t\tfloat atmosphereRadius = groundRadius + atmosphereScaleHeight * 6.0;\n\t\tfloat chordHalfLength = sqrt(max(0.0, atmosphereRadius * atmosphereRadius - dot(perp, perp)));\n\n\t\t// Figure out starting and ending sample points, and step distance.\n\t\tstart = max(0.0, perpD - chordHalfLength);\n\t\tend = min(maxDistance, perpD + chordHalfLength);\n\t}\n\n\t// Gets the density of the atmosphere at a given position.\n\tfloat getDensity(vec3 position, float radius, float density, float atmosphereScaleHeight) {\n\t\treturn density * exp(min(radius - length(position), 0.0) / atmosphereScaleHeight);\n\t}\n\n\t// Returns 0 if the ray does not intersect and 1.0 if the ray very intersects (with a gradient inbetween).\n\tfloat getDayLevel(vec3 origin, vec3 direction, float radius, float scaleHeight) {\n\t\tfloat blendHeight = scaleHeight * radius / 200.0;\n\t\tfloat perpD = -dot(origin, direction);\n\t\tfloat depth = radius - sqrt(dot(origin, origin) - sign(perpD) * perpD * perpD);\n\t\tif (depth < 0.0) { // day\n\t\t\treturn 1.0 - max(0.0, 0.25 * depth / blendHeight + 0.25);\n\t\t}\n\t\telse { // night\n\t\t\treturn 1.0 - min(1.0, 0.75 * depth / blendHeight + 0.25);\n\t\t}\n\t}\n\n\tfloat easeInOut(float x, float sharpness) {\n\t\tfloat b = sharpness;\n\t\tif (x < 0.5) {\n\t\t\treturn max(0.0, (pow(b, 2.0 * x) - 1.0) / (2.0 * (b - 1.0)));\n\t\t}\n\t\telse {\n\t\t\treturn min(1.0, 1.0 - (pow(b, 2.0 * (1.0 - x)) - 1.0) / (2.0 * (b - 1.0)));\n\t\t}\n\t}\n\n\tvec3 adjustOverbrightness(vec3 color) {\n\t\tfloat maxColor = max(color.r, max(color.g, color.b));\n\t\tif (maxColor > 1.0) {\n\t\t\tfloat f = (maxColor - 1.0) / maxColor;\n\t\t\tcolor.r = min(1.0, pow(color.r / maxColor, 1.0 / maxColor));\n\t\t\tcolor.g = min(1.0, pow(color.g / maxColor, 1.0 / maxColor));\n\t\t\tcolor.b = min(1.0, pow(color.b / maxColor, 1.0 / maxColor));\n\t\t}\n\t\treturn color;\n\t}\n\n\t// Calculates a glow around the light direction (the star).\n\tfloat glow(float spread, float amount, float lightDotCamera) {\n\t\treturn amount * spread / (1.0 + spread - lightDotCamera);\n\t}\n\n\t// Gets the color for an atmosphere.\n\tvec4 getColor(float totalDensity, vec3 lightColor, vec3 lightPosition, float spheroidRatio, vec3 positionS, vec3 cameraPositionS, vec3 cameraToPositionUnit) {\n\t\t// The color that will be added onto gl_FragColor.\n\t\tvec4 outColor;\n\n\t\t// Apply the total density to the transparency of the atmosphere.\n\t\toutColor.a = clamp(totalDensity, 0.0, 1.0);\n\n\t\t// Multiply it all together with the source light color.\n\t\toutColor.rgb = lightColor * color * clamp(pow(15.0 * totalDensity / (density * equatorialRadius), 0.2), 0.75, 1.0);\n\n\t\t// Make it more opaque when lower down.\n\t\toutColor.a = mix(outColor.a, 1.0, getDensity(cameraPositionS, equatorialRadius + scaleHeight, 1.0, 2.0 * scaleHeight));\n\n\t\t// Make the alpha dependent on the brightness of the light.\n\t\toutColor.a *= length(lightColor) / sqrt(3.0);\n\n\t\t// Clamp it to make it clean for the day/night transition.\n\t\toutColor.a = clamp(outColor.a, 0.0, 1.0);\n\n\t\thighp vec3 lightPositionS = quatRotInv(entityOrientation, lightPosition);\n\t\tlightPositionS.z *= spheroidRatio;\n\n\t\thighp vec3 lightToPosition = positionS - lightPositionS;\n\t\thighp vec3 lightToPositionUnit = normalize(lightToPosition / 1.0e8);\n\n\t\t// Get the day level, from 0 to 1, and apply it to the alpha. Lots of tricks to get it looking good on earth.\n\t\tvec3 dayRefUp = normalize(cameraPositionS - min(0.0, dot(cameraPositionS, cameraToPositionUnit)) * cameraToPositionUnit);\n\t\tfloat dayLevel = -dot(lightToPositionUnit, dayRefUp);\n\t\toutColor.rgb *= mix(emissivity, 1.0, easeInOut(0.5 + 2.0 * dayLevel, 2.0));\n\t\toutColor.a *= mix(emissivity, 1.0, easeInOut(1.0 + 2.0 * dayLevel, 2.0));\n\n\t\t// Brighten up the atmosphere when looking from space toward the sun.\n\t\tfloat lightDotCamera = max(0.0, -dot(lightToPositionUnit, cameraToPositionUnit));\n\t\toutColor.a = clamp(outColor.a * (1.0 + glow(0.004, 1.0, lightDotCamera)), 0.0, 1.0);\n\n\t\t// Add narrower sun glare.\n\t\toutColor.rgb *= lightColor * (1.0 + sunBrightness * outColor.a * glow(0.00004, 1.0, lightDotCamera));\n\n\t\t// Add broader sun glare.\n\t\toutColor.rgb *= lightColor * (1.0 + sunBrightness * outColor.a * glow(0.04, 0.125, lightDotCamera));\n\n\t\t// Apply the sunset.\n\t\tfloat lightDotHorizon = pow(clamp(1.0 - dot(lightToPositionUnit, dayRefUp), 0.0, 1.0), 2.0);\n\t\tfloat cameraDotHorizon = pow(clamp(1.0 - dot(cameraToPositionUnit, dayRefUp), 0.0, 1.0), 8.0);\n\t\tfloat sunsetAmount = sunsetIntensity * lightDotHorizon * cameraDotHorizon * glow(0.04, 0.5, lightDotCamera);\n\t\toutColor.rgb = mix(outColor.rgb, sunsetColor, clamp(sunsetAmount, 0.0, 1.0));\n\n\t\treturn outColor;\n\t}\n\n\tvoid main(void) {\n\t\t// Convert everything into a sphere frame.\n\t\tfloat spheroidRatio = equatorialRadius / polarRadius;\n\t\thighp vec3 positionS = localPosition;\n\t\thighp vec3 cameraPositionS = cameraPosition;\n\t\tpositionS.z *= spheroidRatio;\n\t\tcameraPositionS.z *= spheroidRatio;\n\n\t\thighp vec3 cameraToPosition = positionS - cameraPositionS;\n\t\thighp float cameraToPositionDist = length(cameraToPosition / 1.0e8) * 1.0e8;\n\t\thighp vec3 cameraToPositionUnit = cameraToPosition / cameraToPositionDist;\n\n\t\t// Get the start and end of the sampling from the camera to the position.\n\t\tfloat start;\n\t\tfloat end;\n\t\tgetStartEndSamples(start, end, cameraPositionS, cameraToPositionUnit, 1.0e24, equatorialRadius, scaleHeight);\n\t\tfloat step = 1.0 / float(numIterations - 1);\n\t\tfloat stepDist = step * (end - start);\n\n\t\t// Do the sampling.\n\t\tfloat totalDensity = 0.0;\n\t\tfloat segmentStart = start;\n\t\tfor (int j = 0; j < numIterations; j++) {\n\t\t\t// Get the distance that this segment covers.\n\t\t\tfloat segDist = stepDist;\n\t\t\tif (j == 0 || j == numIterations - 1) {\n\t\t\t\tsegDist *= 0.5;\n\t\t\t}\n\n\t\t\t// Get the segment start that we're looking at.\n\t\t\tvec3 p = cameraPositionS + segmentStart * cameraToPositionUnit;\n\n\t\t\t// Get the density at that segment start. It'll be the density for the whole segment.\n\t\t\tfloat densityAtP = getDensity(p, equatorialRadius, density, scaleHeight);\n\n\t\t\t// Add it to the total density.\n\t\t\ttotalDensity += densityAtP * segDist;\n\n\t\t\t// Next step.\n\t\t\tsegmentStart += stepDist;\n\t\t}\n\n\t\t// For each light,\n\t\tfor (int i = 0; i < 5; i++) {\n\t\t\tif (i >= numLights) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// If it's not a camera light,\n\t\t\tif (length(lightPositions[i]) > 0.0) {\n\t\t\t\t// Add on the color for the light.\n\t\t\t\tgl_FragColor += getColor(totalDensity, lightColors[i], lightPositions[i], spheroidRatio, positionS, cameraPositionS, cameraToPositionUnit);\n\t\t\t}\n\t\t}\n\n\t\t// Adjust for values that are greater than one.\n\t\tgl_FragColor.rgb = adjustOverbrightness(gl_FragColor.rgb);\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}";e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._density=0,this._scaleHeight=1,this._emissivity=0,this._color=new s.Color,this._color.freeze(),this._sunBrightness=1,this._sunsetColor=new s.Color,this._sunsetColor.freeze(),this._sunsetIntensity=0,this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}getSpheroid(){return this._spheroidComponentRef.get()}getDensity(){return this._density}setDensity(t){this._density=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"density",t)}getScaleHeight(){return this._scaleHeight}setScaleHeight(t){this._scaleHeight=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"scaleHeight",t)}getEmissivity(){return this._emissivity}setEmissivity(t){this._emissivity=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"emissivity",t)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGB(this.getThreeJsMaterials()[0],"color",t)}getSunBrightness(){return this._sunBrightness}setSunBrightness(t){this._sunBrightness=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"sunBrightness",t)}getSunsetColor(){return this._sunsetColor}setSunsetColor(t){this._sunsetColor.thaw(),this._sunsetColor.copy(t),this._sunsetColor.freeze(),s.ThreeJsHelper.setUniformColorRGB(this.getThreeJsMaterials()[0],"sunsetColor",t)}getSunsetIntensity(){return this._sunsetIntensity}setSunsetIntensity(t){this._sunsetIntensity=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"sunsetIntensity",t)}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){this._spheroidComponentRef.update()}__prepareForRender(t){const e=s.Vector3.pool.get();e.neg(this.getEntity().getCameraSpacePosition(t)),e.rotateInverse(this.getEntity().getOrientation(),e),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"cameraPosition",e),s.Vector3.pool.release(e),s.MaterialUtils.setLightSourceUniforms(this.getThreeJsMaterials(),this.getEntity(),t),s.ThreeJsHelper.setUniformQuaternion(this.getThreeJsMaterials()[0],"entityOrientation",this.getEntity().getOrientation()),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}__loadResources(){const t=new s.THREE.RawShaderMaterial({uniforms:{lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),density:new s.THREE.Uniform(this._density),scaleHeight:new s.THREE.Uniform(this._scaleHeight),emissivity:new s.THREE.Uniform(this._emissivity),equatorialRadius:new s.THREE.Uniform(1),polarRadius:new s.THREE.Uniform(1),cameraPosition:new s.THREE.Uniform(new s.THREE.Vector3(1,0,0)),entityOrientation:new s.THREE.Uniform(new s.THREE.Vector4(1,0,0,0)),color:new s.THREE.Uniform(new s.THREE.Vector3(this._color.r,this._color.g,this._color.b)),sunBrightness:new s.THREE.Uniform(this._sunBrightness),sunsetColor:new s.THREE.Uniform(new s.THREE.Vector3(this._sunsetColor.r,this._sunsetColor.g,this._sunsetColor.b)),sunsetIntensity:new s.THREE.Uniform(this._sunsetIntensity),nearDistance:new s.THREE.Uniform(0),midDistance:new s.THREE.Uniform(0)},vertexShader:s.ShaderFix.fix(a,"vertex"),fragmentShader:s.ShaderFix.fix(n,"fragment"),transparent:!0,depthWrite:!1,blending:s.THREE.NormalBlending});this.getThreeJsMaterials().push(t);const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3}],!1);this.getThreeJsObjects().push(e);const i=s.MathUtils.pi/63,r=s.MathUtils.twoPi/128,o=new Float32Array(24768),l=new Uint16Array(48384),c=s.Vector3.pool.get(),h=s.LatLonAlt.pool.get();for(let t=0;t<64;t++){h.lat=t*i-s.MathUtils.halfPi,h.alt=0;const e=Math.cos(h.lat),a=Math.sin(h.lat);for(let i=0;i<129;i++){h.lon=i*r-s.MathUtils.pi;const n=129*t+i;o[3*n+0]=e*Math.cos(h.lon),o[3*n+1]=e*Math.sin(h.lon),o[3*n+2]=a;const c=128*t+i;t<63&&i<128&&(l[6*c+0]=129*(t+0)+(i+0),l[6*c+1]=129*(t+1)+(i+0),l[6*c+2]=129*(t+1)+(i+1),l[6*c+3]=129*(t+0)+(i+0),l[6*c+4]=129*(t+1)+(i+1),l[6*c+5]=129*(t+0)+(i+1))}}return s.LatLonAlt.pool.release(h),s.Vector3.pool.release(c),s.ThreeJsHelper.setVertices(e.geometry,"position",o),s.ThreeJsHelper.setIndices(e.geometry,l),s.ThreeJsHelper.setRenderOrder(e,-1),s.ThreeJsHelper.useInDynEnvMap(e,!0),this._spheroidChangedCallback(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get(),e=this.getThreeJsMaterials()[0];null!==t?(this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())),void 0!==e&&(s.ThreeJsHelper.setUniformNumber(e,"equatorialRadius",t.getEquatorialRadius()),s.ThreeJsHelper.setUniformNumber(e,"polarRadius",t.getPolarRadius()))):(this.__setRadius(0),void 0!==e&&(s.ThreeJsHelper.setUniformNumber(e,"equatorialRadius",0),s.ThreeJsHelper.setUniformNumber(e,"polarRadius",0)))}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._threeJsRenderer=this.getEntity().getScene().getEngine().__getThreeJsRenderer(),this._viewport=null,this._threeJsScene=i.getScene().getThreeJsScene(),this._fieldOfView=1.0471975512,this._nearDistance=void 0,this._autoNearDistance=0,this._midDistance=void 0,this._autoMidDistance=0,this._aspectRatio=1,this._renderSize=new s.Vector2,this._occludingEntities=[],this._threeJsCamera=new s.THREE.PerspectiveCamera(75,this._aspectRatio,.1,1e3),this._threeJsComposer=null,this._outlinePass=new s.ThreeJsOutlinePass(void 0,this._threeJsScene,this._threeJsCamera,[]),this._outlinePass.enabled=!1,this._threeJsUnrealBloomPass=new s.ThreeJsUnrealBloomPass(void 0,0,0,0),this._threeJsUnrealBloomPass.enabled=!1,this.__setupEffectComposer()}getViewport(){return this._viewport}getFieldOfView(){return this._fieldOfView}getHorizontalFieldOfView(){return this._aspectRatio>=1?this._fieldOfView:2*Math.atan(Math.tan(this._fieldOfView/2)*this._aspectRatio)}getVerticalFieldOfView(){return this._aspectRatio>1?2*Math.atan(Math.tan(this._fieldOfView/2)/this._aspectRatio):this._fieldOfView}setFieldOfView(t){this._fieldOfView=t}getNearDistance(){return this._nearDistance}setNearDistance(t){this._nearDistance=t}getAutoNearDistance(){return this._autoNearDistance}getMidDistance(){return this._midDistance}setMidDistance(t){this._midDistance=t}getAutoMidDistance(){return this._autoMidDistance}getNormalSpacePositionFromCameraSpacePosition(t,e){const i=s.Quaternion.pool.get();i.copy(this.getEntity().getOrientation()),i.inverse(i);const a=s.Vector3.pool.get();a.rotate(i,e),s.Quaternion.pool.release(i),t.x=this._threeJsCamera.projectionMatrix.elements[0]*a.x/a.y,t.y=this._threeJsCamera.projectionMatrix.elements[9]*a.z/a.y,t.z=this._threeJsCamera.projectionMatrix.elements[6]+this._threeJsCamera.projectionMatrix.elements[14]/a.y,s.Vector3.pool.release(a)}getNormalSpaceRadiusFromRadius(t,e){return t/e/Math.tan(this._fieldOfView/2)}getCameraSpacePositionFromNormalSpacePosition(t,e){const i=s.Vector3.pool.get();i.y=this._threeJsCamera.projectionMatrix.elements[14]/(e.z-this._threeJsCamera.projectionMatrix.elements[6]),i.x=e.x*i.y/this._threeJsCamera.projectionMatrix.elements[0],i.z=e.y*i.y/this._threeJsCamera.projectionMatrix.elements[9],t.rotate(this.getEntity().getOrientation(),i),s.Vector3.pool.release(i)}getRadiusFromNormalSpaceRadius(t,e){return t*e*Math.tan(this._fieldOfView/2)}isPositionOccluded(t){for(let e=0;e<this._occludingEntities.length;e++)if(this._occludingEntities[e].isOccludingPosition(this,t))return!0;return!1}getNearestIntersectingEntity(t){let e=Number.POSITIVE_INFINITY,i=null;const a=s.Interval.pool.get();for(let n=0;n<this._occludingEntities.length;n++){const r=this._occludingEntities[n].getCameraSpacePosition(this);if(s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(a,t,r,this._occludingEntities[n].getOcclusionRadius()),!Number.isNaN(a.min)&&a.min>=0){const t=a.min*r.magnitude();t<e&&(e=t,i=this._occludingEntities[n])}}return s.Interval.pool.release(a),i}setBloom(t){this._threeJsUnrealBloomPass.enabled=t>0,this._threeJsUnrealBloomPass.strength=t}setOutline(t,e,i){if(this._outlinePass.enabled=null!==e,null!==e){if(void 0!==i)this._outlinePass.selectedObjects=[e.getThreeJsObjectByName(i)];else{const t=e.getThreeJsObjects();this._outlinePass.selectedObjects=[];for(let e=0,i=t.length;e<i;e++)t[e].parent===this._threeJsScene&&this._outlinePass.selectedObjects.push(t[e])}this._outlinePass.visibleEdgeColor.setRGB(t.r,t.g,t.b),this._outlinePass.hiddenEdgeColor.setRGB(t.r/4,t.g/4,t.b/4)}this.__setupEffectComposer()}__addToOccludingEntities(t){for(let e=0;e<this._occludingEntities.length;e++)if(this._occludingEntities[e]===t)return;this._occludingEntities.push(t)}__destroy(){super.__destroy(),this.getEntity().getScene().__removeCameraDependents(this),null!==this._viewport&&this._viewport.setCamera(null)}__updateCameraVariablesForConnectedScene(){const t=this._viewport.getBounds().size;if(!t.equals(this._renderSize)){const e=t.x/t.y;this._aspectRatio!==e&&(this._aspectRatio=e),this._threeJsComposer.setSize(t.x,t.y),this._renderSize.copy(t)}s.Capabilities.hasFragDepth()||(void 0===this._midDistance?null!==this.getEntity().getParent()&&(this._autoMidDistance=this.getEntity().getPosition().magnitude()+10*this.getEntity().getParent().getExtentsRadius()):this._autoMidDistance=this._midDistance),void 0===this._nearDistance?null!==this.getEntity().getParent()?this._autoNearDistance=Math.max(1e-5,.01*(this.getEntity().getPosition().magnitude()-this.getEntity().getParent().getExtentsRadius())):this._autoNearDistance=Math.max(1e-5,.01*this.getEntity().getPosition().magnitude()):this._autoNearDistance=this._nearDistance,this._updateProjectionMatrix(),this.getEntity().__updateCameraVariables(this,null,!1);for(let t=0;t<this._occludingEntities.length;t++)(this._occludingEntities[t].getPixelSpaceOcclusionRadius(this)<1||!this._occludingEntities[t].isEnabled()||!this._occludingEntities[t].canOcclude()||null===this.getEntity().getScene().get(this._occludingEntities[t].getName()))&&(this._occludingEntities.splice(t,1),t--)}__prepareForRender(){const t=this.getEntity().getScene();for(let e=0;e<t.getNumEntities();e++){const i=t.getEntity(e);i.isEnabled()&&i.__prepareForRender(this)}const e=this.getEntity().get("dynEnvMap");null!==e&&e.__render()}__render(){const t=this.getEntity().getOrientation();a._tempThreeJsQuaternion.set(t.x,t.y,t.z,t.w),this._threeJsCamera.setRotationFromQuaternion(a._tempThreeJsQuaternion),this._threeJsComposer.render()}__setViewport(t){null!==this._viewport&&this._viewport!==t&&this._viewport.setCamera(null),this._viewport=t}__setupEffectComposer(){const t={format:s.THREE.RGBFormat,stencilBuffer:!1};let e=null;const i=new s.THREE.Vector2;if(this._threeJsRenderer.getSize(i),s.Capabilities.isWebGL2()&&!this._outlinePass.enabled?(e=new s.THREE.WebGLMultisampleRenderTarget(i.x,i.y,t)).samples=4:e=new s.THREE.WebGLRenderTarget(i.x,i.y,t),null!==this._threeJsComposer)this._threeJsComposer.reset(e);else{this._threeJsComposer=new s.ThreeJsEffectComposer(this._threeJsRenderer,e);const t=new s.ThreeJsRenderPass(this._threeJsScene,this._threeJsCamera);this._threeJsComposer.addPass(t),this._threeJsComposer.addPass(this._outlinePass),this._threeJsComposer.addPass(this._threeJsUnrealBloomPass)}}_updateProjectionMatrix(){if(this._fieldOfView>0&&this._fieldOfView<180&&this._aspectRatio>0){const t=Math.tan(this._fieldOfView/2);let e=0,i=0;this._aspectRatio>=1?(e=1/t,i=this._aspectRatio/t):(e=1/(t*this._aspectRatio),i=1/t);const a=Number.EPSILON-1,n=this._autoNearDistance*(2-Number.EPSILON),r=new s.THREE.Matrix4;r.set(e,0,0,0,0,0,i,0,0,a,0,n,0,1,0,0),this._threeJsCamera.projectionMatrix=r;const o=new s.THREE.Matrix4;o.set(1/e,0,0,0,0,0,0,1,0,1/i,0,0,0,0,1/n,-a/n),this._threeJsCamera.projectionMatrixInverse=o}}__loadResources(){return Promise.resolve()}__unloadResources(){}}e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.Tile{constructor(t,e,i,n,r){super(e),this._component=t,this._face=i,this._level=n,this._tile=new s.Vector2,this._tile.copy(r),this._isLeaf=!0,this._center=new s.Vector3,this._radius=0,this._threeJsMaterial=null,this._textureLevels=new s.FastMap,this._texturePromises=new s.FastMap,this._nonPositiveTextureLoading=!1,this._threeJsObject=null,this._heightData=null,this._tileOffset=this._getTileOffset();for(let t=0;t<2;t++)for(let e=0;e<2;e++)for(let i=0;i<this._component.__getEndPoints().size;i++){const n=this._component.__getEndPoints().getAt(i).value.configuration;this._isLeaf=this._isLeaf&&!a._isInABoundary(n,this._face,this._level+1,new s.Vector2(2*this._tile.x+e,2*this._tile.y+t))}const o=t.__getSpheroidComponent();a.cmtsCoordToPosition(this._center,this._face,this._level,this._tile.x+.5,this._tile.y+.5,o);const l=new s.Vector3,c=new s.Vector3,h=new s.Vector3,d=new s.Vector3;a.cmtsCoordToPosition(l,this._face,this._level,this._tile.x,this._tile.y,o),a.cmtsCoordToPosition(c,this._face,this._level,this._tile.x+1,this._tile.y,o),a.cmtsCoordToPosition(h,this._face,this._level,this._tile.x+1,this._tile.y+1,o),a.cmtsCoordToPosition(d,this._face,this._level,this._tile.x,this._tile.y+1,o),l.sub(this._center,l),c.sub(this._center,c),h.sub(this._center,h),d.sub(this._center,d),this._radius=Math.max(l.magnitude(),c.magnitude(),h.magnitude(),d.magnitude());const u=this._component.__getEndPoints();for(let t=0;t<u.size;t++){const e=u.getAt(t).key,i=u.getAt(t).value,s=0===this._level?this._getNonPositiveLevel(e):0;if(a._isInABoundary(i.configuration,this._face,this._level,this._tile)){const t=0===this._level?s:this._level;this._textureLevels.set(e,t)}else{let i=this.getParent();for(;null!==i&&i._level!==i._textureLevels.getAt(t).value;)i=i.getParent();null!==i?this._textureLevels.set(e,i._textureLevels.getAt(t).value):this._textureLevels.set(e,0)}}}getLevel(){return this._level}getTileCoord(){return this._tile}getHeightData(){return this._heightData}createNewTile(t,e,i){const n=this._level+1,r=new s.Vector2(2*t._tile.x+i,2*t._tile.y+e);return new a(t._component,this,this._face,n,r)}checkSplit(){if(this._isLeaf||this._level>=this._component.getMaxLevel())return!1;if(this._component.__getNumLoadsThisFrame()>1)return!1;if(this._level<this._component.getMinLevel())return!0;const t=this._component.__getColorTileSize();return this._getNearestDistance()<this._component.__getSplitJoinThresholdFactor()*this._radius/t}checkJoin(){if(this._level>=this._component.getMaxLevel())return!0;if(this._level<this._component.getMinLevel())return!1;const t=this._component.__getColorTileSize();return this._getNearestDistance()>this._component.__getSplitJoinThresholdFactor()*this._radius/t*4}async load(){if(this._component.__incNumLoadsThisFrame(),null!==this._threeJsMaterial)throw new Error("Tile already has material.");this._threeJsMaterial=s.MaterialUtils.get(),this._component.getThreeJsMaterials().push(this._threeJsMaterial),this._threeJsMaterial.defines.shadowEntities=this._component.getNumShadowEntities()>0;const t=this._component.__getEndPoints(),e=[];for(let i=0;i<t.size;i++){const s=t.getAt(i).key,a=t.getAt(i).value;let n=null;const r=this._textureLevels.get(s),o=this._tile.x>>this._level-r,l=this._tile.y>>this._level-r,c=a.url+"/"+this._face+"/"+r+"/"+o+"/"+l+"."+a.configuration.extension;n=this._component.__getTextureCache().get(c),this._texturePromises.set(s,n),e.push(n.then(t=>{this._setTexture(s,t)}).catch(()=>(this._component.__getTextureCache().release(n),(n=this._component.__getTextureCache().get("pink")).then(t=>{this._setTexture(s,t)}))))}return Promise.all(e)}async unload(){if(null===this._threeJsMaterial)throw new Error("Tile has no material to unload.");const t=this._component.getThreeJsMaterials();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsMaterial){t.splice(e,1);break}this._threeJsMaterial.dispose(),this._threeJsMaterial=null;for(let t=0;t<this._texturePromises.size;t++)this._component.__getTextureCache().release(this._texturePromises.getAt(t).value)}async activate(){if(null!==this._threeJsObject||null===this._threeJsMaterial)throw new Error("NULL");const t=[{name:"position",dimensions:3},{name:"normal",dimensions:3},{name:"uv",dimensions:2}];this._textureLevels.has("normal")&&(t.push({name:"tangent",dimensions:3}),t.push({name:"bitangent",dimensions:3}));for(let e=0;e<this._textureLevels.size;e++){const i=this._textureLevels.getAt(e).key;"color"!==i&&"height"!==i&&t.push({name:i+"UV",dimensions:2})}this._threeJsObject=s.ThreeJsHelper.createMeshObject(this._component,this._threeJsMaterial,t,!1),this._component.getThreeJsObjects().push(this._threeJsObject),s.ThreeJsHelper.useInDynEnvMap(this._threeJsObject,!0),this._setupMesh()}async deactivate(){const t=this._component.getThreeJsObjects();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsObject){t.splice(e,1);break}s.ThreeJsHelper.destroyObject(this._threeJsObject),this._threeJsObject=null}update(){if(!this._component.__endPointsAreLoaded())return!1;let t=this.check();for(let e=0,i=this.children.length;e<i;e++)t=this.children[e].update()||t;if(!t&&!this._nonPositiveTextureLoading&&0===this._level&&0===this.children.length){const e=this._component.__getEndPoints();for(let i=0;i<e.size;i++){const s=e.getAt(i).key,a=e.getAt(i).value,n=this._getNonPositiveLevel(s);if(n!==this._textureLevels.get(s)){this._nonPositiveTextureLoading=!0,this._textureLevels.set(s,n),t=!0;const e=a.url+"/"+this._face+"/"+n+"/0/0."+a.configuration.extension,i=this._texturePromises.get(s);let r=this._component.__getTextureCache().get(e);this._texturePromises.set(s,r),r.then(t=>{this._setTexture(s,t),this._setupMesh(),this._nonPositiveTextureLoading=!1}).catch(()=>(this._component.__getTextureCache().release(r),(r=this._component.__getTextureCache().get("pink")).then(t=>{this._setTexture(s,t),this._nonPositiveTextureLoading=!1}))).finally(()=>{"height"!==s&&this._component.__getTextureCache().release(i)})}}}return t=this._nonPositiveTextureLoading||t}_setupMesh(){const t=this._threeJsMaterial.uniforms.colorTexture.value.image.width-4,e=new s.FastMap,i=new s.FastMap,n=new s.FastMap;for(let t=0;t<this._textureLevels.size;t++){const e=this._textureLevels.getAt(t).key,a=1<<this._level-Math.max(0,this._textureLevels.get(e));i.set(e,new s.Vector2((this._tile.x-Math.floor(this._tile.x/a)*a)/a,(this._tile.y-Math.floor(this._tile.y/a)*a)/a)),n.set(e,new s.Vector2(1/a,1/a))}const r=this._textureLevels.has("normal"),o=this._heightData?Math.min(Math.ceil(this._heightData.width*n.get("height").x)-2,129):5<<s.MathUtils.clamp(2-this._level/2,0,2),l=this._heightData?Math.min(Math.ceil(this._heightData.height*n.get("height").y)-2,129):5<<s.MathUtils.clamp(2-this._level/2,0,2),c=o*l,h=new Float32Array(3*c),d=new Float32Array(3*c);let u=null,p=null;r&&(u=new Float32Array(3*c),p=new Float32Array(3*c));const m=new Uint16Array((o-1)*(l-1)*6);for(let t=0;t<this._textureLevels.size;t++){const i=this._textureLevels.getAt(t).key;e.set(i,new Float32Array(2*c))}let g=0,_=0;if(this._textureLevels.has("height")){const t=this._component.__getEndPoints().get("height").configuration;g=t.height_range.min*this._component.getHeightScale(),_=(t.height_range.max-t.height_range.min)*this._component.getHeightScale()}const f=new s.Vector2,y=new s.Vector3,b=new s.Vector3,T=new s.Vector3,v=new s.Vector3,E=new s.LatLonAlt,x=this._component.__getSpheroidComponent();for(let c=0;c<l;c++)for(let S=0;S<o;S++){const I=c*o+S;if(f.set(this._tile.x+(S-1)/(o-3),this._tile.y+(c-1)/(l-3)),a.cmtsCoordToPosition(y,this._face,this._level,f.x,f.y,x),r&&(a.cmtsCoordToTangent(T,this._face,this._level,f.x,f.y,x),a.cmtsCoordToBitangent(v,this._face,this._level,f.x,f.y,x)),x.llaFromXYZ(E,y),x.upFromLLA(b,E),this._heightData){const t=this._heightData.data,e=i.get("height"),r=n.get("height"),h=this._heightData.width-4;if(a.getHeightPos(y,b,S,c,t,e,o,l,r,h,g,_),!this._textureLevels.has("normal")){const i=s.Vector3.pool.get(),n=s.Vector3.pool.get(),d=s.Vector3.pool.get(),u=s.Vector3.pool.get(),p=s.Vector3.pool.get(),m=s.Vector3.pool.get(),y=s.Vector3.pool.get(),T=s.Vector3.pool.get();a.cmtsCoordToPosition(i,this._face,this._level,f.x-1/(o-3),f.y,x),a.getHeightPos(i,b,S-1,c,t,e,o,l,r,h,g,_),a.cmtsCoordToPosition(n,this._face,this._level,f.x+1/(o-3),f.y,x),a.getHeightPos(n,b,S+1,c,t,e,o,l,r,h,g,_),a.cmtsCoordToPosition(d,this._face,this._level,f.x,f.y-1/(l-3),x),a.getHeightPos(d,b,S,c-1,t,e,o,l,r,h,g,_),a.cmtsCoordToPosition(u,this._face,this._level,f.x,f.y+1/(l-3),x),a.getHeightPos(u,b,S,c+1,t,e,o,l,r,h,g,_),a.cmtsCoordToPosition(p,this._face,this._level,f.x-1/(o-3),f.y-1/(l-3),x),a.getHeightPos(p,b,S-1,c-1,t,e,o,l,r,h,g,_),a.cmtsCoordToPosition(m,this._face,this._level,f.x+1/(o-3),f.y+1/(l-3),x),a.getHeightPos(m,b,S+1,c+1,t,e,o,l,r,h,g,_),i.sub(n,i),d.sub(u,d),b.cross(i,d),b.normalize(b),s.Vector3.pool.release(i),s.Vector3.pool.release(n),s.Vector3.pool.release(d),s.Vector3.pool.release(u),s.Vector3.pool.release(p),s.Vector3.pool.release(m),s.Vector3.pool.release(y),s.Vector3.pool.release(T)}}0!==S&&0!==c&&S!==o-1&&c!==l-1||(this._textureLevels.has("height")?y.setMagnitude(y,y.magnitude()-2*_):y.mult(y,.9)),y.sub(y,this._tileOffset),h[3*I+0]=y.x,h[3*I+1]=y.y,h[3*I+2]=y.z,d[3*I+0]=b.x,d[3*I+1]=b.y,d[3*I+2]=b.z,r&&(u[3*I+0]=T.x,u[3*I+1]=T.y,u[3*I+2]=T.z,p[3*I+0]=v.x,p[3*I+1]=v.y,p[3*I+2]=v.z);for(let s=0;s<this._textureLevels.size;s++){const a=this._textureLevels.getAt(s).key,r=i.get(a),h=n.get(a),d=e.get(a);d[2*I+0]=(r.x+(S-1)/(o-3)*h.x)*t/(t+4)+2/(t+4),d[2*I+1]=1-((r.y+(c-1)/(l-3)*h.y)*t/(t+4)+2/(t+4))}if(S<o-1&&c<l-1){const t=c*(o-1)+S;m[6*t+0]=o*(c+0)+(S+0),m[6*t+1]=o*(c+0)+(S+1),m[6*t+2]=o*(c+1)+(S+1),m[6*t+3]=o*(c+0)+(S+0),m[6*t+4]=o*(c+1)+(S+1),m[6*t+5]=o*(c+1)+(S+0)}}s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"position",h),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"normal",d),r&&(s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"tangent",u),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"bitangent",p));for(let t=0;t<this._textureLevels.size;t++){const i=this._textureLevels.getAt(t).key,a=e.get(i);"height"!==i&&("color"===i?s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"uv",a):s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,i+"UV",a))}s.ThreeJsHelper.setIndices(this._threeJsObject.geometry,m)}_getNonPositiveLevel(t){const e=this._getNearestDistance(),i=this._component.__getEndPoints().get(t),a=i.configuration.tile_size;return s.MathUtils.clamp(4-Math.floor(Math.log2(e/this._radius/this._component.__getSplitJoinThresholdFactor()*a*4)),i.configuration.first_level,0)}_getNearestDistance(){let t=Number.POSITIVE_INFINITY;const e=this._component.__getCameraPositions();for(let i=0,s=e.length;i<s;i++){const s=e[i];a._pos.sub(s,this._center);const n=Math.max(0,a._pos.magnitude()-this._radius);t>n&&(t=n)}return t}toString(){return this._face+"/"+this._level+"/"+this._tile.x+"/"+this._tile.y}prepareForRender(t){s.ThreeJsHelper.setPositionToEntity(this._threeJsObject,this._component.getEntity(),t,this._tileOffset,!0);for(let e=0,i=this.children.length;e<i;e++)this.children[e].prepareForRender(t)}_setTexture(t,e){if("loaded"===this._component.getLoadState())if("height"===t){const t=document.createElement("canvas");t.width=e.image.width,t.height=e.image.height;const i=t.getContext("2d",{desynchronized:!0,alpha:!1});i.drawImage(e.image,0,0),e.dispose(),this._heightData=i.getImageData(0,0,e.image.width,e.image.height),this._component.__getTextureCache().release(this._texturePromises.get("height")),this._texturePromises.delete("height");const n=this._component.__getSpheroidComponent();a.cmtsCoordToPosition(this._center,this._face,this._level,this._tile.x+.5,this._tile.y+.5,n);const r=s.Vector3.pool.get(),o=s.LatLonAlt.pool.get();n.llaFromXYZ(o,this._center),n.upFromLLA(r,o);const l=a.getLinearInterpolatedHeightPixel(this._heightData.width/2,this._heightData.height/2,this._heightData.data,this._heightData.width),c=this._component.__getEndPoints().get("height").configuration,h=c.height_range.min*this._component.getHeightScale(),d=(c.height_range.max-c.height_range.min)*this._component.getHeightScale();this._center.addMult(this._center,r,h+l*d),s.Vector3.pool.release(r),s.LatLonAlt.pool.release(o)}else this._threeJsMaterial.uniforms[t+"Texture"].value=e,"normal"===t?(this._threeJsMaterial.defines.normalMap=!0,this._threeJsMaterial.defines.normalUVs=!0,this._threeJsMaterial.defines.hasBitangents=!0,this._threeJsMaterial.uniforms.normalScale.value.set(this._component.getHeightScale(),this._component.getHeightScale()),this._threeJsMaterial.uniforms.specularIntensity.value=0,this._threeJsMaterial.uniforms.specularHardness.value=100):"specular"===t?(this._threeJsMaterial.defines.specularMap=!0,this._threeJsMaterial.defines.specularUVs=!0):"night"===t?(this._threeJsMaterial.defines.nightMap=!0,this._threeJsMaterial.defines.nightUVs=!0):"decal"===t&&(this._threeJsMaterial.defines.decalMap=!0,this._threeJsMaterial.defines.decalUVs=!0)}static _getGreatestLevel(t,e,i,s){let a=Number.NEGATIVE_INFINITY;for(let n=0,r=t.boundaries.length;n<r;n++){const r=t.boundaries[n];if(r.face!==e)continue;const o=r.last_level-i;r.min[0]<=s.x>>o&&s.x>>o<=r.max[0]&&r.min[1]<=s.y>>o&&s.y>>o<=r.max[1]&&a<r.last_level&&(a=r.last_level)}return a}static _isInABoundary(t,e,i,s){let a=!1;for(let n=0,r=t.boundaries.length;n<r;n++){const r=t.boundaries[n];if(r.face!==e)continue;if(r.last_level<i)continue;const o=1<<r.last_level-i;s.x<Math.floor(r.min[0]/o)||Math.floor(r.max[0]/o)<s.x||(s.y<Math.floor(r.min[1]/o)||Math.floor(r.max[1]/o)<s.y||(a=!0))}return a}_getTileOffset(){const t=this._component.__getTileOffsets();for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.face!==this._face||i.level>this._level)continue;const s=1<<this._level-i.level;if(i.min.x*s<=this._tile.x&&this._tile.x<(i.max.x+1)*s&&i.min.y*s<=this._tile.y&&this._tile.y<(i.max.y+1)*s)return i.offset}return s.Vector3.Zero}static getHeightPos(t,e,i,s,a,n,r,o,l,c,h,d){const u=((n.x+(i-1)/(r-3)*l.x)*c/(c+4)+2/(c+4))*(c+4),p=(1-((n.y+(s-1)/(o-3)*l.y)*c/(c+4)+2/(c+4)))*(c+4),m=this.getLinearInterpolatedHeightPixel(u,p,a,c+4);t.addMult(t,e,h+m*d)}static getLinearInterpolatedHeightPixel(t,e,i,s){const a=Math.floor(t),n=Math.floor(e),r=t-a,o=e-n,l=Math.abs(r-.5),c=Math.abs(o-.5);let h=this.getHeightFromPixel(a,n,i,s)*((1-l)*(1-c));return r>=.5?(h+=this.getHeightFromPixel(a+1,n,i,s)*(l*(1-c)),o<.5?h+=this.getHeightFromPixel(a+1,n-1,i,s)*(l*c):o>=.5&&(h+=this.getHeightFromPixel(a+1,n+1,i,s)*(l*c))):r<.5&&(h+=this.getHeightFromPixel(a-1,n,i,s)*(l*(1-c)),o<.5?h+=this.getHeightFromPixel(a-1,n-1,i,s)*(l*c):o>=.5&&(h+=this.getHeightFromPixel(a-1,n+1,i,s)*(l*c))),o>=.5?h+=this.getHeightFromPixel(a,n+1,i,s)*((1-l)*c):o<.5&&(h+=this.getHeightFromPixel(a,n-1,i,s)*((1-l)*c)),h}static getHeightFromPixel(t,e,i,a){t=s.MathUtils.clamp(t,0,a-1);const n=4*((e=s.MathUtils.clamp(e,0,a-1))*a+t);return i[n+0]/256+i[n+1]/65536+i[n+2]/16777216}static cmtsCoordToPosition(t,e,i,a,n,r){let o=a/(1<<Math.max(i,0)),l=n/(1<<Math.max(i,0));for(;o<0||o>1||l<0||l>1;)if(0<=e&&e<=3){if(o>1)o-=1,e=(e+1)%4;else if(o<0)o+=1,e=(e+3)%4;else if(0===e)l<0?(l+=1,e=5):l>1&&(l-=1,e=4);else if(1===e){if(l<0){const t=o;o=l+1,l=1-t,e=5}else if(l>1){const t=o;o=2-l,l=t,e=4}}else if(2===e)l<0?(o=1-o,l=0-l,e=5):l>1&&(o=1-o,l=2-l,e=4);else if(3===e)if(l<0){const t=o;o=0-l,l=t,e=5}else if(l>1){const t=o;o=l-1,l=1-t,e=4}}else if(4===e)if(o<0){const t=o;o=1-l,l=t+1,e=3}else if(o>1){const t=o;o=l,l=2-t,e=1}else l<0?(l+=1,e=0):l>1&&(o=1-o,l=2-l,e=2);else if(5===e)if(o<0){const t=o;o=l,l=0-t,e=3}else if(o>1){const t=o;o=1-l,l=t-1,e=1}else l<0?(o=1-o,l=0-l,e=2):l>1&&(l-=1,e=0);const c=2*o-1,h=2*l-1,d=this._basis[e];t.set(d[0].x*c+d[1].x*h+d[2].x,d[0].y*c+d[1].y*h+d[2].y,d[0].z*c+d[1].z*h+d[2].z),t.normalize(t),s.Geometry.getLLAFromXYZOnSphere(this._lla,t,0),this._lla.alt=0,r.xyzFromLLA(t,this._lla)}static cmtsCoordToTangent(t,e,i,s,a,n){this.cmtsCoordToPosition(t,e,i,s,a,n);const r=this._basis[e];t.setNormalTo(t,r[0])}static cmtsCoordToBitangent(t,e,i,s,a,n){this.cmtsCoordToPosition(t,e,i,s,a,n);const r=this._basis[e];t.setNormalTo(t,r[1])}}a._basis=[[s.Vector3.YAxis,s.Vector3.ZAxis,s.Vector3.XAxis],[s.Vector3.XAxisNeg,s.Vector3.ZAxis,s.Vector3.YAxis],[s.Vector3.YAxisNeg,s.Vector3.ZAxis,s.Vector3.XAxisNeg],[s.Vector3.XAxis,s.Vector3.ZAxis,s.Vector3.YAxisNeg],[s.Vector3.YAxis,s.Vector3.XAxisNeg,s.Vector3.ZAxis],[s.Vector3.YAxis,s.Vector3.XAxis,s.Vector3.ZAxisNeg]],a._lla=new s.LatLonAlt,a._pos=new s.Vector3,e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._threeJsScene=this.getEntity().getScene().getThreeJsScene(),this._endPoints=new s.FastMap,this._heightScale=1,this._numEndPointsLoading=0,this._minLevel=Number.NEGATIVE_INFINITY,this._maxLevel=Number.POSITIVE_INFINITY,this._tileOffsets=[],this._splitJoinThresholdFactor=512,this._colorTileSize=512,this._shadowEntities=[],this._engine=this.getEntity().getScene().getEngine(),this._cameraPositions=[],this._rootTiles=[null,null,null,null,null,null],this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,this._textureCache=new s.Cache(t=>this.getEntity().getScene().getEngine().getTextureLoader().loadTexture(t,!0),t=>{t.then(t=>{t.dispose()})}),this._numLoadsThisFrame=0,this._atmosphereComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._atmosphereComponentRef.setByType(this.getEntity().getName(),"atmosphere"),this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}setBaseUrl(t,e){this.resetResources(),this._endPoints.set(t,{url:e,configuration:null})}getHeightScale(){return this._heightScale}setHeightScale(t){this._heightScale=t,this.resetResources()}getMinLevel(){return this._minLevel}setMinLevel(t){this._minLevel=t}getMaxLevel(){return this._maxLevel}setMaxLevel(t){this._maxLevel=t}addTileOffset(t,e,i,a,n,r,o){this._tileOffsets.push({offset:t,face:e,level:i,min:new s.Vector2(a,n),max:new s.Vector2(r,o)}),this.resetResources()}removeTileOffset(t,e,i,s,a,n){for(let r=0;r<this._tileOffsets.length;r++){const o=this._tileOffsets[r];if(o.face===e&&o.level===t&&o.min.x===i&&o.min.y===s&&o.max.x===a&&o.max.y===n)return this._tileOffsets.splice(r,1),void this.resetResources()}}getNumShadowEntities(){return this._shadowEntities.length}getShadowEntity(t){return this._shadowEntities[t]}setShadowEntities(t){this._shadowEntities=t.slice(0);const e=t.length>0;for(let t=0,i=this.getThreeJsMaterials().length;t<i;t++)s.ThreeJsHelper.setDefine(this.getThreeJsMaterials()[t],"shadowEntities",e)}getGroundPosition(t,e,i){const n=this._spheroidComponentRef.get();if(null===n)return void t.set(NaN,NaN,NaN);const r=s.LatLonAlt.pool.get();n.llaFromXYZ(r,e),r.alt=0,n.xyzFromLLA(t,r);const o=s.Vector3.pool.get();n.upFromLLA(o,r);const l=this._endPoints.get("height");if(void 0!==l){const e=s.Vector3.pool.get();s.CubeMap.xyzToUVFace(e,t);let i=this._rootTiles[e.z];if(null==i)return void t.copy(s.Vector3.NaN);for(;i.children.length>0;){const t=1<<i.getLevel()+1,s=Math.floor(e.x*t-2*i.getTileCoord().x),a=Math.floor(e.y*t-2*i.getTileCoord().y);i=i.children[2*a+s]}const n=i.getHeightData();if(null!==n){const s=1<<i.getLevel(),r=(e.x*s-i.getTileCoord().x)*(n.width-2)+1,c=(1-(e.y*s-i.getTileCoord().y))*(n.width-2)+1,h=a.getLinearInterpolatedHeightPixel(r,c,n.data,n.width),d=l.configuration,u=d.height_range.min*this._heightScale,p=(d.height_range.max-d.height_range.min)*this._heightScale;t.addMult(t,o,u+h*p)}s.Vector3.pool.release(e)}t.addMult(t,o,i),s.LatLonAlt.pool.release(r),s.Vector3.pool.release(o)}getTilesLoadedPromise(){return this._tilesLoadedPromise||Promise.resolve()}__destroy(){for(let t=0;t<6;t++)null!==this._rootTiles[t]&&this._rootTiles[t].destroy();const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){if(this._spheroidComponentRef.update(),"loaded"!==this.getLoadState()||null===this._spheroidComponentRef.get())return;if(null===this._rootTiles[0]){if(0!==this._numEndPointsLoading)return;for(let t=0;t<6;t++)this._rootTiles[t]=new a(this,null,t,0,new s.Vector2(0,0)),this._rootTiles[t].forceLoad()}let t=!1;for(;this._cameraPositions.length>this._engine.getNumViewports();)this._cameraPositions.pop();for(;this._cameraPositions.length<this._engine.getNumViewports();)this._cameraPositions.push(new s.Vector3);for(let t=0,e=this._engine.getNumViewports();t<e;t++){const e=this._cameraPositions[t];this._engine.getViewport(t).getCamera().getEntity().getPositionRelativeToEntity(e,s.Vector3.Zero,this.getEntity()),e.rotateInverse(this.getEntity().getOrientation(),e)}this._numLoadsThisFrame=0;for(let e=0;e<6;e++)t=this._rootTiles[e].update()||t;if(null===this._tilesLoadedPromise&&t&&(this._tilesLoadedPromise=new Promise(t=>{this._transitionsCompleteCallback=t})),null!==this._tilesLoadedPromise&&!t){const t=this._transitionsCompleteCallback;this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,t()}}__prepareForRender(t){if(null===this._rootTiles[0])return;s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects(),this.getEntity());for(let e=0;e<6;e++)this._rootTiles[e].prepareForRender(t);for(let t=0,e=this._shadowEntities.length;t<e;t++){let e=this._shadowEntities[t];if("string"==typeof e){const t=this.getEntity().getScene().getEntity(e);null!==t&&(e=t)}null!==e&&(this._shadowEntities[t]=e)}const e=this._atmosphereComponentRef.get();s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,e,!0)}__loadResources(){const t=[];for(let e=0,i=this._endPoints.size;e<i;e++){const i=this._endPoints.getAt(e),s=i.value.url;this._numEndPointsLoading+=1;const a=this.getEntity().getScene().getEngine().getDownloader().download(s+"/configuration.json",!1).then(t=>{if("failed"===t.status)throw new Error("Failed to download "+s+"/configuration.json");if("completed"===t.status&&"string"==typeof t.content){const e=JSON.parse(t.content);i.value.configuration=e,"color"===i.key&&(this._colorTileSize=e.tile_size),this._numEndPointsLoading-=1}});t.push(a)}return Promise.all(t)}__unloadResources(){for(let t=0;t<6;t++)null!==this._rootTiles[t]&&this._rootTiles[t].destroy();this._rootTiles=[null,null,null,null,null,null];for(let t=0,e=this._endPoints.size;t<e;t++)this._endPoints.getAt(t).value.configuration=null}__getNumLoadsThisFrame(){return this._numLoadsThisFrame}__incNumLoadsThisFrame(){this._numLoadsThisFrame+=1}__getEndPoints(){return this._endPoints}__endPointsAreLoaded(){return 0===this._numEndPointsLoading}__getTileOffsets(){return this._tileOffsets}__getTextureCache(){return this._textureCache}__getCameraPositions(){return this._cameraPositions}__getThreeJsScene(){return this._threeJsScene}__getSplitJoinThresholdFactor(){return this._splitJoinThresholdFactor}__getColorTileSize(){return this._colorTileSize}__getSpheroidComponent(){return this._spheroidComponentRef.get()}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get();null!==t?this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())):this.__setRadius(0),this.resetResources()}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._lightSource=new s.EntityRef(this.getEntity().getScene()),this._timeLength=6e5,this._numberOfParticles=200,this._color=new s.Color,this._color.freeze(),this._starAccelerationMultiplier=1,this._timeOfParticle0=0}getLightSource(){return this._lightSource.getName()}setLightSource(t){this._lightSource.setName(t)}getTimeLength(){return this._timeLength}setTimeLength(t){this._timeLength=t,this.resetResources()}getStarAccelerationMultiplier(){return this._starAccelerationMultiplier}setStarAccelerationMultiplier(t){this._starAccelerationMultiplier=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"starAccelerationMultiplier",this._starAccelerationMultiplier)}getNumberOfParticles(){return this._numberOfParticles}setNumberOfParticles(t){this._numberOfParticles=t,this.resetResources()}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color)}__update(){if(this.__setRadius(Math.max(this.getEntity().getExtentsRadius(),this._timeLength*this.getEntity().getVelocity().magnitude())),"loaded"!==this.getLoadState())return;const t=this.getEntity().getScene().getEngine().getTime(),e=this.getThreeJsObjects()[0].geometry.attributes.originTime.array;for(let i=0,a=this._numberOfParticles;i<a;i++){const a=e[i]+this._timeOfParticle0;(a<t-this._timeLength||a>t)&&this._newParticle(i,s.MathUtils.wrap(a,t-this._timeLength,t))}this._numberOfParticles>1?s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"time",t-this._timeOfParticle0):s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"time",0);const i=this._lightSource.get();if(null!==i){const t=i.getComponentByType("lightSource");null!==t&&s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"starAbsoluteMagnitude",t.getAbsoluteMagnitude());const e=s.Vector3.pool.get();this.getEntity().getPositionRelativeToEntity(e,s.Vector3.Zero,i),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"positionOfEntity",e),s.Vector3.pool.release(e)}}__prepareForRender(t){s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t);const e=this.getEntity().getCameraSpacePosition(t);if(s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"positionInCamera",e),e.magnitude()<4e4)this.getThreeJsObjects()[0].visible=!1;else{const t=(e.magnitude()-4e4)/4e5;this.getThreeJsMaterials()[0].uniforms.color.value.w=this._color.a*s.MathUtils.clamp01(t),this.getThreeJsObjects()[0].visible=!0}}async __loadResources(){const t=new s.THREE.RawShaderMaterial({uniforms:{time:new s.THREE.Uniform(0),timeLength:new s.THREE.Uniform(0),positionInCamera:new s.THREE.Uniform(new s.THREE.Vector3),starAbsoluteMagnitude:new s.THREE.Uniform(0),starAccelerationMultiplier:new s.THREE.Uniform(0),positionOfEntity:new s.THREE.Uniform(new s.THREE.Vector3),color:new s.THREE.Uniform(new s.THREE.Vector4)},vertexShader:s.ShaderFix.fix(a.vertexShader,"vertex"),fragmentShader:s.ShaderFix.fix(a.fragmentShader,"fragment"),transparent:!0,depthWrite:!1,blending:s.THREE.AdditiveBlending,side:s.THREE.DoubleSide});this.getThreeJsMaterials().push(t);const e=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),i=new Uint16Array([0,1,2,2,3,0]),n=new Float32Array(1*this._numberOfParticles),r=new Float32Array(3*this._numberOfParticles),o=new Float32Array(1*this._numberOfParticles),l=new s.THREE.InstancedBufferGeometry;l.setAttribute("position",new s.THREE.BufferAttribute(e,3)),l.setAttribute("originTime",new s.THREE.InstancedBufferAttribute(n,1)),l.setAttribute("originPosition",new s.THREE.InstancedBufferAttribute(r,3)),l.setAttribute("accelerationMultiplier",new s.THREE.InstancedBufferAttribute(o,1)),l.setIndex(new s.THREE.BufferAttribute(i,1)),l.instanceCount=this._numberOfParticles;const c=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,t,l);this.getThreeJsObjects().push(c);const h=this.getEntity().getScene().getEngine().getTime();for(let t=0,e=this._numberOfParticles;t<e;t++)this._newParticle(t,h-t/e*this._timeLength);s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"timeLength",this._timeLength),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"starAccelerationMultiplier",this._starAccelerationMultiplier),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_newParticle(t,e){const i=e,a=this.getThreeJsObjects()[0].geometry.attributes.originTime,n=a.array;if(t>0)n[t]=i-this._timeOfParticle0;else{for(let t=1,e=this._numberOfParticles;t<e;t++)n[t]+=this._timeOfParticle0-i;this._timeOfParticle0=i,n[0]=0}a.needsUpdate=!0;const r=s.Vector3.pool.get(),o=this._lightSource.get();null!==o&&this.getEntity().getPositionRelativeToEntity(r,s.Vector3.Zero,o,i);const l=this.getThreeJsObjects()[0].geometry.attributes.originPosition,c=l.array;c[3*t+0]=r.x,c[3*t+1]=r.y,c[3*t+2]=r.z,l.needsUpdate=!0,s.Vector3.pool.release(r);const h=this.getThreeJsObjects()[0].geometry.attributes.accelerationMultiplier;h.array[t]=0+1*Math.random(),h.needsUpdate=!0}}a.vertexShader="\n\tattribute vec3 position;\n\tattribute float originTime;\n\tattribute vec3 originPosition;\n\tattribute vec3 originStarPosition;\n\tattribute vec3 originExternalAcceleration;\n\tattribute float accelerationMultiplier;\n\n\tuniform float time;\n\tuniform float timeLength;\n\tuniform vec3 positionInCamera;\n\tuniform float starAbsoluteMagnitude;\n\tuniform float starAccelerationMultiplier;\n\tuniform vec3 positionOfEntity;\n\tuniform mat4 viewMatrix;\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec2 vPosition;\n\tvarying float vAlpha;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\t// Get the position of the center point of the quad in model space.\n\t\tfloat deltaTime = time - originTime;\n\t\tvec3 externalAcceleration = starAccelerationMultiplier * accelerationMultiplier * normalize(originPosition) * 5.0e7 * pow(2.51188643151, 20.0 - starAbsoluteMagnitude) / dot(originPosition, originPosition);\n\t\tvec3 modelPosition = externalAcceleration * pow(deltaTime, 1.5);\n\n\t\t// Get a general expansion scale in all directions.\n\t\tfloat expansion = 0.2 * max(1.0e5, length(modelPosition));\n\n\t\t// Get the stretch direction in view space.\n\t\tvec3 modelStretch = modelPosition;\n\t\tvec3 cameraDirection = normalize(positionInCamera);\n\t\tmodelStretch = modelStretch - dot(cameraDirection, modelStretch) * cameraDirection;\n\t\tvec4 viewStretch = viewMatrix * vec4(modelStretch, 1.0);\n\n\t\t// Get the stretch amounts in the x and y directions.\n\t\tvec2 stretch2d = vec2(max(expansion, 2.0 * length(viewStretch.xz)), expansion);\n\n\t\t// Do the stretch calculation on the vertex position in view space.\n\t\t// It translates it, rotates it, stretches it, and unrotates it.\n\t\tvec2 translate = 0.5 * normalize(vec2(viewStretch.xz));\n\t\tfloat angle = length(viewStretch.xz) > 0.0 ? atan(viewStretch.z, viewStretch.x) : 0.0;\n\t\tfloat cosAngle = cos(angle);\n\t\tfloat sinAngle = sin(angle);\n\t\tfloat stretchedX = (stretch2d.x * cosAngle * cosAngle + stretch2d.y * sinAngle * sinAngle) * 0.5 * (position.x + translate.x) + (stretch2d.x - stretch2d.y) * sinAngle * cosAngle * 0.5 * (position.y + translate.y);\n\t\tfloat stretchedY = (stretch2d.x - stretch2d.y) * sinAngle * cosAngle * 0.5 * (position.x + translate.x) + (stretch2d.x * sinAngle * sinAngle + stretch2d.y * cosAngle * cosAngle) * 0.5 * (position.y + translate.y);\n\n\t\t// Get the position in view space and then in normalized space.\n\t\tvec4 viewPosition = vec4(stretchedX, 0.0, stretchedY, 0.0) + modelViewMatrix * vec4(modelPosition, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t// Set the varying variables for adjusting te\n\t\tvPosition = vec2(cosAngle * position.x + sinAngle * position.y, -sinAngle * position.x + cosAngle * position.y);\n\t\tvAlpha = sqrt(1.0 - sqrt(deltaTime / timeLength));\n\n\t\t// Make the gas fade far from the star.\n\t\tvAlpha *= min(1.0, 1.0 - length(originPosition) / 7.0e8);\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",a.fragmentShader="\n\tuniform vec4 color;\n\n\tvarying vec2 vPosition;\n\tvarying float vAlpha;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\t// Set the color to be a circle tinted by the color.\n\t\tgl_FragColor = vec4(color.rgb, 0.5 * color.a) * max(0.0, 1.0 - dot(vPosition, vPosition)) * vAlpha;\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._entity1=new s.EntityRef(this.getEntity().getScene()),this._entity1Offset=new s.Vector3,this._entity1Offset.freeze(),this._entity2=new s.EntityRef(this.getEntity().getScene()),this._entity2Offset=new s.Vector3,this._entity2Offset.freeze(),this._width=1,this._widthUnits="km",this._textureUrl="",this._textureAspectRatio=1,this._textureRepeat=!0,this._textureStretch=1,this._textureYOffset=0,this._uOffsetStart=0,this._uOffsetEnd=1,this._colorMultiplier=new s.Color(1,1,1,1),this._colorMultiplier.freeze(),this._blending="normal"}getEntity1(){return this._entity1.getName()}setEntity1(t){this._entity1.setName(t)}getEntity1Offset(){return this._entity1Offset}setEntity1Offset(t){this._entity1Offset.thaw(),this._entity1Offset.copy(t),this._entity1Offset.freeze()}getEntity2(){return this._entity2.getName()}setEntity2(t){this._entity2.setName(t)}getEntity2Offset(){return this._entity2Offset}setEntity2Offset(t){this._entity2Offset.thaw(),this._entity2Offset.copy(t),this._entity2Offset.freeze()}getWidth(){return this._width}setWidth(t){this._width=t}getWidthUnits(){return this._widthUnits}setWidthUnits(t){this._widthUnits=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"pixelBased","px"===t?1:0)}getTextureUrl(){return this._textureUrl}setTextureUrl(t){this._textureUrl=t,this.resetResources()}getTextureRepeat(){return this._textureRepeat}setTextureRepeat(t){this._textureRepeat=t}getTextureStretch(){return this._textureStretch}setTextureStretch(t){this._textureStretch=t}getTextureYOffset(){return this._textureYOffset}setTextureYOffset(t){this._textureYOffset=t}getUOffsetStart(){return this._uOffsetStart}setUOffsetStart(t){this._uOffsetStart=t}getUOffsetEnd(){return this._uOffsetEnd}setUOffsetEnd(t){this._uOffsetEnd=t}getColorMultiplier(){return this._colorMultiplier}setColorMultiplier(t){this._colorMultiplier.thaw(),this._colorMultiplier.copy(t),this._colorMultiplier.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._colorMultiplier,1)}setBlending(t){this._blending=t,s.ThreeJsHelper.setBlending(this.getThreeJsMaterials()[0],t)}__update(){const t=this._entity1.get(),e=this._entity2.get();if(null===t||null===e)return;const i=s.Vector3.pool.get();t.getPositionRelativeToEntity(i,s.Vector3.Zero,e),this.__setRadius(i.magnitude()+t.getExtentsRadius()+e.getExtentsRadius()),s.Vector3.pool.release(i)}__prepareForRender(t){const e=this._entity1.get(),i=this._entity2.get();if(null===e||null===i)return void(this.getThreeJsObjects()[0].visible=!1);const a=e.getCameraSpacePosition(t),n=i.getCameraSpacePosition(t),r=s.Vector3.pool.get(),o=s.Vector3.pool.get(),l=s.Vector3.pool.get();r.rotate(e.getOrientation(),this._entity1Offset),r.add(a,r),l.rotate(i.getOrientation(),this._entity2Offset),l.add(n,l),o.copy(r),r.lerp(r,l,this._uOffsetStart),l.lerp(o,l,this._uOffsetEnd),s.Vector3.pool.release(o);const c=s.Vector3.pool.get(),h=s.Vector3.pool.get();if("px"===this._widthUnits){t.getNormalSpacePositionFromCameraSpacePosition(c,r),t.getNormalSpacePositionFromCameraSpacePosition(h,l),c.div(c,Math.max(Math.sign(c.z+1),c.z+1)),h.div(h,Math.max(Math.sign(h.z+1),h.z+1));const e=Math.max(1,Math.abs(c.x),Math.abs(c.y)),i=Math.max(1,Math.abs(h.x),Math.abs(h.y));c.x/=e,c.y/=e,c.z=0,h.x/=i,h.y/=i,h.z=0,t.getCameraSpacePositionFromNormalSpacePosition(r,c),t.getCameraSpacePositionFromNormalSpacePosition(l,h)}const d=r.magnitude(),u=l.magnitude(),p=s.Vector3.pool.get(),m=s.Vector3.pool.get();p.sub(l,r),d<u?m.copy(r):m.copy(l),m.cross(m,p),m.normalize(m);let g=1/this._textureStretch;if("px"===this._widthUnits){if(this._textureRepeat){const e=s.Vector2.pool.get(),i=s.Vector2.pool.get();t.getViewport().getPixelSpacePositionFromNormalSpacePosition(e,c),t.getViewport().getPixelSpacePositionFromNormalSpacePosition(i,h);const a=s.Vector2.pool.get();a.sub(e,i),g*=a.magnitude()/this._width*this._textureAspectRatio,s.Vector2.pool.release(a),s.Vector2.pool.release(e),s.Vector2.pool.release(i)}}else this._textureRepeat&&(g*=p.magnitude()/this._width*this._textureAspectRatio);s.Vector3.pool.release(c),s.Vector3.pool.release(h);let _=this._width/2,f=this._width/2,y=this._width/2,b=1;if("px"===this._widthUnits){_=f=y=t.getViewport().getNormalSpaceRadiusFromPixelSpaceRadius(this._width),_=t.getRadiusFromNormalSpaceRadius(_,d),y=t.getRadiusFromNormalSpaceRadius(y,u);const e=s.Vector3.pool.get();e.copy(p),b=s.MathUtils.clamp01(-e.dot(r)/e.dot(e)),e.addMult(r,e,b),f=t.getRadiusFromNormalSpaceRadius(f,e.magnitude()),s.Vector3.pool.release(e)}g>1e3&&(b=1e3/g,d>u&&(b=1-b));let T=this.getThreeJsObjects()[0].geometry.getAttribute("position"),v=T.array;d<u||"px"===this._widthUnits?(this.getThreeJsObjects()[0].position.set(r.x,r.y,r.z),v[0]=0-m.x*_,v[1]=0-m.y*_,v[2]=0-m.z*_,v[3]=0+m.x*_,v[4]=0+m.y*_,v[5]=0+m.z*_,v[6]=p.x*b-m.x*f,v[7]=p.y*b-m.y*f,v[8]=p.z*b-m.z*f,v[9]=p.x*b+m.x*f,v[10]=p.y*b+m.y*f,v[11]=p.z*b+m.z*f,v[12]=p.x-m.x*y,v[13]=p.y-m.y*y,v[14]=p.z-m.z*y,v[15]=p.x+m.x*y,v[16]=p.y+m.y*y,v[17]=p.z+m.z*y):(this.getThreeJsObjects()[0].position.set(l.x,l.y,l.z),v[0]=0-m.x*y,v[1]=0-m.y*y,v[2]=0-m.z*y,v[3]=0+m.x*y,v[4]=0+m.y*y,v[5]=0+m.z*y,v[6]=-p.x*(1-b)-m.x*f,v[7]=-p.y*(1-b)-m.y*f,v[8]=-p.z*(1-b)-m.z*f,v[9]=-p.x*(1-b)+m.x*f,v[10]=-p.y*(1-b)+m.y*f,v[11]=-p.z*(1-b)+m.z*f,v[12]=-p.x-m.x*_,v[13]=-p.y-m.y*_,v[14]=-p.z-m.z*_,v[15]=-p.x+m.x*_,v[16]=-p.y+m.y*_,v[17]=-p.z+m.z*_),T.needsUpdate=!0,(v=(T=this.getThreeJsObjects()[0].geometry.getAttribute("uv")).array)[0]=0,v[2]=1,v[4]=0,v[6]=1,v[8]=0,v[10]=1,this._textureRepeat?(v[1]=this._textureYOffset+0,v[3]=this._textureYOffset+0,d<u||"px"===this._widthUnits?(v[5]=this._textureYOffset+g*b,v[7]=this._textureYOffset+g*b,v[9]=this._textureYOffset+g,v[11]=this._textureYOffset+g):(v[5]=this._textureYOffset+g*(1-b),v[7]=this._textureYOffset+g*(1-b),v[9]=this._textureYOffset+g,v[11]=this._textureYOffset+g)):d<u||"px"===this._widthUnits?(v[1]=this._textureYOffset+g,v[3]=this._textureYOffset+g,v[5]=this._textureYOffset+g*(1-b),v[7]=this._textureYOffset+g*(1-b),v[9]=this._textureYOffset+0,v[11]=this._textureYOffset+0):(v[1]=this._textureYOffset+0,v[3]=this._textureYOffset+0,v[5]=this._textureYOffset+g*(1-b),v[7]=this._textureYOffset+g*(1-b),v[9]=this._textureYOffset+g,v[11]=this._textureYOffset+g),T.needsUpdate=!0,s.Vector3.pool.release(r),s.Vector3.pool.release(l),s.Vector3.pool.release(p),s.Vector3.pool.release(m)}async __loadResources(){const t=await s.ThreeJsHelper.loadTexture(this,this._textureUrl,!1,!1);if(t.wrapT=s.THREE.RepeatWrapping,this._textureAspectRatio=t.image.width/t.image.height,"loading"!==this.getLoadState())return void t.dispose();const e=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("sprite");this.getThreeJsMaterials().push(e),s.ThreeJsHelper.setBlending(this.getThreeJsMaterials()[0],this._blending),s.ThreeJsHelper.setUniformColorRGBA(e,"color",this._colorMultiplier,1),s.ThreeJsHelper.setUniformTexture(e,"colorTexture",t),s.ThreeJsHelper.setUniformNumber(e,"pixelBased","px"===this._widthUnits?1:0);const i=s.ThreeJsHelper.createMeshObject(this,e,[{name:"position",dimensions:3},{name:"uv",dimensions:2}],!1);this.getThreeJsObjects().push(i),s.ThreeJsHelper.setVertices(i.geometry,"position",new Float32Array(18)),s.ThreeJsHelper.setVertices(i.geometry,"uv",new Float32Array(12)),s.ThreeJsHelper.setIndices(i.geometry,new Uint16Array([0,2,3,3,1,0,2,4,5,5,3,2]))}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._activeCamera=null,this._fadeWhenCloseToCamera=!0,this._fadeWhenCloseToParent=!0,this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.left="0",this._div.style.top="0",this._div.style.transform="translate(0%, 0%);",this._alignment=new s.Vector2(0,.5),this._alignment.freeze(),this._sizeInPx=new s.Vector2(0,0),this._currentHTML="",this.__setRadius(Number.POSITIVE_INFINITY)}getDiv(){return this._div}getActiveCamera(){return this._activeCamera}setActiveCamera(t){this._activeCamera=t,this.resetResources()}getFadeWhenCloseToCamera(){return this._fadeWhenCloseToCamera}setFadeWhenCloseToCamera(t){this._fadeWhenCloseToCamera=t}getFadeWhenCloseToParent(){return this._fadeWhenCloseToParent}setFadeWhenCloseToParent(t){this._fadeWhenCloseToParent=t}getAlignment(){return this._alignment}setAlignment(t){this._alignment.thaw(),this._alignment.copy(t),this._alignment.freeze()}__loadResources(){return Promise.resolve()}__unloadResources(){null!==this._div.parentNode&&this._div.parentNode.removeChild(this._div)}__prepareForRender(t){if(null===this._activeCamera){const t=this.getEntity().getScene().getEngine().getViewport(0);null!==t&&(this._activeCamera=t.getCamera())}if(this._activeCamera!==t||null===this._activeCamera||null===this._activeCamera.getViewport())return;this._activeCamera.getViewport().getDiv()!==this._div.parentNode&&this._activeCamera.getViewport().getDiv().appendChild(this._div);let e=1;if(e>0&&this._fadeWhenCloseToCamera){const i=this.getEntity().getNormalSpaceExtentsRadius(t);e*=s.MathUtils.clamp01((.02-i)/.02)}const i=this.getEntity().getCameraSpacePosition(t);if(e>0&&this._fadeWhenCloseToParent&&null!==this.getEntity().getParent()){let i=this.getEntity().getParent();for(;null!==i;){if(null!==i.get("div")){const a=s.Vector3.pool.get();a.sub(this.getEntity().getNormalSpacePosition(t),i.getNormalSpacePosition(t));const n=a.magnitude();s.Vector3.pool.release(a),i.getNormalSpaceExtentsRadius(t)<.02&&(e*=s.MathUtils.clamp01((n-.02)/.02));break}i=i.getParent()}}if(e>0&&(null!==this.getEntity().getParent()&&this.getEntity().getParent().isOccludingPosition(t,i)?e=0:t.isPositionOccluded(i)&&(e=0)),e>0){const i=s.Vector3.pool.get();t.getEntity().getOrientation().getAxis(i,1),i.dot(this.getEntity().getCameraSpacePosition(t))<=0&&(e=0),s.Vector3.pool.release(i)}if(this._div.style.opacity!==""+e){if(0===e||isNaN(e))return void(this._div.style.visibility="hidden");this._div.style.opacity=""+e,this._div.style.visibility="visible"}this._currentHTML!==this._div.innerHTML&&(this._sizeInPx.set(this._div.offsetWidth,this._div.offsetHeight),this._currentHTML=this._div.innerHTML);const a=t.getViewport().getBounds(),n=this.getEntity().getPixelSpacePosition(t),r=n.x-this._sizeInPx.x*this._alignment.x-a.origin.x+(a.size.x%2==0?-.5:0),o=n.y-this._sizeInPx.y*this._alignment.y-a.origin.y+(a.size.y%2==0?-.5:0);this._div.style.transform=`translate(${r}px, ${o}px)`}}},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new s.THREE.Quaternion;e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._faceSize=64,this._threeJsRenderer=this.getEntity().getScene().getEngine().__getThreeJsRenderer(),this._threeJsFaceCameras=[],this._threeJsFaceRenderTargets=[],this._threeJsQuad=new s.THREE.Mesh,this._threeJsScene=new s.THREE.Scene,this._threeJsCubeCamera=new s.THREE.OrthographicCamera(-1,1,-1,1,-1,1),this._envMapTexture=new s.THREE.WebGLRenderTarget(4*this._faceSize,4*this._faceSize,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.LinearFilter,wrapS:s.THREE.ClampToEdgeWrapping,wrapT:s.THREE.ClampToEdgeWrapping}),this._setupFaceCameras(),this._setupQuad()}getFaceSize(){return this._faceSize}setFaceSize(t){this._faceSize=t,this._envMapTexture.width!==4*this._faceSize&&(this._envMapTexture.setSize(4*this._faceSize,4*this._faceSize),this._threeJsQuad.material.uniforms.faceSize.value=this._faceSize);for(let t=0;t<6;t++)this._threeJsFaceRenderTargets[t].setSize(this._faceSize,this._faceSize)}getTexture(){return this._envMapTexture.texture}__destroy(){this._threeJsQuad.geometry.dispose(),this._threeJsQuad.material.dispose(),this._envMapTexture.dispose();for(let t=0;t<this._threeJsFaceRenderTargets.length;t++)this._threeJsFaceRenderTargets[t].dispose();super.__destroy()}__render(){this._updateProjectionMatrix();const t=.7071067811865476;a.set(0,0,-t,t),this._threeJsFaceCameras[0].setRotationFromQuaternion(a),a.set(0,0,0,1),this._threeJsFaceCameras[1].setRotationFromQuaternion(a),a.set(0,0,t,t),this._threeJsFaceCameras[2].setRotationFromQuaternion(a),a.set(0,0,1,0),this._threeJsFaceCameras[3].setRotationFromQuaternion(a),a.set(.5,-.5,-.5,.5),this._threeJsFaceCameras[4].setRotationFromQuaternion(a),a.set(-.5,.5,-.5,.5),this._threeJsFaceCameras[5].setRotationFromQuaternion(a);for(let t=0;t<6;t++)this._threeJsRenderer.setRenderTarget(this._threeJsFaceRenderTargets[t]),this._threeJsRenderer.render(this.getEntity().getScene().getThreeJsScene(),this._threeJsFaceCameras[t]);this._threeJsRenderer.setRenderTarget(this._envMapTexture),this._threeJsRenderer.render(this._threeJsScene,this._threeJsCubeCamera)}_setupFaceCameras(){for(let t=0;t<6;t++){this._threeJsFaceCameras.push(new s.THREE.PerspectiveCamera(90,1,.1,1e3));const e=new s.THREE.Matrix4;e.set(1,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0),this._threeJsFaceCameras[t].projectionMatrix=e;const i=new s.THREE.Matrix4;i.set(1,0,0,0,0,0,0,1,0,1,0,0,0,0,1,0),this._threeJsFaceCameras[t].projectionMatrixInverse=i,this._threeJsFaceCameras[t].layers.set(1);const a=new s.THREE.WebGLRenderTarget(this._faceSize,this._faceSize,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.LinearFilter});this._threeJsFaceRenderTargets.push(a)}}_updateProjectionMatrix(){const t=this.getEntity().get("camera");if(null===t)return;const e=1-Number.EPSILON,i=-t.getAutoNearDistance()*(2-Number.EPSILON);for(let t=0;t<6;t++)this._threeJsFaceCameras[t].projectionMatrix.elements[6]=e,this._threeJsFaceCameras[t].projectionMatrix.elements[14]=i,this._threeJsFaceCameras[t].projectionMatrixInverse.elements[11]=1/i,this._threeJsFaceCameras[t].projectionMatrixInverse.elements[15]=-e/i}_setupQuad(){const t=new s.THREE.BufferGeometry,e=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i=new Uint16Array([0,1,2,0,2,3]);t.setAttribute("position",new s.THREE.BufferAttribute(e,2)),t.setIndex(new s.THREE.BufferAttribute(i,1));const a={textures:new s.THREE.Uniform([]),faceSize:new s.THREE.Uniform(this._faceSize)};for(let t=0;t<6;t++)a.textures.value.push(this._threeJsFaceRenderTargets[t].texture);const n=new s.THREE.RawShaderMaterial({uniforms:a,vertexShader:"\n\t\t\t\tattribute vec2 position;\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(position.x, position.y, 0.0, 1.0);\n\t\t\t\t\txy = position;\n\t\t\t\t}",fragmentShader:"\n\t\t\t\tprecision mediump float;\n\t\t\t\tuniform sampler2D textures[6];\n\t\t\t\tuniform float faceSize;\n\n\t\t\t\tvarying vec2 xy;\n\n\t\t\t\tvoid adjustTextureCoordsForBorders(inout int textureIndex, inout vec2 xyInTexture, in float pixelSize) {\n\t\t\t\t\t// Get the pixells in pixel-space.\n\t\t\t\t\tvec2 xyInPixels = xyInTexture * pixelSize;\n\n\t\t\t\t\t// Flip the x since this code is for surface cubes, but we're inside out.\n\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\n\t\t\t\t\t// If it's a border, adjust the pixel it's reading the next pixel in one face over.\n\t\t\t\t\t// This allows for nice linear filtering to happen on the material side of things.\n\t\t\t\t\tif (xyInPixels.x < 0.6 || xyInPixels.x > pixelSize - 0.6 || xyInPixels.y < 0.6 || xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\tif (0 <= textureIndex && textureIndex <= 3) { // One of the horizontal faces\n\t\t\t\t\t\t\tif (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = (textureIndex + 1);\n\t\t\t\t\t\t\t\tif (textureIndex == 4) {\n\t\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = textureIndex - 1;\n\t\t\t\t\t\t\t\tif (textureIndex == -1) {\n\t\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 0) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 1) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 2) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 3) {\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.x = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 4) {\n\t\t\t\t\t\t\tif (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = pixelSize - 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (textureIndex == 5) {\n\t\t\t\t\t\t\tif (xyInPixels.x < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 3;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.x > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.y;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (xyInPixels.y < 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (xyInPixels.y > pixelSize - 0.6) {\n\t\t\t\t\t\t\t\txyInPixels.y = 1.5;\n\t\t\t\t\t\t\t\ttextureIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Shrink all pixels so that they fit within the border.\n\t\t\t\t\t// The border pixels have already been modified so that they work with this equation.\n\t\t\t\t\txyInPixels.x = ((pixelSize - 1.0) * xyInPixels.x - pixelSize) / (pixelSize - 3.0);\n\t\t\t\t\txyInPixels.y = ((pixelSize - 1.0) * xyInPixels.y - pixelSize) / (pixelSize - 3.0);\n\n\t\t\t\t\t// Flip the x back.\n\t\t\t\t\txyInPixels.x = pixelSize - xyInPixels.x;\n\n\t\t\t\t\t// Go back into unit-space.\n\t\t\t\t\txyInTexture = xyInPixels / pixelSize;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\t// Make it pink everywhere else for easy debugging.\n\t\t\t\t\tvec3 color = vec3(1.0, 0.0, 0.5);\n\t\t\t\t\t// Get the mip level, size, and offset.\n\t\t\t\t\tfloat level = floor(1.0 - log2(1.0 - xy.y)); // 0 is base, then 1, etc.\n\t\t\t\t\tfloat mipSizeX = pow(2.0, -level); // 1, .5, .25, .125, etc.\n\t\t\t\t\tfloat mipOffsetY = 1.0 - pow(2.0, -level); // 0, .5, .75, .875, etc.\n\t\t\t\t\t// Get the xy within the mip level. Note the x value is * 3 for less computing further on.\n\t\t\t\t\tvec2 xyInMip;\n\t\t\t\t\txyInMip.x = 0.5 * (xy.x + 1.0) / mipSizeX * 4.0;\n\t\t\t\t\txyInMip.y = (xy.y + 1.0 - 2.0 * mipOffsetY) / mipSizeX;\n\t\t\t\t\tif (xyInMip.x <= 3.0) {\n\t\t\t\t\t\tint textureIndex = int(floor(xyInMip.y * 2.0) * 3.0 + floor(xyInMip.x));\n\t\t\t\t\t\t// Get the xy within the face/texture.\n\t\t\t\t\t\tvec2 xyInTexture;\n\t\t\t\t\t\txyInTexture.x = 1.0 - xyInMip.x + floor(xyInMip.x);\n\t\t\t\t\t\txyInTexture.y = 2.0 * (xyInMip.y - floor(xyInMip.y * 2.0) / 2.0);\n\t\t\t\t\t\t// Adjust the coordinates and face to account for borders.\n\t\t\t\t\t\tadjustTextureCoordsForBorders(textureIndex, xyInTexture, faceSize * mipSizeX);\n\t\t\t\t\t\t// Set the color based on the face (textureIndex) and the coords.\n\t\t\t\t\t\tfor (int i = 0; i < 6; i++) {\n\t\t\t\t\t\t\tif (i == textureIndex) {\n\t\t\t\t\t\t\t\tcolor = texture2D(textures[i], xyInTexture).rgb;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(color, 1.0);\n\t\t\t\t}",depthTest:!1,depthWrite:!1});this._threeJsQuad=new s.THREE.Mesh(t,n),this._threeJsQuad.frustumCulled=!1,this._threeJsScene.add(this._threeJsQuad)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._size=void 0,this._relativeToEntity=!0,this._joint="",this._jointObject=null,this._model=null,this._lineMesh=null,this.__setRadius(2*i.getExtentsRadius()),this.__setUsesEntityOrientation(this._relativeToEntity)}getSize(){return void 0!==this._size?this._size:Math.max(1e-4,2*this.getEntity().getExtentsRadius())}setSize(t){this._size=t,this.__setRadius(this.getSize())}isRelativeToEntity(){return this._relativeToEntity}setRelativeToEntity(t){this._relativeToEntity=t,this.__setUsesEntityOrientation(this._relativeToEntity)}setJoint(t,e){if(this._joint=t,e)this._model=e;else{const t=this.getEntity().get("model");null!==t&&(this._model=t)}}__prepareForRender(t){if(""===this._joint||null!==this._jointObject&&this._jointObject.name===this._joint||null===this._model||(this._jointObject=this._model.getThreeJsObjectByName(this._joint)),null!==this._jointObject){const e=s.Vector3.pool.get();let i=this._jointObject;for(a._tempThreeJsVector3.copy(i.position),a._tempThreeJsQuaternion.copy(i.quaternion);null!==i.parent&&i.parent!==this._model.getThreeJsObjects()[0];)i=i.parent,a._tempThreeJsVector3.add(i.position),a._tempThreeJsQuaternion.multiplyQuaternions(i.quaternion,a._tempThreeJsQuaternion);e.copyFromThreeJs(a._tempThreeJsVector3),e.mult(e,.001),e.rotate(this._model.getRotation(),e),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t,e,!0),s.Vector3.pool.release(e);const n=s.Quaternion.pool.get();n.copyFromThreeJs(a._tempThreeJsQuaternion),n.mult(this._model.getRotation(),n),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity(),n),s.Quaternion.pool.release(n)}else this._relativeToEntity?s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()):s.ThreeJsHelper.setOrientation(this.getThreeJsObjects()[0],s.Quaternion.Identity),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t);s.ThreeJsHelper.setScale(this.getThreeJsObjects()[0],this.getSize()),this._lineMesh.prepareForRender(t)}__loadResources(){this._lineMesh=new s.LineMesh(this);const t=[];t.push(new s.Vector3(0,0,0)),t.push(new s.Vector3(1,0,0)),t.push(new s.Vector3(0,0,0)),t.push(new s.Vector3(0,1,0)),t.push(new s.Vector3(0,0,0)),t.push(new s.Vector3(0,0,1)),this._lineMesh.setPositions(t);const e=[];e.push(new s.Color(1,0,0)),e.push(new s.Color(1,0,0)),e.push(new s.Color(0,1,0)),e.push(new s.Color(0,1,0)),e.push(new s.Color(0,0,1)),e.push(new s.Color(0,0,1)),this._lineMesh.setColors(e);const i=[];return i.push(2),i.push(2),i.push(2),i.push(2),i.push(2),i.push(2),this._lineMesh.setWidths(i),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}}a._tempThreeJsVector3=new s.THREE.Vector3,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._text="<PLACEHOLDER>",this._fontFamily="Arial",this._fontSize=16,this._color=new s.Color,this._color.freeze(),this._ignoreDistance=!1,this._alignment=new s.Vector2(0,.5),this._alignment.freeze(),this._pixelOffset=new s.Vector2(0,0),this._pixelOffset.freeze(),this._pixelSize=new s.Vector2,this._devicePixelRatio=1,this._canvas=null,this._normalSpaceBounds=new Map;const a=i.getScene().getEngine().getConfig().getValue("fontFamily");"string"==typeof a&&(this._fontFamily=a);const n=i.getScene().getEngine().getConfig().getValue("fontSize");"number"==typeof n&&(this._fontSize=n),this.__setRadius(Number.POSITIVE_INFINITY)}getText(){return this._text}setText(t){this._text=t,this._updateText()}getFontFamily(){return this._fontFamily}setFontFamily(t){this._fontFamily=t,this._updateText()}getFontSize(){return this._fontSize}setFontSize(t){this._fontSize=t,this._updateText()}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze()}setIgnoreDistance(t){this._ignoreDistance=t}getAlignment(){return this._alignment}setAlignment(t){this._alignment.thaw(),this._alignment.copy(t),this._alignment.freeze(),this._updateText()}getPixelOffset(){return this._pixelOffset}setPixelOffset(t){this._pixelOffset.thaw(),this._pixelOffset.copy(t),this._pixelOffset.freeze()}getNormalSpaceBounds(t){return this._normalSpaceBounds.get(t)}__prepareForRender(t){const e=this.getEntity().getCameraSpacePosition(t);s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t),s.ThreeJsHelper.setOrientation(this.getThreeJsObjects()[0],s.Quaternion.Identity);let i=1;const a=s.Vector2.pool.get();if("spout"===t.getType()){const e=t;i=4,a.set(e.getRenderWidth(),e.getRenderWidth())}else a.copy(t.getViewport().getBounds().size);const n=s.Vector2.pool.get(),r=s.Vector2.pool.get(),o=s.Vector3.pool.get(),l=s.Vector3.pool.get();if(n.set((this._pixelOffset.x-this._alignment.x*this._canvas.width)*i,(this._pixelOffset.y-this._alignment.y*this._canvas.height)*i),r.set(this._canvas.width*i,this._canvas.height*i),t.getEntity().getOrientation().getAxis(o,2),t.getEntity().getOrientation().getAxis(l,0),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"pixelOffset",n),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"pixelSize",r),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"renderSize",Math.max(a.x,a.y)),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"renderUp",o),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"renderRight",l),"spout"!==t.getType()){this._normalSpaceBounds.has(t)||this._normalSpaceBounds.set(t,new s.Rect);const e=this._normalSpaceBounds.get(t);e.thaw();const n=this.getEntity().getNormalSpacePosition(t);e.origin.x=n.x+2*(this._pixelOffset.x-this._alignment.x*this._pixelSize.x)*i/a.x,e.origin.y=n.y+2*(this._pixelOffset.y-this._alignment.y*this._pixelSize.y)*i/a.y,e.size.x=2*this._pixelSize.x*i/a.x,e.size.y=2*this._pixelSize.y*i/a.y,e.freeze()}s.Vector2.pool.release(r),s.Vector2.pool.release(n),s.Vector3.pool.release(o),s.Vector3.pool.release(l),s.Vector2.pool.release(a);let c=1;const h=this.getEntity().getNormalSpaceExtentsRadius(t);if(this._ignoreDistance||(c*=s.MathUtils.clamp01((.02-h)/.02)),null!==this.getEntity().getParent()){const i=t.getNormalSpaceRadiusFromRadius(this.getEntity().getPosition().magnitude(),e.magnitude()),a=this.getEntity().getParent().getNormalSpaceExtentsRadius(t);!this._ignoreDistance&&a<.02&&(c*=s.MathUtils.clamp01((i-.02)/.02))}null!==this.getEntity().getParent()&&this.getEntity().getParent().isOccludingPosition(t,e)?c=0:t.isPositionOccluded(e)&&(c=0);const d=s.Color.pool.get();d.copy(this._color),d.a*=c,s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"colorMultiplier",d),s.Color.pool.release(d)}async __loadResources(){0===a._useCount&&(a._threeJsGeometry=s.ThreeJsHelper.createGeometry([{name:"position",dimensions:2},{name:"uv",dimensions:2}],!1),s.ThreeJsHelper.setVertices(a._threeJsGeometry,"position",new Float32Array([0,0,1,0,1,1,0,1])),s.ThreeJsHelper.setVertices(a._threeJsGeometry,"uv",new Float32Array([0,1,1,1,1,0,0,0])),s.ThreeJsHelper.setIndices(a._threeJsGeometry,new Uint16Array([0,1,2,2,3,0])),a._threeJsMaterial=new s.THREE.ShaderMaterial({uniforms:{colorMultiplier:new s.THREE.Uniform(new s.THREE.Vector4(1,1,1,1)),colorTexture:new s.THREE.Uniform(null),pixelOffset:new s.THREE.Uniform(new s.THREE.Vector2(0,0)),pixelSize:new s.THREE.Uniform(new s.THREE.Vector2(1,1)),renderSize:new s.THREE.Uniform(1),renderUp:new s.THREE.Uniform(new s.THREE.Vector3(0,1,0)),renderRight:new s.THREE.Uniform(new s.THREE.Vector3(1,0,0))},vertexShader:"\n\t\t\t\t\tuniform vec2 pixelOffset;\n\t\t\t\t\tuniform vec2 pixelSize;\n\t\t\t\t\tuniform float renderSize;\n\t\t\t\t\tuniform vec3 renderUp;\n\t\t\t\t\tuniform vec3 renderRight;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\t// Get a frame for the label to be on the x-y axis.\n\t\t\t\t\t\tvec3 forward = (modelMatrix * vec4(0, 0, 0, 1.)).xyz;\n\t\t\t\t\t\tfloat distance = length(forward);\n\t\t\t\t\t\tforward = normalize(forward);\n\t\t\t\t\t\tvec3 up = normalize(renderUp);\n\t\t\t\t\t\tvec3 right = normalize(cross(forward, up));\n\n\t\t\t\t\t\t// Setup the up and right vectors.\n\t\t\t\t\t\tup *= (position.y * pixelSize.y + pixelOffset.y) / renderSize * distance;\n\t\t\t\t\t\tright *= (position.x * pixelSize.x + pixelOffset.x) / renderSize * distance * projectionMatrix[1][3];\n\n\t\t\t\t\t\t// Do the transforms.\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4(up + right, 1.);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\n\t\t\t\t\t\tfUV = uv;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\tuniform vec4 colorMultiplier;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, fUV);\n\t\t\t\t\t\tgl_FragColor *= colorMultiplier;\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",side:s.THREE.DoubleSide}),s.ThreeJsHelper.setupLogDepthBuffering(a._threeJsMaterial)),a._useCount+=1;const t=a._threeJsMaterial.clone();this.getThreeJsMaterials().push(t),s.ThreeJsHelper.setTransparent(t,!0),s.ThreeJsHelper.setOverlay(t,!0),s.ThreeJsHelper.setUniformColorRGBA(t,"colorMultiplier",this._color);const e=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,t,a._threeJsGeometry);this.getThreeJsObjects().push(e),this._canvas=document.createElement("canvas"),this._canvas.width=1,this._canvas.height=1,this._updateText()}__unloadResources(){a._useCount-=1,0===a._useCount&&(s.ThreeJsHelper.destroyGeometry(a._threeJsGeometry),s.ThreeJsHelper.destroyMaterial(a._threeJsMaterial));const t=this.getThreeJsObjects()[0];null!==t.parent&&t.parent.remove(t),this.getThreeJsMaterials()[0].dispose(),this._canvas=null}_updateText(){if(null===this._canvas)return;const t=this._canvas.getContext("2d");this._devicePixelRatio=window.devicePixelRatio,t.font=this._fontSize+"px "+this._fontFamily;const e=t.measureText(this._text);this._pixelSize.set(e.width*this._devicePixelRatio,this._fontSize*this._devicePixelRatio);const i=s.MathUtils.ceilPow2(this._pixelSize.x),a=s.MathUtils.ceilPow2(this._pixelSize.y);i===this._canvas.width&&a===this._canvas.height||(this._canvas.width=i,this._canvas.height=a),t.clearRect(0,0,this._canvas.width,this._canvas.height),this._canvas.style.width=i/this._devicePixelRatio+"px",this._canvas.style.height=a/this._devicePixelRatio+"px",t.font=this._pixelSize.y+"px "+this._fontFamily,t.fillStyle="rgba(255, 255, 255, 255)",t.fillText(this._text,(this._canvas.width-this._pixelSize.x)*s.MathUtils.clamp01(this._alignment.x),this._canvas.height-.1875*this._pixelSize.y-(this._canvas.height-this._pixelSize.y)*s.MathUtils.clamp01(this._alignment.y));const n=this.getThreeJsMaterials()[0];s.ThreeJsHelper.setUniformTexture(n,"colorTexture",s.ThreeJsHelper.loadTextureFromCanvas(this._canvas))}}a._threeJsMaterial=null,a._threeJsGeometry=null,a._useCount=0,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1),this._color.freeze(),this._absoluteMagnitude=1,this.__setRadius(Number.POSITIVE_INFINITY)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze()}getAbsoluteMagnitude(){return this._absoluteMagnitude}setAbsoluteMagnitude(t){this._absoluteMagnitude=t}__loadResources(){return this.getEntity().getScene().__addLightSource(this.getEntity().getName(),this.getTypeIndex()),Promise.resolve()}__unloadResources(){this.getEntity().getScene().__removeLightSource(this.getEntity().getName(),this.getTypeIndex())}__setTypeIndex(t){"loaded"===this.getLoadState()&&this.getEntity().getScene().__removeLightSource(this.getEntity().getName(),this.getTypeIndex()),super.__setTypeIndex(t),"loaded"===this.getLoadState()&&this.getEntity().getScene().__addLightSource(this.getEntity().getName(),this.getTypeIndex())}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._url="",this._shadowEntities=[],this._translation=new s.Vector3,this._translation.freeze(),this._rotation=new s.Quaternion,this._rotation.freeze(),this._urlReferenceMap=new Map,this._threeJsAnimationClips=new Map,this._hiddenObjects=new s.FastMap,this._scale=new s.Vector3(.001,.001,.001),this._scale.freeze(),this._modelRadius=NaN,this._environmentCubemapUrl="",this._environmentCylindricalUrl="",this._environmentCubemap=null,this._environmentIntensity=.5,this._dynamicEnvironmentMapComponent=null,this._useCompressedTextures=!1,this._onConfigChanged=this._onConfigChanged.bind(this),this.__setRadius(this.getEntity().getExtentsRadius())}getUrl(){return this._url}setUrl(t){""!==this._url&&this.getEntity().getScene().getEngine().getDownloader().cancel(this._url),this.resetResources(),this._modelRadius=NaN,this._loading=!1,this._url=t}setHiddenObject(t,e){e&&!this._hiddenObjects.has(t)?this._hiddenObjects.set(t,null):!e&&this._hiddenObjects.has(t)&&this._hiddenObjects.delete(t)}getTranslation(){return this._translation}setTranslation(t){this._translation.thaw(),this._translation=t,this._translation.freeze()}getScale(){return this._scale}setScale(t){this._scale.thaw(),"number"==typeof t?this._scale.set(t,t,t):this._scale.copy(t),this._scale.freeze(),s.ThreeJsHelper.setScale(this.getThreeJsObjects()[0],this._scale),isNaN(this._modelRadius)?this.__setRadius(this.getEntity().getExtentsRadius()):this.__setRadius(Math.max(this._scale.x,this._scale.y,this._scale.z)*this._modelRadius)}getRotation(){return this._rotation}setRotation(t){this._rotation.thaw(),this._rotation.copy(t),this._rotation.freeze()}getEnvironmentCubemapUrl(){return this._environmentCubemapUrl}setEnvironmentCubemapUrl(t){this._environmentCubemapUrl=t}getEnvironmentIntensity(){return this._environmentIntensity}setEnvironmentIntensity(t){this._environmentIntensity=t;for(let t=0,e=this.getThreeJsMaterials().length;t<e;t++)s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[t],"environmentIntensity",this._environmentIntensity)}getEnvironmentCylindricalUrl(){return this._environmentCylindricalUrl}setEnvironmentCylindricalUrl(t){this._environmentCylindricalUrl=t}setDynamicEnvironmentMapComponent(t){this._dynamicEnvironmentMapComponent=t;for(let e=0,i=this.getThreeJsMaterials().length;e<i;e++){const i=this.getThreeJsMaterials()[e];void 0!==i.uniforms.dynEnvTexture&&(s.ThreeJsHelper.setDefine(i,"dynEnvMap",!0),s.ThreeJsHelper.setUniformTexture(i,"dynEnvTexture",this._dynamicEnvironmentMapComponent.getTexture()),s.ThreeJsHelper.setUniformNumber(i,"dynEnvFaceSize",t.getFaceSize()))}null!==this._environmentCubemap&&(this._environmentCubemap.dispose(),this._environmentCubemap=null)}getUseCompressedTextures(){return this._useCompressedTextures}setUseCompressedTextures(t){this._useCompressedTextures=t}setURLReferenceMap(t){this._urlReferenceMap.clear();for(const e of t)this._urlReferenceMap.set(e[0],e[1])}getAnimationClip(t){return this._threeJsAnimationClips.get(t)||null}getMaterial(t){const e=this.getThreeJsMaterials();for(let i=0,s=e.length;i<s;i++)if(e[i].name===t)return e[i];return null}updateMaterial(t,e){const i=this.getThreeJsMaterials();let a;for(let s=0;s<i.length;s++){const n=i[s];if(n.name===t){a=n,i.splice(s,1),i.push(e);break}}if(!a)throw new Error(`No material with the name ${t} was found in ${this}.`);for(let i=0,n=this.getThreeJsObjects().length;i<n;i++){const n=this.getThreeJsObjects()[i];n instanceof s.THREE.Mesh&&n.material===a&&(n.material=e,n.material.name=t)}}getNumShadowEntities(){return this._shadowEntities.length}getShadowEntity(t){return this._shadowEntities[t]}setShadowEntities(t){this._shadowEntities=t.slice(0);const e=t.length>0;for(let t=0,i=this.getThreeJsMaterials().length;t<i;t++)s.ThreeJsHelper.setDefine(this.getThreeJsMaterials()[t],"shadowEntities",e)}__prepareForRender(t){for(let t=0,e=this._hiddenObjects.size;t<e;t++){const e=this._hiddenObjects.getAt(t);null===e.value&&(e.value=this.getThreeJsObjectByName(e.key)),null!==e.value&&(e.value.visible=!1)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t,this._translation,!0),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity(),this._rotation);for(let t=0,e=this._shadowEntities.length;t<e;t++){const e=this._shadowEntities[t];if("string"==typeof e){const i=this.getEntity().getScene().getEntity(e);null!==i&&(this._shadowEntities[t]=i)}}s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,null,!1)}async __loadResources(){const t=this.getEntity().getScene().getEngine(),e=this._url.startsWith("blob:")||this._url.endsWith(".glb");try{const i=await t.getDownloader().download(this._url,e);if("loading"!==this.getLoadState()||"cancelled"===i.status)return;if("failed"===i.status)throw new Error('Failed to load model component file "'+i.url+'": '+i.errorMessage);if(!i.actualUrl.endsWith(".gltf")&&!i.actualUrl.endsWith(".glb")&&!i.actualUrl.startsWith("blob:"))throw new Error("Unknown model format.");const a=new s.THREE.LoadingManager;0===this._urlReferenceMap.size&&a.addHandler(/.$/,this._useCompressedTextures?t.getTextureLoaderCompressed():t.getTextureLoader()),a.setURLModifier(t=>{const e=t.substring(t.lastIndexOf("/")+1);return this._urlReferenceMap.has(e)?this._urlReferenceMap.get(e):t});const n=new s.ThreeJsGLTFLoader(a);await new Promise((e,a)=>{n.parse(i.content,s.THREE.LoaderUtils.extractUrlBase(i.actualUrl),async i=>{const a=i.scene;this._populateThreeJsObjectsAndMaterials(i.scene),"loading"!==this.getLoadState()&&s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._clean(),s.ThreeJsHelper.setupObject(this,a),s.ThreeJsHelper.setScale(a,this._scale);const n=(new s.THREE.Box3).setFromObject(a);this._modelRadius=Math.max(n.min.length(),n.max.length()),this.__setRadius(Math.max(this._scale.x,this._scale.y,this._scale.z)*this._modelRadius);for(let t=0;t<i.animations.length;t++)this._threeJsAnimationClips.set(i.animations[t].name,i.animations[t]);null===this._dynamicEnvironmentMapComponent&&null===this._environmentCubemap&&(""!==this._environmentCubemapUrl?await t.getTextureLoader().loadCubeTexture(this._environmentCubemapUrl,!0).then(e=>{this._environmentCubemap=t.getTextureLoader().generateEnvMap(e)}):""!==this._environmentCylindricalUrl&&await t.getTextureLoader().loadTexture(this._environmentCylindricalUrl,!0).then(e=>{this._environmentCubemap=t.getTextureLoader().generateEnvMap(e)})),this._updateMaterials(),this.getEntity().getScene().getEngine().getConfig().addEventListener("gammaCorrection",this._onConfigChanged),e()},t=>{a(new Error(`Error loading gltf: ${t}`))})})}catch(t){throw new Error(`While loading model "${this._url}": ${t}`)}}__unloadResources(){for(let t=0,e=this._hiddenObjects.size;t<e;t++)this._hiddenObjects.getAt(t).value=null;this.getEntity().getScene().getEngine().getConfig().removeEventListener("gammaCorrection",this._onConfigChanged),s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_populateThreeJsObjectsAndMaterials(t){if(this.getThreeJsObjects().push(t),t instanceof s.THREE.Mesh){let e=t.material;Array.isArray(e)||(e=[e]);for(const t of e){let e=!1;for(let i=0,s=this.getThreeJsMaterials().length;i<s;i++)if(this.getThreeJsMaterials()[i]===t){e=!0;break}e||this.getThreeJsMaterials().push(t)}}for(let e=0;e<t.children.length;e++)this._populateThreeJsObjectsAndMaterials(t.children[e])}_clean(){const t=/_(lamp|hemi)/i;for(let e=0;e<this.getThreeJsObjects().length;e++){const i=this.getThreeJsObjects()[e];i.name.match(t)&&(i.parent&&i.parent.remove(i),this.getThreeJsObjects().splice(e,1),e--)}for(let t=0,e=this.getThreeJsObjects().length;t<e;t++){let e=!1;const i=this.getThreeJsObjects()[t];i instanceof s.THREE.Mesh&&i.geometry instanceof s.THREE.BufferGeometry&&(i.name.startsWith("_root")&&(e=!0),i instanceof s.THREE.Mesh&&i.material instanceof s.THREE.Material&&"transparent"===i.material.name&&(e=!0),e&&(i.geometry.deleteAttribute("position"),i.geometry.deleteAttribute("normal")))}}_onConfigChanged(){this._updateMaterials()}_updateMaterials(){for(let t=0,e=this.getThreeJsMaterials().length;t<e;t++){const e=this.getThreeJsMaterials()[t];if(!(e instanceof s.THREE.MeshStandardMaterial))continue;const i=this._getNewPioneerMaterial(e);this.getThreeJsMaterials()[t]=i;let a=!1;i.defines.normalMap&&(a=!0);for(const t of this.getThreeJsObjects())if(t instanceof s.THREE.Mesh){let n=!1;if(Array.isArray(t.material))for(let s=0,a=t.material.length;s<a;s++)t.material[s]===e&&(t.material[s]=i,n=!0);else t.material===e&&(t.material=i,n=!0);n&&a&&t.geometry instanceof s.THREE.BufferGeometry&&void 0===t.geometry.getAttribute("tangent")&&s.ThreeJsHelper.computeTangents(t.geometry)}e.dispose()}}_getNewPioneerMaterial(t){const e=s.MaterialUtils.getPBR();if(e.name=t.name,e.transparent=t.transparent,null!==t.map){const i=t.map.ktxFormat;void 0!==i&&(t.map.format=i),e.uniforms.colorTexture.value=t.map,e.defines.colorMap=!0}t.roughnessMap&&(e.uniforms.roughnessTexture.value=t.roughnessMap,e.defines.roughnessMap=!0),t.metalnessMap&&(e.uniforms.metalnessTexture.value=t.metalnessMap,e.defines.metalnessMap=!0),null!==t.normalMap&&(e.uniforms.normalTexture.value=t.normalMap,e.uniforms.normalScale.value=t.normalScale,e.defines.normalMap=!0),null!==t.emissiveMap&&(e.uniforms.emissiveTexture.value=t.emissiveMap,e.uniforms.emissiveColor.value.copy(t.emissive),e.uniforms.emissiveColor.value.multiplyScalar(t.emissiveIntensity),e.defines.emissiveMap=!0),e.uniforms.color.value=t.color,e.uniforms.roughness.value=t.roughness,e.uniforms.metalness.value=t.metalness;let i=0;return null!==this._dynamicEnvironmentMapComponent?(e.defines.dynEnvMap=!0,e.uniforms.dynEnvTexture.value=this._dynamicEnvironmentMapComponent.getTexture(),e.uniforms.dynEnvFaceSize.value=this._dynamicEnvironmentMapComponent.getFaceSize()):null!==this._environmentCubemap&&(e.defines.envMap=!0,e.defines.envIsCubeUV=!0,e.uniforms.envTexture.value=this._environmentCubemap,i=this._environmentCubemap.image.height,e.uniforms.maxMipLevel.value=Math.log(i)*Math.LOG2E),e.uniforms.environmentIntensity.value=this._environmentIntensity,e.uniforms.gammaCorrectionFactor.value=this.getEntity().getScene().getEngine().getConfig().getValue("gammaCorrection"),this._shadowEntities.length>0&&(e.defines.shadowEntities=!0),e.needsUpdate=!0,e}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._scaleOfParticles=1,this._loadFunction=null,this._orbitalElementsList=[],this._offsetArray=new Float32Array(0),this._spriteParticles=null,this.__setRadius(100*this.getEntity().getExtentsRadius())}getScaleOfParticles(){return this._scaleOfParticles}setScaleOfParticles(t){this._scaleOfParticles=t,this.resetResources()}setLoadFunction(t){this._loadFunction=t,this.resetResources()}__update(){if(null===this._spriteParticles)return;const t=s.Vector3.pool.get(),e=s.Vector3.pool.get(),i=this.getEntity().getScene().getEngine().getTime();for(let s=0,a=this._orbitalElementsList.length;s<a;s++)this._orbitalElementsList[s].project(t,e,i),this._offsetArray[3*s+0]=t.x,this._offsetArray[3*s+1]=t.y,this._offsetArray[3*s+2]=t.z;s.Vector3.pool.release(t),s.Vector3.pool.release(e),this._spriteParticles.setParticleOffsets(this._offsetArray)}__prepareForRender(t){this._spriteParticles.prepareForRender(t)}async __loadResources(){this._spriteParticles=new s.SpriteParticles(this),this.getThreeJsMaterials().push(this._spriteParticles.getThreeJsMaterial()),this.getThreeJsObjects().push(this._spriteParticles.getThreeJsObject()),await this._initializeParticles()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._spriteParticles=null}async _initializeParticles(){if(null===this._loadFunction)return;const t=await this._loadFunction(),e=t.orbitalElements.length;this._orbitalElementsList=[];let i=0;for(let a=0,n=e;a<n;a++){const e=new s.OrbitalElements;e.copy(t.orbitalElements[a]),this._orbitalElementsList.push(e);const n=e.semiMajorAxis*(1+e.eccentricity);i=Math.max(i,n)}this.__setRadius(i),this._offsetArray=new Float32Array(3*e);const a=new Float32Array(4*e),n=new Float32Array(1*e);for(let i=0,s=e;i<s;i++)a[4*i+0]=t.colors[i].r,a[4*i+1]=t.colors[i].g,a[4*i+2]=t.colors[i].b,a[4*i+3]=t.colors[i].a,n[1*i+0]=t.scales[i]*this._scaleOfParticles;this._spriteParticles.setParticleColors(a),this._spriteParticles.setParticleScales(n)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._length=1,this._spread=30,this._numberOfParticles=0,this._speedOfParticles=.1,this._sizeOfParticles=.1,this._particleSpacingRandom=!0,this._colorOfParticles=new s.Color,this._colorOfParticles.freeze(),this._originOffset=new s.Vector3,this._originOffset.freeze(),this._direction=new s.Vector3,this._direction.freeze(),this._relativeToEntityOrientation=!0,this.__setRadius(this._length)}getLength(){return this._length}setLength(t){this._length=t,this.__setRadius(this._length),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"length",this._length),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"totalTime",this._length/this._speedOfParticles)}getSpread(){return this._spread}setSpread(t){this._spread=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"spread",s.MathUtils.degToRad(this._spread))}getNumberOfParticles(){return this._numberOfParticles}setNumberOfParticles(t){this._numberOfParticles=t,this.resetResources()}getSpeedOfParticles(){return this._speedOfParticles}setSpeedOfParticles(t){this._speedOfParticles=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"totalTime",this._length/this._speedOfParticles)}getSizeOfParticles(){return this._sizeOfParticles}setSizeOfParticles(t){this._sizeOfParticles=t,this.resetResources()}getParticleSpacingRandom(){return this._particleSpacingRandom}setParticleSpacingRandom(t){this._particleSpacingRandom=t,this.resetResources()}getColorOfParticles(){return this._colorOfParticles}setColorOfParticles(t){this._colorOfParticles.thaw(),this._colorOfParticles.copy(t),this._colorOfParticles.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"globalColor",this._colorOfParticles)}getOriginOffset(){return this._originOffset}setOriginOffset(t){this._originOffset.thaw(),this._originOffset.copy(t),this._originOffset.freeze(),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"originOffset",this._originOffset)}getDirection(){return this._direction}setDirection(t){this._direction.thaw(),this._direction.normalize(t),this._direction.freeze(),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"direction",this._direction);const e=s.Vector3.pool.get();e.cross(this._direction,s.Vector3.XAxis),e.isZero()&&e.cross(this._direction,s.Vector3.YAxis),e.normalize(e),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"directionPerp",e),s.Vector3.pool.release(e)}getRelativeToEntityOrientation(){return this._relativeToEntityOrientation}setRelativeToEntityOrientation(t){this._relativeToEntityOrientation=t}__prepareForRender(t){const e=s.MathUtils.wrap(this.getEntity().getScene().getEngine().getTime(),0,this._length/this._speedOfParticles);if(s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"time",e),this._relativeToEntityOrientation){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();t.rotate(this.getEntity().getOrientation(),this._originOffset),e.rotate(this.getEntity().getOrientation(),this._direction),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"originOffset",t),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"direction",e);const i=s.Vector3.pool.get();i.cross(e,s.Vector3.XAxis),i.isZero()&&i.cross(e,s.Vector3.YAxis),i.normalize(i),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"directionPerp",i),s.Vector3.pool.release(i),s.Vector3.pool.release(t),s.Vector3.pool.release(e)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=new s.THREE.RawShaderMaterial({uniforms:{spread:new s.THREE.Uniform(0),originOffset:new s.THREE.Uniform(new s.THREE.Vector3),direction:new s.THREE.Uniform(new s.THREE.Vector3),directionPerp:new s.THREE.Uniform(new s.THREE.Vector3),length:new s.THREE.Uniform(0),time:new s.THREE.Uniform(0),totalTime:new s.THREE.Uniform(0),globalColor:new s.THREE.Uniform(new s.THREE.Vector4(1,1,1,1))},vertexShader:s.ShaderFix.fix(a.vertexShader,"vertex"),fragmentShader:s.ShaderFix.fix(a.fragmentShader,"fragment"),transparent:!0,depthWrite:!1,blending:s.THREE.AdditiveBlending,side:s.THREE.DoubleSide});this.getThreeJsMaterials().push(t);const e=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i=new Float32Array(3*this._numberOfParticles),n=new Float32Array(4*this._numberOfParticles),r=new Float32Array(1*this._numberOfParticles),o=new Uint16Array([0,1,2,2,3,0]),l=new s.THREE.InstancedBufferGeometry;l.setAttribute("position",new s.THREE.BufferAttribute(e,2)),l.setAttribute("params",new s.THREE.InstancedBufferAttribute(i,3)),l.setAttribute("color",new s.THREE.InstancedBufferAttribute(n,4)),l.setAttribute("size",new s.THREE.InstancedBufferAttribute(r,1)),l.setIndex(new s.THREE.BufferAttribute(o,1)),l.instanceCount=this._numberOfParticles;const c=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,t,l);this.getThreeJsObjects().push(c),s.ThreeJsHelper.setOrientation(this.getThreeJsObjects()[0],s.Quaternion.Identity),this._initializeParticles(),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"length",this._length),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"spread",s.MathUtils.degToRad(this._spread)),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"totalTime",this._length/this._speedOfParticles),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"originOffset",this._originOffset),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"direction",this._direction),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"globalColor",this._colorOfParticles);const h=s.Vector3.pool.get();h.cross(this._direction,s.Vector3.XAxis),h.isZero()&&h.cross(this._direction,s.Vector3.YAxis),h.normalize(h),s.ThreeJsHelper.setUniformVector3(this.getThreeJsMaterials()[0],"directionPerp",h),s.Vector3.pool.release(h)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_initializeParticles(){const t=this.getThreeJsObjects()[0].geometry.attributes.params,e=this.getThreeJsObjects()[0].geometry.attributes.color,i=this.getThreeJsObjects()[0].geometry.attributes.size,s=t.array,a=e.array,n=i.array;for(let t=0,e=this._numberOfParticles;t<e;t++)s[3*t+0]=2*Math.random()-1,s[3*t+1]=2*Math.random()-1,this._particleSpacingRandom?s[3*t+2]=Math.random():s[3*t+2]=t/this._numberOfParticles,a[4*t+0]=1,a[4*t+1]=1,a[4*t+2]=1,a[4*t+3]=1,n[1*t+0]=this._sizeOfParticles;t.needsUpdate=!0,e.needsUpdate=!0,i.needsUpdate=!0}}a.vertexShader="\n\tattribute vec2 position;\n\tattribute vec3 params; // x, y are in plane made by direction if z were 1, z is 0 to 1 where the particle is in the total length at time = 0\n\tattribute vec4 color;\n\tattribute float size;\n\n\tuniform float spread;\n\tuniform vec3 originOffset; // in model-space\n\tuniform vec3 direction; // in model-space\n\tuniform vec3 directionPerp; // in model-space\n\tuniform float length;\n\tuniform float time;\n\tuniform float totalTime;\n\n\tuniform mat4 modelViewMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec2 vPosition;\n\tvarying vec4 vColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\tfloat u = mod(params.z + time / totalTime, 1.0);\n\t\tfloat sinSpread = sin(spread);\n\t\tfloat uSpread = sinSpread > 0.0 ? u : (1.0 - u);\n\t\tfloat sizeAtU = size * max(0.1, uSpread);\n\t\tvec3 directionPerp2 = cross(direction, directionPerp);\n\t\tvec3 modelPosition = originOffset + (directionPerp * params.x * sinSpread * uSpread + directionPerp2 * params.y * sinSpread * uSpread + direction * u) * length;\n\t\tvec4 viewPosition = vec4(position.x * sizeAtU, 0, position.y * sizeAtU, 1) + modelViewMatrix * vec4(modelPosition, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t// Set the varying variables.\n\t\tvPosition = position;\n\t\tvColor = color * (1.0 - u);\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",a.fragmentShader="\n\tuniform vec4 globalColor;\n\n\tvarying vec2 vPosition;\n\tvarying vec4 vColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\t// Set the color to be a circle tinted by the color and globalColor.\n\t\tgl_FragColor = globalColor * vColor * max(0.0, 1.0 - dot(vPosition, vPosition));\n\n\t\t// Do log-depth buffering.\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._topTextureUrl="",this._bottomTextureUrl="",this._innerRadius=0,this._outerRadius=0,this._fadeDistance=0,this._shadowEntities=[],this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}getTopTextureUrl(){return this._topTextureUrl}setTopTextureUrl(t){this._topTextureUrl=t,s.ThreeJsHelper.loadTextureIntoUniform(this,this.getThreeJsMaterials()[0],"topTexture",this._topTextureUrl,!0,!1)}getBottomTextureUrl(){return this._bottomTextureUrl}setBottomTextureUrl(t){this._bottomTextureUrl=t,s.ThreeJsHelper.loadTextureIntoUniform(this,this.getThreeJsMaterials()[0],"bottomTexture",this._bottomTextureUrl,!0,!1)}getInnerRadius(){return this._innerRadius}setInnerRadius(t){this._innerRadius=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"innerRadius",this._innerRadius)}getOuterRadius(){return this._outerRadius}setOuterRadius(t){this._outerRadius=t,this.__setRadius(this._outerRadius),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"outerRadius",this._outerRadius)}getTopTexture(){const t=this.getThreeJsMaterials()[0];return void 0!==t?t.uniforms.topTexture.value:null}getFadeDistance(){return this._fadeDistance}setFadeDistance(t){this._fadeDistance=t}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){this._spheroidComponentRef.update()}__prepareForRender(t){if(this._fadeDistance>0){const e=s.Vector3.pool.get(),i=s.Quaternion.pool.get(),a=this.getThreeJsObjects()[0].quaternion;i.copyFromThreeJs(a),e.rotateInverse(this.getEntity().getOrientation(),this.getEntity().getCameraSpacePosition(t)),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"alphaFadeMultiplier",s.MathUtils.lerp(0,1,s.MathUtils.clamp01(2*(Math.abs(e.z)/this._fadeDistance-1)+1))),s.Quaternion.pool.release(i),s.Vector3.pool.release(e)}s.MaterialUtils.setLightSourceUniforms(this.getThreeJsMaterials(),this.getEntity(),t),s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,null,!1),s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=s.ThreeJsHelper.loadTexture(this,this._topTextureUrl,!0,!1),e=s.ThreeJsHelper.loadTexture(this,this._bottomTextureUrl,!0,!1),[i,n]=await Promise.all([t,e]);if(this.isDestroyed())return i.dispose(),void n.dispose();const r=new s.THREE.ShaderMaterial({uniforms:{ambientLightColor:new s.THREE.Uniform(new s.THREE.Color),lightPositions:new s.THREE.Uniform([new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0),new s.THREE.Vector3(1,0,0)]),lightColors:new s.THREE.Uniform([new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0),new s.THREE.Vector3(0,0,0)]),lightRadii:new s.THREE.Uniform([0,0,0,0,0]),numLights:new s.THREE.Uniform(0),entityPos:new s.THREE.Uniform(new s.THREE.Vector3),innerRadius:new s.THREE.Uniform(this._innerRadius),outerRadius:new s.THREE.Uniform(this._outerRadius),topTexture:new s.THREE.Uniform(i),bottomTexture:new s.THREE.Uniform(n),alphaFadeMultiplier:new s.THREE.Uniform(1),spheroidEquatorialRadius:new s.THREE.Uniform(0),spheroidPolarRadius:new s.THREE.Uniform(0)},vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,transparent:!0,depthWrite:!1,blending:s.THREE.NormalBlending,side:s.THREE.DoubleSide});this.getThreeJsMaterials().push(r),s.ThreeJsHelper.setupLogDepthBuffering(r);const o=s.ThreeJsHelper.createMeshObject(this,r,[{name:"position",dimensions:3},{name:"normal",dimensions:3}],!1),l=new Float32Array(300),c=new Float32Array(300),h=new Uint16Array(486);for(let t=0;t<10;t++)for(let e=0;e<10;e++){const i=e+10*t;l[3*i+0]=e/9*2-1,l[3*i+1]=t/9*2-1,l[3*i+2]=0,c[3*i+0]=0,c[3*i+1]=0,c[3*i+2]=1,e+1<10&&t+1<10&&(h[6*(e+9*t)+0]=e+0+10*(t+0),h[6*(e+9*t)+1]=e+0+10*(t+1),h[6*(e+9*t)+2]=e+1+10*(t+0),h[6*(e+9*t)+3]=e+1+10*(t+0),h[6*(e+9*t)+4]=e+0+10*(t+1),h[6*(e+9*t)+5]=e+1+10*(t+1))}s.ThreeJsHelper.setVertices(o.geometry,"position",l),s.ThreeJsHelper.setVertices(o.geometry,"normal",c),s.ThreeJsHelper.setIndices(o.geometry,h),o.material=r,this.getThreeJsObjects().push(o),this._spheroidChangedCallback()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this.getThreeJsMaterials()[0];if(null!==t){const e=this._spheroidComponentRef.get();null!==e?(s.ThreeJsHelper.setUniformNumber(t,"spheroidEquatorialRadius",e.getEquatorialRadius()),s.ThreeJsHelper.setUniformNumber(t,"spheroidPolarRadius",e.getPolarRadius())):(s.ThreeJsHelper.setUniformNumber(t,"spheroidEquatorialRadius",0),s.ThreeJsHelper.setUniformNumber(t,"spheroidPolarRadius",0))}}}a.vertexShader="\n\tuniform float outerRadius;\n\n\tvarying vec3 localPosition;\n\tvarying vec3 modelPosition;\n\tvarying vec3 modelNormal;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\tvoid main() {\n\t\tlocalPosition = position * outerRadius;\n\t\tmodelPosition = (modelMatrix * vec4(localPosition, 1.)).xyz;\n\t\tmodelNormal = (modelMatrix * vec4(normal, 0.)).xyz;\n\t\tvec4 viewPosition = viewMatrix * vec4(modelPosition, 1.);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance *(z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",a.fragmentShader="\n\t#ifndef saturate\n\t\t#define saturate(a) clamp(a, 0.0, 1.0)\n\t#endif\n\n\tuniform vec3 ambientLightColor;\n\tuniform vec3 lightPositions[5];\n\tuniform vec3 lightColors[5];\n\tuniform int numLights;\n\n\tuniform float innerRadius;\n\tuniform float outerRadius;\n\tuniform sampler2D topTexture;\n\tuniform sampler2D bottomTexture;\n\tuniform float alphaFadeMultiplier;\n\tuniform float spheroidEquatorialRadius;\n\tuniform float spheroidPolarRadius;\n\tuniform vec3 entityPos;\n\n\t// The varying attributes.\n\tvarying vec3 localPosition;\n\tvarying vec3 modelPosition;\n\tvarying vec3 modelNormal;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tfloat spheroidShadow(vec3 lightDir, float lightCosAngle, float spheroidScaling, vec3 normal, vec3 ringPos) {\n\t\tvec3 sunDirScaled = normalize(lightDir - (spheroidScaling - 1.0) * lightCosAngle * normal);\n\t\tfloat pDotLScaled = dot(ringPos, sunDirScaled);\n\t\tif(dot(ringPos, ringPos) - pDotLScaled * pDotLScaled < spheroidEquatorialRadius * spheroidEquatorialRadius && pDotLScaled > 0.0) {\n\t\t\treturn 0.0;\n\t\t}\n\t\telse {\n\t\t\treturn 1.0;\n\t\t}\n\t}\n\n\tvoid main(void) {\n\t\tfloat spheroidScaling = spheroidEquatorialRadius / spheroidPolarRadius;\n\t\tvec3 positionDir = normalize(modelPosition);\n\t\tvec3 ringPos = modelPosition - entityPos;\n\t\tvec3 normal = normalize(modelNormal);\n\t\tfloat cameraCosAngle = -dot(positionDir, normal);\n\n\t\t// Calculate the UVs.\n\t\tvec2 uv;\n\t\tuv.x = (length(localPosition) - innerRadius) / (outerRadius - innerRadius);\n\t\tif (uv.x < 0.0 || uv.x > 1.0) {\n\t\t\tgl_FragColor = vec4(0, 0, 0, 0);\n\t\t\treturn;\n\t\t}\n\t\tuv.y = 0.0;\n\n\t\t// Get the pixels at those uvs.\n\t\tvec4 topPixel = texture2D(topTexture, uv);\n\t\tvec4 bottomPixel = texture2D(bottomTexture, uv);\n\n\t\t// For each light,\n\t\tfor (int i = 0; i < 5; i++) {\n\t\t\tif (i >= numLights) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvec3 lightDir = normalize(modelPosition - lightPositions[i]);\n\t\t\tfloat lightCosAngle = -dot(lightDir, normal);\n\n\t\t\tfloat cameraDirDotLight = dot(positionDir, lightDir);\n\t\t\tfloat bottomTopRatio = (1.0 + 0.2 * cameraDirDotLight) * sign(cameraCosAngle) * lightCosAngle;\n\t\t\tfloat shadow = spheroidShadow(lightDir, lightCosAngle, spheroidScaling, normal, ringPos);\n\t\t\tvec3 bottomColor = saturate(ambientLightColor + lightColors[i] * (1.0 - bottomTopRatio) * shadow);\n\t\t\tvec3 topColor = 2.0 * saturate(ambientLightColor + lightColors[i] * bottomTopRatio * shadow);\n\n\t\t\tvec3 color = mix(bottomPixel.rgb * bottomColor, topPixel.rgb * topColor, bottomTopRatio);\n\t\t\tgl_FragColor.rgb += color;\n\t\t}\n\n\t\tgl_FragColor.a = topPixel.a;\n\t\tgl_FragColor.a *= alphaFadeMultiplier;\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._numLatVerts=20,this._textureUrl="",this.__setRadius(1e24),this.__setUsesEntityOrientation(!0)}getTextureUrl(){return this._textureUrl}setTextureUrl(t){this._textureUrl=t,this.resetResources()}__prepareForRender(t){s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=await s.ThreeJsHelper.loadTexture(this,this._textureUrl,!1,!1);if("loading"!==this.getLoadState())return void t.dispose();const e=s.MaterialUtils.get();this.getThreeJsMaterials().push(e),e.defines.colorMapEmmissive=!0,e.needsUpdate=!0,e.uniforms.colorTexture.value=t;const i=s.ThreeJsHelper.createMeshObject(this,e,[{name:"position",dimensions:3},{name:"uv",dimensions:2}],!1);this.getThreeJsObjects().push(i),s.ThreeJsHelper.useInDynEnvMap(i,!0);const a=s.MathUtils.pi/(this._numLatVerts-1),n=s.MathUtils.pi/this._numLatVerts,r=(2*this._numLatVerts+1)*this._numLatVerts,o=new Float32Array(3*r),l=new Float32Array(2*r),c=new Uint16Array(this._numLatVerts*(this._numLatVerts-1)*12),h=s.Vector3.pool.get(),d=s.LatLonAlt.pool.get();for(let t=0;t<this._numLatVerts;t++)for(let e=0;e<2*this._numLatVerts+1;e++){d.lat=t*a-s.MathUtils.halfPi,d.lon=e*n-s.MathUtils.pi,d.alt=0,h.x=5e23*Math.cos(d.lat)*Math.cos(d.lon),h.y=5e23*Math.cos(d.lat)*Math.sin(d.lon),h.z=5e23*Math.sin(d.lat);const i=t*(2*this._numLatVerts+1)+e;o[3*i+0]=h.x,o[3*i+1]=h.y,o[3*i+2]=h.z,l[2*i+0]=.5-d.lon/s.MathUtils.twoPi,l[2*i+1]=.5-d.lat/s.MathUtils.pi;const r=t*this._numLatVerts*2+e;t<this._numLatVerts-1&&e<2*this._numLatVerts&&(c[6*r+0]=(2*this._numLatVerts+1)*(t+0)+(e+0),c[6*r+1]=(2*this._numLatVerts+1)*(t+1)+(e+0),c[6*r+2]=(2*this._numLatVerts+1)*(t+1)+(e+1),c[6*r+3]=(2*this._numLatVerts+1)*(t+0)+(e+0),c[6*r+4]=(2*this._numLatVerts+1)*(t+1)+(e+1),c[6*r+5]=(2*this._numLatVerts+1)*(t+0)+(e+1))}s.LatLonAlt.pool.release(d),s.Vector3.pool.release(h);const u=this.getThreeJsObjects()[0].geometry;s.ThreeJsHelper.setVertices(u,"position",o),s.ThreeJsHelper.setVertices(u,"uv",l),s.ThreeJsHelper.setIndices(u,c)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._equatorialRadius=1,this._polarRadius=1,this._planetographic=!1,this._changed=!0,this._changedCallbacks=new s.FastSet}getEquatorialRadius(){return this._equatorialRadius}setEquatorialRadius(t){this._equatorialRadius=t,this._changed=!0}getPolarRadius(){return this._polarRadius}setPolarRadius(t){this._polarRadius=t,this._changed=!0}isPlanetographic(){return this._planetographic}setPlanetographic(t){this._planetographic=t,this._changed=!0}addChangedCallback(t){this._changedCallbacks.add(t)}removeChangedCallback(t){this._changedCallbacks.delete(t)}__update(){if(this._changed){for(let t=0,e=this._changedCallbacks.size;t<e;t++)this._changedCallbacks.getAt(t)();this._changed=!1}}xyzFromLLA(t,e){const i=Math.cos(e.lat),s=Math.sin(e.lat);if(this._planetographic){const a=1-this._polarRadius*this._polarRadius/(this._equatorialRadius*this._equatorialRadius),n=this._equatorialRadius/Math.sqrt(1-a*s*s);t.x=(n+e.alt)*i*Math.cos(e.lon),t.y=(n+e.alt)*i*Math.sin(e.lon),t.z=((1-a)*n+e.alt)*s}else{const a=this._equatorialRadius,n=this._polarRadius,r=a*n/Math.sqrt(n*n*i*i+a*a*s*s);t.x=(r+e.alt)*i*Math.cos(e.lon),t.y=(r+e.alt)*i*Math.sin(e.lon),t.z=(r+e.alt)*s}}radiusFromXYZ(t,e=5){if(this._planetographic){const i=t.magnitudeXY(),s=1-this._polarRadius*this._polarRadius/(this._equatorialRadius*this._equatorialRadius);let a=Math.atan(t.z/((1-s)*i)),n=0;for(let r=0;r<e;r++){const e=Math.sin(a);n=this._equatorialRadius/Math.sqrt(1-s*e*e),a=Math.atan((t.z+n*s*e)/i)}return n}{const e=t.z*t.z/(t.x*t.x+t.y*t.y),i=1/(1+e),s=e*i,a=this._equatorialRadius,n=this._polarRadius;return a*n/Math.sqrt(n*n*i+a*a*s)}}llaFromXYZ(t,e,i=5){if(this._planetographic){t.lon=Math.atan2(e.y,e.x);const s=e.magnitudeXY(),a=1-this._polarRadius*this._polarRadius/(this._equatorialRadius*this._equatorialRadius);t.lat=Math.atan(e.z/((1-a)*s));let n=0;for(let r=0;r<i;r++){const i=Math.sin(t.lat);n=1/Math.sqrt(1-a*i*i),t.lat=Math.atan((e.z+this._equatorialRadius*n*a*i)/s)}t.alt=s/Math.cos(t.lat)-this._equatorialRadius*n}else{const i=e.magnitudeXY();t.lon=Math.atan2(e.y,e.x),t.lat=Math.atan(e.z/i);const s=Math.cos(t.lat),a=Math.sin(t.lat),n=this._equatorialRadius,r=this._polarRadius,o=n*r/Math.sqrt(r*r*s*s+n*n*a*a);t.alt=e.magnitude()-o}}llaToggleGraphicCentric(t,e){const i=s.Vector3.pool.get();this.xyzFromLLA(i,e),this._planetographic=!this._planetographic,this.llaFromXYZ(t,i),this._planetographic=!this._planetographic,s.Vector3.pool.release(i)}upFromLLA(t,e){const i=s.LatLonAlt.pool.get();this._planetographic?i.copy(e):this.llaToggleGraphicCentric(i,e),t.x=Math.cos(i.lat)*Math.cos(i.lon),t.y=Math.cos(i.lat)*Math.sin(i.lon),t.z=Math.sin(i.lat),s.LatLonAlt.pool.release(i)}eastFromLLA(t,e){t.x=-Math.sin(e.lon),t.y=Math.cos(e.lon),t.z=0}northFromLLA(t,e){const i=s.LatLonAlt.pool.get();this._planetographic?i.copy(e):this.llaToggleGraphicCentric(i,e),t.x=-Math.sin(i.lat)*Math.cos(i.lon),t.y=-Math.sin(i.lat)*Math.sin(i.lon),t.z=Math.cos(i.lat),s.LatLonAlt.pool.release(i)}orientationFromLLA(t,e){const i=s.LatLonAlt.pool.get();this._planetographic?i.copy(e):this.llaToggleGraphicCentric(i,e);const a=Math.sin(i.lat),n=Math.sin(i.lon),r=Math.cos(i.lon);t.w=.5*Math.sqrt((1+a)*(1-n)),t.x=.5*Math.sqrt((1-a)*(1-n)),t.y=.5*Math.sqrt((1-a)*(1+n))*Math.sign(r),t.z=.5*Math.sqrt((1+a)*(1+n))*Math.sign(r),s.LatLonAlt.pool.release(i)}aerFromXYZRelToLLA(t,e,i){const a=s.Vector3.pool.get();this.xyzFromLLA(a,i);const n=s.LatLonAlt.pool.get();this._planetographic?n.copy(i):this.llaFromXYZ(n,a),a.sub(e,a),t.range=a.magnitude(),a.mult(a,1/t.range);const r=s.Vector3.pool.get();this.upFromLLA(r,n);const o=a.dot(r);t.elevation=s.MathUtils.halfPi-Math.acos(o),a.addMult(a,r,-o),s.Vector3.pool.release(r);const l=s.Vector3.pool.get();this.northFromLLA(l,n);const c=s.Vector3.pool.get();this.eastFromLLA(c,n),t.azimuth=Math.atan2(a.dot(c),a.dot(l)),s.Vector3.pool.release(l),s.Vector3.pool.release(c),s.LatLonAlt.pool.release(n),s.Vector3.pool.release(a)}getRayIntersection(t,e,i){const a=this._equatorialRadius/this._polarRadius,n=s.Vector3.pool.get(),r=s.Vector3.pool.get();n.set(e.x,e.y,e.z*a),r.set(i.x,i.y,i.z*a);const o=s.Geometry.getLineSphereIntersectionWithSphereAtOrigin(n,r,this._equatorialRadius);t.addMult(n,r,o),s.Vector3.pool.release(n),s.Vector3.pool.release(r),t.z/=a}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._textureUrls=new s.FastMap,this._textureLODs=new s.FastMap,this._textureSizes=new s.FastMap,this._mapping="cylinder",this._longitudinalRotation=0,this._numFaces=1,this._lowerLeftBounds=new s.LatLonAlt(-s.MathUtils.halfPi,-s.MathUtils.pi,0),this._upperRightBounds=new s.LatLonAlt(+s.MathUtils.halfPi,s.MathUtils.pi,0),this._cubeMapFaceFrames=s.CubeMap._defaultCubeMapFaceFrames,this._shadowEntities=[],this._features=new Set,this._useCompression=!1,this._atmosphereComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._atmosphereComponentRef.setByType(this.getEntity().getName(),"atmosphere"),this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}getTextureNames(){const t=[];for(let e=0;e<this._textureUrls.size;e++)t.push(this._textureUrls.getAt(e).key);return t}getTextureUrl(t){return this._textureUrls.get(t)}getTextureSizes(t){return this._textureSizes.get(t)}setTexture(t,e,i=[4,512,4096]){a._textureToFeature.has(t)&&this.setFeature(a._textureToFeature.get(t),""!==e),this._textureUrls.set(t,e),this._textureSizes.set(t,[...i]);let n=this._textureLODs.get(t);if(void 0===n){n=[];const e=this.getThreeJsMaterials();for(let i=0,a=this._numFaces;i<a;i++){const a=new s.TextureLOD(this);if(e.length>0){const s=e[i].uniforms[t+"Texture"];void 0!==s&&a.setUniform(s)}n.push(a)}this._textureLODs.set(t,n)}for(let t=0,s=this._numFaces;t<s;t++)n[t].setUrl(e.replace("$FACE",t.toString())),n[t].setSizes(i)}forceTextureSize(t,e){const i=this._textureLODs.get(t);if(void 0===i)throw new Error('No texture named "'+t+'" has been defined.');for(let t=0;t<i.length;t++)i[t].setForcedSize(e)}unsetTexture(t){a._textureToFeature.has(t)&&this.setFeature(a._textureToFeature.get(t),!1),this._textureUrls.delete(t),this._textureLODs.delete(t),this._textureSizes.delete(t);const e=this.getThreeJsMaterials();for(let i=0,s=e.length;i<s;i++){const s=e[i].uniforms[t+"Texture"];void 0!==s&&(s.value.dispose(),s.value=null)}}getTextureCurrentSize(t,e){const i=this._textureLODs.get(t);if(void 0!==i&&void 0!==i[e])return i[e].getCurrentSize()}isFeatureEnabled(t){return this._features.has(t)}setFeature(t,e){const i=this.getThreeJsMaterials();if(e&&!this._features.has(t)){this._features.add(t);for(let e=0,s=i.length;e<s;e++){const s=i[e];s.defines[t]=!0,s.needsUpdate=!0}"normalMap"===t&&this._updateMeshes()}else if(!e&&this._features.has(t)){this._features.delete(t);for(let e=0,s=i.length;e<s;e++){const s=i[e];delete s.defines[t],s.needsUpdate=!0}"normalMap"===t&&this._updateMeshes()}}getMapping(){return this._mapping}setMapping(t){const e=this._numFaces;if("cylinder"===t)this._numFaces=1;else{if("cube"!==t)throw new Error("Invalid mapping type.");this._numFaces=6}if(this._numFaces!==e)for(let t=0;t<this._textureLODs.size;t++){const e=this._textureLODs.getAt(t).key,i=[];for(let t=0,a=this._numFaces;t<a;t++){const a=new s.TextureLOD(this);a.setUrl(this._textureUrls.get(e).replace("$FACE",t.toString())),a.setSizes(this._textureSizes.get(e)),i.push(a)}this._textureLODs.set(e,i)}this._mapping=t,this.resetResources()}setBounds(t,e){this._lowerLeftBounds.copy(t),this._upperRightBounds.copy(e),this.resetResources()}setCubeMapLayout(t){this._cubeMapFaceFrames=[];for(let e=0;e<6;e++){this._cubeMapFaceFrames.push([]);for(let i=0;i<3;i++){let a=null;switch(t[e][i]){case"+x":a=s.Vector3.XAxis;break;case"-x":a=s.Vector3.XAxisNeg;break;case"+y":a=s.Vector3.YAxis;break;case"-y":a=s.Vector3.YAxisNeg;break;case"+z":a=s.Vector3.ZAxis;break;case"-z":a=s.Vector3.ZAxisNeg;break;default:throw new Error("Invalid cubemap layout component.")}this._cubeMapFaceFrames[e][i]=a}}this.resetResources()}getNumShadowEntities(){return this._shadowEntities.length}getShadowEntity(t){return this._shadowEntities[t]}setShadowEntities(t){this._shadowEntities=t.slice(0)}getUseCompression(){return this._useCompression}setUseCompression(t){this._useCompression=t}getLongitudeRotation(){return this._longitudinalRotation}setLongitudeRotation(t){this._longitudinalRotation=t}getLoadedPromise(){const t=[super.getLoadedPromise()];for(let e=0;e<this._textureLODs.size;e++){const i=this._textureLODs.getAt(e).value;for(let e=0,s=i.length;e<s;e++)t.push(i[e].getLoadedPromise())}return Promise.all(t).then()}getColorAtPosition(t,e,i){const a=s.Vector3.pool.get();if("cube"===this._mapping)s.CubeMap.xyzToUVFace(a,e,this._cubeMapFaceFrames);else if("cylinder"===this._mapping){const e=s.LatLonAlt.pool.get();if(null===this._spheroidComponentRef.get())return void t.set(0,0,0);a.set(e.lon/s.MathUtils.twoPi+.5,e.lat/Math.PI+.5,0),s.LatLonAlt.pool.release(e)}const n=this._textureLODs.get(i);if(void 0===n)throw new Error("Invalid texture name.");const r=n[a.z].getUniform().value,o=document.createElement("canvas");o.width=r.image.width,o.height=r.image.height;const l=o.getContext("2d");l.drawImage(r.image,0,0);const c=l.getImageData(0,0,r.image.width,r.image.height),h=r.format===s.THREE.RGBAFormat?4:3,d=(Math.floor((1-a.y)*c.height)*c.width+Math.floor(a.x*c.width))*h;t.set(c.data[d+0],c.data[d+1],c.data[d+2],4===h?c.data[d+3]:1),s.Vector3.pool.release(a)}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){for(let t=0;t<this._textureLODs.size;t++){const e=this._textureLODs.getAt(t).value;for(let t=0,i=e.length;t<i;t++)e[t].update()}this._spheroidComponentRef.update()}__prepareForRender(t){const e=this.getThreeJsObjects(),i=s.Quaternion.pool.get();i.setFromAxisAngle(s.Vector3.ZAxis,this._longitudinalRotation);for(let a=0;a<e.length;a++)s.ThreeJsHelper.setOrientationToEntity(e[a],this.getEntity(),i),s.ThreeJsHelper.setPositionToEntity(e[a],this.getEntity(),t);s.Quaternion.pool.release(i);for(let t=0,e=this._shadowEntities.length;t<e;t++){let e=this._shadowEntities[t];if("string"==typeof e){const t=this.getEntity().getScene().get(e);t instanceof s.Entity&&(e=t)}null!==e&&(this._shadowEntities[t]=e)}const a=this._atmosphereComponentRef.get();s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,a,!0)}__loadResources(){for(let t=0;t<this._numFaces;t++){const e=s.MaterialUtils.get();this.getThreeJsMaterials().push(e),s.ThreeJsHelper.setupLogDepthBuffering(e);for(const t of this._features)e.defines[t]=!0,e.needsUpdate=!0;const i=s.ThreeJsHelper.createMeshObject(this,e,[{name:"position",dimensions:3},{name:"normal",dimensions:3},{name:"uv",dimensions:2}],!1);this.getThreeJsObjects().push(i),s.ThreeJsHelper.useInDynEnvMap(i,!0);for(let i=0;i<this._textureLODs.size;i++){const s=this._textureLODs.getAt(i).key,a=e.uniforms[s+"Texture"];void 0!==a&&this._textureLODs.get(s)[t].setUniform(a)}}return this._updateMeshes(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this);for(let t=0;t<this._textureLODs.size;t++){const e=this._textureLODs.getAt(t).key;for(let t=0;t<this._numFaces;t++)this._textureLODs.get(e)[t].setUniform(null)}}_updateMeshes(){if(0===this.getThreeJsObjects().length)return;const t=this._spheroidComponentRef.get();if(null!==t)if("cylinder"===this._mapping){const e=this._upperRightBounds.lat-this._lowerLeftBounds.lat,i=this._upperRightBounds.lon-this._lowerLeftBounds.lon,a=Math.max(Math.ceil(100*e/s.MathUtils.pi),4),n=Math.max(Math.ceil(200*i/s.MathUtils.twoPi),4),r=e/(a-1),o=i/(n-1),l=n*a,c=new Float32Array(3*l),h=new Float32Array(3*l),d=new Float32Array(2*l),u=new Uint16Array((n-1)*(a-1)*6),p=s.Vector3.pool.get(),m=s.LatLonAlt.pool.get();for(let e=0;e<a;e++)for(let i=0;i<n;i++){m.lat=this._lowerLeftBounds.lat+e*r,m.lon=this._lowerLeftBounds.lon+i*o,m.alt=0;const s=e*n+i;if(t.xyzFromLLA(p,m),c[3*s+0]=p.x,c[3*s+1]=p.y,c[3*s+2]=p.z,t.upFromLLA(p,m),h[3*s+0]=p.x,h[3*s+1]=p.y,h[3*s+2]=p.z,d[2*s+0]=i/(n-1),d[2*s+1]=1-e/(a-1),e+1<a&&i+1<n){const t=e*(n-1)+i;u[6*t+0]=n*(e+0)+(i+0),u[6*t+1]=n*(e+1)+(i+1),u[6*t+2]=n*(e+1)+(i+0),u[6*t+3]=n*(e+0)+(i+0),u[6*t+4]=n*(e+0)+(i+1),u[6*t+5]=n*(e+1)+(i+1)}}s.LatLonAlt.pool.release(m),s.Vector3.pool.release(p);const g=this.getThreeJsObjects()[0];s.ThreeJsHelper.setVertices(g.geometry,"position",c),s.ThreeJsHelper.setVertices(g.geometry,"normal",h),s.ThreeJsHelper.setVertices(g.geometry,"uv",d),s.ThreeJsHelper.setIndices(g.geometry,u),this._features.has("normalMap")&&s.ThreeJsHelper.computeTangents(g.geometry)}else if("cube"===this._mapping){const e=50,i=s.Vector3.pool.get(),a=s.LatLonAlt.pool.get();for(let n=0;n<6;n++){const r=new Float32Array(e*e*3),o=new Float32Array(e*e*3),l=new Float32Array(e*e*2),c=new Uint16Array((e-1)*(e-1)*6);let h=!1;const d=s.Vector3.pool.get();d.cross(this._cubeMapFaceFrames[n][0],this._cubeMapFaceFrames[n][1]),d.x===this._cubeMapFaceFrames[n][2].x&&d.y===this._cubeMapFaceFrames[n][2].y&&d.z===this._cubeMapFaceFrames[n][2].z||(h=!0),s.Vector3.pool.release(d);let u=0,p=0;for(let d=0;d<e;d++)for(let m=0;m<e;m++)i.mult(this._cubeMapFaceFrames[n][0],2*m/(e-1)-1),i.addMult(i,this._cubeMapFaceFrames[n][1],2*d/(e-1)-1),i.addMult(i,this._cubeMapFaceFrames[n][2],1),i.normalize(i),s.Geometry.getLLAFromXYZOnSphere(a,i,0),a.alt=0,t.xyzFromLLA(i,a),r[3*u+0]=i.x,r[3*u+1]=i.y,r[3*u+2]=i.z,t.upFromLLA(i,a),o[3*u+0]=i.x,o[3*u+1]=i.y,o[3*u+2]=i.z,l[2*u+0]=m/(e-1),l[2*u+1]=1-d/(e-1),m<e-1&&d<e-1&&(c[6*p+0]=(d+0)*e+(m+0),c[6*p+3]=(d+1)*e+(m+1),h?(c[6*p+1]=(d+1)*e+(m+1),c[6*p+2]=(d+0)*e+(m+1),c[6*p+4]=(d+0)*e+(m+0),c[6*p+5]=(d+1)*e+(m+0)):(c[6*p+1]=(d+0)*e+(m+1),c[6*p+2]=(d+1)*e+(m+1),c[6*p+4]=(d+1)*e+(m+0),c[6*p+5]=(d+0)*e+(m+0)),p+=1),u+=1;const m=this.getThreeJsObjects()[n];s.ThreeJsHelper.setVertices(m.geometry,"position",r),s.ThreeJsHelper.setVertices(m.geometry,"normal",o),s.ThreeJsHelper.setVertices(m.geometry,"uv",l),s.ThreeJsHelper.setIndices(m.geometry,c),this._features.has("normalMap")&&s.ThreeJsHelper.computeTangents(m.geometry)}s.LatLonAlt.pool.release(a),s.Vector3.pool.release(i)}}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get();null!==t?this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())):this.__setRadius(0),this.resetResources()}}a._textureToFeature=new Map([["normal","normalMap"],["night","nightMap"],["decal","decalMap"],["specular","specularMap"]]),e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new s.THREE.Quaternion;e.default=class extends s.CameraComponent{constructor(t,e,i){super(t,e,i),this._renderWidth=2048,this._forGlobe=!1,this._globeDistance=1,this._threeJsFaceCameras=[],this._threeJsFaceRenderTargets=[],this._threeJsQuad=new s.THREE.Mesh,this._threeJsSpoutScene=new s.THREE.Scene,this._threeJsCubeCamera=new s.THREE.OrthographicCamera(-1,1,-1,1,-1,1),this._tagStart=new s.THREE.WebGLRenderTarget(2,3,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._tagEnd=new s.THREE.WebGLRenderTarget(3,2,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._tagSend=new s.THREE.WebGLRenderTarget(3,3,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._spoutTexture=new s.THREE.WebGLRenderTarget(this._renderWidth,this._renderWidth/2,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.NearestFilter}),this._setupFaceCameras(),this._setupQuad()}getRenderWidth(){return this._renderWidth}setRenderWidth(t){this._renderWidth=t,this._spoutTexture.width!==this._renderWidth&&this._spoutTexture.setSize(this._renderWidth,this._renderWidth/2);for(let t=0;t<6;t++)this._threeJsFaceRenderTargets[t].setSize(this._renderWidth/4,this._renderWidth/4)}setForGlobe(t,e){this._forGlobe!==t&&(this._forGlobe=t,this._globeDistance=e)}__render(){this._updateProjectionMatrices();const t=.7071067811865476,e=this.getEntity().getOrientation();a.set(e.x,e.y,e.z,e.w),this._threeJsFaceCameras[0].setRotationFromQuaternion(a),this._forGlobe?a.set(t*(e.x+e.y),t*(-e.x+e.y),t*(e.w+e.z),t*(e.w-e.z)):a.set(t*(e.x-e.y),t*(e.x+e.y),t*(-e.w+e.z),t*(e.w+e.z)),this._threeJsFaceCameras[1].setRotationFromQuaternion(a),a.set(e.y,-e.x,e.w,-e.z),this._threeJsFaceCameras[2].setRotationFromQuaternion(a),this._forGlobe?a.set(t*(e.x-e.y),t*(e.x+e.y),t*(-e.w+e.z),t*(e.w+e.z)):a.set(t*(e.x+e.y),t*(-e.x+e.y),t*(e.w+e.z),t*(e.w-e.z)),this._threeJsFaceCameras[3].setRotationFromQuaternion(a),a.set(t*(e.w+e.x),t*(e.y+e.z),t*(-e.y+e.z),t*(e.w-e.x)),this._threeJsFaceCameras[4].setRotationFromQuaternion(a),a.set(t*(-e.w+e.x),t*(e.y-e.z),t*(e.y+e.z),t*(e.w+e.x)),this._threeJsFaceCameras[5].setRotationFromQuaternion(a);for(let t=0;t<6;t++)this._threeJsRenderer.setRenderTarget(this._threeJsFaceRenderTargets[t]),this._threeJsRenderer.render(this.getEntity().getScene().getThreeJsScene(),this._threeJsFaceCameras[t]);this._threeJsRenderer.setRenderTarget(this._tagStart),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(this._spoutTexture),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(this._tagEnd),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(this._spoutTexture),this._threeJsRenderer.render(this._threeJsSpoutScene,this._threeJsCubeCamera),this._threeJsRenderer.setRenderTarget(this._tagSend),this._threeJsRenderer.clearColor(),this._threeJsRenderer.setRenderTarget(null)}_setupFaceCameras(){for(let t=0;t<6;t++){this._threeJsFaceCameras.push(new s.THREE.PerspectiveCamera(90,1,.1,1e3));const e=new s.THREE.Matrix4;e.set(1,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0),this._threeJsFaceCameras[t].projectionMatrix=e,this._threeJsFaceCameras[t].projectionMatrixInverse.copy(e).invert();const i=new s.THREE.WebGLRenderTarget(this._renderWidth/4,this._renderWidth/4,{minFilter:s.THREE.LinearFilter,magFilter:s.THREE.LinearFilter});this._threeJsFaceRenderTargets.push(i)}}_updateProjectionMatrices(){if(this._forGlobe){const t=Math.max(.1,.5*this.getEntity().getParent().getOcclusionRadius()),e=this._globeDistance,i=(t+e)*(1-Number.EPSILON)/(t-e),s=-2*t*e*(1-Number.EPSILON)/(t-e);for(let t=0;t<6;t++)this._threeJsFaceCameras[t].projectionMatrix.elements[0]=-1,this._threeJsFaceCameras[t].projectionMatrix.elements[7]=-1,this._threeJsFaceCameras[t].projectionMatrix.elements[11]=1,this._threeJsFaceCameras[t].projectionMatrix.elements[6]=i,this._threeJsFaceCameras[t].projectionMatrix.elements[14]=s}else{const t=this.getAutoNearDistance(),e=Number.EPSILON-1,i=t*(2-Number.EPSILON);for(let t=0;t<6;t++)this._threeJsFaceCameras[t].projectionMatrix.elements[6]=e,this._threeJsFaceCameras[t].projectionMatrix.elements[14]=i}}_setupQuad(){const t=new s.THREE.BufferGeometry,e=new Float32Array([-1,-1,1,-1,1,1,-1,1]),i=new Uint16Array([0,1,2,0,2,3]);t.setAttribute("position",new s.THREE.BufferAttribute(e,2)),t.setIndex(new s.THREE.BufferAttribute(i,1));const a={textures:new s.THREE.Uniform([])};for(let t=0;t<6;t++)a.textures.value.push(this._threeJsFaceRenderTargets[t].texture);const n=new s.THREE.RawShaderMaterial({uniforms:a,vertexShader:"\n\t\t\t\tattribute vec2 position;\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_Position = vec4(position.x, -position.y, 0.0, 1.0);\n\t\t\t\t\txy = position;\n\t\t\t\t}",fragmentShader:"\n\t\t\t\tprecision mediump float;\n\t\t\t\tuniform sampler2D textures[6];\n\n\t\t\t\tvarying vec2 xy;\n\t\t\t\tconst float PI = 3.1415926535897932384626433832795;\n\n\t\t\t\tvec3 xyToUvFace(vec2 xy) {\n\t\t\t\t\tvec3 xyz = vec3(\n\t\t\t\t\t\tcos(xy.y * PI / 2.0) * cos(xy.x * PI),\n\t\t\t\t\t\tcos(xy.y * PI / 2.0) * sin(xy.x * PI),\n\t\t\t\t\t\tsin(-xy.y * PI / 2.0));\n\n\t\t\t\t\tvec3 basis[3];\n\t\t\t\t\tfloat face;\n\t\t\t\t\tif (xyz.x * xyz.x >= xyz.y * xyz.y && xyz.x * xyz.x >= xyz.z * xyz.z) {\n\t\t\t\t\t\tif (xyz.x >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(1, 0, 0);\n\t\t\t\t\t\t\tface = 0.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, -1, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(-1, 0, 0);\n\t\t\t\t\t\t\tface = 2.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (xyz.y * xyz.y >= xyz.x * xyz.x && xyz.y * xyz.y >= xyz.z * xyz.z) {\n\t\t\t\t\t\tif (xyz.y >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(-1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, 1, 0);\n\t\t\t\t\t\t\tface = 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(1, 0, 0); basis[1] = vec3(0, 0, 1); basis[2] = vec3(0, -1, 0);\n\t\t\t\t\t\t\tface = 3.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (xyz.z >= 0.0) {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(-1, 0, 0); basis[2] = vec3(0, 0, 1);\n\t\t\t\t\t\t\tface = 4.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbasis[0] = vec3(0, 1, 0); basis[1] = vec3(1, 0, 0); basis[2] = vec3(0, 0, -1);\n\t\t\t\t\t\t\tface = 5.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvec3 uv = vec3(\n\t\t\t\t\t\tbasis[0].x * xyz.x + basis[0].y * xyz.y + basis[0].z * xyz.z,\n\t\t\t\t\t\tbasis[1].x * xyz.x + basis[1].y * xyz.y + basis[1].z * xyz.z,\n\t\t\t\t\t\tbasis[2].x * xyz.x + basis[2].y * xyz.y + basis[2].z * xyz.z);\n\t\t\t\t\tuv.x /= uv.z;\n\t\t\t\t\tuv.y /= uv.z;\n\n\t\t\t\t\treturn vec3(0.5 * (uv.x + 1.0), 0.5 * (uv.y + 1.0), face);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 uvFace = xyToUvFace(xy);\n\n\t\t\t\t\tvec4 pixel;\n\t\t\t\t\tint face = int(uvFace.z);\n\n\t\t\t\t\tif (face == 0) {\n\t\t\t\t\t\tpixel = texture2D(textures[0], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 1) {\n\t\t\t\t\t\tpixel = texture2D(textures[1], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 2) {\n\t\t\t\t\t\tpixel = texture2D(textures[2], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 3) {\n\t\t\t\t\t\tpixel = texture2D(textures[3], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 4) {\n\t\t\t\t\t\tpixel = texture2D(textures[4], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\t\t\t\t\telse if (face == 5) {\n\t\t\t\t\t\tpixel = texture2D(textures[5], vec2(uvFace.x, uvFace.y));\n\t\t\t\t\t}\n\n\t\t\t\t\tgl_FragColor = pixel;\n\t\t\t\t}",depthTest:!1,depthWrite:!1,side:s.THREE.DoubleSide});this._threeJsQuad=new s.THREE.Mesh(t,n),this._threeJsQuad.frustumCulled=!1,this._threeJsSpoutScene.add(this._threeJsQuad)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._textureUrl="",this._size=new s.Vector2(1,Number.NaN),this._size.freeze(),this._sizeUnits="km",this._colorMultiplier=new s.Color(1,1,1,1),this._colorMultiplier.freeze(),this._alignment=new s.Vector2(.5,.5),this._alignment.freeze(),this._fadeDistance=0,this._transparent=!1,this._blending="normal",this._billboard=!1,this._renderOrder=0}getTextureUrl(){return this._textureUrl}setTextureUrl(t){this._textureUrl=t,this.resetResources()}getSize(){return this._size}setSize(t){this._size.thaw(),this._size.copy(t),this._size.freeze(),this._updateSizeUniform()}getSizeUnits(){return this._sizeUnits}setSizeUnits(t){this._sizeUnits=t,this._updateSizeUniform()}getColorMultiplier(){return this._colorMultiplier}setColorMultiplier(t){this._colorMultiplier.thaw(),this._colorMultiplier.copy(t),this._colorMultiplier.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"colorMultiplier",t)}getAlignment(){return this._alignment}setAlignment(t){this._alignment.thaw(),this._alignment.copy(t),this._alignment.freeze(),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"origin",this._alignment)}getFadeDistance(){return this._fadeDistance}setFadeDistance(t){this._fadeDistance=t}isBillboard(){return this._billboard}setBillboard(t){this._billboard=t}getTransparent(){return this._transparent}setTransparent(t){this._transparent=t,s.ThreeJsHelper.setTransparent(this.getThreeJsMaterials()[0],this._transparent)}setBlending(t){this._blending=t,s.ThreeJsHelper.setBlending(this.getThreeJsMaterials()[0],this._blending)}getRenderOrder(){return this._renderOrder}setRenderOrder(t){this._renderOrder=t,s.ThreeJsHelper.setRenderOrder(this.getThreeJsObjects()[0],this._renderOrder)}__prepareForRender(t){if("pixels"===this._sizeUnits){const e=s.Vector2.pool.get(),i=this.getEntity().getExtentsRadius()/this.getEntity().getPixelSpaceExtentsRadius(t);e.mult(this._size,i),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"size",e),s.Vector2.pool.release(e)}if(this.getThreeJsObjects().length>0&&(this._billboard?s.ThreeJsHelper.setOrientationToBillboard(this.getThreeJsObjects()[0],this.getEntity(),t):s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity())),this._fadeDistance>0){const e=s.Vector3.pool.get(),i=s.Quaternion.pool.get(),a=this.getThreeJsObjects()[0].quaternion;i.copyFromThreeJs(a),e.rotateInverse(this.getEntity().getOrientation(),this.getEntity().getCameraSpacePosition(t)),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"alphaFadeMultiplier",s.MathUtils.lerp(0,1,s.MathUtils.clamp01(2*(Math.abs(e.z)/this._fadeDistance-1)+1))),s.Quaternion.pool.release(i),s.Vector3.pool.release(e)}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=await s.ThreeJsHelper.loadTexture(this,this._textureUrl,!1,!1);if("loading"!==this.getLoadState())return void t.dispose();0===a._useCount&&(a._threeJsGeometry=s.ThreeJsHelper.createGeometry([{name:"position",dimensions:3},{name:"uv",dimensions:2}],!1),s.ThreeJsHelper.setVertices(a._threeJsGeometry,"position",new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])),s.ThreeJsHelper.setVertices(a._threeJsGeometry,"uv",new Float32Array([0,1,1,1,1,0,0,0])),s.ThreeJsHelper.setIndices(a._threeJsGeometry,new Uint16Array([0,1,2,2,3,0])),a._threeJsMaterial=new s.THREE.ShaderMaterial({uniforms:{colorMultiplier:new s.THREE.Uniform(new s.THREE.Vector4(1,1,1,1)),alphaFadeMultiplier:new s.THREE.Uniform(1),size:new s.THREE.Uniform(new s.THREE.Vector2(1,1)),colorTexture:new s.THREE.Uniform(null),origin:new s.THREE.Uniform(new s.THREE.Vector2(0,0))},vertexShader:"\n\t\t\t\t\tuniform vec2 size;\n\t\t\t\t\tuniform vec2 origin;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#else\n\t\t\t\t\t\tuniform float nearDistance;\n\t\t\t\t\t\tuniform float midDistance;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main() {\n\t\t\t\t\t\tvec4 viewPosition = modelViewMatrix * vec4((position.x - origin.x) * size.x, (position.y - origin.y) * size.y, 0.0, 1.0);\n\t\t\t\t\t\tgl_Position = projectionMatrix * viewPosition;\n\t\t\t\t\t\tgl_Position.w = viewPosition.y;\n\t\t\t\t\t\tfUV = uv;\n\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfragDepth = gl_Position.w;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tfloat z = gl_Position.w;\n\t\t\t\t\t\t\tif (z < midDistance) {\n\t\t\t\t\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\t\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\t\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",fragmentShader:"\n\t\t\t\t\tuniform vec4 colorMultiplier;\n\t\t\t\t\tuniform float alphaFadeMultiplier;\n\t\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\tvarying vec2 fUV;\n\n\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\t\t\tvarying float fragDepth;\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(colorTexture, fUV);\n\t\t\t\t\t\tgl_FragColor *= colorMultiplier;\n\t\t\t\t\t\tgl_FragColor.a *= alphaFadeMultiplier;\n\n\t\t\t\t\t\t// Log-Depth Buffering\n\t\t\t\t\t\t#ifdef L_EXT_frag_depth\n\t\t\t\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\t\t\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t\t\t\t\t#endif\n\t\t\t\t\t}",side:s.THREE.DoubleSide}),s.ThreeJsHelper.setupLogDepthBuffering(a._threeJsMaterial)),a._useCount+=1;const e=a._threeJsMaterial.clone();this.getThreeJsMaterials().push(e),s.ThreeJsHelper.setTransparent(e,this._transparent),s.ThreeJsHelper.setBlending(e,this._blending),s.ThreeJsHelper.setUniformColorRGBA(e,"colorMultiplier",this._colorMultiplier),s.ThreeJsHelper.setUniformNumber(e,"alphaFadeMultiplier",1),s.ThreeJsHelper.setUniformVector2(e,"origin",this._alignment),s.ThreeJsHelper.setUniformTexture(e,"colorTexture",t);const i=s.ThreeJsHelper.createMeshObjectGivenGeometry(this,e,a._threeJsGeometry);this.getThreeJsObjects().push(i),s.ThreeJsHelper.setRenderOrder(i,this._renderOrder),this._updateSizeUniform()}__unloadResources(){s.ThreeJsHelper.destroyMaterial(this.getThreeJsMaterials()[0]);const t=this.getThreeJsObjects()[0];void 0!==t.parent&&t.parent.remove(t),a._useCount-=1,0===a._useCount&&(s.ThreeJsHelper.destroyGeometry(a._threeJsGeometry),s.ThreeJsHelper.destroyMaterial(a._threeJsMaterial))}_updateSizeUniform(){if(this.getThreeJsMaterials().length>0){const t=this.getThreeJsMaterials()[0].uniforms.colorTexture.value;if(null!==t){const e=t.image.width/t.image.height,i=s.Vector2.pool.get();Number.isNaN(this._size.x)?i.set(this._size.y*e,this._size.y):Number.isNaN(this._size.y)?i.set(this._size.x,this._size.x/e):i.set(this._size.x,this._size.y),s.ThreeJsHelper.setUniformVector2(this.getThreeJsMaterials()[0],"size",i),s.Vector2.pool.release(i),"km"===this._sizeUnits?this.__setRadius(Math.max(i.x,i.y)):this.__setRadius(Number.POSITIVE_INFINITY)}}else"km"===this._sizeUnits?Number.isNaN(this._size.x)?this.__setRadius(this._size.y):Number.isNaN(this._size.y)?this.__setRadius(this._size.y):this.__setRadius(Math.max(this._size.x,this._size.y)):this.__setRadius(Number.POSITIVE_INFINITY)}}a._threeJsMaterial=null,a._threeJsGeometry=null,a._useCount=0,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);class n{constructor(){this.mag=0,this.absMag=0,this.color=new s.Color,this.position=new s.Vector3,this.particle=null}}class r extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._url="",this.__setRadius(1e24)}getUrl(){return this._url}setUrl(t){this._url=t,this.resetResources()}__prepareForRender(t){const e=s.Vector2.pool.get();if("spout"===t.getType()){const i=t;e.set(i.getRenderWidth(),.5*i.getRenderWidth())}else e.copy(t.getViewport().getBounds().size);const i=Math.sqrt(Math.max(e.x,e.y)*window.devicePixelRatio)/60;s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"resolutionFactor",i),s.Vector2.pool.release(e),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t)}async __loadResources(){const t=await this._loadStars();if(this.isDestroyed())return;const e=new s.THREE.ShaderMaterial({vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,transparent:!0,blending:s.THREE.AdditiveBlending,depthWrite:!1,uniforms:{resolutionFactor:new s.THREE.Uniform(1),nearDistance:new s.THREE.Uniform(0),midDistance:new s.THREE.Uniform(0)}});s.ThreeJsHelper.setupLogDepthBuffering(e),this.getThreeJsMaterials().push(e);const i=new s.THREE.BufferGeometry;i.setAttribute("position",new s.THREE.BufferAttribute(new Float32Array(0),3)),i.setAttribute("color",new s.THREE.BufferAttribute(new Float32Array(0),4)),i.setIndex(new s.THREE.BufferAttribute(new Uint16Array(0),1));const a=new s.THREE.Points(i,e);s.ThreeJsHelper.setupObject(this,a),a.renderOrder=-2,this.getThreeJsObjects().push(a);const n=new Float32Array(3*t.length),o=new Float32Array(4*t.length),l=new Uint16Array(t.length);for(let e=0;e<t.length;e++){const i=t[e];n[3*e+0]=i.position.x,n[3*e+1]=i.position.y,n[3*e+2]=i.position.z,o[4*e+0]=i.color.r,o[4*e+1]=i.color.g,o[4*e+2]=i.color.b,o[4*e+3]=i.absMag,l[e]=e}s.ThreeJsHelper.setVertices(i,"position",n),s.ThreeJsHelper.setVertices(i,"color",o),s.ThreeJsHelper.setIndices(i,l)}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_loadStars(){return this.getEntity().getScene().getEngine().getDownloader().download(this._url,!0).then(t=>{if("cancelled"===t.status)return Promise.resolve([]);if("failed"===t.status)return Promise.reject(new Error('Failed to load starfield component file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load starfield component file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content),i=e.readInt32(),r=[];for(let t=0;t<i;t++){const t=new n;t.mag=e.readFloat32(),t.absMag=e.readFloat32(),t.color.r=e.readByte()/255,t.color.g=e.readByte()/255,t.color.b=e.readByte()/255,t.color.div(t.color,t.color.max()),t.position.y=-e.readFloat32(),t.position.z=e.readFloat32(),t.position.x=e.readFloat32(),t.position.rotate(a,t.position),r.push(t)}return r})}}r.vertexShader="\n\t#define PI 3.1415926538\n\n\tattribute vec4 color;\n\tvarying vec4 fColor;\n\n\tuniform float resolutionFactor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tvarying float fragDepth;\n\t#else\n\t\tuniform float nearDistance;\n\t\tuniform float midDistance;\n\t#endif\n\n\t// Returns the watts per km^2.\n\tfloat absoluteMagnitudeToFlux(float absoluteMagnitude, float distance) {\n\t\tfloat luminosityInWatts = 3.0128e28 * pow(10.0, absoluteMagnitude / -2.5);\n\t\treturn luminosityInWatts / (4.0 * PI * distance * distance);\n\t}\n\n\tvoid main() {\n\t\tvec4 viewPosition = modelViewMatrix * vec4(position, 1.0);\n\t\tgl_Position = projectionMatrix * viewPosition;\n\t\tgl_Position.w = viewPosition.y;\n\t\tfColor = color;\n\n\t\t// Get the flux and brightness of the star at the camera's point.\n\t\tfloat absMag = color.a;\n\t\tfloat distance = length(viewPosition);\n\t\tfloat flux = absoluteMagnitudeToFlux(absMag, distance);\n\t\tfloat brightness = 2.0 * log(1.0 + flux * 1e4);\n\n\t\t// Adjust the color and size so that it is visually pleasing.\n\t\tfColor.a = clamp(brightness * resolutionFactor, 0.05, 1.0);\n\t\tgl_PointSize = clamp(brightness * 4.0 * resolutionFactor, 5.0, 24.0);\n\n\t\t// If it is too close, fade the star.\n\t\tfColor.a = mix(0.0, fColor.a, clamp((distance - 1.0e12) / 9.0e12, 0.0, 1.0));\n\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfragDepth = gl_Position.w;\n\t\t#else\n\t\t\tfloat z = gl_Position.w;\n\t\t\tif (z < midDistance) {\n\t\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)\n\t\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;\n\t\t\t\tgl_Position.z *= gl_Position.w;\n\t\t\t}\n\t\t#endif\n\t}",r.fragmentShader="\n\tvarying vec4 fColor;\n\n\t#ifdef L_EXT_frag_depth\n\t\tuniform mat4 projectionMatrix;\n\t\tvarying float fragDepth;\n\t#endif\n\n\tvoid main(void) {\n\t\tfloat distanceFromEdge = clamp(1.0 - 2.0 * length(gl_PointCoord - vec2(0.5, 0.5)), 0.0, 1.0);\n\t\tfloat a = pow(distanceFromEdge, 5.0);\n\t\tgl_FragColor.rgb = fColor.rgb;\n\t\tgl_FragColor.a = fColor.a * a;\n\n\t\t// Log-Depth Buffering\n\t\t#ifdef L_EXT_frag_depth\n\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)\n\t\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];\n\t\t#endif\n\t}",e.default=r},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{constructor(){this.time=0,this.position=new s.Vector3,this.velocity=new s.Vector3}}class n extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1,1),this._color.freeze(),this._alphaFade=0,this._widthMin=0,this._widthMax=2,this._ignoreDistance=!1,this._startTime=void 0,this._endTime=0,this._relativeTime=!0,this._relativeToEntity=new s.EntityRef(this.getEntity().getScene()),this._relativeToEntityOrientation=!1,this._angleCurveThreshold=.05235987755,this._points=[],this._pointsStart=0,this._pointsCount=0,this._currentRelativeToEntity=new s.EntityRef(this.getEntity().getScene()),this._dashLength=1,this._dashGapLength=0,this._dashOffsetTime=0,this._updatingStart=!0,this.__setRadius(Number.POSITIVE_INFINITY)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color)}getAlphaFade(){return this._alphaFade}setWidths(t,e){this._widthMin=t,this._widthMax=e,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"widthMin",t),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"widthMax",e)}setAlphaFade(t){this._alphaFade=t,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"alphaFade",t)}setDashLength(t,e){this._dashLength=t,this._dashGapLength=e,s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"dashLength",t),s.ThreeJsHelper.setUniformNumber(this.getThreeJsMaterials()[0],"dashGapLength",e)}getStartTime(){return this._startTime}setStartTime(t){this._startTime=t}getEndTime(){return this._endTime}setEndTime(t){this._endTime=t}isRelativeTime(){return this._relativeTime}setRelativeTime(t){this._relativeTime=t,this.resetPoints()}getRelativeToEntity(){return this._relativeToEntity.getName()}setRelativeToEntity(t){this._relativeToEntity.setName(t),this._currentRelativeToEntity.setName(t),this.resetPoints()}isRelativeToEntityOrientation(){return this._relativeToEntityOrientation}setRelativeToEntityOrientation(t){this._relativeToEntityOrientation=t,this.resetPoints()}getAngleCurveThreshold(){return this._angleCurveThreshold}setAngleCurveThreshold(t){this._angleCurveThreshold=t,this.resetPoints()}setIgnoreDistance(t){this._ignoreDistance=t}resetPoints(){if(this._points=[],this._pointsCount=0,this._pointsStart=0,this.getThreeJsObjects().length>0){const t=this.getThreeJsObjects()[0].geometry,e=new Float32Array(0),i=new s.THREE.InterleavedBuffer(e,n.VERTEX_SIZE);t.setAttribute("position",new s.THREE.InterleavedBufferAttribute(i,3,0,!1)),t.setAttribute("positionPrev",new s.THREE.InterleavedBufferAttribute(i,3,3,!1)),t.setAttribute("positionNext",new s.THREE.InterleavedBufferAttribute(i,3,6,!1)),t.setAttribute("side",new s.THREE.InterleavedBufferAttribute(i,1,9,!1)),t.setAttribute("index",new s.THREE.InterleavedBufferAttribute(i,1,10,!1)),t.setAttribute("dashOffset",new s.THREE.InterleavedBufferAttribute(i,1,11,!1)),t.setIndex(new s.THREE.BufferAttribute(new Uint16Array(0),1))}}__loadResources(){const t=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("trail");this.getThreeJsMaterials().push(t),t.uniforms.dashLength.value=this._dashLength,t.uniforms.dashGapLength.value=this._dashGapLength,t.uniforms.indexStart.value=0,t.uniforms.indexCount.value=0,t.uniforms.indexLength.value=0,t.uniforms.color.value.set(this._color.r,this._color.g,this._color.b,this._color.a),t.uniforms.widthMin.value=this._widthMin,t.uniforms.widthMax.value=this._widthMax,t.uniforms.alphaFade.value=this._alphaFade;const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3},{name:"positionPrev",dimensions:3},{name:"positionNext",dimensions:3},{name:"side",dimensions:1},{name:"index",dimensions:1},{name:"dashOffset",dimensions:1}],!0);return this.getThreeJsObjects().push(e),Promise.resolve()}__unloadResources(){this.getEntity().getScene().getEngine().getMaterialManager().release(this.getThreeJsMaterials()[0]),s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._points=[],this._pointsCount=0,this._pointsStart=0}__update(){this._updatingStart=!this._updatingStart}__prepareForRender(t){if(""===this._relativeToEntity.getName()&&null!==this.getEntity().getParent()&&this._currentRelativeToEntity.get()!==this.getEntity().getParent()&&(this._currentRelativeToEntity.setName(this.getEntity().getParent().getName()),this.resetPoints()),null===this._currentRelativeToEntity)return;this._updatePoints();const e=this.getThreeJsMaterials()[0];e.uniforms.indexStart.value=this._pointsStart,e.uniforms.indexCount.value=this._pointsCount,e.uniforms.indexLength.value=this._points.length;let i=1;if(!this._ignoreDistance){i*=(.02-this.getEntity().getNormalSpaceExtentsRadius(t))/.02;const e=this.getEntity().getCameraSpacePosition(t).magnitude()/this.getEntity().getPosition().magnitude();i*=s.MathUtils.clamp01(1e3*e)}s.ThreeJsHelper.setUniformNumber(e,"alphaMultiplier",i);const a=s.Vector2.pool.get();t instanceof s.SpoutComponent?a.set(.1*t.getRenderWidth(),.5*t.getRenderWidth()*.1):a.copy(t.getViewport().getBounds().size),s.ThreeJsHelper.setUniformVector2(e,"pixelSize",a),s.Vector2.pool.release(a);const n=this._currentRelativeToEntity.get();null!==n&&(s.ThreeJsHelper.setPosition(this.getThreeJsObjects(),n.getCameraSpacePosition(t)),this._relativeToEntityOrientation&&s.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),n.getOrientation()))}_updatePoints(){const t=s.Interval.pool.get();if(this._getIntervalForUpdate(t),isNaN(t.min)||isNaN(t.max))return void s.Interval.pool.release(t);const e=t.length()/120,i=s.Interval.pool.get();for(i.set(Number.POSITIVE_INFINITY,0),this._relativeTime&&this._pointsCount>0&&this._points[this._pointsStart].time!==t.min&&this._popFrontPoint(i);this._pointsCount>0&&this._points[this._pointsStart].time<t.min;)this._popFrontPoint(i);const a=s.Quaternion.pool.get();for(;(0===this._pointsCount||this._points[this._pointsStart].time>t.min)&&!(this._pointsCount>=16e3&&!0===this._relativeTime);){this._pushFrontPoint(i);const s=this._points[this._pointsStart];let n=0,r=Number.POSITIVE_INFINITY,o=e;this._pointsCount>2&&(o=this._points[(this._pointsStart+2)%this._points.length].time-this._points[(this._pointsStart+1)%this._points.length].time);let l=0;for(;l<20;){let e=t.max;if(this._pointsCount>1&&(e=this._points[(this._pointsStart+1)%this._points.length].time-o),e<t.min&&(e=t.min),s.time=e,this._getPositionAndVelocity(s.position,s.velocity,s.time),s.position.isNaN()||this._relativeToEntityOrientation&&a.isNaN())break;let i=0;if(this._pointsCount>=2&&(i=this._points[(this._pointsStart+1)%this._points.length].velocity.angle(s.velocity)),i>this._angleCurveThreshold)r=o,o=(n+o)/2;else{if(!(this._pointsCount>1&&i<this._angleCurveThreshold/3&&e!==t.min))break;n=o,r===Number.POSITIVE_INFINITY?o*=2:o=(o+r)/2}l++}if(s.position.isNaN()||this._relativeToEntityOrientation&&a.isNaN()){this._popFrontPoint(i);break}}for(this._relativeTime&&this._pointsCount>0&&this._points[(this._pointsStart+this._pointsCount-1)%this._points.length].time!==t.max&&this._popBackPoint(i);this._pointsCount>0&&this._points[(this._pointsStart+this._pointsCount-1)%this._points.length].time>t.max;)this._popBackPoint(i);for(;(0===this._pointsCount||this._points[(this._pointsStart+this._pointsCount-1)%this._points.length].time<t.max)&&!(this._pointsCount>=16e3&&!0===this._relativeTime);){this._pushBackPoint(i);const s=this._points[(this._pointsStart+this._pointsCount-1)%this._points.length];let n=0,r=Number.POSITIVE_INFINITY,o=e;this._pointsCount>2&&(o=this._points[(this._pointsStart+this._pointsCount-2)%this._points.length].time-this._points[(this._pointsStart+this._pointsCount-3)%this._points.length].time);let l=0;for(;l<20;){let e=t.min;if(this._pointsCount>1&&(e=this._points[(this._pointsStart+this._pointsCount-2)%this._points.length].time+o),e>t.max&&(e=t.max),s.time=e,this._getPositionAndVelocity(s.position,s.velocity,s.time),s.position.isNaN()||this._relativeToEntityOrientation&&a.isNaN())break;let i=0;if(this._pointsCount>=2&&(i=this._points[(this._pointsStart+this._pointsCount-2)%this._points.length].velocity.angle(s.velocity)),i>this._angleCurveThreshold)r=o,o=(n+o)/2;else{if(!(this._pointsCount>1&&i<this._angleCurveThreshold/3&&e!==t.max))break;n=o,r===Number.POSITIVE_INFINITY?o*=2:o=(o+r)/2}l++}if(s.position.isNaN()||this._relativeToEntityOrientation&&a.isNaN()){this._popBackPoint(i);break}}s.Interval.pool.release(t),s.Quaternion.pool.release(a);const r=this.getThreeJsObjects()[0].geometry.attributes.position.data,o=r.array;for(let t=i.min,e=Math.min(this._points.length-1,i.max);t<=e;t++){const e=this._points[t].position,i=isNaN(this._points[(t+this._points.length-1)%this._points.length].position.x)?e:this._points[(t+this._points.length-1)%this._points.length].position,s=isNaN(this._points[(t+1)%this._points.length].position.x)?e:this._points[(t+1)%this._points.length].position;o[2*t*n.VERTEX_SIZE+0]=e.x,o[2*t*n.VERTEX_SIZE+1]=e.y,o[2*t*n.VERTEX_SIZE+2]=e.z,o[(2*t+1)*n.VERTEX_SIZE+0]=e.x,o[(2*t+1)*n.VERTEX_SIZE+1]=e.y,o[(2*t+1)*n.VERTEX_SIZE+2]=e.z,o[2*t*n.VERTEX_SIZE+3]=i.x,o[2*t*n.VERTEX_SIZE+4]=i.y,o[2*t*n.VERTEX_SIZE+5]=i.z,o[(2*t+1)*n.VERTEX_SIZE+3]=i.x,o[(2*t+1)*n.VERTEX_SIZE+4]=i.y,o[(2*t+1)*n.VERTEX_SIZE+5]=i.z,o[2*t*n.VERTEX_SIZE+6]=s.x,o[2*t*n.VERTEX_SIZE+7]=s.y,o[2*t*n.VERTEX_SIZE+8]=s.z,o[(2*t+1)*n.VERTEX_SIZE+6]=s.x,o[(2*t+1)*n.VERTEX_SIZE+7]=s.y,o[(2*t+1)*n.VERTEX_SIZE+8]=s.z,o[2*t*n.VERTEX_SIZE+9]=1,o[(2*t+1)*n.VERTEX_SIZE+9]=-1,o[2*t*n.VERTEX_SIZE+10]=t,o[(2*t+1)*n.VERTEX_SIZE+10]=t,o[2*t*n.VERTEX_SIZE+11]=this._points[t].time-this._dashOffsetTime,o[(2*t+1)*n.VERTEX_SIZE+11]=this._points[t].time-this._dashOffsetTime}r.needsUpdate=!0,r.updateRange.offset=i.max<i.min?0:2*i.min*n.VERTEX_SIZE,r.updateRange.count=i.max<i.min?-1:2*(i.length()+1)*n.VERTEX_SIZE,s.Interval.pool.release(i)}_getIntervalForUpdate(t){if(this._relativeTime){const e=this.getEntity().getScene().getEngine().getTime();if(void 0!==this._startTime)t.min=e-this._startTime;else{let i=null;for(let t=0;;t++){const s=this.getEntity().getControllerByType("dynamo",t);if(null===s)break;"orb"===s.getPointType()&&s.getCoverage().contains(e)&&(i=s)}if(null!==i){const s=i.getSemiMajorAxis(e),a=i.getEccentricity(e),n=i.getHeaderValue("gravitationalParameter1")+i.getHeaderValue("gravitationalParameter2"),r=s*(a<1?1:16*Math.min(100,a)),o=2*Math.PI*r*Math.sqrt(r/n);t.min=e-o}else t.min=e-2*Math.PI*this.getEntity().getPosition().magnitude()/this.getEntity().getVelocity().magnitude()}if(void 0!==this._endTime)t.max=e+this._endTime;else{let i=this.getEntity().getPosition().magnitude();for(let t=0;;t++){const s=this.getEntity().getControllerByType("dynamo",t);if(null===s)break;if(s.getCoverage().contains(e)){const t=s.getSemiMajorAxis(e);if(!isNaN(t)){i=t*Math.sqrt((2*t-i)/i);break}}}t.max=e+2*Math.PI*i/this.getEntity().getVelocity().magnitude()}}else t.min=this._startTime,t.max=this._endTime;t.intersection(t,this.getEntity().getPositionCoverage())}_popFrontPoint(t){this._pointsCount>0&&(this._resize(this._pointsCount-1,t),t.expandTo(this._pointsStart),this._pointsCount>1&&t.expandTo((this._pointsStart+1)%this._points.length),this._points[this._pointsStart].position.x=NaN,this._pointsStart=(this._pointsStart+1)%this._points.length,this._pointsCount-=1)}_popBackPoint(t){this._pointsCount>0&&(this._resize(this._pointsCount-1,t),this._pointsCount-=1,t.expandTo((this._pointsStart+this._pointsCount)%this._points.length),this._pointsCount>0&&t.expandTo((this._pointsStart+this._pointsCount-1)%this._points.length),this._points[(this._pointsStart+this._pointsCount)%this._points.length].position.x=NaN)}_pushFrontPoint(t){this._resize(this._pointsCount+1,t),this._pointsStart=(this._pointsStart+this._points.length-1)%this._points.length,t.expandTo(this._pointsStart),this._pointsCount>0&&t.expandTo((this._pointsStart+1)%this._points.length),this._pointsCount+=1}_pushBackPoint(t){this._resize(this._pointsCount+1,t),this._pointsCount+=1,t.expandTo((this._pointsStart+this._pointsCount-1)%this._points.length),this._pointsCount>1&&t.expandTo((this._pointsStart+this._pointsCount-2)%this._points.length)}_resize(t,e){let i=!1,r=this._points.length;if((t+1>this._points.length||t<=this._points.length/4&&t>=8)&&(i=!0),i){r=Math.max(8,s.MathUtils.ceilPow2(t+1));const i=[];for(let t=0,e=this._pointsCount;t<e;t++)i.push(this._points[(this._pointsStart+t)%this._points.length]);this._pointsStart=0;for(let t=this._pointsCount,e=r;t<e;t++){const t=new a;t.position.x=Number.NaN,i.push(t)}this._points=i;const o=this.getThreeJsObjects()[0].geometry,l=new Float32Array(2*this._points.length*n.VERTEX_SIZE),c=new s.THREE.InterleavedBuffer(l,n.VERTEX_SIZE);o.setAttribute("position",new s.THREE.InterleavedBufferAttribute(c,3,0,!1)),o.setAttribute("positionPrev",new s.THREE.InterleavedBufferAttribute(c,3,3,!1)),o.setAttribute("positionNext",new s.THREE.InterleavedBufferAttribute(c,3,6,!1)),o.setAttribute("side",new s.THREE.InterleavedBufferAttribute(c,1,9,!1)),o.setAttribute("index",new s.THREE.InterleavedBufferAttribute(c,1,10,!1)),o.setAttribute("dashOffset",new s.THREE.InterleavedBufferAttribute(c,1,11,!1));const h=new Uint16Array(6*this._points.length);for(let t=0;t<this._points.length;t++)h[6*t+0]=(2*t+0)%(2*this._points.length),h[6*t+1]=(2*t+2)%(2*this._points.length),h[6*t+2]=(2*t+3)%(2*this._points.length),h[6*t+3]=(2*t+3)%(2*this._points.length),h[6*t+4]=(2*t+1)%(2*this._points.length),h[6*t+5]=(2*t+0)%(2*this._points.length);o.setIndex(new s.THREE.BufferAttribute(h,1)),this._dashOffsetTime=this._points[this._pointsStart].time,e.min=0,e.max=r}}_getPositionAndVelocity(t,e,i){const a=""!==this._relativeToEntity.getName()?this._relativeToEntity.get():this.getEntity().getParent();if(""===this._relativeToEntity.getName()){this.getEntity().getPositionAtTime(t,i),this.getEntity().getVelocityAtTime(e,i);const a=this.getEntity().getParentAtTime(i),n=this._currentRelativeToEntity.get();if(null!==n&&""!==a&&a!==n.getName()){const r=this.getEntity().getScene().getEntity(a);null!==r?(r.getPositionRelativeToEntity(t,t,n,i),r.getVelocityRelativeToEntity(e,e,n,i)):(t.copy(s.Vector3.NaN),e.copy(s.Vector3.NaN))}}else null!==a?(this.getEntity().getPositionRelativeToEntity(t,s.Vector3.Zero,a,i),this.getEntity().getVelocityRelativeToEntity(e,s.Vector3.Zero,a,i)):(t.copy(s.Vector3.NaN),e.copy(s.Vector3.NaN));if(this._relativeToEntityOrientation&&null!==a){const n=s.Quaternion.pool.get();a.getOrientationAtTime(n,i),t.rotateInverse(n,t),e.rotateInverse(n,e),s.Quaternion.pool.release(n)}}}n.VERTEX_SIZE=12,e.default=n},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.EntityItem{constructor(t,e,i){super(t,e,i),this._coverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._coverage.freeze(),this._modifiedStates=new Set,this._dependentStates=new Set,this.getEntity().getScene().getControllerDependencyGraph().addItem(this)}__destroy(){this.getEntity().getScene().getControllerDependencyGraph().removeItem(this),super.__destroy()}addModifiedState(t){this._modifiedStates.has(t)||(this._modifiedStates.add(t),this.getEntity().getScene().getControllerDependencyGraph().needsSorting(),"position"!==t&&"orientation"!==t||this.getEntity().__updateCoverage())}removeModifiedState(t){this._modifiedStates.delete(t)&&(this.getEntity().getScene().getControllerDependencyGraph().needsSorting(),"position"!==t&&"orientation"!==t||this.getEntity().__updateCoverage())}hasModifiedState(t){return this._modifiedStates.has(t)}addDependentState(t,e){this._dependentStates.has(t+"."+e)||(this._dependentStates.add(t+"."+e),this.getEntity().getScene().getControllerDependencyGraph().needsSorting())}removeDependentState(t,e){this._dependentStates.delete(t+"."+e)&&this.getEntity().getScene().getControllerDependencyGraph().needsSorting()}hasDependentState(t,e){return this._dependentStates.has(t+"."+e)}get __modifiedStates(){return this._modifiedStates}getCoverage(){return this._coverage}setCoverage(t){this._coverage.thaw(),this._coverage.copy(t),this._coverage.freeze(),this.getEntity().__updateCoverage()}__updatePositionAtTime(t,e){}__updateVelocityAtTime(t,e){}__updateOrientationAtTime(t,e){}toString(){let t=0;for(let e=0,i=this.getEntity().getNumControllers();e<i;e++){const i=this.getEntity().getController(e);if(this===i)break;this.getType()===i.getType()&&(t+=1)}return this.getEntity().getName()+"."+this.getType()+"."+t}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a extends s.BaseController{constructor(t,e,i){super(t,e,i),this._primaryAlignType="none",this._primaryAxis=new s.Vector3(1,0,0),this._primaryAxis.freeze(),this._primaryTargetEntity=new s.EntityRef(this.getEntity().getScene()),this._primaryTargetEntity.setRefChangedCallback((t,e)=>{this._removeDependentStates(t,this._primaryAlignType),this._addDependentStates(e,this._primaryAlignType)}),this._primaryTargetAxis=new s.Vector3(1,0,0),this._primaryTargetAxis.freeze(),this._secondaryAlignType="none",this._secondaryAxis=new s.Vector3(0,1,0),this._secondaryAxis.freeze(),this._secondaryTargetEntity=new s.EntityRef(this.getEntity().getScene()),this._secondaryTargetEntity.setRefChangedCallback((t,e)=>{this._removeDependentStates(t,this._secondaryAlignType),this._addDependentStates(e,this._secondaryAlignType)}),this._secondaryTargetAxis=new s.Vector3(0,1,0),this._secondaryTargetAxis.freeze(),this._joint="",this._jointObject=null,this._model=null,this._modelRootId=0,this.addModifiedState("orientation")}getPrimaryAlignType(){return this._primaryAlignType}setPrimaryAlignType(t){this._primaryAlignType!==t&&(this._removeDependentStates(this._primaryTargetEntity.get(),this._primaryAlignType),this._primaryAlignType=t,this._addDependentStates(this._primaryTargetEntity.get(),this._primaryAlignType))}getPrimaryAxis(){return this._primaryAxis}setPrimaryAxis(t){this._primaryAxis.thaw(),this._primaryAxis.copy(t),this._primaryAxis.freeze()}getPrimaryTargetEntity(){return this._primaryTargetEntity.getName()}setPrimaryTargetEntity(t){this._primaryTargetEntity.setName(t)}getPrimaryTargetAxis(){return this._primaryTargetAxis}setPrimaryTargetAxis(t){this._primaryTargetAxis.thaw(),this._primaryTargetAxis.copy(t),this._primaryTargetAxis.freeze()}getSecondaryAlignType(){return this._secondaryAlignType}setSecondaryAlignType(t){this._secondaryAlignType!==t&&(this._removeDependentStates(this._secondaryTargetEntity.get(),this._secondaryAlignType),this._secondaryAlignType=t,this._addDependentStates(this._secondaryTargetEntity.get(),this._secondaryAlignType))}getSecondaryAxis(){return this._secondaryAxis}setSecondaryAxis(t){this._secondaryAxis.thaw(),this._secondaryAxis.copy(t),this._secondaryAxis.freeze()}getSecondaryTargetEntity(){return this._secondaryTargetEntity.getName()}setSecondaryTargetEntity(t){this._secondaryTargetEntity.setName(t)}getSecondaryTargetAxis(){return this._secondaryTargetAxis}setSecondaryTargetAxis(t){this._secondaryTargetAxis.thaw(),this._secondaryTargetAxis.copy(t),this._secondaryTargetAxis.freeze()}setJoint(t,e){if(this._joint=t,e)this._model=e;else{const t=this.getEntity().get("model");null!==t&&(this._model=t)}""!==this._joint?(this.addDependentState(this.getEntity().getName(),"orientation"),this.removeModifiedState("orientation")):(this.removeDependentState(this.getEntity().getName(),"orientation"),this.addModifiedState("orientation"))}__updateOrientationAtTime(t,e){""===this._joint&&this._getOrientation(t,e)}__update(){const t=s.Quaternion.pool.get();this._jointObject,t.copy(this.getEntity().getOrientation()),this._getOrientation(t),null!==this._jointObject?this._jointObject.quaternion.set(t.x,t.y,t.z,t.w):this.getEntity().setOrientation(t),s.Quaternion.pool.release(t)}_getOrientation(t,e){if(""!==this._joint&&null!==this._model){const t=this._model.getThreeJsObjects()[0];if(void 0!==t&&(null===this._jointObject||this._jointObject.name!==this._joint||t.id!==this._modelRootId)){const e=this._model.getThreeJsObjectByName(this._joint);null!==e&&(this._jointObject=e,this._modelRootId=t.id)}if(null===this._jointObject)return}const i=s.Vector3.pool.get(),n=s.Vector3.pool.get(),r=s.Quaternion.pool.get(),o=s.Quaternion.pool.get();if(null!==this._jointObject){let e=this._jointObject;for(a._tempThreeJsQuaternion.set(0,0,0,1);null!==e.parent&&e.parent!==this._model.getThreeJsObjects()[0];)e=e.parent,a._tempThreeJsQuaternion.multiplyQuaternions(e.quaternion,a._tempThreeJsQuaternion);o.copyFromThreeJs(a._tempThreeJsQuaternion),o.mult(this._model.getRotation(),o),o.mult(t,o)}else o.copy(t);if(o.isNaN()&&o.copy(s.Quaternion.Identity),n.rotate(o,this._primaryAxis),this._getAxis(i,this._primaryAlignType,this._primaryTargetEntity,this._primaryTargetAxis,n,e),i.isNaN()&&i.set(1,0,0),r.setFromVectorFromTo(n,i),t.mult(r,o),t.isNaN()&&t.copy(s.Quaternion.Identity),s.Vector3.pool.release(n),s.Quaternion.pool.release(r),"none"!==this._secondaryAlignType&&null!==this._secondaryTargetEntity&&(this._getAxis(i,this._secondaryAlignType,this._secondaryTargetEntity,this._secondaryTargetAxis,n,e),!i.isNaN())){const e=s.Quaternion.pool.get(),a=s.Vector3.pool.get(),n=s.Vector3.pool.get();a.rotate(t,this._primaryAxis),n.rotate(t,this._secondaryAxis);const r=n.angleAroundAxis(i,a);e.setFromAxisAngle(a,r),t.mult(e,t),s.Quaternion.pool.release(e),s.Vector3.pool.release(a),s.Vector3.pool.release(n)}t.normalize(t),null!==this._jointObject&&t.multInverseL(o,t),s.Quaternion.pool.release(o),s.Vector3.pool.release(i)}_getAxis(t,e,i,a,n,r){const o=i.get();if("align"===e&&null!==o){const e=s.Quaternion.pool.get();o.getOrientationAtTime(e,r),t.rotate(e,a),s.Quaternion.pool.release(e)}else"velocity"===e&&null!==o?(o.getVelocityAtTime(t,r),t.normalize(t)):"point"===e&&null!==o?(o.getPositionRelativeToEntity(t,s.Vector3.Zero,this.getEntity(),r),t.normalize(t)):"position"===e&&null!==o?t.normalize(o.getPosition()):t.copy(n)}_removeDependentStates(t,e){null!==t&&("align"===e?this.removeDependentState(t.getName(),"orientation"):"velocity"===e?this.removeDependentState(t.getName(),"velocity"):"point"===e?(this.removeDependentState(this.getEntity().getName(),"position"),this.removeDependentState(t.getName(),"position")):"position"===e&&this.removeDependentState(t.getName(),"position"))}_addDependentStates(t,e){null!==t&&("align"===e?this.addDependentState(t.getName(),"orientation"):"velocity"===e?this.addDependentState(t.getName(),"velocity"):"point"===e?(this.addDependentState(this.getEntity().getName(),"position"),this.addDependentState(t.getName(),"position")):"position"===e&&this.addDependentState(t.getName(),"position"))}}a._tempThreeJsQuaternion=new s.THREE.Quaternion,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);class n{read(t){}interpolate(t,e,i,s){}}class r extends n{constructor(){super(),this.position=new s.Vector3,this.velocity=new s.Vector3}read(t){this.position.y=-t.readFloat64(),this.position.z=t.readFloat64(),this.position.x=t.readFloat64(),this.velocity.y=-t.readFloat64(),this.velocity.z=t.readFloat64(),this.velocity.x=t.readFloat64(),this.position.rotate(a,this.position),this.velocity.rotate(a,this.velocity)}interpolate(t,e,i,s){const a=1-s,n=a*a,r=s*s,o=(1+2*s)*n,l=s*n,c=r*(3-2*s),h=r*-a;this.position.mult(t.position,o),this.position.addMult(this.position,t.velocity,i*l),this.position.addMult(this.position,e.position,c),this.position.addMult(this.position,e.velocity,i*h);const d=6*(r-s),u=d,p=3*r-4*s+1,m=-d,g=3*r-2*s;this.velocity.mult(t.position,u/i),this.velocity.addMult(this.velocity,t.velocity,p),this.velocity.addMult(this.velocity,e.position,m/i),this.velocity.addMult(this.velocity,e.velocity,g)}}class o extends n{constructor(){super(),this.orientation=new s.Quaternion}read(t){this.orientation.y=t.readFloat32(),this.orientation.z=-t.readFloat32(),this.orientation.x=-t.readFloat32(),this.orientation.w=t.readFloat32(),this.orientation.mult(a,this.orientation)}interpolate(t,e,i,s){this.orientation.slerp(t.orientation,e.orientation,s)}}class l{constructor(t){this.interval=new s.Interval,this.state=t.__getNewState()}read(t){this.interval.min=t.readFloat64(),this.interval.max=t.readFloat64(),this.state.read(t)}}class c{constructor(t,e,i){this.interval=new s.Interval,this.dataPoints=[];const a=t.getUrl()+"/"+t.getStateType()+"_data/"+("00"+e).slice(-3)+"."+("000"+(i+1)).slice(-4)+".animdata";this.promise=t.getEntity().getScene().getEngine().getDownloader().download(a,!0).then(async e=>{if("cancelled"===e.status)return Promise.resolve();if("failed"===e.status)return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": '+e.errorMessage));if(!(e.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": Not a binary file.'));const i=new s.Reader(e.content);this.interval.min=i.readFloat64(),this.interval.max=i.readFloat64();const a=i.readInt32();for(let e=0;e<a;e++){const e=new l(t);e.read(i),this.dataPoints.push(e)}})}}class h{constructor(){this.fileIndex=0,this.interval=new s.Interval}}class d{constructor(){this.fileIndex=0,this.dataPointIndices=[]}}class u{constructor(){this.bucketOverlaps=[]}}class p{constructor(t,e,i){this.fileOverlaps=new Map,this.buckets=[];const a=t.getUrl()+"/"+t.getStateType()+"_info/"+("00"+e).slice(-3)+"."+("000"+i).slice(-4)+".animinfo";this.promise=t.getEntity().getScene().getEngine().getDownloader().download(a,!0).then(async t=>{if("cancelled"===t.status)return Promise.resolve();if("failed"===t.status)return Promise.reject(new Error('Failed to load animdata controller file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load animdata controller file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content),i=e.readInt16();for(let t=0;t<i;t++){const t=new h;t.fileIndex=e.readInt16(),t.interval.min=e.readFloat64(),t.interval.max=e.readFloat64(),this.fileOverlaps.set(t.fileIndex,t)}const a=e.readInt16();for(let t=0;t<a;t++){const t=new u,i=e.readInt16();for(let s=0;s<i;s++){const i=new d;i.fileIndex=e.readInt16();const s=e.readInt16();for(let t=0;t<s;t++)i.dataPointIndices.push(e.readInt16());t.bucketOverlaps.push(i)}this.buckets.push(t)}})}}class m{constructor(){this.interval=new s.Interval,this.numDataFiles=0,this.numBuckets=0,this.bucketStepSize=0,this.numBucketsPerAniminfoFile=0,this.animinfos=new Map,this.animdatas=new Map}}class g{constructor(t){this.coverages=[];const e=t.getUrl()+"/"+t.getStateType()+".animdef";this.promise=t.getEntity().getScene().getEngine().getDownloader().download(e,!0).then(async e=>{if("cancelled"===e.status)return Promise.resolve();if("failed"===e.status)return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": '+e.errorMessage));if(!(e.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load animdata controller file "'+e.url+'": Not a binary file.'));const i=new s.Reader(e.content),a=i.readInt16();for(let t=0;t<a;t++){const t=new m;t.interval.min=i.readFloat64(),t.interval.max=i.readFloat64(),t.numDataFiles=i.readInt16(),t.numBuckets=i.readInt32(),t.bucketStepSize=i.readFloat64(),t.numBucketsPerAniminfoFile=i.readInt16(),this.coverages.push(t)}t.__updateCoverage()})}}e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._baseUrl="",this._stateType="",this._animdef=null,this._currentDataPoint=null,this._tempDataPoint=null,this._engine=this.getEntity().getScene().getEngine(),this._forcedCoverage=new s.Interval,this._forcedCoverage.copy(this.getCoverage())}getUrl(){return this._baseUrl}getStateType(){return this._stateType}setBaseUrlAndStateType(t,e){this._baseUrl=t,this._stateType=e,this._currentDataPoint=new l(this),this._tempDataPoint=new l(this),this._animdef=new g(this),"pos"===this._stateType?(this.addModifiedState("position"),this.addModifiedState("velocity")):"ori"===this._stateType&&this.addModifiedState("orientation")}setCoverage(t){this._forcedCoverage.copy(t),this.__updateCoverage()}__updateCoverage(){const t=s.Interval.pool.get();if(null!==this._animdef&&this._animdef.coverages.length>0){t.copy(this._animdef.coverages[0].interval);for(let e=1;e<this._animdef.coverages.length;e++)t.union(t,this._animdef.coverages[e].interval);t.intersection(t,this._forcedCoverage)}else t.copy(this._forcedCoverage),t.max=t.min;super.setCoverage(t),s.Interval.pool.release(t)}__updatePositionAtTime(t,e){if("pos"===this._stateType){const i=this._tempDataPoint.state;this._tempDataPoint.interval.min!==e?this._getDataPointAtTime(this._tempDataPoint,e)&&t.copy(i.position):t.copy(i.position)}}__updateVelocityAtTime(t,e){if("pos"===this._stateType){const i=this._tempDataPoint.state;this._tempDataPoint.interval.min!==e?this._getDataPointAtTime(this._tempDataPoint,e)&&t.copy(i.velocity):t.copy(i.velocity)}}__updateOrientationAtTime(t,e){if("ori"===this._stateType){const i=this._tempDataPoint.state;this._getDataPointAtTime(this._tempDataPoint,e)&&t.copy(i.orientation)}}getLoadedPromise(){return this.downloadDataForInterval(new s.Interval(this._engine.getTime(),this._engine.getTime()))}downloadDataForInterval(t){return null===this._animdef?null:this._animdef.promise.then(async()=>{const e=[];for(let i=0;i<this._animdef.coverages.length;i++){const s=this._animdef.coverages[i];if(s.interval.intersects(t)){const a=Math.floor((Math.max(t.min,s.interval.min)-s.interval.min)/s.bucketStepSize/s.numBucketsPerAniminfoFile),n=Math.floor((Math.min(t.max,s.interval.max)-1e-4-s.interval.min)/s.bucketStepSize/s.numBucketsPerAniminfoFile);for(let r=a;r<=n;r++){s.animinfos.has(r)||s.animinfos.set(r,new p(this,i,r));const a=s.animinfos.get(r);e.push(a.promise.then(()=>{const e=[];for(const n of a.fileOverlaps.values())if(n.interval.intersects(t)){const t=n.fileIndex;s.animdatas.has(t)||s.animdatas.set(t,new c(this,i,t));const a=s.animdatas.get(t);e.push(a.promise)}return Promise.all(e).then()}))}return Promise.all(e).then()}}})}__getNewState(){return"pos"===this._stateType?new r:"ori"===this._stateType?new o:null}__update(){if(null!==this._currentDataPoint&&this._getDataPointAtTime(this._currentDataPoint,this._engine.getTime())){if("pos"===this._stateType){const t=this._currentDataPoint.state;this.getEntity().setPosition(t.position),this.getEntity().setVelocity(t.velocity)}if("ori"===this._stateType){const t=this._currentDataPoint.state;this.getEntity().setOrientation(t.orientation)}}}_getDataPointAtTime(t,e){for(let i=0;i<this._animdef.coverages.length;i++){const s=this._animdef.coverages[i];if(s.interval.contains(e)){const a=Math.floor((e-s.interval.min)/s.bucketStepSize/s.numBucketsPerAniminfoFile);if(s.animinfos.has(a)){const n=s.animinfos.get(a),r=Math.floor((e-s.interval.min)/s.bucketStepSize)-a*s.numBucketsPerAniminfoFile,o=n.buckets[r];if(void 0===o)return!1;for(let a=0;a<o.bucketOverlaps.length;a++){const r=o.bucketOverlaps[a],l=r.fileIndex;if(n.fileOverlaps.get(l).interval.contains(e)){if(s.animdatas.has(l)){const i=s.animdatas.get(l);for(let s=0;s<r.dataPointIndices.length;s++){const a=r.dataPointIndices[s],n=i.dataPoints[a];if(void 0===n)return!1;if(n.interval.contains(e)){const s=(e-n.interval.min)/n.interval.length();return t.interval.min=e,t.interval.max=e,t.state.interpolate(n.state,i.dataPoints[a+1].state,n.interval.length(),s),!0}}return!1}return s.animdatas.set(l,new c(this,i,l)),!1}}return!1}return s.animinfos.set(a,new p(this,i,a)),!1}}return!1}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{constructor(t,e,i,a){this.timeInterval=new s.Interval(t.min,t.max),this.timeInterval.freeze(),this.enterFunction=e,this.exitFunction=i,this.updateFunction=a,this.active=!1}}e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._coverages=[]}addCoverage(t,e,i,s){this._coverages.push(new a(t,e,i,s))}clearCoverages(){this._coverages=[]}getStartOfAllCoverages(){let t=Number.POSITIVE_INFINITY;for(let e=0,i=this._coverages.length;e<i;e++)t>this._coverages[e].timeInterval.min&&(t=this._coverages[e].timeInterval.min);return t}getEndOfAllCoverages(){let t=Number.NEGATIVE_INFINITY;for(let e=0,i=this._coverages.length;e<i;e++)t<this._coverages[e].timeInterval.max&&(t=this._coverages[e].timeInterval.max);return t}coverageContains(t,e){const i=this._coverages[t];return void 0!==i&&i.timeInterval.contains(e)}__update(){const t=this.getEntity().getScene().getEngine().getTime();for(let e=0,i=this._coverages.length;e<i;e++){const i=this._coverages[e],s=i.timeInterval.contains(t);i.active&&!s&&(i.exitFunction&&i.exitFunction(this.getEntity()),i.active=s)}for(let e=0,i=this._coverages.length;e<i;e++){const i=this._coverages[e],s=i.timeInterval.contains(t);!i.active&&s&&(i.enterFunction&&i.enterFunction(this.getEntity()),i.active=s),s&&i.updateFunction&&i.updateFunction(this.getEntity())}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);let a=null,n=null;class r{load(t){this.time=t.readFloat64()}calculate(t,e,i,s,a){}apply(t){}isNaN(t){return!1}setNaN(t){}static readHeader(t){return{}}}class o extends r{constructor(){super(),this.position=new s.Vector3,this.velocity=new s.Vector3}load(t){super.load(t),this.position=new s.Vector3(t.readFloat64(),t.readFloat64(),t.readFloat64()),this.velocity=new s.Vector3(t.readFloat64(),t.readFloat64(),t.readFloat64())}calculate(t,e,i,a,n){this.time=i;const r=s.MathUtils.clamp01((i-t.time)/(e.time-t.time)),o=s.Vector3.pool.get(),l=s.Vector3.pool.get();o.addMult(t.position,t.velocity,i-t.time),l.addMult(e.position,e.velocity,i-e.time),this.position.lerp(o,l,r),s.Vector3.pool.release(o),s.Vector3.pool.release(l),this.velocity.lerp(t.velocity,e.velocity,r)}apply(t){t.setPosition(this.position),t.setVelocity(this.velocity)}isNaN(t){return t.getPosition().isNaN()}setNaN(t){t.setPosition(s.Vector3.NaN),t.setVelocity(s.Vector3.NaN)}static readHeader(t){return{}}}class l extends r{constructor(){super(),this.orientation=new s.Quaternion,this.angularVelocity=new s.Vector3}load(t){super.load(t),this.orientation=new s.Quaternion(t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64()),this.angularVelocity=new s.Vector3(t.readFloat64(),t.readFloat64(),t.readFloat64())}calculate(t,e,i,a,n){this.time=i;const r=s.Quaternion.pool.get(),o=s.Quaternion.pool.get(),l=(i-t.time)/(e.time-t.time);t._project(r,i,n),e._project(o,i,n),this.orientation.slerp(r,o,l),s.Quaternion.pool.release(r),s.Quaternion.pool.release(o),this.angularVelocity.slerp(t.angularVelocity,e.angularVelocity,l),this.angularVelocity.neg(this.angularVelocity),this.angularVelocity.rotate(this.orientation,this.angularVelocity)}apply(t){t.setOrientation(this.orientation),t.setAngularVelocity(this.angularVelocity)}_project(t,e,i){const a=s.Vector3.pool.get(),n=s.Quaternion.pool.get();a.normalize(this.angularVelocity),n.setFromAxisAngle(a,this.angularVelocity.magnitude()*(e-this.time)),s.Vector3.pool.release(a),i?(n.multInverseR(this.orientation,n),t.mult(t,n)):t.multInverseR(this.orientation,n),s.Quaternion.pool.release(n)}isNaN(t){return t.getOrientation().isNaN()}setNaN(t){t.setOrientation(s.Quaternion.NaN),t.setAngularVelocity(s.Vector3.NaN)}static readHeader(t){return{}}}class c extends r{constructor(){super(),this.orientation=new s.Quaternion,this.angularVelocity=new s.Vector3}load(t){super.load(t),this.orientation=new s.Quaternion(t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64())}calculate(t,e,i,a,n){this.time=i;const r=s.MathUtils.clamp01((i-t.time)/(e.time-t.time));this.orientation.slerp(t.orientation,e.orientation,r)}apply(t){t.setOrientation(this.orientation),t.setAngularVelocity(s.Vector3.Zero)}isNaN(t){return t.getOrientation().isNaN()}setNaN(t){t.setOrientation(s.Quaternion.NaN),t.setAngularVelocity(s.Vector3.NaN)}static readHeader(t){return{}}}class h extends r{constructor(){super(),this.oe=new s.OrbitalElements,this.oe.orbitOrientation.freeze(),this.position=new s.Vector3,this.velocity=new s.Vector3}load(t){super.load(t),this.oe.epoch=this.time,this.oe.semiMajorAxis=t.readFloat64(),this.oe.eccentricity=t.readFloat64(),this.oe.meanAngularMotion=t.readFloat64(),this.oe.meanAnomalyAtEpoch=t.readFloat64(),this.oe.orbitOrientation.thaw(),this.oe.orbitOrientation.set(t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64()),this.oe.orbitOrientation.freeze()}calculate(t,e,i,a,n){this.time=i,this.oe.epoch=i;const r=s.Vector3.pool.get(),o=s.Vector3.pool.get(),l=s.Vector3.pool.get(),c=s.Vector3.pool.get(),h=s.MathUtils.clamp01((i-t.time)/(e.time-t.time));t._project(r,l,i,a,n),e._project(o,c,i,a,n),this.position.lerp(r,o,h),this.velocity.lerp(l,c,h),s.Vector3.pool.release(r),s.Vector3.pool.release(o),s.Vector3.pool.release(l),s.Vector3.pool.release(c)}apply(t){t.setPosition(this.position),t.setVelocity(this.velocity)}_project(t,e,i,a,n){const r=s.Vector3.pool.get(),o=s.Vector3.pool.get();this.oe.project(r,o,i);let l=1;1===a.body?l=a.gravitationalParameter2/(a.gravitationalParameter1+a.gravitationalParameter2):2===a.body&&(l=-a.gravitationalParameter1/(a.gravitationalParameter1+a.gravitationalParameter2)),r.mult(r,l),o.mult(o,l),n?t.add(r,t):t.copy(r),e.copy(o),s.Vector3.pool.release(r),s.Vector3.pool.release(o)}isNaN(t){return t.getPosition().isNaN()}setNaN(t){t.setPosition(s.Vector3.NaN),t.setVelocity(s.Vector3.NaN)}static readHeader(t){return{gravitationalParameter1:t.readFloat64(),gravitationalParameter2:t.readFloat64()}}}class d{constructor(t,e,i,a){this._PointClass=t,this._version=e,this._numberOfDigits=i,this._name=a,this._pointSets=[],this._points=[],this._hintIndex=0,this._interval=new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY),this._loadedState=d.State.NOT_LOADED,this._accessedTime=Number.POSITIVE_INFINITY}getName(){return this._name}getLoadedState(){return this._loadedState}getLoadedTime(){return this._accessedTime}hasPointSets(){return 0!==this._pointSets.length}hasPoints(){return 0!==this._points.length}load(t){let e=!0;if((2===this._version||1===this._version&&"def"===this._name)&&(e=1===t.readByte()),e){const e=t.readInt32();for(let i=0;i<e;i++){const e=new this._PointClass;e.load(t),this._points.push(e)}this._points.length>0&&(this._interval.min=this._points[0].time,this._interval.max=this._points[this._points.length-1].time)}else{const e=t.readInt32();1===this._version&&(this._numberOfDigits=Math.ceil(Math.log10(e)));for(let i=0;i<e;i++){let e="";e="def"===this._name?(i+"").padStart(this._numberOfDigits,"0"):this._name+"_"+(i+"").padStart(this._numberOfDigits,"0");const s=new d(this._PointClass,this._version,this._numberOfDigits,e);s._interval.min=t.readFloat64(),1===this._version?s._interval.max=t.readFloat64():i>0&&(this._pointSets[i-1]._interval.max=s._interval.min),this._pointSets.push(s)}2===this._version&&this._pointSets.splice(this._pointSets.length-1,1),this._pointSets.length>0&&(this._interval.min=this._pointSets[0]._interval.min,this._interval.max=this._pointSets[this._pointSets.length-1]._interval.max)}this._loadedState=d.State.LOADED,this._accessedTime=Date.now()}loadFromUrl(t,e){this._loadedState=d.State.LOADING,t.download(e+"/"+this._name+".dyn",!0).then(async t=>{if("cancelled"===t.status)return Promise.resolve();if("failed"===t.status)return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content);this.load(e)})}unloadOldPointSet(){for(let t=0,e=this._pointSets.length;t<e;t++){const e=this._pointSets[t];if(e._loadedState===d.State.LOADED){if(Date.now()-e._accessedTime>15e3)return e.unload(),!0;if(e.unloadOldPointSet())return!0}}return!1}unload(){this._loadedState=d.State.NOT_LOADED,this._accessedTime=Number.POSITIVE_INFINITY,this._pointSets=[],this._points=[]}getPointSet(t){if(this._accessedTime=Date.now(),0===this._pointSets.length)return null;if(this._pointSets[this._hintIndex]._interval.contains(t));else if(this._hintIndex-1>=0&&this._pointSets[this._hintIndex-1]._interval.contains(t))this._hintIndex-=1;else if(this._hintIndex+1<this._pointSets.length&&this._pointSets[this._hintIndex+1]._interval.contains(t))this._hintIndex+=1;else{let e=0,i=this._pointSets.length-1,s=0;for(;e!==i;)s=Math.ceil((e+i)/2),t<this._pointSets[s]._interval.min?i=s-1:e=s;this._hintIndex=e}return this._pointSets[this._hintIndex]}getPoints(t){if(this._accessedTime=Date.now(),0===this._points.length)return a=null,void(n=null);if(this._hintIndex+1<this._points.length&&this._points[this._hintIndex].time<=t&&t<this._points[this._hintIndex+1].time);else if(this._hintIndex-1>=0&&this._points[this._hintIndex-1].time<=t&&t<this._points[this._hintIndex].time)this._hintIndex-=1;else if(this._hintIndex+2<this._points.length&&this._points[this._hintIndex+1].time<=t&&t<this._points[this._hintIndex+2].time)this._hintIndex+=1;else{let e=0,i=this._points.length-2,s=0;for(;e!==i;)s=Math.ceil((e+i)/2),t<this._points[s].time?i=s-1:e=s;this._hintIndex=e}a=this._points[this._hintIndex],n=this._points[this._hintIndex+1]}}d.State={NOT_LOADED:0,LOADING:1,LOADED:2};class u extends s.BaseController{constructor(t,e,i){super(t,e,i),this._baseUrl="",this._dataLoadedAtCurrentTime=!1,this._timeOffset=0,this._version=0,this._pointType="",this._PointClass=null,this._numberOfDigits=0,this._header={body:0},this._incremental=!1,this._pointSet=null,this._downloader=i.getScene().getEngine().getDownloader(),this._lastP0=null,this._lastP1=null,this._lastTime=Number.NaN,this._pCalc=null,this._userCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._userCoverage.freeze()}getPointType(){return this._pointType}getHeaderValue(t){return this._header[t]}setHeaderValue(t,e){this._header[t]=e}isIncremental(){return this._incremental}setIncremental(t){this._incremental=t}getBaseUrl(){return this._baseUrl}setBaseUrl(t){""!==this._baseUrl&&(this._downloader.cancel(this._baseUrl+"/def.dyn"),this._pointSet=null,this._PointClass=null,this._userCoverage.thaw(),this._userCoverage=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._userCoverage.freeze(),super.setCoverage(new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)),this.addModifiedState("position"),this.addModifiedState("velocity"),this.addModifiedState("orientation"),this.addModifiedState("angularVelocity"),this._dataLoadedAtCurrentTime=!1),this._baseUrl=t,this._baseUrl.endsWith("/")&&(this._baseUrl=this._baseUrl.slice(0,-1)),this._loadDef()}getLoadedPromise(){return new Promise(t=>{const e=this.getEntity().getScene().getEngine(),i=()=>{const s=e.getTime();(this.isDestroyed()||!this.isEnabled()||!this.getEntity().isEnabled()||""===this._baseUrl||null!==this._pointSet&&!this.getCoverage().contains(s)||this._dataLoadedAtCurrentTime)&&(e.removeCallback(i),t())};e.addCallback(i,!0)})}getTimeOffset(){return this._timeOffset}setTimeOffset(t){const e=this._timeOffset;this._timeOffset=t;const i=new s.Interval;i.copy(this.getCoverage()),i.min+=this._timeOffset-e,i.max+=this._timeOffset-e,super.setCoverage(i)}setCoverage(t){this._userCoverage.thaw(),this._userCoverage.copy(t),this._userCoverage.freeze();const e=s.Interval.pool.get();null!==this._pointSet?e.intersection(this._userCoverage,this._pointSet._interval):e.copy(new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),e.min+=this._timeOffset,e.max+=this._timeOffset,super.setCoverage(e),s.Interval.pool.release(e)}getOrbitalElements(t,e){if(this._PointClass===h&&null!==this._pointSet&&(this._getPointsAtTime(e),null!==a&&(this._lastP0=a,this._lastP1=n),null!==this._lastP0)){const i=this._lastP0.oe,a=this._lastP1.oe,n=s.MathUtils.clamp01((e-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));t.eccentricity=s.MathUtils.lerp(i.eccentricity,a.eccentricity,n),t.semiMajorAxis=s.MathUtils.lerp(i.semiMajorAxis,a.semiMajorAxis,n),t.epoch=s.MathUtils.lerp(i.epoch,a.epoch,n),t.meanAngularMotion=s.MathUtils.lerp(i.meanAngularMotion,a.meanAngularMotion,n),t.meanAnomalyAtEpoch=s.MathUtils.lerpAngle(i.meanAnomalyAtEpoch,a.meanAnomalyAtEpoch,n),t.orbitOrientation.slerp(i.orbitOrientation,a.orbitOrientation,n)}}getEccentricity(t){if(this._PointClass===h&&null!==this._pointSet&&(this._getPointsAtTime(t),null!==a&&(this._lastP0=a,this._lastP1=n),null!==this._lastP0)){const e=s.MathUtils.clamp01((t-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));return s.MathUtils.lerp(this._lastP0.oe.eccentricity,this._lastP1.oe.eccentricity,e)}return Number.NaN}getSemiMajorAxis(t){if(this._PointClass===h&&null!==this._pointSet&&(this._getPointsAtTime(t),null!==a&&(this._lastP0=a,this._lastP1=n),null!==this._lastP0)){const e=s.MathUtils.clamp01((t-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));return s.MathUtils.lerp(this._lastP0.oe.semiMajorAxis,this._lastP1.oe.semiMajorAxis,e)}return Number.NaN}getOrbitOrientation(t,e){if(this._PointClass===h&&null!==this._pointSet&&(this._getPointsAtTime(e),null!==a&&(this._lastP0=a,this._lastP1=n),null!==this._lastP0)){const i=s.MathUtils.clamp01((e-this._lastP0.time)/(this._lastP1.time-this._lastP0.time));t.slerp(this._lastP0.oe.orbitOrientation,this._lastP1.oe.orbitOrientation,i)}}__destroy(){""!==this._baseUrl&&this._downloader.cancel(this._baseUrl+"/def.dyn"),super.__destroy()}__updatePositionAtTime(t,e){if(null!==this._pointSet){if(void 0!==this._pCalc.position&&this.getCoverage().contains(e)){if(this._pCalc.time!==e){if(this._getPointsAtTime(e),null===a)return void t.copy(s.Vector3.NaN);this._pCalc.calculate(a,n,e-this._timeOffset,this._header,this._incremental)}t.copy(this._pCalc.position)}}else t.copy(s.Vector3.NaN)}__updateVelocityAtTime(t,e){if(null!==this._pointSet){if(void 0!==this._pCalc.velocity&&this.getCoverage().contains(e)){if(this._pCalc.time!==e){if(this._getPointsAtTime(e),null===a)return void t.copy(s.Vector3.NaN);this._pCalc.calculate(a,n,e-this._timeOffset,this._header,this._incremental)}t.copy(this._pCalc.velocity)}}else t.copy(s.Vector3.NaN)}__updateOrientationAtTime(t,e){if(null!==this._pointSet){if(void 0!==this._pCalc.orientation&&this.getCoverage().contains(e)){if(this._pCalc.time!==e){if(this._getPointsAtTime(e),null===a)return void t.copy(s.Quaternion.NaN);this._pCalc.calculate(a,n,e-this._timeOffset,this._header,this._incremental)}t.copy(this._pCalc.orientation)}}else t.copy(s.Quaternion.NaN)}__update(){const t=this.getEntity(),e=t.getScene().getEngine(),i=e.getTime();if(null!==this._pointSet)if(this._pointSet.unloadOldPointSet(),this._getPointsAtTime(i),null!==a)this._pCalc.calculate(a,n,i-this._timeOffset,this._header,this._incremental),this._pCalc.apply(t),this._lastP0=a,this._lastP1=n,this._dataLoadedAtCurrentTime=!0;else if(this._pCalc.isNaN(t))this._dataLoadedAtCurrentTime=!1;else{Math.abs(i-(this._lastTime+e.getTimeRate()*e.getDeltaTime()))>Math.abs(e.getTimeRate()*e.getDeltaTime()*2)?this._pCalc.setNaN(t):null!==this._lastP0&&(this._pCalc.calculate(this._lastP0,this._lastP1,i-this._timeOffset,this._header,this._incremental),this._pCalc.apply(t)),this._dataLoadedAtCurrentTime=!1}else this.getEntity().setPosition(s.Vector3.NaN),this.getEntity().setVelocity(s.Vector3.NaN),this.getEntity().setOrientation(s.Quaternion.NaN),this.getEntity().setAngularVelocity(s.Vector3.NaN),this._dataLoadedAtCurrentTime=!1;this._lastTime=i}async _loadDef(){const t=this._baseUrl;return this._downloader.download(this._baseUrl+"/def.dyn",!0).then(async t=>{if("cancelled"===t.status)return Promise.resolve();if("failed"===t.status)return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": '+t.errorMessage));if(!(t.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load dynamo controller file "'+t.url+'": Not a binary file.'));const e=new s.Reader(t.content);if(this._version=e.readInt16(),1!==this._version&&2!==this._version)throw new Error(t.url+" is not Dynamo version 1 or 2");this._pointType=e.readString(),"pos"===this._pointType?this._PointClass=o:"ori"===this._pointType?this._PointClass=l:"quat"===this._pointType?this._PointClass=c:"orb"===this._pointType&&(this._PointClass=h),this._pCalc=new this._PointClass,this._PointClass===o||this._PointClass===h?(this.addModifiedState("position"),this.addModifiedState("velocity"),this.removeModifiedState("orientation"),this.removeModifiedState("angularVelocity")):this._PointClass!==l&&this._PointClass!==c||(this.addModifiedState("orientation"),this.addModifiedState("angularVelocity"),this.removeModifiedState("position"),this.removeModifiedState("velocity")),2===this._version&&(this._numberOfDigits=e.readByte()),this._header=Object.assign(this._header,this._PointClass.readHeader(e)),this._pointSet=new d(this._PointClass,this._version,this._numberOfDigits,"def"),this._pointSet.load(e);const i=s.Interval.pool.get();i.intersection(this._userCoverage,this._pointSet._interval),i.min+=this._timeOffset,i.max+=this._timeOffset,super.setCoverage(i),s.Interval.pool.release(i)}).catch(e=>{throw new Error(`While loading dynamo "${t}/def.dyn": ${e}`)})}_getPointsAtTime(t){let e=this._pointSet;for(;;){if(e.hasPoints())return void e.getPoints(t-this._timeOffset);if(e.getLoadedState()!==d.State.LOADED)return e.getLoadedState()===d.State.NOT_LOADED?(e.loadFromUrl(this._downloader,this._baseUrl),a=null,void(n=null)):(a=null,void(n=null));if(null===(e=e.getPointSet(t-this._timeOffset)))return a=null,void(n=null)}}}u.maxLoadedPointSetsPerController=5,e.default=u},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._position=null,this._orientation=null}getPosition(){return this._position}setPosition(t){null!==t?(null===this._position&&(this._position=new s.Vector3),this._position.thaw(),this._position.copy(t),this._position.freeze()):this._position=null,null!==t?(this.addModifiedState("position"),this.addModifiedState("velocity")):(this.removeModifiedState("position"),this.removeModifiedState("velocity"))}getOrientation(){return this._orientation}setOrientation(t){null!==t?(null===this._orientation&&(this._orientation=new s.Quaternion),this._orientation.thaw(),this._orientation.copy(t),this._orientation.freeze()):this._orientation=null,null!==t?this.addModifiedState("orientation"):this.removeModifiedState("orientation")}__updatePositionAtTime(t,e){null!==this._position&&t.copy(this._position)}__updateVelocityAtTime(t,e){null!==this._position&&t.set(0,0,0)}__updateOrientationAtTime(t,e){null!==this._orientation&&t.copy(this._orientation)}__update(){null!==this._position&&(this.getEntity().setPosition(this._position),this.getEntity().setVelocity(s.Vector3.Zero)),null!==this._orientation&&this.getEntity().setOrientation(this._orientation)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._lastParentOrientation=new s.Quaternion;const a=this.getEntity().getParent();null!==a&&this._lastParentOrientation.copy(a.getOrientation()),this.addModifiedState("position"),this.addModifiedState("orientation"),this.addDependentState("parent","orientation")}__update(){const t=this.getEntity().getParent();if(null!==t){const e=s.Quaternion.pool.get();e.inverse(this._lastParentOrientation),e.mult(t.getOrientation(),e);const i=s.Vector3.pool.get(),a=s.Quaternion.pool.get();i.rotate(e,this.getEntity().getPosition()),this.getEntity().setPosition(i),a.mult(e,this.getEntity().getOrientation()),this.getEntity().setOrientation(a),s.Quaternion.pool.release(a),s.Vector3.pool.release(i),s.Quaternion.pool.release(e),this._lastParentOrientation.copy(t.getOrientation())}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._dragSensitivity=.01,this._dragSmoothness=.8,this._moveSmoothedValue=new s.Vector3(0,0,0),this._changeParentToNearestEntity=!0,this._forcedMoving=new s.Vector3,this._isMoving=!1,this.addModifiedState("position"),this.addDependentState("parent","orientation"),this.addDependentState("parent","radius")}getDragSensitivity(){return this._dragSensitivity}setDragSensitivity(t){this._dragSensitivity=t}getDragSmoothness(){return this._dragSmoothness}setDragSmoothness(t){this._dragSmoothness=t}getChangeParentToNearestEntity(){return this._changeParentToNearestEntity}setChangeParentToNearestEntity(t){this._changeParentToNearestEntity=t}getForcedMoving(){return this._forcedMoving}setForcedMoving(t){this._forcedMoving=t}__update(){if(null===this.getEntity().getParent())return;if(this._changeParentToNearestEntity&&(null===this.getEntity().getParent()||this._isMoving)){const t=this.getEntity().getScene(),e=this.getEntity().get("camera");let i=null,s=Number.POSITIVE_INFINITY;for(let a=0,n=t.getNumEntities();a<n;a++){const n=t.getEntity(a);if(n===this.getEntity()||!n.canOcclude())continue;const r=n.getCameraSpacePosition(e).magnitude()-n.getOcclusionRadius();s>r&&(s=r,i=n)}null!==i&&i!==this.getEntity().getParent()&&this.getEntity().setParent(i)}this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity),this.getEntity().getPosition().isNaN()&&this.getEntity().setPosition(new s.Vector3(0,-1,0));const t=s.Vector3.pool.get();t.set(0,0,0);const e=this.getEntity().getScene().getEngine().getInput(),i=e.getActiveViewport();if(null!==i){const s=i.getCamera();if(null!==s&&s.getEntity()===this.getEntity()){let i=1;e.isKeyPressed("x")&&(i=.05),e.isKeyPressed("shift")&&(i=5);const s=e.getZoomedOffset();0!==s&&(t.y+=-s*this._dragSensitivity*i),e.isKeyPressed("w")&&(t.y+=this._dragSensitivity*i),e.isKeyPressed("s")&&(t.y-=this._dragSensitivity*i),e.isKeyPressed("d")&&(t.x+=this._dragSensitivity*i),e.isKeyPressed("a")&&(t.x-=this._dragSensitivity*i),e.isKeyPressed("e")&&(t.z+=this._dragSensitivity*i),e.isKeyPressed("q")&&(t.z-=this._dragSensitivity*i)}}t.add(t,this._forcedMoving),this._isMoving=t.magnitudeSqr()>0,this._moveSmoothedValue.lerp(t,this._moveSmoothedValue,this._dragSmoothness),!this._isMoving&&this._moveSmoothedValue.magnitudeSqr()<1e-7&&this._moveSmoothedValue.set(0,0,0),s.Vector3.pool.release(t);let a=Number.POSITIVE_INFINITY;const n=this.getEntity().getParent().getComponentByType("spheroid");if(null===n||this.getEntity().getParent().getOrientation().isNaN())a=Math.min(a,this.getEntity().getPosition().magnitude()-this.getEntity().getParent().getOcclusionRadius());else{const t=s.Vector3.pool.get();t.rotateInverse(this.getEntity().getParent().getOrientation(),this.getEntity().getPosition());const e=s.LatLonAlt.pool.get();n.llaFromXYZ(e,t),a=Math.min(a,e.alt),s.LatLonAlt.pool.release(e),s.Vector3.pool.release(t)}a=Math.max(.1,a);const r=this.getEntity().getPosition(),o=s.Vector3.pool.get(),l=s.Vector3.pool.get();l.rotate(this.getEntity().getOrientation(),this._moveSmoothedValue),o.addMult(r,l,a),this.getEntity().setPosition(o),s.Vector3.pool.release(l),s.Vector3.pool.release(o)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new s.Vector3;e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._referenceComponent=null,this._distanceFromGround=0,this.addModifiedState("position")}getReferenceComponent(){return this._referenceComponent}setReferenceComponent(t){this._referenceComponent=t}getDistanceFromGround(){return this._distanceFromGround}setDistanceFromGround(t){this._distanceFromGround=t}__updatePositionAtTime(t,e){if(null===this._referenceComponent)return;if(this._referenceComponent.isDestroyed())return void(this._referenceComponent=null);const i=this._referenceComponent.getEntity(),a=this.getEntity().getParentAtTime(e),n=this.getEntity().getScene().getEntity(a);if(null===n)return;const r=s.Vector3.pool.get(),o=s.Quaternion.pool.get();i.getOrientationAtTime(o,e),n.getPositionRelativeToEntity(r,t,i,e),r.rotateInverse(o,r),void 0!==this._referenceComponent.getGroundPosition&&this._referenceComponent.getGroundPosition(r,r,this._distanceFromGround),r.rotate(o,r),i.getPositionRelativeToEntity(t,r,n,e),s.Vector3.pool.release(r),s.Quaternion.pool.release(o)}__update(){if(null===this._referenceComponent)return;if(this._referenceComponent.isDestroyed())return void(this._referenceComponent=null);const t=this._referenceComponent.getEntity(),e=a;this.getEntity().getPositionRelativeToEntity(e,s.Vector3.Zero,t),e.rotateInverse(t.getOrientation(),e),void 0!==this._referenceComponent.getGroundPosition&&this._referenceComponent.getGroundPosition(e,e,this._distanceFromGround),e.rotate(t.getOrientation(),e),t.getPositionRelativeToEntity(e,e,this.getEntity().getParent()),this.getEntity().setPosition(e)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=(t,e)=>t[0]<e[0],n=(t,e)=>t[0]<e,r=(t,e)=>t[0]===e;e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._positionKeyframes=[],this._orientationKeyframes=[],this._timesAreRealTime=!1,this._timeOfFirstUpdate=NaN,this.setCoverage(new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),this._position0=new s.Vector3,this._position1=new s.Vector3,this._orientation0=new s.Quaternion,this._orientation1=new s.Quaternion,this._newPosition=new s.Vector3,this._newVelocity=new s.Vector3,this._newOrientation=new s.Quaternion,this._tangent0=new s.Vector3,this._tangent1=new s.Vector3,this._tempA=new s.Vector3,this._tempB=new s.Vector3}addPositionKeyframe(t,e,i,n,r,o){const l=[t,{position:e,relativeToEntityPosition:i?new s.EntityRef(this.getEntity().getScene(),i):void 0,relativeToEntityPositionTime:n,relativeToEntityOrientation:r?new s.EntityRef(this.getEntity().getScene(),r):void 0,relativeToEntityOrientationTime:o}];s.Sort.add(l,this._positionKeyframes,a),1===this._positionKeyframes.length&&(this.addModifiedState("position"),this.addModifiedState("velocity")),this._updateCoverage()}removePositionKeyframe(t){const e=s.Sort.remove(t,this._positionKeyframes,n,r);return e&&(0===this._positionKeyframes.length&&(this.removeModifiedState("position"),this.removeModifiedState("velocity")),this._updateCoverage()),e}addOrientationKeyframe(t,e,i,n){const r=[t,{orientation:e,relativeToEntityOrientation:i?new s.EntityRef(this.getEntity().getScene(),i):void 0,relativeToEntityOrientationTime:n}];s.Sort.add(r,this._orientationKeyframes,a),1===this._orientationKeyframes.length&&this.addModifiedState("orientation"),this._updateCoverage()}removeOrientationKeyframe(t){const e=s.Sort.remove(t,this._orientationKeyframes,n,r);return e&&(0===this._orientationKeyframes.length&&this.removeModifiedState("orientation"),this._updateCoverage()),e}areTimesRealTime(){return this._timesAreRealTime}setTimesAreRealTime(t){this._timesAreRealTime=t,this._updateCoverage()}__updatePositionAtTime(t,e){this._getPositionAtTime(t,e)}__updateVelocityAtTime(t,e){this._getVelocityAtTime(t,e)}__updateOrientationAtTime(t,e){this._getOrientationAtTime(t,e)}__update(){const t=this.getEntity().getScene().getEngine();let e=0;this._timesAreRealTime?isNaN(this._timeOfFirstUpdate)?this._timeOfFirstUpdate=Date.now()/1e3:e=Date.now()/1e3-this._timeOfFirstUpdate:e=t.getTime(),this._getPositionAtTime(this._newPosition,e)&&this.getEntity().setPosition(this._newPosition),this._getVelocityAtTime(this._newVelocity,e)&&this.getEntity().setVelocity(this._newVelocity),this._getOrientationAtTime(this._newOrientation,e)&&this.getEntity().setOrientation(this._newOrientation)}_getPositionAtTime(t,e){const i=s.Sort.getIndex(e,this._positionKeyframes,n);if(i<this._positionKeyframes.length){if(0!==i){const s=i-1,a=i,n=this._positionKeyframes[s][0],r=this._positionKeyframes[a][0];if(this._getPositionOfKeyframe(this._position0,this._positionKeyframes[s]),this._getPositionOfKeyframe(this._position1,this._positionKeyframes[a]),s>0){const t=this._positionKeyframes[s-1][0];this._getPositionOfKeyframe(this._tempA,this._positionKeyframes[s-1]),this._tempA.sub(this._position0,this._tempA),this._tempB.sub(this._position1,this._position0),this._tempB.mult(this._tempB,.5),this._tangent0.addMult(this._tempB,this._tempA,.5*(r-n)/(n-t))}else this._tangent0.sub(this._position1,this._position0);if(a<this._positionKeyframes.length-1){const t=this._positionKeyframes[a+1][0];this._getPositionOfKeyframe(this._tempB,this._positionKeyframes[a+1]),this._tempA.sub(this._position1,this._position0),this._tempB.sub(this._tempB,this._position1),this._tempA.mult(this._tempA,.5),this._tangent1.addMult(this._tempA,this._tempB,.5*(r-n)/(t-r))}else this._tangent1.sub(this._position1,this._position0);const o=(e-n)/(r-n);return this._cubicHermiteSpline(t,this._position0,this._position1,this._tangent0,this._tangent1,o),!0}if(this._positionKeyframes[0][0]===e)return this._getPositionOfKeyframe(t,this._positionKeyframes[0]),!0}return!1}_getVelocityAtTime(t,e){const i=s.Sort.getIndex(e,this._positionKeyframes,n);if(i<this._positionKeyframes.length){if(0!==i){const s=i-1,a=i,n=this._positionKeyframes[s][0],r=this._positionKeyframes[a][0];if(this._getPositionOfKeyframe(this._position0,this._positionKeyframes[s]),this._getPositionOfKeyframe(this._position1,this._positionKeyframes[a]),s>0){const t=this._positionKeyframes[s-1][0];this._getPositionOfKeyframe(this._tempA,this._positionKeyframes[s-1]),this._tempA.sub(this._position0,this._tempA),this._tempB.sub(this._position1,this._position0),this._tempB.mult(this._tempB,.5),this._tangent0.addMult(this._tempB,this._tempA,.5*(r-n)/(n-t))}else this._tangent0.sub(this._position1,this._position0);if(a<this._positionKeyframes.length-1){const t=this._positionKeyframes[a+1][0];this._getPositionOfKeyframe(this._tempB,this._positionKeyframes[a+1]),this._tempA.sub(this._position1,this._position0),this._tempB.sub(this._tempB,this._position1),this._tempA.mult(this._tempA,.5),this._tangent1.addMult(this._tempA,this._tempB,.5*(r-n)/(t-r))}else this._tangent1.sub(this._position1,this._position0);const o=(e-n)/(r-n);return this._cubicHermiteSplineDerivative(t,this._position0,this._position1,this._tangent0,this._tangent1,o),t.div(t,r-n),!0}if(this._positionKeyframes[0][0]===e){if(this._positionKeyframes.length>1){const e=this._positionKeyframes[0][0],i=this._positionKeyframes[1][0];this._getPositionOfKeyframe(this._position0,this._positionKeyframes[0]),this._getPositionOfKeyframe(this._position1,this._positionKeyframes[1]),t.sub(this._position1,this._position0),t.div(t,i-e)}else t.set(0,0,0);return!0}}return!1}_getOrientationAtTime(t,e){const i=s.Sort.getIndex(e,this._orientationKeyframes,n);if(i<this._orientationKeyframes.length){if(0!==i){const s=i-1,a=i,n=this._orientationKeyframes[s][0];this._getOrientationOfKeyframe(this._orientation0,this._orientationKeyframes[s]);const r=this._orientationKeyframes[a][0];return this._getOrientationOfKeyframe(this._orientation1,this._orientationKeyframes[a]),t.slerp(this._orientation0,this._orientation1,(e-n)/(r-n)),!0}if(this._orientationKeyframes[0][0]===e)return this._getOrientationOfKeyframe(t,this._orientationKeyframes[0]),!0}return!1}_getPositionOfKeyframe(t,e){const i=e[1];if(t.copy(i.position),void 0!==i.relativeToEntityOrientation){const a=void 0!==e[1].relativeToEntityOrientationTime?e[1].relativeToEntityOrientationTime:e[0],n=i.relativeToEntityOrientation.get();if(null!==n){const e=s.Quaternion.pool.get();n.getOrientationAtTime(e,a),t.rotate(e,t),s.Quaternion.pool.release(e)}else t.copy(s.Vector3.NaN)}if(void 0!==i.relativeToEntityPosition){const a=void 0!==e[1].relativeToEntityPositionTime?e[1].relativeToEntityPositionTime:e[0],n=s.Vector3.pool.get(),r=i.relativeToEntityPosition.get();null!==r?(r.getPositionRelativeToEntity(n,s.Vector3.Zero,this.getEntity().getParent(),a),t.add(n,t),s.Vector3.pool.release(n)):t.copy(s.Vector3.NaN)}}_getOrientationOfKeyframe(t,e){const i=e[1];if(void 0!==i.relativeToEntityOrientation){const a=void 0!==e[1].relativeToEntityOrientationTime?e[1].relativeToEntityOrientationTime:e[0],n=i.relativeToEntityOrientation.get();null!==n?(n.getOrientationAtTime(t,a),t.mult(t,i.orientation)):t.copy(s.Quaternion.NaN)}else t.copy(i.orientation)}_updateCoverage(){if(this._timesAreRealTime)this.setCoverage(s.Interval.Infinite);else{const t=new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);this._positionKeyframes.length>0&&(t.min=Math.min(t.min,this._positionKeyframes[0][0]),t.max=Math.max(t.max,this._positionKeyframes[this._positionKeyframes.length-1][0])),this._orientationKeyframes.length>0&&(t.min=Math.min(t.min,this._orientationKeyframes[0][0]),t.max=Math.max(t.max,this._orientationKeyframes[this._orientationKeyframes.length-1][0])),this.setCoverage(t)}}_cubicHermiteSpline(t,e,i,s,a,n){const r=n*n,o=n*r,l=2*o-3*r+1,c=o-2*r+n,h=-2*o+3*r,d=o-r;t.x=l*e.x+c*s.x+h*i.x+d*a.x,t.y=l*e.y+c*s.y+h*i.y+d*a.y,t.z=l*e.z+c*s.z+h*i.z+d*a.z}_cubicHermiteSplineDerivative(t,e,i,s,a,n){const r=n*n,o=6*r-6*n,l=3*r-4*n+1,c=-6*r+6*n,h=3*r-2*n;t.x=o*e.x+l*s.x+c*i.x+h*a.x,t.y=o*e.y+l*s.y+c*i.y+h*a.y,t.z=o*e.z+l*s.z+c*i.z+h*a.z}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._dragSensitivity=.01,this._dragSmoothness=.8,this._yawAngleSmoothedValue=0,this._pitchAngleSmoothedValue=0,this._yawAxisType="none",this._yawAxisEntity=null,this.addModifiedState("orientation")}getDragSensitivity(){return this._dragSensitivity}setDragSensitivity(t){this._dragSensitivity=t}getDragSmoothness(){return this._dragSmoothness}setDragSmoothness(t){this._dragSmoothness=t}getYawAxisType(){return this._yawAxisType}setYawAxisType(t){this._yawAxisType!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisType=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}getYawAxisEntity(){return this._yawAxisEntity}setYawAxisEntity(t){this._yawAxisEntity!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisEntity=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}__update(){null===this._yawAxisEntity&&(this._yawAxisEntity=this.getEntity().getParent(),null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position"))),this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity);const t=this.getEntity().getScene().getEngine().getInput();let e=1;t.isKeyPressed("x")&&(e=.05);const i=this.getEntity().getComponentByType("camera");null!==i&&(e*=Math.min(1,i.getFieldOfView()));let a=0,n=0;const r=t.getActiveViewport();if(null!==r){const i=r.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const i=t.getDraggedOffset();a=-i.x*this._dragSensitivity*e,n=-i.y*this._dragSensitivity*e}}this._yawAngleSmoothedValue=s.MathUtils.lerp(a,this._yawAngleSmoothedValue,this._dragSmoothness),this._pitchAngleSmoothedValue=s.MathUtils.lerp(n,this._pitchAngleSmoothedValue,this._dragSmoothness),Math.abs(this._yawAngleSmoothedValue)<1e-4*e&&(this._yawAngleSmoothedValue=0),Math.abs(this._pitchAngleSmoothedValue)<1e-4*e&&(this._pitchAngleSmoothedValue=0);const o=s.Vector3.pool.get();"x-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(o,0):"y-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(o,1):"z-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(o,2):"position"===this._yawAxisType&&null!==this._yawAxisEntity?o.normalize(this._yawAxisEntity.getPosition()):this.getEntity().getOrientation().getAxis(o,2),o.isNaN()&&this.getEntity().getOrientation().getAxis(o,2);const l=s.Quaternion.pool.get();l.copy(this.getEntity().getOrientation());const c=s.Quaternion.pool.get(),h=s.Vector3.pool.get(),d=s.Vector3.pool.get();this.getEntity().getOrientation().getAxis(d,1),this.getEntity().getOrientation().getAxis(h,2);const u=h.angleAroundAxis(o,d);c.setFromAxisAngle(d,u),c.normalize(c),l.mult(c,l),s.Vector3.pool.release(h),s.Vector3.pool.release(d);const p=s.Vector3.pool.get();l.getAxis(p,0),c.setFromAxisAngle(p,this._pitchAngleSmoothedValue),l.mult(c,l),s.Vector3.pool.release(p),c.setFromAxisAngle(o,this._yawAngleSmoothedValue),l.mult(c,l),s.Vector3.pool.release(o),s.Quaternion.pool.release(c),this.getEntity().setOrientation(l),s.Quaternion.pool.release(l)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._animations=[]}setAnimation(t,e,i,s){if(null===t)throw new Error("Null model specified.");this._animations.push({model:t,jointName:e,animationName:i,interval:s,animationClip:null,rootObject:null,jointObject:null,animationMixer:null})}__update(){const t=this.getEntity().getScene().getEngine().getTime();for(let e=0,i=this._animations.length;e<i;e++){const i=this._animations[e];if(i.model.isDestroyed())this._animations.splice(e,1),e--;else if(null!==i.model.getThreeJsObjects()[0]){if(i.rootObject!==i.model.getThreeJsObjects()[0]&&(i.rootObject=i.model.getThreeJsObjects()[0],i.animationClip=null,i.jointObject=null,i.animationMixer=null),null===i.animationClip&&(i.animationClip=i.model.getAnimationClip(i.animationName)),null===i.jointObject){const t=i.model.getThreeJsObjectByName(i.jointName);null!==t&&(i.jointObject=t)}if(null===i.animationMixer&&null!==i.animationClip&&null!==i.jointObject&&(i.animationMixer=new s.THREE.AnimationMixer(i.jointObject),i.animationMixer.clipAction(i.animationClip).play()),null!==i.animationMixer){const e=s.MathUtils.clamp01((t-i.interval.min)/(i.interval.max-i.interval.min)),a=i.animationClip.duration*e*(i.animationClip.tracks[0].times.length-1)/i.animationClip.tracks[0].times.length;i.animationMixer.setTime(a),i.animationMixer.update(0)}}else i.rootObject=null}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._dragSensitivity=.01,this._dragSmoothness=.8,this._yawChangeSmoothedValue=0,this._pitchChangeSmoothedValue=0,this._yawAxisType="none",this._yawAxisEntity=null,this._pitchAxisType="none",this._pitchAxisEntity=null,this._slowWhenCloseToParent=!1,this._yawAngleLimits=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._yawAngleLimits.freeze(),this._pitchAngleLimits=new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this._pitchAngleLimits.freeze(),this.addModifiedState("position"),this.addModifiedState("orientation")}getDragSensitivity(){return this._dragSensitivity}setDragSensitivity(t){this._dragSensitivity=t}getDragSmoothness(){return this._dragSmoothness}setDragSmoothness(t){this._dragSmoothness=t}getYawAxisType(){return this._yawAxisType}setYawAxisType(t){this._yawAxisType!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisType=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}getPitchAxisType(){return this._pitchAxisType}setPitchAxisType(t){this._pitchAxisType!==t&&(null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.removeDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.removeDependentState(this._pitchAxisEntity.getName(),"position")),this._pitchAxisType=t,null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.addDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.addDependentState(this._pitchAxisEntity.getName(),"position")))}getYawAxisEntity(){return this._yawAxisEntity}setYawAxisEntity(t){this._yawAxisEntity!==t&&(null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.removeDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.removeDependentState(this._yawAxisEntity.getName(),"position")),this._yawAxisEntity=t,null!==this._yawAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._yawAxisType)?this.addDependentState(this._yawAxisEntity.getName(),"orientation"):"position"===this._yawAxisType&&this.addDependentState(this._yawAxisEntity.getName(),"position")))}getPitchAxisEntity(){return this._pitchAxisEntity}setPitchAxisEntity(t){this._pitchAxisEntity!==t&&(null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.removeDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.removeDependentState(this._pitchAxisEntity.getName(),"position")),this._pitchAxisEntity=t,null!==this._pitchAxisEntity&&(["x-axis","y-axis","z-axis"].includes(this._pitchAxisType)?this.addDependentState(this._pitchAxisEntity.getName(),"orientation"):"position"===this._pitchAxisType&&this.addDependentState(this._pitchAxisEntity.getName(),"position")))}getYawAngleLimits(){return this._yawAngleLimits}setYawAngleLimits(t){this._yawAngleLimits.thaw(),this._yawAngleLimits.copy(t),this._yawAngleLimits.freeze()}getPitchAngleLimits(){return this._pitchAngleLimits}setPitchAngleLimits(t){this._pitchAngleLimits.thaw(),this._pitchAngleLimits.copy(t),this._pitchAngleLimits.freeze()}isSlowWhenCloseToParent(){return this._slowWhenCloseToParent}slowWhenCloseToParent(t){this._slowWhenCloseToParent=t}__update(){if(null===this.getEntity().getParent())return;this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity),this.getEntity().getPosition().isNaN()&&this.getEntity().setPosition(new s.Vector3(0,-1,0));const t=this.getEntity().getScene().getEngine().getInput();let e=1;t.isKeyPressed("x")&&(e=.05),t.isKeyPressed("shift")&&(e=5);const i=this.getEntity().getComponentByType("camera");null!==i&&(e*=Math.min(1,i.getFieldOfView()));let a=0,n=0;const r=t.getActiveViewport();if(null!==r){const i=r.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const i=t.getDraggedOffset();a=-i.x*this._dragSensitivity*e,n=i.y*this._dragSensitivity*e,t.isKeyPressed("d")&&(a+=this._dragSensitivity*e),t.isKeyPressed("a")&&(a-=this._dragSensitivity*e),t.isKeyPressed("e")&&(n-=this._dragSensitivity*e),t.isKeyPressed("q")&&(n+=this._dragSensitivity*e)}}this._yawChangeSmoothedValue=s.MathUtils.lerp(a,this._yawChangeSmoothedValue,this._dragSmoothness),this._pitchChangeSmoothedValue=s.MathUtils.lerp(n,this._pitchChangeSmoothedValue,this._dragSmoothness),Math.abs(this._yawChangeSmoothedValue)<1e-4*e&&(this._yawChangeSmoothedValue=0),Math.abs(this._pitchChangeSmoothedValue)<1e-4*e&&(this._pitchChangeSmoothedValue=0);const o=s.Vector3.pool.get();null===this._yawAxisEntity&&(this._yawAxisEntity=this.getEntity().getParent()),"x-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(o,0):"y-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(o,1):"z-axis"===this._yawAxisType&&null!==this._yawAxisEntity?this._yawAxisEntity.getOrientation().getAxis(o,2):"position"===this._yawAxisType&&null!==this._yawAxisEntity?o.normalize(this._yawAxisEntity.getPosition()):this.getEntity().getOrientation().getAxis(o,2),(o.isNaN()||o.isZero())&&this.getEntity().getOrientation().getAxis(o,2);const l=s.Vector3.pool.get();null===this._pitchAxisEntity&&(this._pitchAxisEntity=this.getEntity().getParent()),"x-axis"===this._pitchAxisType&&null!==this._pitchAxisEntity?this._pitchAxisEntity.getOrientation().getAxis(l,0):"y-axis"===this._pitchAxisType&&null!==this._pitchAxisEntity?this._pitchAxisEntity.getOrientation().getAxis(l,1):"z-axis"===this._pitchAxisType&&null!==this._pitchAxisEntity?this._pitchAxisEntity.getOrientation().getAxis(l,2):"position"===this._pitchAxisType&&null!==this._pitchAxisEntity?l.normalize(this._pitchAxisEntity.getPosition()):this.getEntity().getOrientation().getAxis(l,0),(l.isNaN()||l.isZero())&&this.getEntity().getOrientation().getAxis(l,0),l.setNormalTo(o,l);const c=s.Quaternion.pool.get();c.setFromAxes(l,void 0,o),s.Vector3.pool.release(l),s.Vector3.pool.release(o);const h=s.Vector3.pool.get();h.rotateInverse(c,this.getEntity().getPosition());let d=1;if(this._slowWhenCloseToParent){const t=this.getEntity().getParent().getOcclusionRadius();d=s.MathUtils.clamp((h.magnitude()-t)/t,.001,1)}const u=s.LatLonAlt.pool.get();s.Geometry.getLLAFromXYZOnSphere(u,h,0),u.lat+=this._pitchChangeSmoothedValue*d,u.lon+=this._yawChangeSmoothedValue*d,u.lat<1e-4-s.MathUtils.halfPi&&(u.lat=1e-4-s.MathUtils.halfPi),u.lat>s.MathUtils.halfPi-1e-4&&(u.lat=s.MathUtils.halfPi-1e-4),u.lat<this._pitchAngleLimits.min&&(u.lat=this._pitchAngleLimits.min),u.lat>this._pitchAngleLimits.max&&(u.lat=this._pitchAngleLimits.max),u.lon<this._yawAngleLimits.min&&(u.lon=this._yawAngleLimits.min),u.lon>this._yawAngleLimits.max&&(u.lon=this._yawAngleLimits.max),s.Geometry.getXYZFromLLAOnSphere(h,u,0),s.LatLonAlt.pool.release(u),h.rotate(c,h),s.Quaternion.pool.release(c),this.getEntity().setPosition(h),s.Vector3.pool.release(h)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{constructor(){this.time=NaN}}class n extends a{constructor(t){super(),this.position=new s.Vector3,this.relativeTo=new s.EntityRef(t)}}class r extends a{constructor(t){super(),this.focus=new s.EntityRef(t)}}class o extends a{constructor(){super(),this.up=new s.Vector3}}function l(t,e){return t.time<e.time}function c(t,e){return t.time<e}e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._positionKeyframes=[],this._focusKeyframes=[],this._upKeyframes=[],this._timeOfFirstUpdate=NaN,this._resolvePromise=null,this._rejectPromise=null,this._endPromise=new Promise((t,e)=>{this._resolvePromise=t,this._rejectPromise=e}),this.addModifiedState("position"),this.addModifiedState("velocity"),this.addModifiedState("orientation"),this.addModifiedState("angularVelocity")}setPositionKeyframe(t,e,i){if(void 0!==e){const a=new n(this.getEntity().getScene());a.time=t,a.position.copy(e),a.relativeTo.setName(i),s.Sort.add(a,this._positionKeyframes,l)}else{const e=s.Sort.getIndex(t,this._positionKeyframes,c);e<this._positionKeyframes.length&&t===this._positionKeyframes[e].time&&this._positionKeyframes.splice(e,1)}}setFocusKeyframe(t,e){if(void 0!==e){const i=new r(this.getEntity().getScene());i.time=t,i.focus.setName(void 0!==e?e:""),s.Sort.add(i,this._focusKeyframes,l)}else{const e=s.Sort.getIndex(t,this._focusKeyframes,c);e<this._focusKeyframes.length&&t===this._focusKeyframes[e].time&&this._focusKeyframes.splice(e,1)}}setUpKeyframe(t,e){if(void 0!==e){const i=new o;i.time=t,i.up.copy(e),s.Sort.add(i,this._upKeyframes,l)}else{const e=s.Sort.getIndex(t,this._upKeyframes,c);e<this._upKeyframes.length&&t===this._upKeyframes[e].time&&this._upKeyframes.splice(e,1)}}getEndPromise(){return this._endPromise}__destroy(){super.__destroy(),null!==this._rejectPromise&&this._rejectPromise()}__update(){const t=this.getEntity();let e=0;if(isNaN(this._timeOfFirstUpdate)){this._timeOfFirstUpdate=Date.now()/1e3;const e=new n(t.getScene());if(e.time=0,e.position.copy(t.getPosition()),e.relativeTo.setName(t.getParent().getName()),s.Sort.add(e,this._positionKeyframes,l),null!==t.getParent()){const e=new r(t.getScene());e.time=0,e.focus.setName(t.getParent().getName()),s.Sort.add(e,this._focusKeyframes,l)}const i=new o;i.time=0,t.getOrientation().getAxis(i.up,2),s.Sort.add(i,this._upKeyframes,l)}else e=Date.now()/1e3-this._timeOfFirstUpdate;let i=!1;const a=s.Sort.getIndex(e,this._positionKeyframes,c);if(a>0&&a<this._positionKeyframes.length){const i=this._positionKeyframes[a-1],n=this._positionKeyframes[a],r=i.relativeTo.get(),o=n.relativeTo.get();if(null!==r&&null!==o){let a=(e-i.time)/(n.time-i.time),l=r;a>=.5&&(l=o),t.getParent()!==l&&t.setParent(l);const c=s.Vector3.pool.get(),h=s.Vector3.pool.get();r.getPositionRelativeToEntity(c,i.position,o),o.getPositionRelativeToEntity(h,n.position,r);let d=i.position.magnitude()-r.getOcclusionRadius(),u=h.magnitude()-r.getOcclusionRadius(),p=c.magnitude()-o.getOcclusionRadius(),m=n.position.magnitude()-o.getOcclusionRadius();if(d=Math.max(d,u/1e4),u=Math.max(u,d/1e4),p=Math.max(p,m/1e4),m=Math.max(m,u/1e4),d!==u&&p!==m){const t=(Math.pow(u,a)*Math.pow(d,1-a)-d)/(u-d),e=(Math.pow(m,a)*Math.pow(p,1-a)-p)/(m-p);a=s.MathUtils.lerp(t,e,a)}const g=a*a;a=g/(2*(g-a)+1),r.getPositionRelativeToEntity(c,i.position,l),o.getPositionRelativeToEntity(h,n.position,l);const _=s.Vector3.pool.get();r===o?_.slerp(c,h,a):_.lerp(c,h,a),t.setPosition(_),s.Vector3.pool.release(_),s.Vector3.pool.release(c),s.Vector3.pool.release(h)}}else if(a===this._positionKeyframes.length){const e=this._positionKeyframes[this._positionKeyframes.length-1],s=e.relativeTo.get();t.getParent()!==s&&t.setParent(s),t.setPosition(e.position),i=!0}const h=s.Vector3.pool.get();h.setMagnitude(t.getPosition(),-1);const d=s.Vector3.pool.get();t.getOrientation().getAxis(d,2);let u=!1;const p=s.Sort.getIndex(e,this._focusKeyframes,c);if(p>0&&p<this._focusKeyframes.length){const i=this._focusKeyframes[p-1],a=this._focusKeyframes[p],n=i.focus.get(),r=a.focus.get(),o=t.getParent();if(null!==n&&null!==r&&null!==o){let l=(e-i.time)/(a.time-i.time);const c=l*l;l=c/(2*(c-l)+1);const d=s.Vector3.pool.get(),u=s.Vector3.pool.get();o.getPositionRelativeToEntity(d,t.getPosition(),n),o.getPositionRelativeToEntity(u,t.getPosition(),r),d.setMagnitude(d,-1),u.setMagnitude(u,-1),h.slerp(d,u,l),s.Vector3.pool.release(d),s.Vector3.pool.release(u)}}else if(p===this._focusKeyframes.length){const e=this._focusKeyframes[this._focusKeyframes.length-1].focus.get(),i=t.getParent();null!==e&&null!==i&&(i.getPositionRelativeToEntity(h,t.getPosition(),e),h.setMagnitude(h,-1)),u=!0}let m=!1;const g=s.Sort.getIndex(e,this._upKeyframes,c);if(g>0&&g<this._upKeyframes.length){const t=this._upKeyframes[g-1],i=this._upKeyframes[g];let s=(e-t.time)/(i.time-t.time);const a=s*s;s=a/(2*(a-s)+1),d.slerp(t.up,i.up,s)}else if(g===this._upKeyframes.length){const t=this._upKeyframes[this._upKeyframes.length-1];d.copy(t.up),m=!0}const _=s.Quaternion.pool.get();d.setNormalTo(h,d),_.setFromAxes(void 0,h,d),t.setOrientation(_),s.Quaternion.pool.release(_),s.Vector3.pool.release(h),i&&u&&m&&(this._rejectPromise=null,this._resolvePromise())}}},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=(t,e)=>t.time<e.time,n=(t,e)=>t.time<e,r=(t,e)=>t.time===e.time,o=new s.Vector3,l=new s.Vector3;e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._orbitalElementsKeyFrames=[],this.setCoverage(new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),this.addModifiedState("position"),this.addModifiedState("velocity")}getNumOrbitalElements(){return this._orbitalElementsKeyFrames.length}getOrbitalElements(t){return this._orbitalElementsKeyFrames[t]}addOrbitalElements(t,e){s.Sort.add({time:t,oe:e},this._orbitalElementsKeyFrames,a,r),this._updateCoverage()}removeOrbitalElements(t){if(t<0||this._orbitalElementsKeyFrames.length<=t)throw new Error(`Invalid index for ${this}.removeOrbitalElements`);this._orbitalElementsKeyFrames.splice(t,1),this._updateCoverage()}__updatePositionAtTime(t,e){this._getPositionAtTime(t,e)}__updateVelocityAtTime(t,e){this._getVelocityAtTime(t,e)}__update(){const t=this.getEntity().getScene().getEngine().getTime();this._getPositionAtTime(o,t)&&this.getEntity().setPosition(o),this._getVelocityAtTime(l,t)&&this.getEntity().setVelocity(l)}_getPositionAtTime(t,e){const i=s.Sort.getIndex(e,this._orbitalElementsKeyFrames,n),a=this._orbitalElementsKeyFrames[Math.max(i-1,0)],r=this._orbitalElementsKeyFrames[Math.min(i,this._orbitalElementsKeyFrames.length-1)],o=s.Vector3.pool.get(),c=s.Vector3.pool.get();a.oe.project(o,l,e),r.oe.project(c,l,e);const h=s.MathUtils.clamp01(r.time!==a.time?(e-a.time)/(r.time-a.time):0);return t.slerp(o,c,h),s.Vector3.pool.release(o),s.Vector3.pool.release(c),!0}_getVelocityAtTime(t,e){const i=s.Sort.getIndex(e,this._orbitalElementsKeyFrames,n),a=this._orbitalElementsKeyFrames[Math.max(i-1,0)],r=this._orbitalElementsKeyFrames[Math.min(i,this._orbitalElementsKeyFrames.length-1)],l=s.Vector3.pool.get(),c=s.Vector3.pool.get();a.oe.project(o,l,e),r.oe.project(o,c,e);const h=s.MathUtils.clamp01(r.time!==a.time?(e-a.time)/(r.time-a.time):0);return t.slerp(l,c,h),s.Vector3.pool.release(l),s.Vector3.pool.release(c),!0}_updateCoverage(){const t=new s.Interval(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);this._orbitalElementsKeyFrames.length>1&&(t.min=Math.min(t.min,this._orbitalElementsKeyFrames[0].time),t.max=Math.max(t.max,this._orbitalElementsKeyFrames[this._orbitalElementsKeyFrames.length-1].time)),this.setCoverage(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._pickedEntity=null,this._callback=null,this._triggerOnHover=!1,this._pickedPosition=new s.Vector3}getPickedEntity(){return this._pickedEntity}setPickedEntity(t){this._pickedEntity=t}getCallback(){return this._callback}setCallback(t){this._callback=t}getTriggerOnHover(){return this._triggerOnHover}setTriggerOnHover(t){this._triggerOnHover=t}getPickedPosition(){return this._pickedPosition}__update(){const t=this.getEntity().getScene().getEngine().getInput();if((t.isSelected()||this._triggerOnHover)&&null!==this._callback&&null!==this._pickedEntity){const e=t.getActiveViewport();if(null!==e){const i=e.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const a=s.Vector3.pool.get();e.getNormalSpacePositionFromPixelSpacePosition(a,t.getCursorPosition()),i.getCameraSpacePositionFromNormalSpacePosition(a,a),a.normalize(a);const n=s.Interval.pool.get(),r=this.getEntity().getParent().getComponentByType("spheroid");if(null!==r){const t=r.getEquatorialRadius()/r.getPolarRadius();a.rotateInverse(this._pickedEntity.getOrientation(),a),a.z*=t;const e=s.Vector3.pool.get();e.copy(this._pickedEntity.getCameraSpacePosition(i)),e.rotateInverse(this._pickedEntity.getOrientation(),e),e.z*=t,s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(n,a,e,r.getEquatorialRadius()),a.z/=t,a.rotate(this._pickedEntity.getOrientation(),a),s.Vector3.pool.release(e)}else{const t=this._pickedEntity.getCameraSpacePosition(i);s.Geometry.getLineSphereIntersectionWithLineStartAtOrigin(n,a,t,this._pickedEntity.getOcclusionRadius())}Number.isNaN(n.min)||(this._pickedPosition.mult(a,n.min),i.getEntity().getPositionRelativeToEntity(this._pickedPosition,this._pickedPosition,this._pickedEntity),this.getEntity().getScene().getEngine().addCallback(this._callback.bind(null,this._pickedPosition),!1)),s.Interval.pool.release(n),s.Vector3.pool.release(a)}}}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._rollSensitivity=.01,this._rollSmoothness=.8,this._rollAngleSmoothedValue=0,this.addModifiedState("orientation")}getRollSensitivity(){return this._rollSensitivity}setRollSensitivity(t){this._rollSensitivity=t}getRollSmoothness(){return this._rollSmoothness}setRollSmoothness(t){this._rollSmoothness=t}__update(){this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity);let t=0;const e=this.getEntity().getScene().getEngine().getInput(),i=e.getActiveViewport();if(null!==i){const s=i.getCamera();if(null!==s&&s.getEntity()===this.getEntity()){let i=1;e.isKeyPressed("x")&&(i=.05),e.isKeyPressed("shift")&&(i=5),e.isKeyPressed("c")&&(t+=this._rollSensitivity*i),e.isKeyPressed("z")&&(t-=this._rollSensitivity*i)}}if(this._rollAngleSmoothedValue=s.MathUtils.lerp(t,this._rollAngleSmoothedValue,this._rollSmoothness),Math.abs(this._rollAngleSmoothedValue)<1e-4&&(this._rollAngleSmoothedValue=0),0!==this._rollAngleSmoothedValue){const t=s.Quaternion.pool.get(),e=s.Quaternion.pool.get();e.setFromAxisAngle(s.Vector3.YAxis,this._rollAngleSmoothedValue),t.mult(this.getEntity().getOrientation(),e),this.getEntity().setOrientation(t),s.Quaternion.pool.release(t),s.Quaternion.pool.release(e)}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._rotation=new s.Quaternion,this._rotation.freeze(),this._rotatingPosition=!0,this._rotatingOrientation=!0,this.addModifiedState("position"),this.addModifiedState("orientation")}getRotation(){return this._rotation}setRotation(t){this._rotation.thaw(),this._rotation.copy(t),this._rotation.freeze()}isRotatingPosition(){return this._rotatingPosition}setRotatingPosition(t){this._rotatingPosition=t,t?this.addModifiedState("position"):this.removeModifiedState("position")}isRotatingOrientation(){return this._rotatingOrientation}setRotatingOrientation(t){this._rotatingOrientation=t,t?this.addModifiedState("orientation"):this.removeModifiedState("orientation")}__updatePositionAtTime(t,e){this._rotatingPosition&&t.rotate(this._rotation,t)}__updateVelocityAtTime(t,e){this._rotatingPosition&&t.rotate(this._rotation,t)}__updateOrientationAtTime(t,e){this._rotatingOrientation&&t.mult(this._rotation,t)}__update(){if(this._rotatingPosition){const t=s.Vector3.pool.get();t.rotate(this._rotation,this.getEntity().getPosition()),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}if(this._rotatingOrientation){const t=s.Quaternion.pool.get();t.mult(this._rotation,this.getEntity().getOrientation()),this.getEntity().setOrientation(t),s.Quaternion.pool.release(t)}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._rotatingPosition=!0,this._rotatingOrientation=!0,this.addModifiedState("position"),this.addModifiedState("orientation"),this.addDependentState("parent","orientation")}isRotatingPosition(){return this._rotatingPosition}setRotatingPosition(t){this._rotatingPosition=t,t?this.addModifiedState("position"):this.removeModifiedState("position")}isRotatingOrientation(){return this._rotatingOrientation}setRotatingOrientation(t){this._rotatingOrientation=t,t?this.addModifiedState("orientation"):this.removeModifiedState("orientation")}__updatePositionAtTime(t,e){if(this._rotatingPosition){const i=this.getEntity().getParent();if(null!==i){const a=s.Quaternion.pool.get();i.getOrientationAtTime(a,e),t.rotate(a,t),s.Quaternion.pool.release(a)}}}__updateVelocityAtTime(t,e){if(this._rotatingPosition){const i=this.getEntity().getParent();if(null!==i){const a=s.Quaternion.pool.get();i.getOrientationAtTime(a,e),t.rotate(a,t),s.Quaternion.pool.release(a)}}}__updateOrientationAtTime(t,e){if(this._rotatingOrientation){const i=this.getEntity().getParent();if(null!==i){const a=s.Quaternion.pool.get();i.getOrientationAtTime(a,e),t.mult(a,t),s.Quaternion.pool.release(a)}}}__update(){const t=this.getEntity().getParent();if(null!==t){if(this._rotatingPosition){const e=s.Vector3.pool.get();e.rotate(t.getOrientation(),this.getEntity().getPosition()),this.getEntity().setPosition(e),s.Vector3.pool.release(e)}if(this._rotatingOrientation){const e=s.Quaternion.pool.get();e.mult(t.getOrientation(),this.getEntity().getOrientation()),this.getEntity().setOrientation(e),s.Quaternion.pool.release(e)}}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._scale=1,this.addModifiedState("position")}getScale(){return this._scale}setScale(t){this._scale=t}__updatePositionAtTime(t,e){t.mult(t,this._scale)}__updateVelocityAtTime(t,e){t.mult(t,this._scale)}__update(){const t=s.Vector3.pool.get();t.mult(this.getEntity().getPosition(),this._scale),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._callback=null}getCallback(){return this._callback}setCallback(t){this._callback=t}__update(){const t=this.getEntity().getScene().getEngine().getInput();if(t.isSelected()&&null!==this._callback){const e=t.getActiveViewport();if(null!==e){const i=e.getCamera();if(null!==i&&i.getEntity()===this.getEntity()){const a=s.Vector3.pool.get();e.getNormalSpacePositionFromPixelSpacePosition(a,t.getSelectedPosition());let n=null,r=0;const o=s.Vector2.pool.get();o.set(a.x,a.y);const l=this.getEntity().getScene().getNumEntities();for(let t=0;t<l;t++){const e=this.getEntity().getScene().getEntity(t);if(e.isEnabled()){const t=e.getComponentByType("label");if(null!==t&&"loaded"===t.getLoadState()){const s=t.getNormalSpaceBounds(i);if(void 0!==s&&s.contains(o)){const t=e.getCameraSpacePosition(i).magnitude();(null===n||r>t)&&(n=e,r=t)}}}}s.Vector2.pool.release(o),null===n&&(i.getCameraSpacePositionFromNormalSpacePosition(a,a),a.mult(a,1/a.magnitude()),n=i.getNearestIntersectingEntity(a)),s.Vector3.pool.release(a),this.getEntity().getScene().getEngine().addCallback(this._callback.bind(null,n),!1)}}}}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._parent=new s.EntityRef(this.getEntity().getScene())}getParent(){return this._parent.getName()}setParent(t){""!==this._parent.getName()&&this.removeDependentState(this._parent.getName(),"position"),this._parent.setName(t),""!==this._parent.getName()&&this.addDependentState(this._parent.getName(),"position")}__update(){const t=this._parent.get();null!==t&&this.getEntity().setParent(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new s.THREE.Quaternion;e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._axis=new s.Vector3(0,0,1),this._axis.freeze(),this._axisRelativeToEntity=!0,this._rate=0,this._referenceAngle=0,this._referenceTime=void 0,this._clampedToRealTime=!1,this._usingRealTime=!1,this._rotatingPosition=!1,this._joint="",this._jointObject=null,this._model=null,this._lastTime=i.getScene().getEngine().getTime(),this.addModifiedState("orientation")}getAxis(){return this._axis}isAxisRelativeToEntity(){return this._axisRelativeToEntity}setAxis(t,e){this._axis.thaw(),this._axis.copy(t),this._axis.freeze(),this._axisRelativeToEntity=e}getRate(){return this._rate}setRate(t){this._rate=t}getReferenceAngle(){return this._referenceAngle}setReferenceAngle(t){this._referenceAngle=t}getReferenceTime(){return this._referenceTime}setReferenceTime(t){this._referenceTime=t}isClampedToRealTime(){return this._clampedToRealTime}setClampedToRealTime(t){this._clampedToRealTime=t}isUsingRealTime(){return this._usingRealTime}setUsingRealTime(t){this._usingRealTime=t}isRotatingPosition(){return this._rotatingPosition}setRotatingPosition(t){this._rotatingPosition=t,t?this.addModifiedState("position"):this.removeModifiedState("position")}setJoint(t,e){if(this._joint=t,e)this._model=e;else{const t=this.getEntity().get("model");null!==t&&(this._model=t)}""!==this._joint?this.removeModifiedState("orientation"):this.addModifiedState("orientation")}__updatePositionAtTime(t,e){if(this._rotatingPosition){let i=0;this._usingRealTime||void 0!==this._referenceTime&&(i=e-this._referenceTime,i-=this._referenceAngle/this._rate);const a=s.Quaternion.pool.get();if(a.setFromAxisAngle(this._axis,this._rate*i),null===this._jointObject){if(this._axisRelativeToEntity){const t=s.Quaternion.pool.get();this.getEntity().getOrientationAtTime(t,e),a.mult(t,a),a.multInverseR(a,t),s.Quaternion.pool.release(t)}t.rotate(a,t)}s.Quaternion.pool.release(a)}}__updateOrientationAtTime(t,e){t.isNaN()&&t.copy(s.Quaternion.Identity);let i=0;this._usingRealTime||void 0!==this._referenceTime&&(i=e-this._referenceTime,i-=this._referenceAngle/this._rate);const a=s.Quaternion.pool.get();a.setFromAxisAngle(this._axis,this._rate*i),null===this._jointObject&&(this._axisRelativeToEntity&&(a.mult(t,a),a.multInverseR(a,t)),t.mult(a,t),t.normalize(t)),s.Quaternion.pool.release(a)}__update(){this.getEntity().getOrientation().isNaN()&&this.getEntity().setOrientation(s.Quaternion.Identity);const t=this.getEntity().getScene().getEngine();let e=0;if(this._usingRealTime)e=t.getDeltaTime();else if(void 0!==this._referenceTime)e=t.getTime()-this._referenceTime,e-=this._referenceAngle/this._rate;else if(e=t.getTime()-this._lastTime,this._clampedToRealTime){const i=t.getDeltaTime();e=s.MathUtils.clamp(e,-i,i)}const i=s.Quaternion.pool.get();if(i.setFromAxisAngle(this._axis,this._rate*e),null!==this._jointObject&&null!==this._model.getThreeJsObjects()[0]&&(this._jointObject=null),""!==this._joint&&(null===this._jointObject||this._jointObject.name!==this._joint)&&null!==this._model){const t=this._model.getThreeJsObjectByName(this._joint);null!==t&&(this._jointObject=t)}const n=this.getEntity().getOrientation();if(null!==this._jointObject)this._axisRelativeToEntity||(i.multInverseL(n,i),i.mult(i,n)),a.set(i.x,i.y,i.z,i.w),this._jointObject.quaternion.multiplyQuaternions(a,this._jointObject.quaternion),this._rotatingPosition&&this._jointObject.position.applyQuaternion(a);else{const t=s.Quaternion.pool.get();this._axisRelativeToEntity&&(i.mult(n,i),i.multInverseR(i,n)),t.mult(i,n),t.normalize(t);const e=s.Vector3.pool.get();if(e.mult(this._axis,this._rate),this._axisRelativeToEntity&&e.rotate(t,e),this.getEntity().setOrientation(t),this.getEntity().setAngularVelocity(e),s.Vector3.pool.release(e),s.Quaternion.pool.release(t),this._rotatingPosition){const t=s.Vector3.pool.get();t.rotate(i,this.getEntity().getPosition()),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}}s.Quaternion.pool.release(i),this._lastTime=t.getTime()}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._tapCallback=null}getTapCallback(){return this._tapCallback}setTapCallback(t){this._tapCallback=t}__update(){const t=this.getEntity().getScene().getEngine().getInput();!t.isSelected()&&t.getDraggedOffset().isZero()||null!==this._tapCallback&&this._tapCallback()}}},function(t,e,i){"use strict";i.r(e);var s=i(36);const a=new Date;e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._satrec=null,this.addModifiedState("position"),this.addModifiedState("velocity")}setSource(t,e){this.getEntity().getScene().getEngine().getDownloader().download(e,!0).then(async e=>{if("cancelled"===e.status)return Promise.resolve();if("failed"===e.status)return Promise.reject(new Error('Failed to load TLE controller file "'+e.url+'": '+e.errorMessage));if(!(e.content instanceof ArrayBuffer))return Promise.reject(new Error('Failed to load TLE controller file "'+e.url+'": Not a binary file.'));const i=new s.Reader(e.content);for(;;){let e="";try{e=i.readLine()}catch(t){throw new Error("Could not find entry.")}if(0===e.length)break;const a=i.readLine(),n=i.readLine();if(e.includes(t)||a.includes(t)){this._satrec=s.SatelliteJs.twoline2satrec(a,n);break}}}).catch(i=>{throw new Error(`While loading TLE "${t}" from "${e}": ${i}`)})}__updatePositionAtTime(t,e){if(null!==this._satrec){a.setTime(1e3*s.TimeUtils.etToUnix(e));const i=s.SatelliteJs.propagate(this._satrec,a);"boolean"!=typeof i.position&&t.set(i.position.x,i.position.y,i.position.z)}}__updateVelocityAtTime(t,e){if(null!==this._satrec){a.setTime(1e3*s.TimeUtils.etToUnix(e));const i=s.SatelliteJs.propagate(this._satrec,a);"boolean"!=typeof i.velocity&&t.set(i.velocity.x,i.velocity.y,i.velocity.z)}}__update(){const t=s.Vector3.pool.get();if(t.copy(this.getEntity().getScene().getEntity("earth").getPosition()),null!==this._satrec&&!isNaN(t.x)){a.setTime(1e3*s.TimeUtils.etToUnix(this.getEntity().getScene().getEngine().getTime()));const t=s.SatelliteJs.propagate(this._satrec,a);if("boolean"!=typeof t.position&&"boolean"!=typeof t.velocity){const e=s.Vector3.pool.get(),i=s.Vector3.pool.get();e.set(t.position.x,t.position.y,t.position.z),i.set(t.velocity.x,t.velocity.y,t.velocity.z),this.getEntity().setPosition(e),this.getEntity().setVelocity(i),s.Vector3.pool.release(e),s.Vector3.pool.release(i)}}s.Vector3.pool.release(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._initialPosition=new s.Vector3,this._initialPosition.copy(i.getPosition()),this._initialOrientation=new s.Quaternion,this._initialOrientation.copy(i.getOrientation()),this._initialParent=i.getParent(),this._transitionStart=Number.NaN,this._transitionTime=1,this._transitionFunction=this._lerpTransitionFunction,this._parent=new s.EntityRef(this.getEntity().getScene()),this._resolvePromise=null,this._rejectPromise=null,this._endPromise=new Promise((t,e)=>{this._resolvePromise=t,this._rejectPromise=e}),this.getEntity().addController("setParent",void 0,this.getEntity().getController(0))}getTransitionTime(){return this._transitionTime}setTransitionTime(t){this._transitionTime=t}setTransitionFunction(t){this._transitionFunction=t}getParent(){return this._parent.getName()}setParent(t){this._parent.setName(t);const e=this.getEntity().getController(0);"setParent"===e.getType()&&e.setParent(t)}getEndPromise(){return this._endPromise}__destroy(){super.__destroy(),null!==this._rejectPromise&&this._rejectPromise()}__update(){Number.isNaN(this._transitionStart)&&(this._transitionStart=Date.now()/1e3),null===this._initialParent&&(this._initialParent=this.getEntity().getParent(),this._initialPosition=this.getEntity().getPosition(),this._initialOrientation=this.getEntity().getOrientation(),this._transitionTime=0);const t=this.getEntity().getController(0);"setParent"===t.getType()&&(Date.now()/1e3-this._transitionStart>=this._transitionTime/2?(this.getEntity().removeController(t),this._initialParent.getPositionRelativeToEntity(this._initialPosition,this._initialPosition,this.getEntity().getParent())):this.getEntity().setParent(this._initialParent));const e=this.getEntity().getPosition(),i=this.getEntity().getOrientation();let a=s.MathUtils.clamp01((Date.now()/1e3-this._transitionStart)/this._transitionTime);Number.isNaN(a)&&(a=1),this._transitionFunction(this.getEntity(),this._initialPosition,e,this._initialOrientation,i,a),Date.now()/1e3-this._transitionStart>=this._transitionTime&&(this._rejectPromise=null,this.getEntity().getScene().getEngine().addCallback(()=>{this.getEntity().removeController(this),this._resolvePromise()},!1))}_lerpTransitionFunction(t,e,i,a,n,r){const o=s.Vector3.pool.get(),l=s.Quaternion.pool.get();o.lerp(e,i,r),l.slerp(a,n,r),t.setPosition(o),t.setOrientation(l),s.Vector3.pool.release(o),s.Quaternion.pool.release(l)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._translation=new s.Vector3(0,0,0),this._translation.freeze(),this._relativeToOrientation=!1,this.addModifiedState("position")}getTranslation(){return this._translation}setTranslation(t){this._translation.thaw(),this._translation.copy(t),this._translation.freeze()}setRelativeToOrientation(t){this._relativeToOrientation=t}__updatePositionAtTime(t,e){const i=s.Vector3.pool.get();if(this._relativeToOrientation){const t=s.Quaternion.pool.get();this.getEntity().getOrientationAtTime(t,e),i.rotate(t,this._translation),s.Quaternion.pool.release(t)}else i.copy(this._translation);t.add(i,t),s.Vector3.pool.release(i)}__update(){const t=s.Vector3.pool.get();this._relativeToOrientation?t.rotate(this.getEntity().getOrientation(),this._translation):t.copy(this._translation),t.add(t,this.getEntity().getPosition()),this.getEntity().setPosition(t),s.Vector3.pool.release(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._zoomSensitivity=.05,this._zoomSmoothness=.8,this._zoomSmoothedValue=1,this._distanceClamp=new s.Interval(.001,Number.POSITIVE_INFINITY),this._distanceClamp.freeze(),this._useSpheroidRadiusForDistance=!1,this.addModifiedState("position")}getZoomSensitivity(){return this._zoomSensitivity}setZoomSensitivity(t){this._zoomSensitivity=t}getZoomSmoothness(){return this._zoomSmoothness}setZoomSmoothness(t){this._zoomSmoothness=t}getDistanceClamp(){return this._distanceClamp}setDistanceClamp(t){this._distanceClamp.thaw(),this._distanceClamp.copy(t),this._distanceClamp.freeze()}getUseSpheroidRadiusForDistance(){return this._useSpheroidRadiusForDistance}setUseSpheroidRadiusForDistance(t){this._useSpheroidRadiusForDistance=t}__update(){const t=this.getEntity().getScene().getEngine().getInput();let e=1;const i=t.getActiveViewport();if(null!==i){const s=i.getCamera();if(null!==s&&s.getEntity()===this.getEntity()){let i=1;t.isKeyPressed("x")&&(i=.05),t.isKeyPressed("shift")&&(i=5);const s=t.getZoomedOffset();0!==s&&(e*=Math.pow(2,s*this._zoomSensitivity*i)),t.isKeyPressed("w")&&(e/=Math.pow(2,this._zoomSensitivity*i)),t.isKeyPressed("s")&&(e*=Math.pow(2,this._zoomSensitivity*i))}}this._zoomSmoothedValue=s.MathUtils.lerp(e,this._zoomSmoothedValue,this._zoomSmoothness),Math.abs(1-this._zoomSmoothedValue)<1e-7&&(this._zoomSmoothedValue=1);let a=1;const n=s.LatLonAlt.pool.get();if(this._useSpheroidRadiusForDistance&&null!==this.getEntity().getParent()){const t=this.getEntity().getParent().getComponentByType("spheroid");if(null!==t){const e=s.Vector3.pool.get();e.rotateInverse(this.getEntity().getParent().getOrientation(),this.getEntity().getPosition()),t.llaFromXYZ(n,e),a=n.alt,s.Vector3.pool.release(e)}else a=this.getEntity().getPosition().magnitude()-this.getEntity().getParent().getOcclusionRadius()}else a=this.getEntity().getPosition().magnitude();Number.isNaN(a)&&(a=1),(a*=this._zoomSmoothedValue)<this._distanceClamp.min&&(a=this._distanceClamp.min,this._zoomSmoothedValue=1),a>this._distanceClamp.max&&(a=this._distanceClamp.max,this._zoomSmoothedValue=1);const r=s.Vector3.pool.get();let o=a;if(this._useSpheroidRadiusForDistance&&null!==this.getEntity().getParent()){const t=this.getEntity().getParent().getComponentByType("spheroid");null!==t?(n.alt=a,t.xyzFromLLA(r,n),o=r.magnitude()):o=a+this.getEntity().getParent().getOcclusionRadius()}r.normalize(this.getEntity().getPosition()),r.mult(r,o),this.getEntity().setPosition(r),s.Vector3.pool.release(r),s.LatLonAlt.pool.release(n)}}},function(t,e,i){"use strict";i.r(e);var s=i(36);class a{}a.Components=new Map,a.Components.set("atmosphere",s.AtmosphereComponent),a.Components.set("camera",s.CameraComponent),a.Components.set("cmts",s.CMTSComponent),a.Components.set("cometTail",s.CometTailComponent),a.Components.set("connectedSprite",s.ConnectedSpriteComponent),a.Components.set("div",s.DivComponent),a.Components.set("dynEnvMap",s.DynamicEnvironmentMapComponent),a.Components.set("gizmo",s.GizmoComponent),a.Components.set("label",s.LabelComponent),a.Components.set("lightSource",s.LightSourceComponent),a.Components.set("model",s.ModelComponent),a.Components.set("orbitalParticles",s.OrbitalParticlesComponent),a.Components.set("particleSpray",s.ParticleSprayComponent),a.Components.set("rings",s.RingsComponent),a.Components.set("skybox",s.SkyboxComponent),a.Components.set("spheroid",s.SpheroidComponent),a.Components.set("spheroidLOD",s.SpheroidLODComponent),a.Components.set("spout",s.SpoutComponent),a.Components.set("sprite",s.SpriteComponent),a.Components.set("starfield",s.StarfieldComponent),a.Components.set("trail",s.TrailComponent),a.Controllers=new Map,a.Controllers.set("align",s.AlignController),a.Controllers.set("animdata",s.AnimdataController),a.Controllers.set("coverage",s.CoverageController),a.Controllers.set("dynamo",s.DynamoController),a.Controllers.set("fixed",s.FixedController),a.Controllers.set("fixedToParent",s.FixedToParentController),a.Controllers.set("freeFly",s.FreeFlyController),a.Controllers.set("groundClamp",s.GroundClampController),a.Controllers.set("keyframe",s.KeyframeController),a.Controllers.set("look",s.LookController),a.Controllers.set("modelAnimate",s.ModelAnimateController),a.Controllers.set("orbit",s.OrbitController),a.Controllers.set("orbitKeyframe",s.OrbitKeyframeController),a.Controllers.set("orbitalElements",s.OrbitalElementsController),a.Controllers.set("pick",s.PickController),a.Controllers.set("roll",s.RollController),a.Controllers.set("rotate",s.RotateController),a.Controllers.set("rotateByParentOrientation",s.RotateByParentOrientationController),a.Controllers.set("scale",s.ScaleController),a.Controllers.set("select",s.SelectController),a.Controllers.set("setParent",s.SetParentController),a.Controllers.set("spin",s.SpinController),a.Controllers.set("tap",s.TapController),a.Controllers.set("tle",s.TLEController),a.Controllers.set("transition",s.TransitionController),a.Controllers.set("translate",s.TranslateController),a.Controllers.set("zoom",s.ZoomController),e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(159);i.d(e,"Cameras",(function(){return s.default}));var a=i(160);i.d(e,"DateTime",(function(){return a.default}));var n=i(161);i.d(e,"Entity",(function(){return n.default}));var r=i(162);i.d(e,"Parenting",(function(){return r.default}));var o=i(163);i.d(e,"Placemarks",(function(){return o.default}));var l=i(164);i.d(e,"SceneHelpers",(function(){return l.default}));var c=i(165);i.d(e,"Transitions",(function(){return c.default}));var h=i(166);i.d(e,"AnnulusComponent",(function(){return h.default}));var d=i(167);i.d(e,"CelestialGridComponent",(function(){return d.default}));var u=i(168);i.d(e,"ConstellationsComponent",(function(){return u.default}));var p=i(169);i.d(e,"DiscGridComponent",(function(){return p.default}));var m=i(170);i.d(e,"OrbitLineComponent",(function(){return m.default}));var g=i(171);i.d(e,"TorusComponent",(function(){return g.default}));var _=i(172);i.d(e,"WMTSComponent",(function(){return _.default}));var f=i(265);i.d(e,"ZoomFitController",(function(){return f.default}));var y=i(266);i.d(e,"PositionSumController",(function(){return y.default}));var b=i(267);i.d(e,"PlanetsAndStars",(function(){return b.default}));var T=i(268);i.d(e,"MinorPlanets",(function(){return T.default}));var v=i(269);i.d(e,"Comets",(function(){return v.default}));var E=i(271);i.d(e,"EarthMoon",(function(){return E.default}));var x=i(272);i.d(e,"JupiterRegularMoons",(function(){return x.default}));var S=i(273);i.d(e,"JupiterIrregularMoons",(function(){return S.default}));var I=i(274);i.d(e,"MarsMoons",(function(){return I.default}));var N=i(275);i.d(e,"NeptuneMoons",(function(){return N.default}));var w=i(276);i.d(e,"SaturnMajorMoons",(function(){return w.default}));var A=i(277);i.d(e,"SaturnMinorMoons",(function(){return A.default}));var C=i(278);i.d(e,"UranusMajorMoons",(function(){return C.default}));var P=i(279);i.d(e,"UranusMinorMoons",(function(){return P.default}));var M=i(280);i.d(e,"EarthSpacecraft",(function(){return M.default}));var R=i(281);i.d(e,"LunarSpacecraft",(function(){return R.default}));var V=i(282);i.d(e,"MarsSpacecraft",(function(){return V.default}));var O=i(283);i.d(e,"MercurySpacecraft",(function(){return O.default}));var F=i(284);i.d(e,"OuterPlanetSpacecraft",(function(){return F.default}));var L=i(285);i.d(e,"SmallBodySpacecraft",(function(){return L.default}));var z=i(287);i.d(e,"SolarSpacecraft",(function(){return z.default}));var D=i(288);i.d(e,"VenusSpacecraft",(function(){return D.default}));var U=i(289);i.d(e,"Comparison",(function(){return U.default}))},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class{static createFullSizeViewportAndCamera(t,e="main",i="camera"){const s=t.getEngine().addViewport(e);s.getDiv().style.width="100%",s.getDiv().style.height="100%";const a=t.addEntity(i).addComponent("camera");s.setCamera(a)}static focusOnEntity(t,e,{up:i=!0,orbiter:a=!1}){const n=t.addController("align");n.setPrimaryAlignType("point"),n.setPrimaryAxis(s.Vector3.YAxis),n.setPrimaryTargetEntity(e.getName()),i&&(a?(n.setSecondaryAlignType("position"),n.setSecondaryAxis(s.Vector3.ZAxis),n.setSecondaryTargetEntity(e.getName())):(n.setSecondaryAlignType("align"),n.setSecondaryAxis(s.Vector3.ZAxis),n.setSecondaryTargetEntity(e.getName()),n.setSecondaryTargetAxis(s.Vector3.ZAxis)))}static async lookAtEntity(t,e,{duration:i=.5,finalUp:a,finalUpRelativeEntity:n,finalUpPosition:r=!1}){if(t.getPosition().isNaN())return;const o=new s.Vector3;e.getPositionRelativeToEntity(o,s.Vector3.Zero,t),o.normalize(o);for(let e=0;e<t.getNumControllers();e++)t.getController(e).hasModifiedState("orientation")&&(t.removeController(e),e--);const l=t.addController("align");l.setPrimaryAlignType("point"),l.setPrimaryAxis(s.Vector3.YAxis),l.setPrimaryTargetEntity(e.getName()),void 0!==a&&(void 0===n&&(n=e),r?(l.setSecondaryAlignType("position"),l.setSecondaryAxis(s.Vector3.ZAxis),l.setSecondaryTargetEntity(n.getName())):(l.setSecondaryAlignType("align"),l.setSecondaryAxis(s.Vector3.ZAxis),l.setSecondaryTargetEntity(n.getName()),l.setSecondaryTargetAxis(a)));const c=t.addController("transition");c.setTransitionTime(i),await c.getEndPromise()}static async goToEntity(t,e,{up:i=!0,orbiter:a=!1,fixedToParent:n=!1,duration:r=1,distance:o,zoom:l=!0,destination:c,destinationUp:h,destinationInFocusFrame:d=!1,transitionFunction:u}){o||(o=5*e.getExtentsRadius()),(t.getPosition().isNaN()||t.getOrientation().isNaN())&&(t.setParent(e),void 0===c?t.setPosition(new s.Vector3(0,-o,0)):t.setPosition(c),t.setOrientation(s.Quaternion.Identity),r=0),void 0===c&&(c=new s.Vector3,t.getPositionRelativeToEntity(c,s.Vector3.Zero,e),c.normalize(c),c.mult(c,o),c.isNaN()&&c.set(0,-o,0)),t.clearControllers();const p=t.addController("fixed");if(p.setPosition(c),void 0!==h){const t=new s.Vector3,e=new s.Vector3;t.neg(c),t.normalize(t),e.setNormalTo(t,h);const i=new s.Quaternion;i.setFromAxes(void 0,t,e),p.setOrientation(i)}if(d){const e=t.addController("rotateByParentOrientation");void 0===h&&e.setRotatingOrientation(!1)}this.focusOnEntity(t,e,{up:i,orbiter:a});const m=t.addController("transition");m.setTransitionTime(r),m.setParent(e.getName()),u&&m.setTransitionFunction(u),await m.getEndPromise(),t.clearControllers();const g=t.addController("orbit");i?a?g.setYawAxisType("position"):g.setYawAxisType("z-axis"):t.addController("roll"),n&&t.addController("fixedToParent"),l&&t.addController("zoom"),this.focusOnEntity(t,e,{up:i,orbiter:a})}static pickOnEntity(t,e,i){const a=t.addController("pick");a.setPickedEntity(e),a.setCallback(t=>{const a=e.getComponentByType("spheroid");if(null!==a){const n=s.Vector3.pool.get();n.rotateInverse(e.getOrientation(),t);const r=s.LatLonAlt.pool.get();a.llaFromXYZ(r,n),i(n,r),s.LatLonAlt.pool.release(r),s.Vector3.pool.release(n)}})}static getDistanceToFitEntities(t,e,i,a){const n=t.getComponentByType("camera");if(null===n)return NaN;let r=0;const o=s.Vector3.pool.get(),l=Math.sin(n.getHorizontalFieldOfView()/2),c=Math.sin(n.getVerticalFieldOfView()/2),h=Math.tan(n.getHorizontalFieldOfView()/2),d=Math.tan(n.getVerticalFieldOfView()/2);for(let t=0;t<a.length;t++){const n=a[t];let u=0;const p=n.get("rings");null!==p&&(u=p.getOuterRadius()),n.getPositionRelativeToEntity(o,s.Vector3.Zero,i),o.rotateInverse(e,o),r=Math.max(r,Math.abs(o.x)/h+Math.max(n.getExtentsRadius(),u)/l-o.y),r=Math.max(r,Math.abs(o.z)/d+Math.max(n.getExtentsRadius(),u)/c-o.y)}return s.Vector3.pool.release(o),r}}},function(t,e,i){"use strict";i.r(e);var s=i(35);const a=[31,28,31,30,31,30,31,31,30,31,30,31],n=new Date;e.default=class{constructor(t=1,e=1,i=1,s=0,a=0,n=0,r=0){this.year=t,this.month=e,this.day=i,this.hour=s,this.minute=a,this.second=n,this.millisecond=r}copy(t){this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=t.second,this.millisecond=t.millisecond}fromET(t){const e=s.TimeUtils.etToUnix(t);n.setTime(1e3*e),this.year=n.getUTCFullYear(),this.month=n.getUTCMonth()+1,this.day=n.getUTCDate(),this.hour=n.getUTCHours(),this.minute=n.getUTCMinutes(),this.second=n.getUTCSeconds(),this.millisecond=n.getUTCMilliseconds();for(let i=0,a=s.TimeUtils.leapSeconds.length;i<a;i++)if(Math.floor(e)===s.TimeUtils.leapSeconds[i]&&e===s.TimeUtils.etToUnix(t-1)){this.second+=1;break}}toET(){n.setUTCFullYear(this.year),n.setUTCMonth(this.month-1),n.setUTCDate(this.day),n.setUTCHours(this.hour),n.setUTCMinutes(this.minute),n.setUTCSeconds(this.second),n.setUTCMilliseconds(this.millisecond);const t=n.getTime()/1e3;let e=s.TimeUtils.unixToEt(t);if(60===this.second)for(let i=0,a=s.TimeUtils.leapSeconds.length;i<a;i++)if(Math.floor(t)===s.TimeUtils.leapSeconds[i]+1){e-=1;break}return e}fromDOY(t,e,i=0,s=0,a=0,n=0){let r=0;this.year=t,this.month=1,this.hour=i,this.minute=s,this.second=a,this.millisecond=n;let o=this.getDaysInMonth();for(;e>r+o&&this.month<12;)r+=o,this.month+=1,o=this.getDaysInMonth();this.day=e-r}toDOY(){const t=this.month;let e=0;for(this.month=1;this.month<t;this.month++)e+=this.getDaysInMonth();return this.month=t,e+=this.day}isLeapYear(){return this.year%4==0&&this.year%100!=0||this.year%400==0}getDaysInMonth(){let t=a[this.month-1];return 2===this.month&&this.isLeapYear()&&(t+=1),t}parse(t){this.year=parseInt(t.substring(0,4)),t.length>5?this.month=parseInt(t.substring(5,7)):this.month=1,t.length>8?this.day=parseInt(t.substring(8,10)):this.day=1,t.length>11?(this.hour=parseInt(t.substring(11,13)),this.minute=parseInt(t.substring(14,16))):(this.hour=0,this.minute=0),t.length>17?this.second=parseInt(t.substring(17,19)):this.second=0,t.length>20?this.millisecond=parseInt(t.substring(20))*Math.pow(10,23-t.length):this.millisecond=0}parseDOY(t){const e=parseInt(t.substring(0,4));let i=1;t.length>5&&(i=parseInt(t.substring(5,8))),this.fromDOY(e,i),t.length>9?(this.hour=parseInt(t.substring(9,11)),this.minute=parseInt(t.substring(12,14))):(this.hour=0,this.minute=0),t.length>15?this.second=parseInt(t.substring(15,17)):this.second=0,t.length>18?this.millisecond=parseInt(t.substring(18))*Math.pow(10,21-t.length):this.millisecond=0}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")} ${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}.${Math.floor(1e3*this.millisecond).toString().padStart(6,"0")}`}toStringDOY(){return`${this.year.toString().padStart(4,"0")}-${this.toDOY().toString().padStart(3,"0")}`}}},function(t,e,i){"use strict";i.r(e);var s=i(35);class a{static register(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this._entities.set(e,t[e])}static create(t,e,i){const s=a._entities.get(t);if(void 0===s)throw new Error("Could not find the options for the entity with name "+t);return this.createFromOptions(t,s,e,i)}static createFromOptions(t,e,i,a){let n=t;a&&(a.namePrefix&&(n=a.namePrefix+n),a.nameSuffix&&(n+=a.nameSuffix));let r=i.getEntity(n);if(null!==r)return r;r=i.addEntity(n);try{e.radius&&(r.setOcclusionRadius(e.radius),r.setExtentsRadius(e.radius)),e.occlusionRadius&&r.setOcclusionRadius(e.occlusionRadius),e.extentsRadius&&r.setExtentsRadius(e.extentsRadius);for(const[t,i]of e.parents)r.addParentingTableEntry(t,i);if(e.coverages){let t=r.get("coverage");null===t&&(t=r.addController("coverage"));for(let i=0,a=e.coverages.length;i<a;i++)t.addCoverage(new s.Interval(e.coverages[i].coverage[0],e.coverages[i].coverage[1]),e.coverages[i].enter,e.coverages[i].exit,e.coverages[i].update)}if(e.label){const t=r.addComponent("div").getDiv();t.innerHTML=e.label,t.className="pioneer-label-div"}if(e.trail){const t=r.addComponent("trail");if(t.setStartTime(e.trail.length),e.trail.color?t.setColor(new s.Color(e.trail.color[0],e.trail.color[1],e.trail.color[2],e.trail.color[3])):t.setColor(new s.Color(1,1,1,.5)),e.trail.relativeTo&&t.setRelativeToEntity(e.trail.relativeTo),e.trail.lengthCoverages){let t=r.get("coverage");null===t&&(t=r.addController("coverage",void 0,r.getController(0)));for(let i=0,a=e.trail.lengthCoverages.length;i<a;i++){const a=e.trail.lengthCoverages[i];t.addCoverage(new s.Interval(a[1],a[2]),t=>{t.get("trail").setStartTime(a[0])},t=>{t.get("trail").setStartTime(e.trail.length)})}}this._processCoverages(r,t,e.trail.coverages)}if(e.spheroid){const t=r.addComponent("spheroid");t.setEquatorialRadius(e.spheroid.equatorialRadius),t.setPolarRadius(e.spheroid.polarRadius),t.setPlanetographic(e.spheroid.planetographic)}if(e.spheroidLOD){const t=r.addComponent("spheroidLOD");if(e.spheroidLOD.features)for(let i=0,s=e.spheroidLOD.features.length;i<s;i++)t.setFeature(e.spheroidLOD.features[i],!0);if(e.spheroidLOD.textures){t.setMapping("cube");for(const i in e.spheroidLOD.textures)t.setTexture(i,"$STATIC_ASSETS_URL/maps/"+e.spheroidLOD.textures[i].url,e.spheroidLOD.textures[i].sizes)}e.spheroidLOD.shadowEntities&&t.setShadowEntities(e.spheroidLOD.shadowEntities),this._processCoverages(r,t,e.spheroidLOD.coverages)}if(e.cmts){const t=r.addComponent("cmts");if(e.cmts.textures){for(const i in e.cmts.textures){const s=e.cmts.textures[i];t.setBaseUrl(i,s)}t.setMaxLevel(e.cmts.maxLevel||0),this._processCoverages(r,t,e.cmts.coverages)}e.cmts.shadowEntities&&t.setShadowEntities(e.cmts.shadowEntities),this._processCoverages(r,t,e.cmts.coverages)}if(e.model){const t=r.addComponent("model");if(t.setUrl(e.model.url),e.model.rotate){const i=new s.Quaternion;i.set(1,0,0,0);for(let t=0,a=e.model.rotate.length;t<a;t++){let a,n;const r=e.model.rotate[t];if(void 0!==r.x)a=new s.Vector3(1,0,0),n=r.x;else if(void 0!==r.y)a=new s.Vector3(0,1,0),n=r.y;else{if(void 0===r.z)throw new Error("Invalid model rotate axis.");a=new s.Vector3(0,0,1),n=r.z}n=s.MathUtils.degToRad(n);const o=new s.Quaternion;o.setFromAxisAngle(a,n),i.mult(o,i)}t.setRotation(i)}if(e.model.scale){const i=e.model.scale;Array.isArray(i)?t.setScale(new s.Vector3(i[0],i[1],i[2])):t.setScale(i)}!0===e.model.useCompressedTextures&&t.setUseCompressedTextures(!0),e.model.shadowEntities&&t.setShadowEntities(e.model.shadowEntities),e.model.environmentMap&&(e.model.environmentMap.cubemap?(t.setEnvironmentCubemapUrl(e.model.environmentMap.cubemap),t.setEnvironmentCylindricalUrl("")):e.model.environmentMap.cylindrical&&(t.setEnvironmentCylindricalUrl(e.model.environmentMap.cylindrical),t.setEnvironmentCubemapUrl(""))),this._processCoverages(r,t,e.model.coverages)}if(e.comet){const t=r.addComponent("cometTail");void 0!==e.comet.timeLength&&t.setTimeLength(e.comet.timeLength),t.setLightSource("sun");const i=r.addComponent("cometTail");i.setTimeLength(.5*t.getTimeLength()),i.setColor(new s.Color(.214,.235,.371,.5)),i.setStarAccelerationMultiplier(10),i.setLightSource("sun");const a=r.addComponent("cometTail");a.setStarAccelerationMultiplier(0),a.setColor(new s.Color(1,1,1,10)),a.setNumberOfParticles(1),a.setLightSource("sun")}if(e.fixed){const t=r.addController("fixed");if(e.fixed.position&&t.setPosition(e.fixed.position),e.fixed.orientation&&t.setOrientation(e.fixed.orientation),e.fixed.relativeToParent){const t=r.addController("rotateByParentOrientation");e.fixed.coverage&&2===e.fixed.coverage.length&&t.setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]))}if(e.fixed.llaOnSpheroid){const a=e.parents[0][1],n=i.getEntity(a);if(null!==n){const i=n.get("spheroid");if(null===i)throw new Error("Missing spheroid component.");e.fixed.coverage&&2===e.fixed.coverage.length&&t.setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]));const a=new s.Vector3;i.xyzFromLLA(a,e.fixed.llaOnSpheroid),t.setPosition(a);const o=new s.Quaternion;i.orientationFromLLA(o,e.fixed.llaOnSpheroid),t.setOrientation(o),r.addController("rotateByParentOrientation")}}e.fixed.coverage&&2===e.fixed.coverage.length&&t.setCoverage(new s.Interval(e.fixed.coverage[0],e.fixed.coverage[1]))}if(e.dynamo)for(let t=0,i=e.dynamo.length;t<i;t++){const i=e.dynamo[t],a=r.addController("dynamo");i.customUrl?a.setBaseUrl(i.url):a.setBaseUrl("$DYNAMIC_ASSETS_URL/dynamo/"+i.url),i.parentIsBarycenter&&a.setHeaderValue("body",1),i.coverage&&2===i.coverage.length&&a.setCoverage(new s.Interval(i.coverage[0],i.coverage[1]))}if(e.animdata)for(let t=0,i=e.animdata.length;t<i;t++){const i=e.animdata[t],a=r.addController("animdata");a.setBaseUrlAndStateType("$ANIMDATA_URL/"+i.url,i.type),i.coverage&&2===i.coverage.length&&a.setCoverage(new s.Interval(i.coverage[0],i.coverage[1]))}if(e.tle){const t=r.addController("tle");t.setSource(e.tle.tleName,e.tle.url),e.tle.coverage&&2===e.tle.coverage.length&&t.setCoverage(new s.Interval(e.tle.coverage[0],e.tle.coverage[1]))}if(e.align){let t=null;if(e.dynamo)for(let i=0;i<e.dynamo.length;i++){const s=e.dynamo[i].url;(s.endsWith("ori")||s.endsWith("quat"))&&(t=r.getControllerByType("dynamo",i))}const i=r.addController("align",void 0,t);i.setPrimaryAlignType(e.align.primary.type),i.setPrimaryTargetEntity(e.align.primary.target),i.setPrimaryAxis(e.align.primary.axis),e.align.primary.targetAxis&&i.setPrimaryTargetAxis(e.align.primary.targetAxis),e.align.secondary&&(i.setSecondaryAlignType(e.align.secondary.type),i.setSecondaryTargetEntity(e.align.secondary.target),i.setSecondaryAxis(e.align.secondary.axis),e.align.secondary.targetAxis&&i.setSecondaryTargetAxis(e.align.secondary.targetAxis)),e.align.coverage&&2===e.align.coverage.length&&i.setCoverage(new s.Interval(e.align.coverage[0],e.align.coverage[1]))}if(e.spin){const t=r.addController("spin");t.setAxis(e.spin.axis,!0),t.setRate(s.MathUtils.twoPi/(3600*e.spin.periodInHours)),void 0!==e.spin.relativeToTime&&t.setReferenceTime(e.spin.relativeToTime),e.spin.coverage&&2===e.spin.coverage.length&&t.setCoverage(new s.Interval(e.spin.coverage[0],e.spin.coverage[1]))}e.postCreateFunction&&e.postCreateFunction(r,a)}catch(t){throw null!==r&&i.removeEntity(r),new Error(`While creating "${n}": ${t}`)}return r}static getEntityOptions(t){return a._entities.get(t)}static getEntityNamesInGroup(t){const e=new Set;if(""!==t){const i=t.split(",").map(t=>t.trim());for(const[t,s]of a._entities){const a=s.groups;if(!a)continue;let n=!0;for(const t of i)a.includes(t)||(n=!1);n&&e.add(t)}}else for(const t of a._entities.keys())e.add(t);return e}static getGroups(){const t=new Set;for(const e of this._entities.values()){const i=e.groups;if(void 0!==i)for(let e=0;e<i.length;e++)t.add(i[e])}return t}static createGroup(t,e,i){const s=this.getEntityNamesInGroup(t);for(const t of s)this.create(t,e,i)}static _processCoverages(t,e,i){if(void 0===i)return;let a=t.get("coverage");null===a&&(a=t.addController("coverage",void 0,t.getController(0)));let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let t=0,o=i.length;t<o;t++)a.addCoverage(new s.Interval(i[t][0],i[t][1]),()=>{e.setEnabled(!0)},()=>{e.setEnabled(!1)}),n=Math.min(n,i[t][0]),r=Math.max(r,i[t][1]);e instanceof s.BaseController&&e.setCoverage(new s.Interval(n,r))}}a._entities=new Map,e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return n}));var s=i(161),a=i(35);class n{static getParentOfEntity(t,e){const i=s.default.getEntityOptions(t);if(void 0===i)throw new Error(`There are no entity options for ${t}.`);const n=i.parents,o=a.Sort.getIndex(e,n,r);return o<n.length&&e===n[o][0]?n[o][1]:o>0?n[o-1][1]:""}static getAllAncestorsOfEntity(t){const e=new Set;return this._getAllAncestorsOfEntityRecursed(t,e),e}static _getAllAncestorsOfEntityRecursed(t,e){const i=s.default.getEntityOptions(t);if(void 0===i||void 0===i.parents)return;const a=i.parents;for(const t of a){const i=t[1];e.has(i)||(e.add(i),this._getAllAncestorsOfEntityRecursed(i,e))}}}function r(t,e){return t[0]<e}},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class{static addPlacemark(t,e,i,a,n,r,o=!1){const l=i.getScene().addEntity(t);l.setParent(i),l.setCanOcclude(!1),l.setExtentsRadius(1);const c=l.addComponent("div");return c.setAlignment(new s.Vector2(.5,.5)),c.getDiv().innerHTML=e,l.addController("fixed"),l.addController("rotateByParentOrientation"),this.updateLLA(l,a,n,r,o),l}static updateLLA(t,e,i,a,n=!1){const r=t.getParent(),o=t.get("fixed"),l=r.getComponentByType("spheroid");if(null===o||null===l)throw new Error("No fixed controller and/or spheroid component.");const c=s.LatLonAlt.pool.get(),h=s.Vector3.pool.get();if(c.set(s.MathUtils.degToRad(e),s.MathUtils.degToRad(i),a),l.xyzFromLLA(h,c),o.setPosition(h),s.Vector3.pool.release(h),n){const t=s.Quaternion.pool.get(),e=s.Vector3.pool.get(),i=s.Vector3.pool.get();l.eastFromLLA(e,c),l.northFromLLA(i,c),t.setFromAxes(e,i,void 0),o.setOrientation(t),s.Vector3.pool.release(e),s.Vector3.pool.release(i),s.Quaternion.pool.release(t)}s.LatLonAlt.pool.release(c)}}},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(161);class n{static getEclipJ2000ToJ2000Rotation(){return this.eclipJ2000ToJ2000Rotation}static async waitTillEntitiesInPlace(t,e,i,a=5,n=.03){const r=new Set;for(const i of e){const e=t.getEntity(i);if(null===e)throw new Error('Entity "'+i+'" not added yet. Use Entity.create to add the entity.');r.add(e)}const o=[];for(const t of r)for(let e=0;e<t.getNumControllers();e++)o.push(t.getController(e).getLoadedPromise());return await Promise.all(o),void 0===i&&(i=t.getEngine().getTime()),new Promise((t,e)=>{let o=0;const l=setInterval(()=>{const c=s.Vector3.pool.get(),h=s.Quaternion.pool.get();for(const t of r){const e=t.getPositionCoverage().contains(i);t.getPositionAtTime(c,i),t.getOrientationAtTime(h,i);const s=!c.isNaN()&&!h.isNaN();e&&!s||r.delete(t)}if(s.Quaternion.pool.release(h),s.Vector3.pool.release(c),0===r.size&&(clearInterval(l),t()),(o+=n)>=a){clearInterval(l);let t="";for(const e of r)""!==t&&(t+=", "),t+="'"+e.getName()+"'";e(new Error("Timed out ("+a+" seconds) while waiting for entities to be in place. The remaining entities were ["+t+"]."))}},1e3*n)}).then(()=>t.getEngine().waitUntilNextFrame())}static llaToXYZ(t,e,i,s){const a=e.get("spheroid");null!==a&&(a.xyzFromLLA(t,i),s||t.rotate(e.getOrientation(),t))}static xyzToLLA(t,e,i,s){const a=e.get("spheroid");null!==a&&(s||i.rotateInverse(e.getOrientation(),i),a.llaFromXYZ(t,i))}static getDependentEntities(t){const e=new Set;return this._getDependentEntitiesRecursed(t,e),e}static _getDependentEntitiesRecursed(t,e){const i=a.default.getEntityOptions(t);if(void 0===i)return;const s=new Set,n=i.parents;for(const t of n)s.add(t[1]);void 0!==i.lightSource&&s.add(i.lightSource),void 0!==i.trail&&void 0!==i.trail.relativeTo&&s.add(i.trail.relativeTo),void 0!==i.align&&(void 0!==i.align.primary.target&&s.add(i.align.primary.target),void 0!==i.align.secondary&&void 0!==i.align.secondary.target&&s.add(i.align.secondary.target));for(const t of s)e.has(t)||(e.add(t),this._getDependentEntitiesRecursed(t,e))}}n.eclipJ2000ToJ2000Rotation=new s.Quaternion(.9791532214288992,.2031230389823101,0,0),n.eclipJ2000ToJ2000Rotation.freeze(),e.default=n},function(t,e,i){"use strict";i.r(e);var s=i(35);class a{static jumpToLocationOnSphere(t,e,i,n,r,o,l,c,h,d){t<=0&&(t=.001),d=a.easeInOut(d),void 0===n&&(n=r.getParent());const u=s.Vector3.pool.get(),p=s.Vector3.pool.get();null!==r.getParent()?(r.getParent().getPositionRelativeToEntity(u,o,n),r.getParent().getPositionRelativeToEntity(p,l,n)):(u.copy(o),p.copy(l));const m=u.magnitude()-e,g=p.magnitude()-e,_=s.Vector3.pool.get();i&&n?n.getOrientation().getAxis(_,2):_.cross(u,p),_.normalize(_),_.isZero()&&_.set(0,0,1);let f=0;const y=s.Vector3.pool.get(),b=s.Vector3.pool.get(),T=s.Quaternion.pool.get();T.setFromAxis(_,2),y.rotateInverse(T,u),b.rotateInverse(T,p);const v=s.LatLonAlt.pool.get(),E=s.LatLonAlt.pool.get();s.Geometry.getLLAFromXYZOnSphere(v,y,0),s.Geometry.getLLAFromXYZOnSphere(E,b,0),s.Vector3.pool.release(b),s.Vector3.pool.release(y);let x=v.lon*Math.cos(v.lat),S=E.lon*Math.cos(E.lat);x+Math.PI<S&&(x+=2*Math.PI),S+Math.PI<x&&(S+=2*Math.PI),f=e*t*Math.sqrt((S-x)*(S-x)+(E.lat-v.lat)*(E.lat-v.lat));const I=s.Vector2.pool.get();a._jumpOnCircle(I,f,m,g,d);const N=I.x,w=I.y;s.Vector2.pool.release(I);const A=s.Vector3.pool.get();A.normalize(u),A.mult(A,w+e);const C=s.LatLonAlt.pool.get();let P;P=0!==f?(f-N)/f:0,C.lat=s.MathUtils.lerp(v.lat,E.lat,P),C.lon=s.MathUtils.lerpAngle(v.lon,E.lon,P),C.alt=w,s.Geometry.getXYZFromLLAOnSphere(A,C,e),A.rotate(T,A),s.LatLonAlt.pool.release(C),s.LatLonAlt.pool.release(v),s.LatLonAlt.pool.release(E),s.Quaternion.pool.release(T),A.isNaN()&&A.copy(p),null!==r.getParent()&&n.getPositionRelativeToEntity(A,A,r.getParent()),r.setPosition(A),s.Vector3.pool.release(A),s.Vector3.pool.release(_);const M=s.Vector3.pool.get();n.getPositionRelativeToEntity(M,s.Vector3.Zero,r),M.normalize(M);const R=s.Vector3.pool.get(),V=s.Quaternion.pool.get();i?n.getOrientation().getAxis(R,2):(V.slerp(c,h,d),V.getAxis(R,2)),R.setNormalTo(M,R),V.setFromAxes(void 0,M,R),r.setOrientation(V),s.Vector3.pool.release(R),s.Quaternion.pool.release(V),s.Vector3.pool.release(M),s.Vector3.pool.release(u),s.Vector3.pool.release(p)}static easeInOut(t){const e=t*t;return e/(2*(e-t)+1)}static _jumpOnCircle(t,e,i,s,a){let n=0,r=0;if(Math.abs(e/(s-i))>1e-6){const t=(s-i)/-e*(s+i)/2+e/2,o=Math.sign(e)*Math.acos((i*s+(e-t)*-t)/Math.sqrt(i*i+(e-t)*(e-t))/Math.sqrt(s*s+t*t)),l=Math.cos(a*o),c=Math.sin(a*o);n=(e-t)*c+i*l,r=t+(e-t)*l-i*c}else n=a*s+(1-a)*i,r=(1-a)*e;1===a&&(n=s,r=0),t.set(r,n)}}e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._sizeInner=1,this._sizeOuter=1,this._ignoreDistance=!1,this._minDistanceM=0,this._minDistanceB=0,this._maxDistanceM=0,this._maxDistanceB=0,this._color=new s.Color(1,1,1,1),this._color.freeze(),this._alphaMultiplier=1,this._numPointsOnCircle=200,this._meshDirty=!0,this.__setRadius(this._sizeOuter),this.__setUsesEntityOrientation(!0)}getInnerRadius(){return this._sizeInner}setInnerRadius(t){this._sizeInner=t,this._meshDirty=!0}getOuterRadius(){return this._sizeOuter}setOuterRadius(t){this._sizeOuter=t,this._meshDirty=!0,this.__setRadius(t)}setIgnoreDistance(t){this._ignoreDistance=t,this._alphaMultiplier=1,s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}setMinDistance(t){this._minDistanceM=1/(t-t/1.1),this._minDistanceB=-1*this._minDistanceM*t/1.1}setMaxDistance(t){this._maxDistanceM=-1/(1.1*t-t),this._maxDistanceB=-1*this._maxDistanceM*t*1.1}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}__prepareForRender(t){if(s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t),this._meshDirty&&this._updateMesh(),!this._ignoreDistance){const e=this.getEntity().getCameraSpacePosition(t).magnitude(),i=this._minDistanceM*e+this._minDistanceB,a=this._maxDistanceM*e+this._maxDistanceB;this._alphaMultiplier=s.MathUtils.clamp01(Math.min(i,a)),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}}__loadResources(){const t=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("basic_alpha");this.getThreeJsMaterials().push(t),s.ThreeJsHelper.setUniformColorRGBA(t,"color",this._color,this._alphaMultiplier);const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3}],!1);return this.getThreeJsObjects().push(e),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyObject(this.getThreeJsObjects()[0]),s.ThreeJsHelper.destroyMaterial(this.getThreeJsMaterials()[0])}_updateMesh(){const t=new Float32Array(4*this._numPointsOnCircle*3),e=new Uint16Array(6*this._numPointsOnCircle);let i=0,a=0;const n=new s.Vector3,r=new s.Vector3,o=this._sizeOuter,l=this._sizeInner/this._sizeOuter;for(let c=0;c<this._numPointsOnCircle;c++){const h=c/this._numPointsOnCircle*s.MathUtils.twoPi,d=(c+1)%this._numPointsOnCircle/this._numPointsOnCircle*s.MathUtils.twoPi;n.set(o*Math.cos(h),o*Math.sin(h),0),r.set(o*Math.cos(d),o*Math.sin(d),0),t[i+0]=n.x*l,t[i+1]=n.y*l,t[i+2]=n.z*l,t[i+3]=n.x,t[i+4]=n.y,t[i+5]=n.z,t[i+6]=r.x,t[i+7]=r.y,t[i+8]=r.z,t[i+9]=r.x*l,t[i+10]=r.y*l,t[i+11]=r.z*l,e[a+0]=i/3+0,e[a+1]=i/3+1,e[a+2]=i/3+2,e[a+3]=i/3+2,e[a+4]=i/3+3,e[a+5]=i/3+0,i+=12,a+=6}const c=this.getThreeJsObjects()[0].geometry;s.ThreeJsHelper.setVertices(c,"position",t),s.ThreeJsHelper.setIndices(c,e),this._meshDirty=!1}}},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._degreesPerLine=10,this._color=new s.Color(1,1,1,1),this._color.freeze(),this._lineMesh=null,this._meshDirty=!0}setRadius(t){this.__setRadius(t),s.ThreeJsHelper.setScale(this.getThreeJsObjects(),this.getRadius())}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),this._meshDirty=!0}getDegreesPerLine(){return this._degreesPerLine}setDegreesPerLine(t){this._degreesPerLine=t,this._meshDirty=!0}__prepareForRender(t){this._meshDirty&&this._updateMesh(),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t),this._lineMesh.prepareForRender(t)}__loadResources(){return this._lineMesh=new s.LineMesh(this),this._updateMesh(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_updateMesh(){const t=[];for(let e=0;e<360;e+=this._degreesPerLine){const i=Math.min(e+this._degreesPerLine,360),a=s.MathUtils.degToRad(e),n=s.MathUtils.degToRad(i);for(let e=-90;e<90;e+=this._degreesPerLine){const i=Math.min(e+this._degreesPerLine,90),r=s.MathUtils.degToRad(e),o=s.MathUtils.degToRad(i);-90<e&&e<90&&(t.push(new s.Vector3(Math.sin(a)*Math.cos(r),Math.cos(a)*Math.cos(r),Math.sin(r))),t.push(new s.Vector3(Math.sin(n)*Math.cos(r),Math.cos(n)*Math.cos(r),Math.sin(r)))),t.push(new s.Vector3(Math.sin(a)*Math.cos(r),Math.cos(a)*Math.cos(r),Math.sin(r))),t.push(new s.Vector3(Math.sin(a)*Math.cos(o),Math.cos(a)*Math.cos(o),Math.sin(o)))}}const e=[];for(let i=0,s=t.length;i<s;i++)e.push(this._color);const i=[];for(let e=0,s=t.length;e<s;e++)i.push(2);this._lineMesh.setPositions(t),this._lineMesh.setColors(e),this._lineMesh.setWidths(i),s.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),s.Quaternion.Identity),s.ThreeJsHelper.setScale(this.getThreeJsObjects(),this.getRadius()),this._meshDirty=!1}}},function(t,e,i){"use strict";i.r(e);var s=i(164),a=i(35);e.default=class extends a.BaseComponent{constructor(t,e,i){super(t,e,i),this._url="",this._numVertices=[],this._labelEntities=[],this._color=new a.Color,this._lineWidth=2,this._lineMeshes=[],this.__setRadius(Number.POSITIVE_INFINITY)}setColor(t){this._color.copy(t);for(let t=0;t<this._lineMeshes.length;t++){const e=[];for(let i=0;i<this._numVertices[t];i++)e.push(this._color);this._lineMeshes[t].setColors(e)}}setLineWidth(t){this._lineWidth=t;for(let e=0;e<this._lineMeshes.length;e++)this._lineMeshes[e].setWidths(t)}setUrl(t){this._url=t,this.resetResources()}__prepareForRender(t){a.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t);for(let e=0;e<this._lineMeshes.length;e++)this._lineMeshes[e].prepareForRender(t)}async __loadResources(){this._labelEntities=[],this._lineMeshes=[],this._numVertices=[];const t=[],e=await this.getEntity().getScene().getEngine().getDownloader().download(this._url,!0);if("completed"===e.status&&e.content instanceof ArrayBuffer){const i=new a.Reader(e.content);for(;!i.isAtEnd();){const e={name:"",stars:[],segments:[],color:[]};e.name=i.readString(i.readByte()),e.color=[i.readByte(),i.readByte(),i.readByte(),i.readByte()];const s=i.readByte();for(let t=0;t<s;t++)e.stars.push([i.readFloat32(),i.readFloat32(),i.readFloat32()]);const a=2*i.readByte();for(let t=0;t<a;t++)e.segments.push(i.readByte());t.push(e)}}for(let e=0;e<t.length;e++){const i=t[e].stars,s=t[e].segments,n=[],r=[],o=[];for(let t=0;t<s.length;t++){const e=s[t];n.push(new a.Vector3(i[e][2],-i[e][0],i[e][1])),r.push(this._color),o.push(this._lineWidth)}const l=new a.LineMesh(this);l.setPositions(n),l.setColors(r),l.setWidths(o),this._lineMeshes.push(l),this._numVertices.push(s.length)}a.ThreeJsHelper.setOrientation(this.getThreeJsObjects(),s.default.getEclipJ2000ToJ2000Rotation());for(let e=0;e<t.length;e++){const i=t[e].stars,n=new a.Vector3(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),r=new a.Vector3(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),o=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]);for(let t=0;t<i.length;t++){const e=i[t],l=new a.Vector3;l.set(e[2],-e[0],e[1]),l.rotate(s.default.getEclipJ2000ToJ2000Rotation(),l),l.normalize(l),l.mult(l,o),n.x>l.x&&(n.x=l.x),r.x<l.x&&(r.x=l.x),n.y>l.y&&(n.y=l.y),r.y<l.y&&(r.y=l.y),n.z>l.z&&(n.z=l.z),r.z<l.z&&(r.z=l.z)}const l=new a.Vector3;l.addMult(n,r,.5);const c=this.getEntity().getScene().addEntity("label_"+t[e].name);c.setParent(this.getEntity()),c.setOrientation(a.Quaternion.Identity),c.setPosition(l);const h=c.addComponent("div");h.setAlignment(new a.Vector2(.5,.5));const d=h.getDiv();d.classList.add("pioneer-constellation-label"),d.innerHTML=t[e].name,this._labelEntities.push(c)}}__unloadResources(){for(let t=0;t<this._labelEntities.length;t++)this.getEntity().getScene().removeEntity(this._labelEntities[t]);a.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}}},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._size=1,this._color=new s.Color(1,1,1,1),this._color.freeze(),this._lineWidth=1,this._numCircles=10,this._numSpokes=20,this._radialPower=1,this._ignoreDistance=!1,this._lineMesh=null,this._meshDirty=!0,this.__setRadius(this._size),this.__setUsesEntityOrientation(!0)}getSize(){return this._size}setSize(t){this._size=t,this.__setRadius(this._size),null!==this._lineMesh&&this._lineMesh.setScale(this._size)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),this._meshDirty=!0}getLineWidth(){return this._lineWidth}setLineWidth(t){this._lineWidth=t,null!==this._lineMesh&&this._lineMesh.setWidths(this._lineWidth)}getNumCircles(){return this._numCircles}setNumCircles(t){this._numCircles=t,this._meshDirty=!0}getNumSpokes(){return this._numSpokes}setNumSpokes(t){this._numSpokes=t,this._meshDirty=!0}getRadialPower(){return this._radialPower}setRadialPower(t){this._radialPower=t,this._meshDirty=!0}setIgnoreDistance(t){this._ignoreDistance=t}__prepareForRender(t){if(this._meshDirty&&this._updateMesh(),!this._ignoreDistance){const e=(.02-this.getEntity().getNormalSpaceExtentsRadius(t))/.02;this._lineMesh.setAlphaMultiplier(e)}this._lineMesh.prepareForRender(t);for(let e=0,i=this.getThreeJsObjects().length;e<i;e++)s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[e],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[e],this.getEntity(),t)}__loadResources(){return this._lineMesh=new s.LineMesh(this),this._updateMesh(),this._lineMesh.setScale(this._size),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_updateMesh(){const t=[];for(let e=1;e<=this._numCircles;e++){const i=1!==this._radialPower?Math.pow(this._radialPower,e-this._numCircles):e/this._numCircles,a=50;for(let e=0;e<a;e++){const n=e/a*s.MathUtils.twoPi,r=(e+1)%a/a*s.MathUtils.twoPi;t.push(new s.Vector3(i*Math.cos(n),i*Math.sin(n),0)),t.push(new s.Vector3(i*Math.cos(r),i*Math.sin(r),0))}}for(let e=0;e<this._numSpokes;e++){const i=e/this._numSpokes*s.MathUtils.twoPi;t.push(s.Vector3.Zero),t.push(new s.Vector3(Math.cos(i),Math.sin(i),0))}const e=[];for(let i=0,s=t.length;i<s;i++)e.push(this._color);this._lineMesh.setPositions(t),this._lineMesh.setColors(e),this._lineMesh.setWidths(this._lineWidth),this._meshDirty=!1}}},function(t,e,i){"use strict";i.r(e);var s=i(35);const a=new s.OrbitalElements,n=new s.Vector3;e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1,1),this._color.freeze(),this._farSideAlphaFade=1,this._lineWidth=5,this._lineMesh=null,this._positions=[],this._colors=[],this._widths=[],this._pixelSpaceRadiiAlphaFade=[5,1],this.__setRadius(Number.POSITIVE_INFINITY)}getColor(){return this._color}setColor(t){if(this._color.thaw(),this._color.copy(t),this._color.freeze(),null!==this._lineMesh){for(let t=0,e=this._colors.length;t<e;t++)this._colors[t].copy(this._color);this._lineMesh.setColors(this._colors)}}getFarSideAlphaFade(){return this._farSideAlphaFade}setFarSideAlphaFade(t){this._farSideAlphaFade=t}getLineWidth(){return this._lineWidth}setLineWidth(t){if(this._lineWidth=t,null!==this._lineMesh){for(let t=0,e=this._widths.length;t<e;t++)this._widths[t]=this._lineWidth;this._lineMesh.setWidths(this._widths)}}setPixelSpaceRadiiAlphaFade(t,e){this._pixelSpaceRadiiAlphaFade[0]=t,this._pixelSpaceRadiiAlphaFade[1]=e}__prepareForRender(t){this._updateMesh();const e=this.getEntity().getPixelSpaceExtentsRadius(t);if(isNaN(e))this._lineMesh.setAlphaMultiplier(1);else{const t=(e-this._pixelSpaceRadiiAlphaFade[0])/(this._pixelSpaceRadiiAlphaFade[1]-this._pixelSpaceRadiiAlphaFade[0]);this._lineMesh.setAlphaMultiplier(s.MathUtils.lerp(0,1,s.MathUtils.clamp01(t)))}s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t),this._lineMesh.prepareForRender(t)}__loadResources(){this._lineMesh=new s.LineMesh(this);for(let t=0,e=720;t<e;t++)this._positions.push(new s.Vector3),this._colors.push(new s.Color),this._colors[t].copy(this._color),this._widths.push(this._lineWidth);return this._lineMesh.setColors(this._colors),this._lineMesh.setWidths(this._widths),Promise.resolve()}__unloadResources(){this._positions=[],this._colors=[],this._widths=[],s.ThreeJsHelper.destroyAllObjectsAndMaterials(this),this._lineMesh=null}_updateMesh(){const t=this.getEntity(),e=t.getScene().getEngine().getTime();let i=0;for(let s=t.getNumControllers()-1;s>=0;s--){const a=t.getController(s);if(a.getCoverage().contains(e)&&"dynamo"===a.getType()){const t=a;if("orb"===t.getPointType()){i=t.getHeaderValue("gravitationalParameter1")+t.getHeaderValue("gravitationalParameter2");break}}}a.setFromPositionAndVelocity(t.getPosition(),t.getVelocity(),e,i);const r=t.getPosition(),o=a.getTrueAnomalyFromPosition(r),l=a.getEccentricAnomalyFromTrueAnomaly(o);let c=!1;for(let t=0;t<360;t+=1){const e=2*t,i=(2*t-1+this._positions.length)%this._positions.length;let o=a.getEccentricAnomalyFromTrueAnomaly(s.MathUtils.degToRad(t-180));const h=a.getEccentricAnomalyFromTrueAnomaly(s.MathUtils.degToRad(t+1-180));(o<l&&l<h||h<l&&l<o)&&(o=l);const d=a.getMeanAnomalyFromEccentricAnomaly(o),u=a.epoch+(d-a.meanAnomalyAtEpoch)/a.meanAngularMotion,p=this._positions[e];if(a.project(p,n,u),p.sub(p,r),this._positions[i].copy(p),isNaN(d)){c=!0;const t=(e+1)%this._positions.length,s=(i-1+this._positions.length)%this._positions.length;this._positions[e].set(0,0,0),this._positions[i].set(0,0,0),this._positions[t].set(0,0,0),this._positions[s].set(0,0,0),this._colors[e].a=0,this._colors[i].a=0,this._colors[t].a=0,this._colors[s].a=0;continue}let m=0;m=s.MathUtils.angle(o,l)/Math.PI,m=s.MathUtils.clamp01(m);const g=s.MathUtils.lerp(1,this._farSideAlphaFade,m);this._colors[e].mult(this._color,g),c||this._colors[i].mult(this._color,g),c=!1}a.eccentricity>=1&&(this._positions[this._positions.length-2].copy(this._positions[this._positions.length-3]),this._positions[this._positions.length-1].copy(this._positions[this._positions.length-3]),this._colors[this._colors.length-2].a=0,this._colors[this._colors.length-1].a=0),this._lineMesh.setPositions(this._positions),this._lineMesh.setColors(this._colors)}}},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._color=new s.Color(1,1,1,1),this._color.freeze(),this._innerRadius=1,this._outerRadius=10,this._visibleDistanceInterval=new s.Interval(0,Number.POSITIVE_INFINITY),this._visibleDistanceInterval.freeze(),this._alphaMultiplier=1,this.__setRadius(this._outerRadius),this.__setUsesEntityOrientation(!0)}getColor(){return this._color}setColor(t){this._color.thaw(),this._color.copy(t),this._color.freeze(),s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}getInnerRadius(){return this._innerRadius}setInnerRadius(t){this._innerRadius=t,this.resetResources()}getOuterRadius(){return this._outerRadius}setOuterRadius(t){this._outerRadius=t,this.__setRadius(this._outerRadius),this.resetResources()}getVisibleDistanceInterval(){return this._visibleDistanceInterval}setVisibleDistanceInterval(t){this._visibleDistanceInterval.thaw(),this._visibleDistanceInterval.copy(t),this._visibleDistanceInterval.freeze()}__prepareForRender(t){s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects()[0],this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects()[0],this.getEntity(),t);const e=this.getEntity().getCameraSpacePosition(t).magnitude(),i=.5*(this._visibleDistanceInterval.max-this._visibleDistanceInterval.min),a=Math.min(.5*this._visibleDistanceInterval.min,i),n=Math.min(.5*this._visibleDistanceInterval.max,i);e<this._visibleDistanceInterval.min+a?this._alphaMultiplier=Math.max(0,(e-this._visibleDistanceInterval.min)/a):e>this._visibleDistanceInterval.max-n?this._alphaMultiplier=Math.max(0,(this._visibleDistanceInterval.max-e)/n):this._alphaMultiplier=1,s.ThreeJsHelper.setUniformColorRGBA(this.getThreeJsMaterials()[0],"color",this._color,this._alphaMultiplier)}__loadResources(){const t=this.getEntity().getScene().getEngine().getMaterialManager().getPreloaded("basic_alpha");this.getThreeJsMaterials().push(t),s.ThreeJsHelper.setUniformColorRGBA(t,"color",this._color,this._alphaMultiplier);const e=s.ThreeJsHelper.createMeshObject(this,t,[{name:"position",dimensions:3}],!1);return this.getThreeJsObjects().push(e),this._createMesh(),Promise.resolve()}__unloadResources(){s.ThreeJsHelper.destroyAllObjectsAndMaterials(this)}_createMesh(){const t=new Float32Array(6e3),e=new Uint16Array(12e3),i=(this._outerRadius+this._innerRadius)/2,a=(this._outerRadius-this._innerRadius)/2;for(let n=0;n<100;n++){const r=n/100*s.MathUtils.twoPi,o=Math.cos(r),l=Math.sin(r);for(let r=0;r<20;r++){const c=r/20*s.MathUtils.twoPi,h=Math.cos(c),d=Math.sin(c),u=3*(20*n+r);t[u+0]=o*(i+a*h),t[u+1]=l*(i+a*h),t[u+2]=a*d;const p=6*(20*n+r),m=(n+1)%100,g=(r+1)%20;e[p+0]=20*n+r,e[p+1]=20*m+r,e[p+2]=20*n+g,e[p+3]=20*m+g,e[p+4]=20*n+g,e[p+5]=20*m+r}}const n=this.getThreeJsObjects()[0].geometry;s.ThreeJsHelper.setVertices(n,"position",t),s.ThreeJsHelper.setIndices(n,e)}}},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(173);class n extends s.Tile{constructor(t,e,i,a,n,r){super(e),this._component=t,this._level=i,this._row=a,this._col=n,this._tileBounds=new s.Rect,this._tileBounds.copy(r),this._center=new s.Vector3,this._radius=0,this._threeJsMaterial=null,this._threeJsObject=null;const o=t.__getSpheroidComponent(),l=this._component.__getTileMatrixSet(),c=new s.Vector3;l.crsUnitsToXYZ(c,this._tileBounds.origin,o);const h=new s.Vector2;h.add(this._tileBounds.origin,this._tileBounds.size);const d=new s.Vector3;l.crsUnitsToXYZ(d,h,o);const u=new s.Vector2;u.addMult(this._tileBounds.origin,this._tileBounds.size,.5),l.crsUnitsToXYZ(this._center,u,o);const p=new s.Vector3,m=new s.Vector3;p.x=Math.min(c.x,d.x,this._center.x),p.y=Math.min(c.y,d.y,this._center.y),p.z=Math.min(c.z,d.z,this._center.z),m.x=Math.max(c.x,d.x,this._center.x),m.y=Math.max(c.y,d.y,this._center.y),m.z=Math.max(c.z,d.z,this._center.z),this._center.add(p,m),this._center.mult(this._center,.5);const g=new s.Vector3;g.sub(this._center,p),this._radius=g.magnitude()}createNewTile(t,e,i){const a=t._level+1,r=2*t._row+e,o=2*t._col+i,l=t._component.__getTileMatrixSet().getNumTiles(t._level+1);if(r>=l.y||o>=l.x)return null;const c=new s.Rect;return c.origin.set(t._tileBounds.origin.x+.5*i*t._tileBounds.size.x,t._tileBounds.origin.y+.5*(1-e)*t._tileBounds.size.y),c.size.set(.5*t._tileBounds.size.x,.5*t._tileBounds.size.y),new n(t._component,t,a,r,o,c)}checkSplit(){if(this._level>=this._component.__getTileMatrixSet().numLevels-1)return!1;if(!this._tileBounds.intersects(this._component.__getLayerBounds()))return!1;if(this._level>=this._component.__getMaxLevel())return!1;if(this._component.__getLoadsThisFrame()>=1)return!1;if(this._level<this._component.__getMinLevel())return!0;if(-1===this._level)return!0;let t=this._component.__getTilePixelSize();return void 0===t&&null!==this._threeJsMaterial&&(t=this._threeJsMaterial.uniforms.colorTexture.value.image.width,this._component.__setTilePixelSize(t)),this._getNearestDistance()<this._component.__getSplitJoinFactor()*this._radius/t}checkJoin(){if(-1===this._level)return!1;if(this._component.__getLoadsThisFrame()>=1)return!1;if(this._level>this._component.__getMaxLevel())return!0;if(this._level<=this._component.__getMinLevel())return!1;let t=this._component.__getTilePixelSize();return void 0===t&&null!==this._threeJsMaterial&&(t=this._threeJsMaterial.uniforms.colorTexture.value.image.width,this._component.__setTilePixelSize(t)),this._getNearestDistance()>this._component.__getSplitJoinFactor()*this._radius*4/t}async load(){if(-1===this._level)return Promise.resolve();if(this._component.__incLoadsThisFrame(),null!==this._threeJsMaterial)throw new Error("Tile already has material.");if(this._tileBounds.intersects(this._component.__getLayerBounds())){this._threeJsMaterial=s.MaterialUtils.get(),this._component.getThreeJsMaterials().push(this._threeJsMaterial);let t=this._component.__getTileUrl();t=(t=(t=t.replace("{TileMatrix}",""+this._level)).replace("{TileRow}",""+this._row)).replace("{TileCol}",""+this._col);try{await s.ThreeJsHelper.loadTextureIntoUniform(this._component,this._threeJsMaterial,"colorTexture",t,!1,!1)}catch(t){await s.ThreeJsHelper.loadTextureIntoUniform(this._component,this._threeJsMaterial,"colorTexture","pink",!1,!1)}}}async unload(){if(-1!==this._level){if(null!==this._threeJsMaterial){const t=this._component.getThreeJsMaterials();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsMaterial){t.splice(e,1);break}this._threeJsMaterial.uniforms.colorTexture.value&&this._threeJsMaterial.uniforms.colorTexture.value.dispose(),this._threeJsMaterial.dispose(),this._threeJsMaterial=null}this._threeJsMaterial=null}}async activate(){if(-1===this._level)return;this._threeJsObject=s.ThreeJsHelper.createMeshObject(this._component,this._threeJsMaterial,[{name:"position",dimensions:3},{name:"normal",dimensions:3},{name:"uv",dimensions:2}],!1),this._component.getThreeJsObjects().push(this._threeJsObject),s.ThreeJsHelper.useInDynEnvMap(this._threeJsObject,!0);const t=new Float32Array(1323),e=new Float32Array(1323),i=new Float32Array(882),a=new Uint16Array(2520),n=this._component.__getLayer().boundingBox,r=new s.Vector2,o=new s.Vector2,l=new s.Vector3;for(let c=0;c<21;c++){let h=1-c/20;r.y=s.MathUtils.lerp(this._tileBounds.origin.y,this._tileBounds.origin.y+this._tileBounds.size.y,h),o.y=s.MathUtils.clamp(r.y,n.origin.y,n.origin.y+n.size.y),h+=(o.y-r.y)/this._tileBounds.size.y;for(let d=0;d<21;d++){let u=d/20;r.x=s.MathUtils.lerp(this._tileBounds.origin.x,this._tileBounds.origin.x+this._tileBounds.size.x,u),o.x=s.MathUtils.clamp(r.x,n.origin.x,n.origin.x+n.size.x),u+=(o.x-r.x)/this._tileBounds.size.x,this._component.__getTileMatrixSet().crsUnitsToXYZ(l,o,this._component.__getSpheroidComponent());const p=21*c+d;t[3*p+0]=l.x,t[3*p+1]=l.y,t[3*p+2]=l.z,l.normalize(l),e[3*p+0]=l.x,e[3*p+1]=l.y,e[3*p+2]=l.z,i[2*p+0]=u,i[2*p+1]=1-h;const m=21*c+d;d<20&&c<20&&(a[6*m+0]=21*(c+0)+(d+0),a[6*m+1]=21*(c+1)+(d+0),a[6*m+2]=21*(c+1)+(d+1),a[6*m+3]=21*(c+0)+(d+0),a[6*m+4]=21*(c+1)+(d+1),a[6*m+5]=21*(c+0)+(d+1))}}s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"position",t),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"normal",e),s.ThreeJsHelper.setVertices(this._threeJsObject.geometry,"uv",i),s.ThreeJsHelper.setIndices(this._threeJsObject.geometry,a)}async deactivate(){if(-1===this._level)return;const t=this._component.getThreeJsObjects();for(let e=0,i=t.length;e<i;e++)if(t[e]===this._threeJsObject){t.splice(e,1);break}s.ThreeJsHelper.destroyObject(this._threeJsObject),this._threeJsObject=null}update(){let t=this.check();for(let e=0,i=this.children.length;e<i;e++)t=this.children[e].update()||t;return t}_getNearestDistance(){let t=Number.POSITIVE_INFINITY;const e=s.Vector3.pool.get();for(let i=0,s=this._component.__getCameraPositions().length;i<s;i++){const s=this._component.__getCameraPositions()[i];e.sub(this._center,s);const a=Math.max(0,e.magnitude()-this._radius);t>a&&(t=a)}return s.Vector3.pool.release(e),t}toString(){return this._level+"-"+this._row+"-"+this._col}}e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._capabilities=null,this._endPoint="",this._layerIdentifier="",this._tileMatrixSetIdentifier="",this._style="",this._dimensionValues=new Map,this._minLevel=Number.NEGATIVE_INFINITY,this._maxLevel=Number.POSITIVE_INFINITY,this._splitJoinThresholdFactor=512,this._layer=null,this._tileMatrixSet=null,this._tileUrl="",this._shadowEntities=[],this._engine=this.getEntity().getScene().getEngine(),this._cameraPositions=[],this._rootTile=null,this._tilePixeLSize=void 0,this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,this._loadsThisFrame=0,this._atmosphereComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._atmosphereComponentRef.setByType(this.getEntity().getName(),"atmosphere"),this._spheroidComponentRef=new s.ComponentRef(this.getEntity().getScene()),this._spheroidComponentRef.setByType(this.getEntity().getName(),"spheroid"),this._spheroidComponentRef.setRefChangedCallback(this._spheroidRefChangedCallback.bind(this)),this._spheroidChangedCallback=this._spheroidChangedCallback.bind(this),this.__setUsesEntityOrientation(!0)}async setEndPoint(t){this._endPoint=t,this.resetResources()}setLayer(t){this._layerIdentifier=t,this.resetResources()}setTileMatrixSet(t){this._tileMatrixSetIdentifier=t,this.resetResources()}setStyle(t){this._style=t,this.resetResources()}setDimensionValue(t,e){this._dimensionValues.set(t,e),this.resetResources()}getLayers(){return null!==this._capabilities?this._capabilities.layers:new Map}getMinLevel(){return this._minLevel}setMinLevel(t){this._minLevel=t}getMaxLevel(){return this._maxLevel}setMaxLevel(t){this._maxLevel=t}getTilesLoadedPromise(){return this._tilesLoadedPromise||Promise.resolve()}__getLayer(){return this._layer}__getTileMatrixSet(){return this._tileMatrixSet}__getTileUrl(){return this._tileUrl}__getLayerBounds(){return null!==this._layer?this._layer.boundingBox:null}__getMaxLevel(){return this._maxLevel}__getMinLevel(){return this._minLevel}__getSplitJoinFactor(){return this._splitJoinThresholdFactor}__getTilePixelSize(){return this._tilePixeLSize}__setTilePixelSize(t){this._tilePixeLSize=t}__getLoadsThisFrame(){return this._loadsThisFrame}__incLoadsThisFrame(){this._loadsThisFrame+=1}__getCameraPositions(){return this._cameraPositions}__getSpheroidComponent(){return this._spheroidComponentRef.get()}__destroy(){const t=this._spheroidComponentRef.get();null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),super.__destroy()}__update(){if(this._spheroidComponentRef.update(),null===this._rootTile)return;for(;this._cameraPositions.length>this._engine.getNumViewports();)this._cameraPositions.pop();for(;this._cameraPositions.length<this._engine.getNumViewports();)this._cameraPositions.push(new s.Vector3);const t=s.Vector3.pool.get();for(let e=0,i=this._engine.getNumViewports();e<i;e++)t.neg(this.getEntity().getCameraSpacePosition(this._engine.getViewport(e).getCamera())),this._cameraPositions[e].rotateInverse(this.getEntity().getOrientation(),t);s.Vector3.pool.release(t),this._loadsThisFrame=0;const e=this._rootTile.update();if(null===this._tilesLoadedPromise&&e&&(this._tilesLoadedPromise=new Promise(t=>{this._transitionsCompleteCallback=t})),null!==this._tilesLoadedPromise&&!e){const t=this._transitionsCompleteCallback;this._tilesLoadedPromise=null,this._transitionsCompleteCallback=null,t()}}__prepareForRender(t){s.ThreeJsHelper.setOrientationToEntity(this.getThreeJsObjects(),this.getEntity()),s.ThreeJsHelper.setPositionToEntity(this.getThreeJsObjects(),this.getEntity(),t);const e=this._atmosphereComponentRef.get();s.MaterialUtils.setUniforms(this.getThreeJsMaterials(),t,this.getEntity(),this._shadowEntities,e,!0)}async __loadResources(){if(""!==this._endPoint){this._capabilities=new a.Capabilities(this._endPoint,this._engine),await this._capabilities.readyPromise;let t=this._layerIdentifier;if(""===t){const e=this._capabilities.layers;if(1===e.size)for(const[,i]of e)t=i}if(""===t)return;if(this._layer=this._capabilities.getLayer(t),null===this._layer)throw new Error('Invalid layer: "'+t+'".');let e=this._tileMatrixSetIdentifier;if(""===e){const t=this._layer.tileMatrixSets;if(1===t.size)for(const i of t)e=i}if(this._tileMatrixSet=this._capabilities.getTileMatrixSet(e),null===this._tileMatrixSet)throw new Error('Invalid tile matrix set: "'+e+'".');await this._tileMatrixSet.readyPromise;const i=new s.Rect;i.copy(this._tileMatrixSet.boundingBox),1===this._tileMatrixSet.getNumTiles(0).x&&(i.size.x*=2),1===this._tileMatrixSet.getNumTiles(0).y&&(i.origin.y-=i.size.y,i.size.y*=2);let r=this._style;""===r&&(r=this._layer.defaultStyle);for(const[t,e]of this._layer.dimensions)this._dimensionValues.has(t)||this._dimensionValues.set(t,e);this._tileUrl=this._layer.url,this._tileUrl=this._tileUrl.replace("{TileMatrixSet}",this._tileMatrixSet.identifier),this._tileUrl=this._tileUrl.replace("{Style}",r),this._dimensionValues.forEach((t,e)=>{this._tileUrl=this._tileUrl.replace("{"+e+"}",t)}),this._rootTile=new n(this,null,-1,0,0,i)}}__unloadResources(){this._capabilities=null,this._layer=null,this._tileMatrixSet=null,this._tileUrl="",this._rootTile.destroy(),this._rootTile=null}_spheroidRefChangedCallback(t,e){null!==t&&t.removeChangedCallback(this._spheroidChangedCallback),null!==e&&e.addChangedCallback(this._spheroidChangedCallback),this._spheroidChangedCallback()}_spheroidChangedCallback(){const t=this._spheroidComponentRef.get();null!==t?this.__setRadius(Math.max(t.getEquatorialRadius(),t.getPolarRadius())):this.__setRadius(0),this.resetResources()}}},function(t,e,i){"use strict";i.r(e),i.d(e,"Capabilities",(function(){return n})),i.d(e,"Layer",(function(){return r})),i.d(e,"TileMatrixSet",(function(){return o}));var s=i(35),a=i(174);class n{constructor(t,e){this._endPoint=t,this._capabilitiesXML=null,this._layers=new Map,this._readyPromise=null,this._readyPromise=e.getDownloader().download(this._endPoint+"/1.0.0/WMTSCapabilities.xml",!1).then(t=>{if("string"==typeof t.content&&(this._capabilitiesXML=(new DOMParser).parseFromString(t.content,"application/xml")),null!==this._capabilitiesXML){const t=this._capabilitiesXML.querySelectorAll("Contents > Layer");for(const e of t){const t=e.querySelector("*|Title").textContent,i=e.querySelector("*|Identifier").textContent;this._layers.set(t,i)}}})}get readyPromise(){return this._readyPromise}get endPoint(){return this._endPoint}get layers(){return this._layers}getLayer(t){let e=null;if(null!==this._capabilitiesXML){const i=this._capabilitiesXML.querySelectorAll("Contents > Layer");for(const s of i){t===s.querySelector("*|Identifier").textContent&&(e=new r(s,this._endPoint+"/1.0.0"))}}return e}getTileMatrixSet(t){let e=null;if(null!==this._capabilitiesXML){const i=this._capabilitiesXML.querySelectorAll("Contents > TileMatrixSet");for(const s of i){t===s.querySelector("*|Identifier").textContent&&(e=new o(s))}}return e}}class r{constructor(t,e){this._baseUrl=e,this._title=t.querySelector("*|Title").textContent,this._identifier=t.querySelector("*|Identifier").textContent,this._styles=new Map,this._defaultStyle="",this._boundingBox=new s.Rect,this._dimensions=new Map,this._tileMatrixSets=new Set,this._url="";const i=t.querySelectorAll("Style");for(const t of i){const e=t.querySelector("*|Title").textContent,i=t.querySelector("*|Identifier").textContent;this._styles.set(e,i),"true"===t.getAttribute("isDefault")&&(this._defaultStyle=i)}let a=t.querySelector("*|BoundingBox");if(null===a&&(a=t.querySelector("*|WGS84BoundingBox")),null===a)throw new Error('Layer "'+this._identifier+'" missing a BoundingBox or a WGS84BoundingBox tag.');const n=a.querySelector("*|LowerCorner").textContent.split(" "),r=a.querySelector("*|UpperCorner").textContent.split(" ");this._boundingBox.origin.set(Number.parseFloat(n[0]),Number.parseFloat(n[1])),this._boundingBox.size.set(Number.parseFloat(r[0])-this._boundingBox.origin.x,Number.parseFloat(r[1])-this._boundingBox.origin.y);const o=t.querySelectorAll("Dimension");for(const t of o){const e=t.querySelector("*|Identifier").textContent,i=t.querySelector("Default").textContent;this._dimensions.set(e,i)}const l=t.querySelectorAll("TileMatrixSetLink");for(const t of l){const e=t.querySelector("TileMatrixSet").textContent;this._tileMatrixSets.add(e)}const c=t.querySelector("ResourceURL");this._url=c.getAttribute("template"),/^(?:[a-z]+:)?\/\//i.test(this._url)||(this._url=this._baseUrl+this._url)}get title(){return this._title}get identifier(){return this._identifier}get styles(){return this._styles}get defaultStyle(){return this._defaultStyle}get boundingBox(){return this._boundingBox}get dimensions(){return this._dimensions}get tileMatrixSets(){return this._tileMatrixSets}get url(){return this._url}}class o{constructor(t){let e;this._identifier=t.querySelector("*|Identifier").textContent,this._crs=t.querySelector("*|SupportedCRS").textContent,this._boundingBox=new s.Rect,this._numTiles=[],this._readyPromise=null;let i=0;for(const a of t.querySelectorAll("TileMatrix")){const t=a.querySelector("ScaleDenominator");if(!t)throw new Error("ScaleDenominator tag not found for TileMatrix "+i+".");const n=parseFloat(t.innerHTML);if(void 0!==e&&Math.abs(2*n-e)/n>.01)throw new Error("ScaleDenominator for TileMatrix "+i+" must be half of the next higher level, but is not.");e=n,this._numTiles[i]=new s.Vector2(parseFloat(a.querySelector("MatrixWidth").innerHTML),parseFloat(a.querySelector("MatrixHeight").innerHTML)),i+=1}this._numLevels=i;const n=t.querySelector("TileMatrix"),r=Number.parseFloat(n.querySelector("ScaleDenominator").textContent),l=new s.Vector2(Number.parseFloat(n.querySelector("TileWidth").textContent),Number.parseFloat(n.querySelector("TileHeight").textContent)),c=28e-8*r,h=new s.Vector2(c*l.x,c*l.y),d=new s.Vector2(h.x*this._numTiles[0].x,h.y*this._numTiles[0].y),u=n.querySelector("TopLeftCorner").textContent.split(" ");this._boundingBox.origin.set(Number.parseFloat(u[0]),Number.parseFloat(u[1])),this._readyPromise=o.setCRS(this._crs).then(t=>{this._crs=t;let e=1e3;const i=a.default.defs(this._crs);i.to_meter?e=1e3/i.to_meter:"degrees"===i.units?e=.00898315284:"feet"!==i.units&&"us feet"!==i.units||(e=3280.83333335),this._boundingBox.size.x=Math.round(d.x*e*1e6)/1e6,this._boundingBox.size.y=Math.round(d.y*e*1e6)/1e6,this._boundingBox.origin.y=this._boundingBox.origin.y-this._boundingBox.size.y})}get readyPromise(){return this._readyPromise}get identifier(){return this._identifier}get boundingBox(){return this._boundingBox}get numLevels(){return this._numLevels}getNumTiles(t){return this._numTiles[t]}crsUnitsToXYZ(t,e,i){const n=s.LatLonAlt.pool.get(),r=s.MathUtils.clamp(e.x,this._boundingBox.origin.x,this._boundingBox.origin.x+this._boundingBox.size.x),o=s.MathUtils.clamp(e.y,this._boundingBox.origin.y,this._boundingBox.origin.y+this._boundingBox.size.y),l=Object(a.default)(this._crs,"WGS84",[r,o]);n.set(s.MathUtils.degToRad(l[1]),s.MathUtils.degToRad(l[0]),0),i.xyzFromLLA(t,n),s.LatLonAlt.pool.release(n)}static async setCRS(t){t.startsWith("urn:ogc:def:crs:")&&(t=t.substring("urn:ogc:def:crs:".length));let e=l.get(t);if(void 0===e&&t.startsWith("EPSG::")){const i="https://epsg.io/"+t.substring("EPSG::".length)+".proj4",s=await fetch(i);e=await s.text()}return a.default.defs(t,e),t}}const l=new Map;l.set("EPSG::104903",'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]'),l.set("EPSG::104905",'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]'),l.set("EPSG::4326","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"),l.set("EPSG::3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"),l.set("OGC:1.3:84",a.default.defs("WGS84")),l.set("OGC:1.3:CRS84",a.default.defs("WGS84")),l.set("OGC:2:84",a.default.defs("WGS84"))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._entities=new s.FastMap,this._tightFit=!1,this._zoomOutOnly=!1,this._edgeSize=0,this.addModifiedState("position")}addEntity(t){const e=new s.EntityRef(this.getEntity().getScene());e.setName(t),this._entities.set(t,{ref:e}),this.addDependentState(t,"position")}removeEntity(t){this._entities.delete(t),this.removeDependentState(t,"position")}setTightFit(t){this._tightFit=t}setZoomOutOnly(t){this._zoomOutOnly=t}setEdgeSize(t){this._edgeSize=t}__update(){let t=1;const e=this.getEntity().getComponentByType("camera");if(null!==e){const i=Math.min(e.getHorizontalFieldOfView(),e.getVerticalFieldOfView());this._tightFit&&(t=Math.tan(i/2)),t=Math.tan(i/2)}const i=s.Vector3.pool.get();i.normalize(this.getEntity().getPosition()),0===i.magnitudeSqr()&&(this.getEntity().getOrientation().getAxis(i,1),i.neg(i)),i.isNaN()&&i.copy(s.Vector3.YAxisNeg);const a=(1+this._edgeSize/(.5-this._edgeSize))/t;let n=0;const r=s.Vector3.pool.get();for(let t=0,e=this._entities.size;t<e;t++){const e=this._entities.getAt(t).value.ref.get();if(null===e)continue;e.getPositionRelativeToEntity(r,s.Vector3.Zero,this.getEntity().getParent());const o=e.getExtentsRadius();let l=0;if(this._tightFit){const t=r.dot(i);r.addMult(r,i,-t),l=t+a*r.magnitude()+o*Math.sqrt(a*a+1)}else l=r.magnitude()+o;n=Math.max(n,l)}s.Vector3.pool.release(r),this._tightFit||(n*=Math.sqrt(a*a+1)),(!this._zoomOutOnly||n>this.getEntity().getPosition().magnitude())&&(i.mult(i,n),this.getEntity().setPosition(i)),s.Vector3.pool.release(i)}}},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class extends s.BaseController{constructor(t,e,i){super(t,e,i),this._entities=new s.FastMap,this.addModifiedState("position")}addEntity(t,e,i){const a=new s.EntityRef(this.getEntity().getScene());a.setName(t),this._entities.set(t,{ref:a,mult:e,add:i}),this.addDependentState(t,"position")}removeEntity(t){this._entities.delete(t),this.removeDependentState(t,"position")}__update(){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get();t.set(0,0,0);for(let i=0,a=this._entities.size;i<a;i++){const a=this._entities.getAt(i).value,n=a.ref.get();if(null===n)continue;n.getPositionRelativeToEntity(e,s.Vector3.Zero,this.getEntity().getParent());const r=e.magnitude();t.addMult(t,e,a.mult+(r>0?a.add/r:0))}this.getEntity().setPosition(t),s.Vector3.pool.release(t),s.Vector3.pool.release(e)}}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(164),n=i(35);s.default.register({observable_universe:{groups:["stars"],radius:5e23,systemRadius:5e23,label:"Observable Universe",parents:[],fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity},postCreateFunction:t=>{t.setCanOcclude(!1)}},milky_way:{groups:["stars"],radius:1e18,systemRadius:13e18,label:"Milky Way",parents:[[Number.NEGATIVE_INFINITY,"observable_universe"]],fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity},postCreateFunction:(t,e)=>{t.setCanOcclude(!1);const i=t.get("fixed"),s=new n.Vector3,a=192.85948120833*Math.PI/180,r=27.12825119444*Math.PI/180;s.x=Math.cos(a)*Math.cos(r),s.y=Math.sin(a)*Math.cos(r),s.z=Math.sin(r);const o=new n.Vector3,l=266.40499625*Math.PI/180,c=-28.93617241667*Math.PI/180;o.x=Math.cos(l)*Math.cos(c),o.y=Math.sin(l)*Math.cos(c),o.z=Math.sin(c);const h=new n.Quaternion;if(h.setFromAxes(o,void 0,s),i.setOrientation(h),e&&e.milkyWaySprite){const e=t.addComponent("sprite");e.setTextureUrl("$STATIC_ASSETS_URL/sprites/milky_way.png"),e.setSize(new n.Vector2(12e17,12e17)),e.setTransparent(!0),e.setBlending("normal"),e.setFadeDistance(12e15)}const d=t.addController("spin");d.setAxis(new n.Vector3(-.8676661356982597,-.19807638974470915,.45598379452940485),!1),d.setRate(-2192686e-23),d.setReferenceAngle(0),d.setReferenceTime(0)}},sun:{groups:["stars"],radius:695500,systemRadius:2991957e7,label:"Sun",parents:[[Number.NEGATIVE_INFINITY,"milky_way"]],spheroid:{equatorialRadius:695500,polarRadius:695500,planetographic:!1},spheroidLOD:{features:["colorMapEmmissive"],textures:{color:{url:"sun/color_$SIZE_$FACE.png",sizes:[4,512]}}},fixed:{position:n.Vector3.Zero,orientation:n.Quaternion.Identity},postCreateFunction:(t,e)=>{t.addComponent("lightSource").setAbsoluteMagnitude(4.83);const i=t.addComponent("atmosphere");i.setEmissivity(1),i.setScaleHeight(2e5),i.setDensity(8e-7),i.setColor(new n.Color(1,1,64/255));const s=t.addComponent("sprite");s.setBillboard(!0),s.setTextureUrl("$STATIC_ASSETS_URL/sprites/sun_glow.png"),s.setSize(new n.Vector2(100,100)),s.setSizeUnits("pixels"),s.setTransparent(!0),s.setColorMultiplier(new n.Color(1,1,.5)),s.setRenderOrder(-2);const r=t.addController("orbitalElements"),o=new n.OrbitalElements;if(o.epoch=0,o.eccentricity=0,o.semiMajorAxis=246237071e9,o.meanAngularMotion=-2192686e-23,o.meanAnomalyAtEpoch=Math.PI,o.orbitOrientation.set(-.48894750765094835,-.4832106839985283,.19625375824756275,.6992297419646486),r.addOrbitalElements(-1e100,o),r.addOrbitalElements(1e100,o),void 0!==e&&!0===e.skybox){t.addComponent("skybox").setTextureUrl("$STATIC_ASSETS_URL/textures/starmap_"+(e.skyboxResolution||2048)+".jpg")}if(void 0===e||!0===e.skybox&&!0===e.starfield||!1!==e.starfield){t.addComponent("starfield").setUrl("$STATIC_ASSETS_URL/stars/galaxies.0.bin");for(let e=0;e<6;e++){t.addComponent("starfield").setUrl("$STATIC_ASSETS_URL/stars/stars."+e+".bin")}}if(void 0!==e&&e.heliosphere){const e=t.addComponent("model");e.setUrl("$STATIC_ASSETS_URL/models/heliosphere/voyager_heliosphere.gltf"),e.setScale(new n.Vector3(201e6,19e7,19e7)),e.setForceLoaded(!0);const i=new n.LatLonAlt(0,-105*Math.PI/180,0),s=new n.Vector3;n.Geometry.getXYZFromLLAOnSphere(s,i,1),s.rotate(a.default.getEclipJ2000ToJ2000Rotation(),s),s.normalize(s);const r=new n.Quaternion;r.setFromVectorFromTo(new n.Vector3(.9937396508197329,.11171728072160429,.0008692392338424033),s),e.setRotation(r)}}},mercury:{groups:["planets"],radius:2439.4,systemRadius:292764,label:"Mercury",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:7600654,color:[.6,.6,.6,.7]},spheroid:{equatorialRadius:2439.4,polarRadius:2439.4,planetographic:!1},spheroidLOD:{textures:{color:{url:"mercury/color_$SIZE_$FACE.png",sizes:[4,512,4096]}}},dynamo:[{url:"mercury/sun/orb"},{url:"mercury/ori"}]},venus:{groups:["planets"],radius:6051.8,systemRadius:726216,label:"Venus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:19408261,color:[.9,.8,.45,.7]},spheroid:{equatorialRadius:6051.8,polarRadius:6051.8,planetographic:!1},spheroidLOD:{textures:{color:{url:"venus/color_$SIZE_$FACE.png",sizes:[4,512]}}},dynamo:[{url:"venus/sun/orb"},{url:"venus/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(15),e.setDensity(.001),e.setColor(new n.Color(213/255,160/255,94/255)),e.setSunBrightness(.25)}},earth:{groups:["planets"],radius:6378.1,systemRadius:765372,label:"Earth",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31558149,color:[0,.6,.8,.7]},spheroid:{equatorialRadius:6378.137,polarRadius:6356.752,planetographic:!0},spheroidLOD:{features:["normalMap","specularMap","nightMap","decalMap","nightMapEmmissive","shadowEntities"],textures:{color:{url:"earth/color_$SIZE_$FACE.png",sizes:[16,512,4096]},normal:{url:"earth/normal_$SIZE_$FACE.png",sizes:[16,512,4096]},specular:{url:"earth/specular_$SIZE_$FACE.png",sizes:[16,512,4096]},night:{url:"earth/night_$SIZE_$FACE.png",sizes:[16,512,4096]},decal:{url:"earth/cloud_$SIZE_$FACE.png",sizes:[16,512,4096]}},shadowEntities:["moon"]},dynamo:[{url:"earth/sun/orb"},{url:"earth/ori"}],postCreateFunction:(t,e)=>{if(e&&!1===e.clouds){t.get("spheroidLOD").setTexture("decal","")}const i=t.addComponent("atmosphere");i.setScaleHeight(8),i.setDensity(.0015),i.setColor(new n.Color(214.5/255,267/255,1.5)),i.setSunBrightness(2),i.setSunsetColor(new n.Color(1,.65,0)),i.setSunsetIntensity(1.2)}},mars:{groups:["planets"],radius:3396.2,systemRadius:46922,label:"Mars",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:59360879,color:[.89,.51,.35,.7]},spheroid:{equatorialRadius:3396.19,polarRadius:3376.2,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"mars/color_$SIZE_$FACE.png",sizes:[4,512,4096]}},shadowEntities:["phobos","deimos"]},dynamo:[{url:"mars/sun/orb"},{url:"mars/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(10.8),e.setDensity(.001),e.setColor(new n.Color(225/255,178/255,112/255)),e.setSunBrightness(.8),e.setSunsetColor(new n.Color(10/255,75/255,140/255)),e.setSunsetIntensity(1)}},jupiter:{groups:["planets"],radius:71492,systemRadius:3782501,label:"Jupiter",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:374279653,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:71492,polarRadius:66854,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"jupiter/color_$SIZE_$FACE.jpg",sizes:[16,512,4096]}},shadowEntities:["io","europa","ganymede","callisto"]},dynamo:[{url:"jupiter/sun/orb"},{url:"jupiter/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(200),e.setDensity(5e-5),e.setColor(new n.Color(234/255,202/255,170/255)),e.setSunBrightness(.25);const i=t.addController("coverage"),s=[[-1136116758,15],[-1037534358,28],[-938951958,22],[-867931156,0],[-812721554,12],[-744292752,47],[-639143949,62],[-533822346,48],[-483883145,27],[-391953544,15],[102427264,85],[315576066,138],[615211269,312],[660052869,347]];let a=0;t.addController("rotate").setRotatingPosition(!1);const r=(s[s.length-1][1]-s[s.length-2][1])/(s[s.length-1][0]-s[s.length-2][0]);i.addCoverage(n.Interval.Infinite,void 0,void 0,t=>{if(t.getOrientation().isNaN())return;if(null===t.get("rotate"))return;const e=t.getScene().getEngine().getTime();let i=r,o=a;if(e<s[o][0]||o<s.length-1&&s[o+1][0]<=e)if(e>=s[s.length-1][0])o=s.length-1;else if(e<s[0][0])o=0,i=0;else for(let t=s.length-2;t>=0;t--)s[t][0]<=e&&e<s[t+1][0]&&(o=t,i=(s[t+1][1]-s[t][1])/(s[t+1][0]-s[t][0]));else o<s.length-1&&(i=(s[o+1][1]-s[o][1])/(s[o+1][0]-s[o][0]));a=o;const l=s[o][1]+(e-s[o][0])*i,c=n.MathUtils.wrap(305-(l+-60.38-313.47)+-3074e-9*(e-617098056),0,360),h=t.getComponentByType("spheroidLOD");null!==h&&h.setLongitudeRotation(n.MathUtils.degToRad(c))})}},saturn:{groups:["planets"],radius:60268,systemRadius:7184413,label:"Saturn",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:929703084,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:60268,polarRadius:54364,planetographic:!1},spheroidLOD:{features:["shadowEntities","shadowRings"],textures:{color:{url:"saturn/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["iapetus","dione","rhea","tethys","titan"]},dynamo:[{url:"saturn/sun/orb"},{url:"saturn/ori"}],postCreateFunction:t=>{const e=t.addComponent("rings");e.setInnerRadius(74270.580913),e.setOuterRadius(140478.924731),e.setTopTextureUrl("$STATIC_ASSETS_URL/sprites/saturn_rings_top.png"),e.setBottomTextureUrl("$STATIC_ASSETS_URL/sprites/saturn_rings_bottom.png"),e.setFadeDistance(250);const i=t.addComponent("atmosphere");i.setScaleHeight(200),i.setDensity(5e-5),i.setColor(new n.Color(234/255,202/255,151/255))}},uranus:{groups:["planets"],radius:25559,systemRadius:1164893,label:"Uranus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:2651200139,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:25559,polarRadius:24973,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"uranus/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["titania","oberon","umbriel","ariel","miranda"]},dynamo:[{url:"uranus/sun/orb"},{url:"uranus/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(200),e.setDensity(5e-5),e.setColor(new n.Color(147/255,183/255,201/255)),e.setSunsetColor(new n.Color(164/255,168/255,.4)),e.setSunsetIntensity(1)}},neptune:{groups:["planets"],radius:24764,systemRadius:43213894,label:"Neptune",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:5200783038,color:[.48,.69,1,.7]},spheroid:{equatorialRadius:24764,polarRadius:24341,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"neptune/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["triton","proteus","despina","galatea","larissa"]},dynamo:[{url:"neptune/sun/orb"},{url:"neptune/ori"}],postCreateFunction:t=>{const e=t.addComponent("rings");e.setInnerRadius(40900),e.setOuterRadius(62964),e.setTopTextureUrl("$STATIC_ASSETS_URL/sprites/neptune_rings.png"),e.setBottomTextureUrl("$STATIC_ASSETS_URL/sprites/neptune_rings.png"),e.setFadeDistance(250);const i=t.addComponent("atmosphere");i.setScaleHeight(200),i.setDensity(5e-5),i.setColor(new n.Color(138/255,160/255,1))}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({"1_ceres":{groups:["dwarf planets"],radius:473,label:"Ceres",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:145250858},spheroid:{equatorialRadius:482.6,polarRadius:445.6,planetographic:!1},spheroidLOD:{textures:{color:{url:"1_ceres/color_$SIZE_$FACE.jpg",sizes:[16,512,4096]}}},dynamo:[{url:"1_ceres/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"101955_bennu":{groups:["asteroids","NEOs","PHAs"],radius:.246,label:"Bennu",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:37856546},model:{url:"$STATIC_ASSETS_URL/models/101955_bennu/Bennu.gltf",rotate:[{x:83},{z:-168}],scale:[9957e-7,9957e-7,9957e-7]},dynamo:[{url:"101955_bennu/sun/orb"},{url:"101955_bennu/ori"}]},"11351_leucus":{groups:["asteroids"],radius:17.0775,label:"Leucus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:384622403.174},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:17.0775},dynamo:[{url:"11351_leucus/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:445.732}},"12923_zephyr":{groups:["asteroids","NEOs","PHAs"],radius:1.03,label:"Zephyr",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:86659200},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.03,1.03,1.03]},dynamo:[{url:"12923_zephyr/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.891}},"134340_pluto":{groups:["dwarf planets"],radius:1187,systemRadius:130153,label:"Pluto",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:7826284800},spheroid:{equatorialRadius:1187,polarRadius:1187,planetographic:!1},spheroidLOD:{textures:{color:{url:"134340_pluto/color_$SIZE_$FACE.png",sizes:[4,512,4096]}}},dynamo:[{url:"134340_pluto/sun/orb"}],align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"charon"},secondary:{type:"velocity",axis:a.Vector3.YAxis,target:"charon"}},postCreateFunction:t=>{const e=t.addComponent("trail");e.setColor(new a.Color(1,1,1,.5)),e.setRelativeToEntity("134340_pluto_barycenter"),e.setStartTime(551857)}},"134340_pluto_barycenter":{groups:["134340_pluto","barycenters"],occlusionRadius:.001,extentsRadius:.001,label:"System Barycenter",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto"]],fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"134340_pluto_barycenter/134340_pluto/orb"}],postCreateFunction:t=>{t.setCanOcclude(!1)}},"136108_haumea":{groups:["dwarf planets","TNOs"],radius:816,label:"Haumea",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:8966073600},model:{url:"$STATIC_ASSETS_URL/models/136108_haumea/haumea.gltf",scale:[1,1,1]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"136108_haumea/sun/orb"}]},"136199_eris":{groups:["dwarf planets","TNOs"],radius:1163,label:"Eris",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:17610912e3},spheroid:{equatorialRadius:1163,polarRadius:1163,planetographic:!1},spheroidLOD:{textures:{color:{url:"136199_eris/color_$SIZE_$FACE.png",sizes:[4,512]}}},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"136199_eris/sun/orb"}]},"136472_makemake":{groups:["dwarf planets","TNOs"],radius:715,label:"Makemake",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:9754300800},spheroid:{equatorialRadius:717,polarRadius:710,planetographic:!1},spheroidLOD:{textures:{color:{url:"136472_makemake/color_$SIZE_$FACE.png",sizes:[4,512]}}},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"136472_makemake/sun/orb"}]},"14827_hypnos":{groups:["asteroids","NEOs","PHAs"],radius:.4535,label:"Hypnos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:151113600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.4535,.4535,.4535]},dynamo:[{url:"14827_hypnos/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"15094_polymele":{groups:["asteroids"],radius:10.5375,label:"Polymele",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:371396335.107},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:10.5375},dynamo:[{url:"15094_polymele/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:5.8607}},"1566_icarus":{groups:["asteroids","NEOs","PHAs"],radius:.805,label:"Icarus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:35326368},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.805,.8,.585]},dynamo:[{url:"1566_icarus/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.2726}},"16_psyche":{groups:["asteroids"],radius:125,label:"16 Psyche",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:157517136},model:{url:"$STATIC_ASSETS_URL/models/16_psyche/psycheAsteroid.gltf",scale:[100,100,100],rotate:[{x:90}]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"16_psyche/sun/orb"}]},"1620_geographos":{groups:["asteroids","NEOs","PHAs"],radius:2.5,label:"Geographos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:43891200},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2.5,1,1.05]},dynamo:[{url:"1620_geographos/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:5.224}},"162173_ryugu":{groups:["asteroids","NEOs","PHAs"],radius:.45,label:"Ryugu",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:40953600},model:{url:"$STATIC_ASSETS_URL/models/162173_ryugu/ryugu.gltf",rotate:[{x:-90}]},dynamo:[{url:"ssd/162173_ryugu/sun/orb"},{url:"162173_ryugu/ori"}]},"1862_apollo":{groups:["asteroids","NEOs","PHAs"],radius:.75,label:"Apollo",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:56259360},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.75,.75,.75]},dynamo:[{url:"1862_apollo/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.065}},"1981_midas":{groups:["asteroids","NEOs","PHAs"],radius:.975,label:"Midas",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:74649600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.975,.975,.975]},dynamo:[{url:"1981_midas/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:5.22}},"1991_vg":{groups:["asteroids","NEOs"],radius:.00425,label:"1991 VG",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33100012},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.00425,.00425,.00425]},dynamo:[{url:"1991_vg/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"1993_hd":{groups:["asteroids","asteroid belt"],radius:.005,label:"1993 HD",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:100388764},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"1993_hd/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"1994_cc_a":{groups:["asteroids","NEOs","PHAs"],radius:.325,label:"1994 CC",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:66137990},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.325,.325,.325]},dynamo:[{url:"1994_cc_a/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.3886}},"1996_xb27":{groups:["asteroids","NEOs"],radius:.042,label:"1996 XB<sub>27</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:40909104},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.042,.042,.042]},dynamo:[{url:"1996_xb27/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:1.195}},"1998_ky26":{groups:["asteroids","NEOs"],radius:.015,label:"1998 KY<sub>26</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:43202073},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.015,.015,.015]},dynamo:[{url:"1998_ky26/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:.1784}},"1998_ml14":{groups:["asteroids","NEOs","PHAs"],radius:.5,label:"1998 ML<sub>14</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:117917856},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.5,.5,.5]},dynamo:[{url:"1998_ml14/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:14.28}},"1998_qe2":{groups:["asteroids","NEOs","PHAs"],radius:1.375,label:"1998 QE<sub>2</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:119104300},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.375,1.375,1.375]},dynamo:[{url:"1998_qe2/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:4.749}},"1999_ao10":{groups:["asteroids","NEOs"],radius:.025,label:"1999 AO<sub>10</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27475200},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.025,.025,.025]},dynamo:[{url:"1999_ao10/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"1999_cg9":{groups:["asteroids","NEOs"],radius:.005,label:"1999 CG<sub>9</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34535808},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"1999_cg9/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"1999_vx25":{groups:["asteroids","NEOs"],radius:.005,label:"1999 VX<sub>25</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:26941680},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"1999_vx25/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"1i_oumuamua":{groups:["asteroid","interstellar"],occlusionRadius:.03,extentsRadius:.225,label:"ʻOumuamua",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:174195800},model:{url:"$STATIC_ASSETS_URL/models/1i_oumuamua/oumuamua.gltf"},spin:{axis:new a.Vector3(.57735026919,.57735026919,.57735026919),periodInHours:8.1},dynamo:[{url:"1i_oumuamua/sun/orb"}]},"2_pallas":{groups:["asteroids","asteroid belt"],radius:291,label:"Pallas",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:145683878},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[291,278,250]},dynamo:[{url:"2_pallas/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:7.8132}},"2000_ae205":{groups:["asteroids","NEOs"],radius:.005,label:"2000 AE<sub>205</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39660827},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2000_ae205/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2000_lg6":{groups:["asteroids","NEOs"],radius:.005,label:"2000 LG<sub>6</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27724710},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2000_lg6/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2000_sg344":{groups:["asteroids","NEOs"],radius:.0185,label:"2000 SG<sub>344</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30497305},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.0185,.0185,.0185]},dynamo:[{url:"2000_sg344/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2001_bb16":{groups:["asteroids","NEOs"],radius:.005,label:"2001 BB<sub>16</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:24933552},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_bb16/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2001_fr85":{groups:["asteroids","NEOs"],radius:.005,label:"2001 FR<sub>85</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30752213},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_fr85/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2001_gp2":{groups:["asteroids","NEOs"],radius:.005,label:"2001 GP<sub>2</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33351128},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_gp2/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2001_qj142":{groups:["asteroids","NEOs"],radius:.005,label:"2001 QJ<sub>142</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34542533},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2001_qj142/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2001_sn263_a":{groups:["asteroids","NEOs"],radius:1.45,label:"(153591) 2001 SN<sub>263</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:88379117},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.4,1.35,1.45]},dynamo:[{url:"2001_sn263_a/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.423}},"2003_sm84":{groups:["asteroids","NEOs"],radius:.005,label:"2003 SM<sub>84</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:37674723},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2003_sm84/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2003_uv11":{groups:["asteroids","NEOs"],radius:.13,label:"(503941) 2003 UV<sub>11</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:55302063},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.13,.13,.13]},dynamo:[{url:"2003_uv11/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:18.25}},"2003_yn107":{groups:["asteroids","NEOs"],radius:.01,label:"2003 YN<sub>107</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31024602},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.01,.01,.01]},dynamo:[{url:"2003_yn107/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2005_er95":{groups:["asteroids","NEOs"],radius:.005,label:"2003 ER<sub>95</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:42691438},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2005_er95/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2005_lc":{groups:["asteroids","NEOs"],radius:.005,label:"2005 LC",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38109231},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2005_lc/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2005_qp87":{groups:["asteroids","NEOs"],radius:.005,label:"2005 QP<sub>87</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:43182130},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2005_qp87/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2005_yu55":{groups:["asteroids","NEOs"],radius:.18,label:"2005 YU<sub>55</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39279986},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.18,.18,.18]},dynamo:[{url:"2005_yu55/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:18}},"2006_bz147":{groups:["asteroids","NEOs"],radius:.005,label:"2006 BZ<sub>147</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32672193},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2006_bz147/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2006_jy26":{groups:["asteroids","NEOs"],radius:.00475,label:"2006 JY<sub>26</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32046056},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.00475,.00475,.00475]},dynamo:[{url:"2006_jy26/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2006_qq56":{groups:["asteroids","NEOs"],radius:.005,label:"2006 QQ<sub>56</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30849279},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2006_qq56/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2006_rh120":{groups:["asteroids","NEOs"],radius:.00125,label:"2006 RH<sub>120</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31646355},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.00125,.00125,.00125]},dynamo:[{url:"2006_rh120/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:.04583}},"2006_ub17":{groups:["asteroids","NEOs"],radius:.005,label:"2006 UB<sub>17</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38423813},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2006_ub17/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2007_tf15":{groups:["asteroids","NEOs"],radius:.005,label:"2007 TF<sub>15</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:36848420},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2007_tf15/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2007_un12":{groups:["asteroids","NEOs"],radius:.005,label:"2007 UN<sub>12</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34141598},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2007_un12/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2007_vu6":{groups:["asteroids","NEOs"],radius:.005,label:"2007 VU<sub>6</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30439348},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2007_vu6/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_bt2":{groups:["asteroids","NEOs"],radius:.005,label:"2008 BT<sub>2</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:40099605},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_bt2/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_cx118":{groups:["asteroids","NEOs"],radius:.005,label:"2008 CX<sub>118</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38642620},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_cx118/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_ea9":{groups:["asteroids","NEOs"],radius:.005,label:"2008 EA<sub>9</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34399094},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_ea9/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_el":{groups:["asteroids","NEOs"],radius:.005,label:"2008 EL",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:36567037},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_el/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_hu4":{groups:["asteroids","NEOs"],radius:.005,label:"2008 HU<sub>4</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:35000582},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_hu4/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_jl24":{groups:["asteroids","NEOs"],radius:.005,label:"2008 JL<sub>24</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33383926},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_jl24/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:.05385}},"2008_kt":{groups:["asteroids","NEOs"],radius:.005,label:"2008 KT",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32084467},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_kt/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_tc3":{groups:["asteroids","NEOs"],radius:.00205,label:"2008 TC<sub>3</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:47219992},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.00205,.00205,.00205]},dynamo:[{url:"2008_tc3/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:.0269409}},"2008_ts10":{groups:["asteroids","NEOs"],radius:.005,label:"2008 TS<sub>10</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:44550003},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2008_ts10/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2008_ua202":{groups:["asteroids","NEOs"],radius:.025,label:"2008 UA<sub>202</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:33141727},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.025,.025,.025]},dynamo:[{url:"2008_ua202/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2009_bd":{groups:["asteroids","NEOs"],radius:.0055,label:"2009 BD",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:32021453},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.0055,.0055,.0055]},dynamo:[{url:"2009_bd/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2009_os5":{groups:["asteroids","NEOs"],radius:.005,label:"2009 OS<sub>5</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38627939},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2009_os5/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2009_rt1":{groups:["asteroids","NEOs"],radius:.005,label:"2009 RT<sub>1</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39197194},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2009_rt1/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2009_yf":{groups:["asteroids","NEOs"],radius:.005,label:"2009 YF",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:28573741},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2009_yf/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2010_an61":{groups:["asteroids","NEOs"],radius:.005,label:"2010 AN<sub>61</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:39265990},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_an61/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2010_dj":{groups:["asteroids","NEOs"],radius:.005,label:"2010 DJ",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:41893712},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_dj/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2010_jw34":{groups:["asteroids","NEOs"],radius:.005,label:"2010 JW<sub>34</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:30671447},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_jw34/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2010_tg19":{groups:["asteroids","NEOs"],radius:.005,label:"2010 TG<sub>19</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:96734965},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_tg19/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2010_tn167":{groups:["asteroids","NEOs"],radius:.005,label:"2010 TN<sub>167</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:70146852},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_tn167/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2010_ub":{groups:["asteroids","NEOs"],radius:.005,label:"2010 UB",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:93215413},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.005,.005,.005]},dynamo:[{url:"2010_ub/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2063_bacchus":{groups:["asteroids","NEOs"],radius:.555,label:"Bacchus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:35315957},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.555,.265,.25]},dynamo:[{url:"2063_bacchus/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:14.904}},"21_lutetia":{groups:["asteroids","asteroid belt"],radius:60.5,label:"Lutetia",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:119908344},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[60.5,50.5,37.5]},dynamo:[{url:"21_lutetia/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:8.1655}},"2101_adonis":{groups:["asteroids","NEOs","PHAs"],radius:.2615,label:"Adonis",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:80974175},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.2615,.2615,.2615]},dynamo:[{url:"2101_adonis/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"2102_tantalus":{groups:["asteroids","NEOs","PHAs"],radius:.8245,label:"Tantalus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:46243117},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.8245,.8245,.8245]},dynamo:[{url:"2102_tantalus/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.384}},"2135_aristaeus":{groups:["asteroids","NEOs","PHAs"],radius:.5,label:"Aristaeus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:63842351},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.5,.5,.5]},dynamo:[{url:"2135_aristaeus/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"216_kleopatra":{groups:["asteroids","asteroid belt"],radius:138,label:"Kleopatra",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:147366495},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[138,47,39]},dynamo:[{url:"216_kleopatra/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:5.385}},"21900_orus":{groups:["asteroids"],radius:25.405,label:"Orus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:366046968.426},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:25.405},dynamo:[{url:"21900_orus/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:13.45}},"225088_2007_or10":{groups:["dwarf planets","TNOs"],radius:615,label:"2007 OR<sub>10</sub>",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:17453038503},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[615,615,596.55]},dynamo:[{url:"225088_2007_or10/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:22.4}},"2340_hathor":{groups:["asteroids","NEOs","PHAs"],radius:.105,label:"Hathor",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:24462116},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.105,.105,.105]},dynamo:[{url:"2340_hathor/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.35}},"243_ida":{groups:["asteroids","asteroid belt"],radius:29.9,label:"Ida",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:152692978},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[18.6*1.3,25.4*1.3,77.74],rotate:[{y:90}]},dynamo:[{url:"243_ida/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:4.634}},"25143_itokawa":{groups:["asteroids","NEOs","PHAs"],radius:.165,label:"Itokawa",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:48085521},model:{url:"$STATIC_ASSETS_URL/models/25143_itokawa/itokawa.gltf",rotate:[{x:90}]},dynamo:[{url:"25143_itokawa/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12.132}},"253_mathilde":{groups:["asteroids","asteroid belt"],radius:33,label:"Mathilde",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:136059532},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[33,24,23]},dynamo:[{url:"253_mathilde/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:417.7}},"2867_steins":{groups:["asteroids","asteroid belt"],radius:3.415,label:"Šteins",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:114690676},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3.415,2.85,2.21]},dynamo:[{url:"2867_steins/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:6.049}},"3_juno":{groups:["asteroids","asteroid belt"],radius:160,label:"Juno",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:137616821},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[160,133.5,100]},dynamo:[{url:"3_juno/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:7.21}},"3122_florence":{groups:["asteroids","NEOs","PHAs"],radius:2.2,label:"Florence",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:74244319},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.2,2.2,2.2]},dynamo:[{url:"3122_florence/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.3581}},"3200_phaethon":{groups:["asteroids","NEOs","PHAs"],radius:2.9,label:"Phaethon",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:45239890},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.9,2.9,2.9]},dynamo:[{url:"3200_phaethon/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.604}},"3362_khufu":{groups:["asteroids","NEOs","PHAs"],radius:.35,label:"Khufu",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31064230},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.35,.35,.35]},dynamo:[{url:"3362_khufu/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"3548_eurybates":{groups:["asteroids"],radius:31.9425,label:"Eurybates",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:374226349.15},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:31.9425},dynamo:[{url:"3548_eurybates/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:8.711}},"367943_duende":{groups:["asteroids","NEOs"],radius:.02,label:"Duende",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27409492},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.01,.01,.02]},dynamo:[{url:"367943_duende/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:9.485}},"37655_illapa":{groups:["asteroids","NEOs","PHAs"],radius:.75,label:"Illapa",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:56696394},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.75,.75,.75]},dynamo:[{url:"37655_illapa/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.6556}},"4_vesta":{groups:["asteroids","asteroid belt"],radius:262.7,label:"Vesta",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:114544800},model:{url:"$STATIC_ASSETS_URL/models/4_vesta/4_vesta.gltf",rotate:[{x:90}]},dynamo:[{url:"4_vesta/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"4015_wilson-harrington":{groups:["asteroids","NEOs","PHAs"],radius:2,label:"Wilson-Harrington",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:134340178},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2,2,2]},dynamo:[{url:"4015_wilson-harrington/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.5736}},"4179_toutatis":{groups:["asteroids","NEOs","PHAs"],radius:2.13,label:"Toutatis",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:127994167},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.35,1.015,2.13]},dynamo:[{url:"4179_toutatis/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:176}},"4183_cuno":{groups:["asteroids","NEOs","PHAs"],radius:1.8255,label:"Cuno",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:88105665},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.8255,1.8255,1.89255]},dynamo:[{url:"4183_cuno/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.5595}},"433_eros":{groups:["asteroids","NEOs"],radius:8.42,label:"Eros",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:55564653},model:{url:"$STATIC_ASSETS_URL/models/433_eros/433_eros.gltf"},dynamo:[{url:"433_eros/sun/orb"},{url:"433_eros/ori"}]},"4450_pan":{groups:["asteroids","NEOs","PHAs"],radius:.5,label:"Pan",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:54661485},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.5,.5,.5]},dynamo:[{url:"4450_pan/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:56.48}},"4486_mithra":{groups:["asteroids","NEOs","PHAs"],radius:1.175,label:"Mithra",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:102956005},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.175,.825,.72]},dynamo:[{url:"4486_mithra/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:67.5}},"4769_castalia":{groups:["asteroids","NEOs","PHAs"],radius:.9,label:"Castalia",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:34594967},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.4,.4,.9]},dynamo:[{url:"4769_castalia/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:4.095}},"486958_arrokoth":{groups:["TNOs"],radius:15,label:"Arrokoth",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:9354873600},model:{url:"$STATIC_ASSETS_URL/models/486958_arrokoth/mu69.gltf",scale:[1,1,1],rotate:[{x:-110},{y:180}]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"486958_arrokoth/sun/orb"}],spin:{axis:new a.Vector3(-6.121453676996425e-10,.9396926211599973,.34202014229786787),periodInHours:13},postCreateFunction:t=>{const e=t.get("spin");null!==e&&(e.setReferenceAngle(0),e.setReferenceTime(599590968))}},"5011_ptah":{groups:["asteroids","NEOs","PHAs"],radius:.78,label:"Ptah",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:66011009},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.78,.78,.78]},dynamo:[{url:"5011_ptah/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:12}},"52246_donaldjohanson":{groups:["asteroids"],radius:1.9475,label:"Donaldjohanson",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:116208e3},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:1.9475},dynamo:[{url:"52246_donaldjohanson/sun/orb"}],fixed:{orientation:a.Quaternion.Identity}},"5535_annefrank":{groups:["asteroids"],radius:2.412,label:"Annefrank",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:103852800},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:2.412},dynamo:[{url:"5535_annefrank/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:15.12}},"617_patroclus":{groups:["asteroids","617_patroclus_barycenter"],radius:64,label:"Patroclus",parents:[[Number.NEGATIVE_INFINITY,"617_patroclus_barycenter"]],trail:{length:183600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[64,58,49],shadowEntities:["menoetius"]},align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"menoetius"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=664,i.meanAngularMotion=1697791e-11,i.meanAnomalyAtEpoch=Math.PI,i.setOrbitOrientationFromElements(1.97244894756,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},"617_patroclus_barycenter":{groups:["asteroids"],radius:664,label:"Patroclus",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:375567312.149},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"617_patroclus/sun/orb"}],postCreateFunction:t=>{t.setCanOcclude(!1)}},"6239_minos":{groups:["asteroids","NEOs","PHAs"],radius:.237,label:"Minos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:38987872},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.237,.237,.237]},dynamo:[{url:"6239_minos/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:3.5558}},"6489_golevka":{groups:["asteroids","NEOs","PHAs"],radius:.265,label:"Golevka",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:124929936},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.265,.265,.265]},dynamo:[{url:"6489_golevka/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:6.026}},"65803_didymos":{groups:["asteroids","NEOs","PHAs"],radius:.39,label:"Didymos",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/65803_didymos/Didymos.gltf",rotate:[{z:180},{x:-90}]},fixed:{orientation:new a.Quaternion(0,1,0,0)},dynamo:[{url:"65803_didymos/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.2593,relativeToTime:0}},"66391_moshup":{groups:["asteroids","NEOs","PHAs"],radius:.766,label:"Moshup",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:16241014},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.766,.7475,.6735]},dynamo:[{url:"66391_moshup/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:2.7645}},"69230_hermes":{groups:["asteroids","NEOs","PHAs"],radius:.425,label:"Hermes",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:67203045},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[.425,.425,.425]},dynamo:[{url:"69230_hermes/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:13.894}},"90377_sedna":{groups:["dwarf planets","TNOs"],radius:497.5,label:"Sedna",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:331511477985},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[497.5,497.5,497.5]},dynamo:[{url:"90377_sedna/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:10.273}},"951_gaspra":{groups:["asteroids","asteroid belt"],radius:9.1,label:"Gaspra",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:17262935},model:{url:"$STATIC_ASSETS_URL/models/951_gaspra/gaspra.gltf"},dynamo:[{url:"951_gaspra/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:7.042}},"9969_braille":{groups:["asteroids","asteroid belt"],radius:1.05,label:"Braille",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:113087113},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.05,.5,.5]},dynamo:[{url:"9969_braille/sun/orb"}],spin:{axis:a.Vector3.ZAxis,periodInHours:226.4}},"99942_apophis":{groups:["asteroids","NEOs","PHAs"],radius:.225,label:"Apophis",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:27958776},model:{url:"$STATIC_ASSETS_URL/models/99942_apophis/apophis.gltf"},dynamo:[{url:"99942_apophis/sun/orb"}],spin:{axis:new a.Vector3(.20112425201023415,.46925803805904115,.8598522715968735),periodInHours:30.4}},charon:{groups:["134340_pluto","moons"],radius:603.5,label:"Charon",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto"]],trail:{length:551857,relativeTo:"134340_pluto_barycenter"},spheroid:{equatorialRadius:603.5,polarRadius:603.5,planetographic:!1},spheroidLOD:{textures:{color:{url:"charon/color_$SIZE_$FACE.png",sizes:[4,512,2048]}}},dynamo:[{url:"charon/134340_pluto/orb"}],align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"134340_pluto"},secondary:{type:"velocity",axis:a.Vector3.YAxis,target:"134340_pluto"}}},dactyl:{groups:["243_ida","moons"],radius:.7,label:"Dactyl",parents:[[Number.NEGATIVE_INFINITY,"243_ida"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[.8,.7,.6],rotate:[{z:90}]},align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"243_ida"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=90,i.meanAngularMotion=8726646e-11,i.meanAnomalyAtEpoch=0,i.orbitOrientation.set(.8728453580255966,.1876084386162498,-.08948587100888229,.4415159494547423),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},dimorphos:{groups:["65803_didymos","moons"],radius:.085,label:"Dimorphos",parents:[[Number.NEGATIVE_INFINITY,"65803_didymos"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/dimorphos/Dimorphos.gltf"},align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"65803_didymos"},secondary:{type:"align",axis:a.Vector3.ZAxis,target:"65803_didymos",targetAxis:a.Vector3.ZAxis}},dynamo:[{url:"dimorphos/65803_didymos/orb"}]},hiiaka:{groups:["136108_haumea","moons"],radius:160,label:"Hi'iaka",parents:[[Number.NEGATIVE_INFINITY,"136108_haumea"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[160,160,160]},align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"136108_haumea"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=0,i.eccentricity=.0513,i.semiMajorAxis=49880,i.meanAngularMotion=148049e-11,i.meanAnomalyAtEpoch=0,i.setOrbitOrientationFromElements(2.20532822965,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},hydra:{groups:["134340_pluto","moons"],radius:25,label:"Hydra",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:3300633},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[25,25,25],shadowEntities:["134340_pluto"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"hydra/134340_pluto_barycenter/orb"}]},kerberos:{groups:["134340_pluto","moons"],radius:8.25,label:"Kerberos",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:2779277},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[8.25,8.25,8.25],shadowEntities:["134340_pluto"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kerberos/134340_pluto_barycenter/orb"}]},menoetius:{groups:["617_patroclus_barycenter","moons"],radius:58,label:"Menoetius",parents:[[Number.NEGATIVE_INFINITY,"617_patroclus_barycenter"]],trail:{length:183600},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[58,54,45],shadowEntities:["617_patroclus"]},align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"617_patroclus"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=664,i.meanAngularMotion=1697791e-11,i.meanAnomalyAtEpoch=0,i.setOrbitOrientationFromElements(1.97244894756,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},namaka:{groups:["136108_haumea","moons"],radius:85,label:"Nāmaka",parents:[[Number.NEGATIVE_INFINITY,"136108_haumea"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[85,85,85]},align:{primary:{type:"point",axis:a.Vector3.XAxis,target:"136108_haumea"}},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=0,i.eccentricity=.249,i.semiMajorAxis=25657,i.meanAngularMotion=39786e-10,i.meanAnomalyAtEpoch=0,i.setOrbitOrientationFromElements(1.97244894756,0,0),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},nix:{groups:["134340_pluto","moons"],radius:24,label:"Nix",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:2147440},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[24,24,24],shadowEntities:["134340_pluto"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"nix/134340_pluto_barycenter/orb"}]},styx:{groups:["134340_pluto","moons"],radius:5.5,label:"Styx",parents:[[Number.NEGATIVE_INFINITY,"134340_pluto_barycenter"]],trail:{length:1741958},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[5.5,5.5,5.5],shadowEntities:["134340_pluto"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"styx/134340_pluto_barycenter/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(270),n=i(35);s.default.register({"1p_halley":{groups:["comets"],radius:6,label:"Halley (1P/Halley)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:2376918432},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[6,6,6]},comet:{},dynamo:[{url:"1p_halley/sun/orb"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(n.Vector3.ZAxis,!1),e.setRate(3356402e-11)}},"103p_hartley_2":{groups:["comets"],radius:2,label:"Hartley 2 (103P/Hartley)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:203862096},model:{url:"$STATIC_ASSETS_URL/models/103p_hartley_2/hartley_2.gltf"},comet:{},dynamo:[{url:"103p_hartley_2/sun/orb"},{url:"103p_hartley_2/ori"}]},"9p_tempel_1":{groups:["comets"],radius:5,label:"Tempel 1 (9P/Tempel)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:176091408},model:{url:"$STATIC_ASSETS_URL/models/9p_tempel_1/9p_tempel.gltf",rotate:[{y:90}]},comet:{},dynamo:[{url:"9p_tempel_1/sun/orb"},{url:"9p_tempel_1/ori"}]},"81p_wild_2":{groups:["comets"],radius:2.5,label:"Wild 2 (81P/Wild)",parents:[[Number.NEGATIVE_INFINITY,"sun"],[-800047271,"jupiter"],[-797029475,"sun"]],trail:{length:1356976800,lengthCoverages:[[1356976800,Number.NEGATIVE_INFINITY,-611927948.817],[189345600,-611927948.817,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.5,2.5,2.5]},comet:{},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"81p_wild_2/sun/1/orb"},{url:"81p_wild_2/jupiter/orb"},{url:"81p_wild_2/sun/2/orb"}]},"67p_churyumov_gerasimenko":{groups:["comets"],radius:4.1,label:"Churyumov–Gerasimenko (67P/C-G)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:203230944},model:{url:"$STATIC_ASSETS_URL/models/67p_churyumov_gerasimenko/67p_churyumov_gerasimenko.gltf",rotate:[{x:90}],scale:.00124},comet:{},dynamo:[{url:"67p_churyumov_gerasimenko/sun/orb"},{url:"67p_churyumov_gerasimenko/ori"}],postCreateFunction:t=>{t.setOrientation(new n.Quaternion(.26732846830704055,.017948528101847026,.22012096235022358,.9379552773483394));const e=t.get("dynamo");if(null!==e){const i=t.addController("spin",void 0,e);i.setAxis(new n.Vector3(.15191127889562422,.404099951782066,.9020123016422935),!1),i.setRate(.00014477940709946253)}a.EntityUtils.addGeyser(t,1,1,100,1,1,[1,-.25,1.2],[0,0,1]),a.EntityUtils.addGeyser(t,2,.5,100,1,1,[-1.2,-.25,.6],[.2,-.5,1]),a.EntityUtils.addGeyser(t,1,.07,100,1,10,[-1.2,.1,.6],[.2,-.5,1]),a.EntityUtils.addGeyser(t,1,1,100,1,1,[-.8,.75,1],[.2,.5,1]),a.EntityUtils.addGeyser(t,1,.5,100,1,1,[-.8,.35,-1],[.2,.25,-1])}},"19p_borrelly":{groups:["comets"],radius:2.4,label:"Borrelly (19P/Borrelly)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:214591680},model:{url:"$STATIC_ASSETS_URL/models/19p_borrelly/borrelly.gltf"},comet:{},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"19p_borrelly/sun/orb"}]},c_1995_o1:{groups:["comets"],radius:5,label:"Hale-Bopp (C/1995 O1)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:8007741e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[5,5,5]},comet:{},dynamo:[{url:"c_1995_o1/sun/orb"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(n.Vector3.ZAxis,!1),e.setRate(.00014832826)}},c_2010_x1:{groups:["comets"],radius:5,label:"Elenin (C/2010 X1)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[5,5,5]},comet:{},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"c_2010_x1/sun/pos"}]},c_2012_s1:{groups:["comets"],radius:3,label:"ISON (C/2012 S1)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3]},comet:{},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"c_2012_s1/sun/pos"}]},c_2013_a1:{groups:["comets"],radius:5,label:"Siding Spring (C/2013 A1)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[5,5,5]},comet:{},dynamo:[{url:"c_2013_a1/sun/pos"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(n.Vector3.ZAxis,!1),e.setRate(.00021816615)}},c_2019_y4:{groups:["comets"],radius:3,label:"ATLAS (C/2019 Y4)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:631152e4},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3]},comet:{},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"c_2019_y4/sun/orb"}]},c_2020_f3:{groups:["comets"],radius:6,label:"NEOWISE (C/2020 F3)",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:2376918432},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[6,6,6]},comet:{},dynamo:[{url:"c_2020_f3/sun/orb"}],postCreateFunction:t=>{const e=t.addController("spin");e.setAxis(n.Vector3.ZAxis,!1),e.setRate(.00023025451)}}}),e.default={}},function(t,e,i){"use strict";i.r(e),i.d(e,"EntityUtils",(function(){return a}));var s=i(35);class a{static addGeyser(t,e,i,a,n,r,o,l){const c=t.addComponent("particleSpray");c.setNumberOfParticles(a),c.setSizeOfParticles(.25*e*r),c.setSpeedOfParticles(n*e),c.setColorOfParticles(new s.Color(1,1,1,.5*i)),c.setSpread(1*r),c.setParticleSpacingRandom(!1),c.setLength(2.5*e),c.setOriginOffset(new s.Vector3(o[0],o[1],o[2])),c.setDirection(new s.Vector3(l[0],l[1],l[2]))}}},function(t,e,i){"use strict";i.r(e),i(161).default.register({moon:{groups:["earth","moons"],radius:1738.1,label:"Moon",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:2360590,color:[0,.6,.8,.7]},spheroid:{equatorialRadius:1738.1,polarRadius:1735.97,planetographic:!0},spheroidLOD:{features:["normalMap","shadowEntities"],textures:{color:{url:"moon/color_$SIZE_$FACE.png",sizes:[16,512,4096]},normal:{url:"moon/normal_$SIZE_$FACE.png",sizes:[16,512,2048]}},shadowEntities:["earth"]},dynamo:[{url:"moon/earth/orb"},{url:"moon/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e),i(161).default.register({adrastea:{groups:["jupiter","moons","amalthea","inner","regular"],radius:8.2,label:"Adrastea",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:25770,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[8.2,8.2,8.2],shadowEntities:["jupiter"]},dynamo:[{url:"adrastea/jupiter/orb"},{url:"adrastea/ori"}]},amalthea:{groups:["jupiter","moons","amalthea","inner","regular"],radius:83.5,label:"Amalthea",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:43043,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[83.5,83.5,83.5],shadowEntities:["jupiter"]},dynamo:[{url:"amalthea/jupiter/orb"},{url:"amalthea/ori"}]},callisto:{groups:["jupiter","moons","main","galilean","regular"],radius:2410.3,label:"Callisto",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:1441931,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:2410.3,polarRadius:2410.3,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"callisto/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["jupiter","io","europa","ganymede"]},dynamo:[{url:"callisto/jupiter/orb"},{url:"callisto/ori"}]},europa:{groups:["jupiter","moons","main","galilean","regular"],radius:1569,label:"Europa",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:306822,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:1569,polarRadius:1569,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"europa/color_$SIZE_$FACE.png",sizes:[4,512,1024]}},shadowEntities:["jupiter","io","callisto","ganymede"]},dynamo:[{url:"europa/jupiter/orb"},{url:"europa/ori"}]},ganymede:{groups:["jupiter","moons","main","galilean","regular"],radius:2634.1,label:"Ganymede",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:618153,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:2634.1,polarRadius:2634.1,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"ganymede/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["jupiter","io","europa","callisto"]},dynamo:[{url:"ganymede/jupiter/orb"},{url:"ganymede/ori"}]},io:{groups:["jupiter","moons","main","galilean","regular"],radius:1821.3,label:"Io",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:152853,color:[.95,.71,.64,.7]},spheroid:{equatorialRadius:1821.3,polarRadius:1821.3,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"io/color_$SIZE_$FACE.png",sizes:[4,512,1024]}},shadowEntities:["jupiter","europa","ganymede","callisto"]},dynamo:[{url:"io/jupiter/orb"},{url:"io/ori"}]},metis:{groups:["jupiter","moons","amalthea","inner","regular"],radius:21.5,label:"Metis",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:25469,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[21.5,21.5,21.5],shadowEntities:["jupiter"]},dynamo:[{url:"metis/jupiter/orb"},{url:"metis/ori"}]},thebe:{groups:["jupiter","moons","amalthea","inner","regular"],radius:49,label:"Thebe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:58277,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[49,49,49],shadowEntities:["jupiter"]},dynamo:[{url:"thebe/jupiter/orb"},{url:"thebe/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({aitne:{groups:["jupiter","moons","irregular","carme"],radius:1.5,label:"Aitne",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:58720896,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"aitne/jupiter/orb"}]},ananke:{groups:["jupiter","moons","irregular","ananke"],radius:14,label:"Ananke",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:152850,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[14,14,14],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"ananke/jupiter/orb"}]},aoede:{groups:["jupiter","moons","irregular","pasiphae"],radius:2,label:"Aoede",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:306823,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"aoede/jupiter/orb"}]},arche:{groups:["jupiter","moons","irregular","carme"],radius:1.5,label:"Arche",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:618157,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"arche/jupiter/orb"}]},autonoe:{groups:["jupiter","moons","irregular","pasiphae"],radius:2,label:"Autonoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:1441929,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"autonoe/jupiter/orb"}]},callirrhoe:{groups:["jupiter","moons","irregular","pasiphae"],radius:4.3,label:"Callirrhoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62822304,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[4.3,4.3,4.3],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"callirrhoe/jupiter/orb"}]},carme:{groups:["jupiter","moons","irregular","carme"],radius:23,label:"Carme",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66005280,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[23,23,23],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"carme/jupiter/orb"}]},carpo:{groups:["jupiter","moons","irregular"],radius:1.5,label:"Carpo",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:39624768,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"carpo/jupiter/orb"}]},chaldene:{groups:["jupiter","moons","irregular","carme"],radius:1.9,label:"Chaldene",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:60422112,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.9,1.9,1.9],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"chaldene/jupiter/orb"}]},cyllene:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Cyllene",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63167040,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"cyllene/jupiter/orb"}]},dia:{groups:["jupiter","moons","irregular","himalia"],radius:2,label:"Dia",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61516800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:2,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"dia/jupiter/orb"}]},eirene:{groups:["jupiter","moons","irregular","carme"],radius:2,label:"Eirene",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:65359008,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:2,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"eirene/jupiter/orb"}]},elara:{groups:["jupiter","moons","irregular","himalia"],radius:43,label:"Elara",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:22258368,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[43,43,43],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"elara/jupiter/orb"}]},erinome:{groups:["jupiter","moons","irregular","carme"],radius:1.6,label:"Erinome",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61513344,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.6,1.6,1.6],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"erinome/jupiter/orb"}]},ersa:{groups:["jupiter","moons","irregular","himalia"],radius:1.5,label:"Ersa",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:21339936,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:1.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"ersa/jupiter/orb"}]},euanthe:{groups:["jupiter","moons","irregular","ananke"],radius:1.5,label:"Euanthe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51674976,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"euanthe/jupiter/orb"}]},eukelade:{groups:["jupiter","moons","irregular","carme"],radius:2,label:"Eukelade",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63521280,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"eukelade/jupiter/orb"}]},eupheme:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Eupheme",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:50397984,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"eupheme/jupiter/orb"}]},euporie:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Euporie",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:46550592,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"euporie/jupiter/orb"}]},eurydome:{groups:["jupiter","moons","irregular","pasiphae"],radius:1.5,label:"Eurydome",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62498304,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"eurydome/jupiter/orb"}]},harpalyke:{groups:["jupiter","moons","irregular","ananke"],radius:2.2,label:"Harpalyke",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:53960256,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2.2,2.2,2.2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"harpalyke/jupiter/orb"}]},hegemone:{groups:["jupiter","moons","irregular","pasiphae"],radius:1.5,label:"Hegemone",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:64411200,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.5,1.5,1.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"hegemone/jupiter/orb"}]},helike:{groups:["jupiter","moons","irregular","ananke"],radius:2,label:"Helike",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51960960,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"helike/jupiter/orb"}]},hermippe:{groups:["jupiter","moons","irregular","ananke"],radius:2,label:"Hermippe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:54415584,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"hermippe/jupiter/orb"}]},herse:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Herse",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:58125600,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"herse/jupiter/orb"}]},himalia:{groups:["jupiter","moons","irregular","himalia"],radius:85,label:"Himalia",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:21619872,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[85,85,85],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"himalia/jupiter/orb"}]},iocaste:{groups:["jupiter","moons","irregular","ananke"],radius:2.6,label:"Iocaste",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52654752,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2.6,2.6,2.6],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"iocaste/jupiter/orb"}]},isonoe:{groups:["jupiter","moons","irregular","carme"],radius:1.9,label:"Isonoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:64811232,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.9,1.9,1.9],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"isonoe/jupiter/orb"}]},jupiter_li:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61516800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_li/jupiter/orb"}]},jupiter_lii:{groups:["jupiter","moons","irregular","ananke"],radius:.5,label:"Jupiter LII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51568704,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lii/jupiter/orb"}]},jupiter_liv:{groups:["jupiter","moons","irregular","ananke"],radius:.5,label:"Jupiter LIV",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51568704,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_liv/jupiter/orb"}]},jupiter_lv:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LV",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51236064,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lv/jupiter/orb"}]},jupiter_lvi:{groups:["jupiter","moons","irregular","pasiphae"],radius:.5,label:"Jupiter LVI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66098592,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lvi/jupiter/orb"}]},jupiter_lix:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Jupiter LIX",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:64619424,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lix/jupiter/orb"}]},jupiter_lxi:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LXI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:60577632,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxi/jupiter/orb"}]},jupiter_lxiii:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LXIII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59464800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxiii/jupiter/orb"}]},jupiter_lxiv:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LXIV",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:53626752,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxiv/jupiter/orb"}]},jupiter_lxvi:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Jupiter LXVI",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62989920,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxvi/jupiter/orb"}]},jupiter_lxvii:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Jupiter LXVII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59746464,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxvii/jupiter/orb"}]},jupiter_lxviii:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LXVIII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52188192,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxviii/jupiter/orb"}]},jupiter_lxix:{groups:["jupiter","moons","irregular","carme"],radius:.5,label:"Jupiter LXIX",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62267616,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxix/jupiter/orb"}]},jupiter_lxx:{groups:["jupiter","moons","irregular","ananke"],radius:1.5,label:"Jupiter LXX",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55617408,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxx/jupiter/orb"}]},jupiter_lxxii:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Jupiter LXXII",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55617408,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jupiter_lxxii/jupiter/orb"}]},kale:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Kale",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59211648,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kale/jupiter/orb"}]},kallichore:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Kallichore",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62018784,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kallichore/jupiter/orb"}]},kalyke:{groups:["jupiter","moons","irregular","carme"],radius:2.6,label:"Kalyke",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62296128,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.6,2.6,2.6],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kalyke/jupiter/orb"}]},kore:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Kore",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:67048128,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kore/jupiter/orb"}]},leda:{groups:["jupiter","moons","irregular","himalia"],radius:10,label:"Leda",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:20806848,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[10,10,10],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"leda/jupiter/orb"}]},lysithea:{groups:["jupiter","moons","irregular","himalia"],radius:18,label:"Lysithea",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:22454496,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[18,18,18],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"lysithea/jupiter/orb"}]},megaclite:{groups:["jupiter","moons","irregular","pasiphae"],radius:2.7,label:"Megaclite",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:68466816,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.7,2.7,2.7],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"megaclite/jupiter/orb"}]},mneme:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Mneme",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:54214272,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"mneme/jupiter/orb"}]},orthosie:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Orthosie",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52066368,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"orthosie/jupiter/orb"}]},pandia:{groups:["jupiter","moons","irregular","himalia"],radius:1.5,label:"Pandia",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:21661344,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:1.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"pandia/jupiter/orb"}]},pasiphae:{groups:["jupiter","moons","irregular","pasiphae"],radius:30,label:"Pasiphae",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63918720,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[30,30,30],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"pasiphae/jupiter/orb"}]},pasithee:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"Pasithee",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:62806752,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"pasithee/jupiter/orb"}]},philophrosyne:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Philophrosyne",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61327584,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"philophrosyne/jupiter/orb"}]},praxidike:{groups:["jupiter","moons","irregular","ananke"],radius:3.4,label:"Praxidike",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:53040960,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3.4,3.4,3.4],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"praxidike/jupiter/orb"}]},s_2003_j_2:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"S/2003 J 2",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:52014528,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_2/jupiter/orb"}]},s_2003_j_4:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"S/2003 J 4",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:57788640,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_4/jupiter/orb"}]},s_2003_j_9:{groups:["jupiter","moons","irregular","carme"],radius:.5,label:"S/2003 J 9",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66320640,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_9/jupiter/orb"}]},s_2003_j_10:{groups:["jupiter","moons","irregular","carme"],radius:1,label:"S/2003 J 10",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:61152192,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_10/jupiter/orb"}]},s_2003_j_12:{groups:["jupiter","moons","irregular","ananke"],radius:.5,label:"S/2003 J 12",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55869696,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_12/jupiter/orb"}]},s_2003_j_16:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"S/2003 J 16",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51855552,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_16/jupiter/orb"}]},s_2003_j_23:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"S/2003 J 23",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:68428800,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2003_j_23/jupiter/orb"}]},sinope:{groups:["jupiter","moons","irregular","pasiphae"],radius:19,label:"Sinope",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:63878112,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[19,19,19],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"sinope/jupiter/orb"}]},sponde:{groups:["jupiter","moons","irregular","pasiphae"],radius:1,label:"Sponde",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:66666240,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"sponde/jupiter/orb"}]},taygete:{groups:["jupiter","moons","irregular","carme"],radius:2.5,label:"Taygete",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:59328288,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.5,2.5,2.5],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"taygete/jupiter/orb"}]},thelxinoe:{groups:["jupiter","moons","irregular","ananke"],radius:1,label:"Thelxinoe",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:51633504,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1,1,1],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"thelxinoe/jupiter/orb"}]},themisto:{groups:["jupiter","moons","irregular"],radius:4,label:"Themisto",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:11220768,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[4,4,4],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"themisto/jupiter/orb"}]},thyone:{groups:["jupiter","moons","irregular","ananke"],radius:2,label:"Thyone",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:55278720,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2,2,2],shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"thyone/jupiter/orb"}]},valetudo:{groups:["jupiter","moons","irregular"],radius:.5,label:"Valetudo",parents:[[Number.NEGATIVE_INFINITY,"jupiter"]],trail:{length:45568224,color:[.95,.71,.64,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.5,shadowEntities:["jupiter"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"valetudo/jupiter/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e),i(161).default.register({phobos:{groups:["mars","moons"],radius:14,label:"Phobos",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:27554,color:[.89,.51,.35,.7]},model:{url:"$STATIC_ASSETS_URL/models/phobos/phobos.gltf",scale:[1,1,1],rotate:[{z:90},{y:90}],shadowEntities:["mars"]},dynamo:[{url:"phobos/mars/orb"},{url:"phobos/ori"}]},deimos:{groups:["mars","moons"],radius:8.70951,label:"Deimos",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:109123,color:[.89,.51,.35,.7]},model:{url:"$STATIC_ASSETS_URL/models/deimos/deimos.gltf",scale:[1,1,1],rotate:[{y:-180}],shadowEntities:["mars"]},dynamo:[{url:"deimos/mars/orb"},{url:"deimos/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({despina:{groups:["neptune","moons","regular"],radius:90,label:"Despina",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:28909,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[90,90,90],shadowEntities:["neptune"]},dynamo:[{url:"despina/neptune/orb"},{url:"despina/ori"}]},galatea:{groups:["neptune","moons","regular"],radius:102,label:"Galatea",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:37039,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[102,102,102],shadowEntities:["neptune"]},dynamo:[{url:"galatea/neptune/orb"},{url:"galatea/ori"}]},halimede:{groups:["neptune","moons","irregular"],radius:31,label:"Halimede",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:162352512,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[31,31,31],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"halimede/neptune/orb"}]},hippocamp:{groups:["neptune","moons","regular"],radius:17.4,label:"Hippocamp",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:80870,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[17.4,17.4,17.4],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"hippocamp/neptune/orb"}]},laomedeia:{groups:["neptune","moons","irregular"],radius:21,label:"Laomedeia",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:274002912,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[21,21,21],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"laomedeia/neptune/orb"}]},larissa:{groups:["neptune","moons","regular"],radius:108,label:"Larissa",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:47995,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[108,108,108],shadowEntities:["neptune"]},dynamo:[{url:"larissa/neptune/orb"},{url:"larissa/ori"}]},naiad:{groups:["neptune","moons","regular"],radius:48,label:"Naiad",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:25436,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[48,48,48],shadowEntities:["neptune"]},dynamo:[{url:"naiad/neptune/orb"},{url:"naiad/ori"}]},nereid:{groups:["neptune","moons","irregular"],radius:170,label:"Nereid",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:31115768,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[170,170,170],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"nereid/neptune/orb"}]},neso:{groups:["neptune","moons","irregular"],radius:30,label:"Neso",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:841599072,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[30,30,30],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"neso/neptune/orb"}]},proteus:{groups:["neptune","moons","regular"],radius:232.5,label:"Proteus",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:96940,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/proteus/proteus.gltf",scale:[1,1,1]},dynamo:[{url:"proteus/neptune/orb"},{url:"proteus/ori"}]},psamathe:{groups:["neptune","moons","irregular"],radius:20,label:"Psamathe",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:784019520,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[20,20,20],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"psamathe/neptune/orb"}]},sao:{groups:["neptune","moons","irregular"],radius:22,label:"Sao",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:251659008,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[22,22,22],shadowEntities:["neptune"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"sao/neptune/orb"}]},thalassa:{groups:["neptune","moons","regular"],radius:54,label:"Thalassa",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:26913,color:[.48,.69,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[54,54,54],shadowEntities:["neptune"]},dynamo:[{url:"thalassa/neptune/orb"},{url:"thalassa/ori"}]},triton:{groups:["neptune","moons","irregular"],radius:1353.4,label:"Triton",parents:[[Number.NEGATIVE_INFINITY,"neptune"]],trail:{length:507760,color:[.48,.69,1,.7]},spheroid:{equatorialRadius:1353.4,polarRadius:1353.4,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"triton/color_$SIZE_$FACE.jpg",sizes:[16,512,4096]}},shadowEntities:["neptune"]},dynamo:[{url:"triton/neptune/orb"},{url:"triton/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(270),n=i(35);s.default.register({dione:{groups:["saturn","moons","inner","major"],radius:561.7,label:"Dione",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:236469,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:561.7,polarRadius:561.7,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"dione/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"dione/saturn/orb"},{url:"dione/ori"}]},enceladus:{groups:["saturn","moons","inner","major"],radius:252.1,label:"Enceladus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:118387,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:252.1,polarRadius:252.1,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"enceladus/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"enceladus/saturn/orb"},{url:"enceladus/ori"}],postCreateFunction:t=>{a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-20.16,.8*-69.23,.8*-240.99],[-.0999,-.2747,-.9563]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-49.384,.8*-24.61,.8*-243.08],[-.2449,-.0976,-.9646]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[.8*-35.82,-37.496,-196],[-.1421,-.1859,-.9722]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[21.259,.7*-17.54,-174.685],[.1205,-.0696,-.9902]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[0,1.54,-176.393],[0,.0087,-.9999]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-21.658,21.658,-173.719],[-.1227,.1227,-.9848]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[32.193,.7*-34.55,.7*-245.35],[.1824,-.1371,-.9736]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-46.719,.68*.9,-221.931],[-.2059,.0026,-.9785]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[.9*-31.81,-12.024,-224.667],[-.1262,-.053,-.9905]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[.9*-5.49,-26.793,-225.162],[-.0217,-.1181,-.9927]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[14.886,-42.39,-222.309],[.0656,-.1869,-.9801]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[-13.176,48.112,-195.328],[-.0653,.2386,-.9689]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[51.52*.8,19.176,.8*-245.51],[.2044,.0951,-.9742]),a.EntityUtils.addGeyser(t,100,.1,20,.002,4,[22.504,33.52*.8,-198.536],[.1116,.133,-.9848])}},hyperion:{groups:["saturn","moons","outer","major"],radius:135,label:"Hyperion",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:1838299,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/hyperion/hyperion.gltf",scale:[1,1,1]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"hyperion/saturn/orb"}]},iapetus:{groups:["saturn","moons","outer","major"],radius:735.6,label:"Iapetus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:6853378,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:735.6,polarRadius:735.6,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"iapetus/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"iapetus/saturn/orb"},{url:"iapetus/ori"}]},mimas:{groups:["saturn","moons","inner","major"],radius:198.3,label:"Mimas",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81389,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/mimas/mimas.gltf",scale:[1,1,1]},dynamo:[{url:"mimas/saturn/orb"},{url:"mimas/ori"}]},rhea:{groups:["saturn","moons","outer","major"],radius:764.3,label:"Rhea",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:390374,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:764.3,polarRadius:764.3,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"rhea/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"rhea/saturn/orb"},{url:"rhea/ori"}]},tethys:{groups:["saturn","moons","inner","major"],radius:538.4,label:"Tethys",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:163106,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:538.4,polarRadius:527.5,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"tethys/color_$SIZE_$FACE.png",sizes:[4,512,2048]}},shadowEntities:["saturn"]},dynamo:[{url:"tethys/saturn/orb"},{url:"tethys/ori"}]},titan:{groups:["saturn","moons","outer","major"],radius:2575,label:"Titan",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:1377648,color:[.72,.65,.52,.7]},spheroid:{equatorialRadius:2575,polarRadius:2575,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"titan/color_$SIZE_$FACE.png",sizes:[4,512,1024]}},shadowEntities:["saturn"]},dynamo:[{url:"titan/saturn/orb"},{url:"titan/ori"}],postCreateFunction:t=>{const e=t.addComponent("atmosphere");e.setScaleHeight(75),e.setDensity(5e-4),e.setColor(new n.Color(179/255,145/255,53/255)),e.setSunsetColor(new n.Color(49/255,103/255,.8)),e.setSunsetIntensity(1.2)}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({aegaeon:{groups:["saturn","moons","minor","ring moonlet"],radius:.12,label:"Aegaeon",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:69822,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.12,.12,.12],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"aegaeon/saturn/orb"}]},aegir:{groups:["saturn","moons","minor","norse"],radius:3,label:"Aegir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:94561344,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"aegir/saturn/orb"}]},albiorix:{groups:["saturn","moons","minor","gallic"],radius:16,label:"Albiorix",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:66923712,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[16,16,16],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"albiorix/saturn/orb"}]},anthe:{groups:["saturn","moons","minor","alkyonides"],radius:.9,label:"Anthe",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:90797,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[.9,.9,.9],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"anthe/saturn/orb"}]},atlas:{groups:["saturn","moons","minor","ring shepherd"],radius:15.1,label:"Atlas",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:51986,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[15.1,15.1,15.1],shadowEntities:["saturn"]},dynamo:[{url:"atlas/saturn/orb"},{url:"atlas/ori"}]},bebhionn:{groups:["saturn","moons","minor","gallic"],radius:3,label:"Bebhionn",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:72469728,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"bebhionn/saturn/orb"}]},bergelmir:{groups:["saturn","moons","minor","norse"],radius:3,label:"Bergelmir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:85175712,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"bergelmir/saturn/orb"}]},bestla:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Bestla",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:95165280,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"bestla/saturn/orb"}]},calypso:{groups:["saturn","moons","minor","trojan"],radius:10.7,label:"Calypso",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:163106,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[10.7,10.7,10.7],shadowEntities:["saturn"]},dynamo:[{url:"calypso/saturn/orb"},{url:"calypso/ori"}]},daphnis:{groups:["saturn","moons","minor","ring shepherd"],radius:3.8,label:"Daphnis",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:51328,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3.8,3.8,3.8],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"daphnis/saturn/orb"}]},epimetheus:{groups:["saturn","moons","minor","co-orbital"],radius:58.1,label:"Epimetheus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:59990,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[58.1,58.1,58.1],shadowEntities:["saturn"]},dynamo:[{url:"epimetheus/saturn/orb"},{url:"epimetheus/ori"}]},erriapus:{groups:["saturn","moons","minor","gallic"],radius:5,label:"Erriapus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:72998496,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[5,5,5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"erriapus/saturn/orb"}]},farbauti:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"Farbauti",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:91132992,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[2.5,2.5,2.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"farbauti/saturn/orb"}]},fenrir:{groups:["saturn","moons","minor","norse"],radius:2,label:"Fenrir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:104762592,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[2,2,2],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"fenrir/saturn/orb"}]},fornjot:{groups:["saturn","moons","minor","norse"],radius:3,label:"Fornjot",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:123738624,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"fornjot/saturn/orb"}]},greip:{groups:["saturn","moons","minor","norse"],radius:3,label:"Greip",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:78326784,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"greip/saturn/orb"}]},hati:{groups:["saturn","moons","minor","norse"],radius:3,label:"Hati",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:89255520,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"hati/saturn/orb"}]},helene:{groups:["saturn","moons","minor","trojan"],radius:17.6,label:"Helene",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:236469,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[17.6,17.6,17.6],shadowEntities:["saturn"]},dynamo:[{url:"helene/saturn/orb"},{url:"helene/ori"}]},hyrrokkin:{groups:["saturn","moons","minor","norse"],radius:3,label:"Hyrrokkin",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:78994656,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"hyrrokkin/saturn/orb"}]},ijiraq:{groups:["saturn","moons","minor","inuit"],radius:6,label:"Ijiraq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:39032928,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[6,6,6],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"ijiraq/saturn/orb"}]},janus:{groups:["saturn","moons","minor","co-orbital"],radius:89.5,label:"Janus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:60019,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[89.5,89.5,89.5],shadowEntities:["saturn"]},dynamo:[{url:"janus/saturn/orb"},{url:"janus/ori"}]},jarnsaxa:{groups:["saturn","moons","minor","norse"],radius:3,label:"Jarnsaxa",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81542592,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"jarnsaxa/saturn/orb"}]},kari:{groups:["saturn","moons","minor","norse"],radius:3,label:"Kari",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:107573184,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kari/saturn/orb"}]},kiviuq:{groups:["saturn","moons","minor","inuit"],radius:8,label:"Kiviuq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:38721024,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[8,8,8],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"kiviuq/saturn/orb"}]},loge:{groups:["saturn","moons","minor","norse"],radius:3,label:"Loge",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:112402080,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"loge/saturn/orb"}]},methone:{groups:["saturn","moons","minor","alkyonides"],radius:1.6,label:"Methone",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:87227,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[1.6,1.6,1.6],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"methone/saturn/orb"}]},mundilfari:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Mundilfari",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:82658880,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"mundilfari/saturn/orb"}]},narvi:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Narvi",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:87130080,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"narvi/saturn/orb"}]},paaliaq:{groups:["saturn","moons","minor","inuit"],radius:11,label:"Paaliaq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:59873472,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[11,11,11],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"paaliaq/saturn/orb"}]},pallene:{groups:["saturn","moons","minor","alkyonides"],radius:2.5,label:"Pallene",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:99684,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[2.5,2.5,2.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"pallene/saturn/orb"}]},pan:{groups:["saturn","moons","minor","ring shepherd"],radius:14.1,label:"Pan",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:49684,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[14.1,14.1,14.1],shadowEntities:["saturn"]},dynamo:[{url:"pan/saturn/orb"},{url:"pan/ori"}]},pandora:{groups:["saturn","moons","minor","ring shepherd"],radius:40.7,label:"Pandora",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:54302,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[40.7,40.7,40.7],shadowEntities:["saturn"]},dynamo:[{url:"pandora/saturn/orb"},{url:"pandora/ori"}]},phoebe:{groups:["saturn","moons","minor","norse"],radius:106.5,label:"Phoebe",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:47095776,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/phoebe/phoebe.gltf"},dynamo:[{url:"phoebe/saturn/orb"},{url:"phoebe/ori"}]},polydeuces:{groups:["saturn","moons","minor","trojan"],radius:1.3,label:"Polydeuces",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:236469,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[1.3,1.3,1.3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"polydeuces/saturn/orb"}]},prometheus:{groups:["saturn","moons","minor","ring shepherd"],radius:43.1,label:"Prometheus",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:52962,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[43.1,43.1,43.1],shadowEntities:["saturn"]},dynamo:[{url:"prometheus/saturn/orb"},{url:"prometheus/ori"}]},s_2004_s_7:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2004 S 7",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:94270176,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_7/saturn/orb"}]},s_2004_s_12:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"S/2004 S 12",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:89439552,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_12/saturn/orb"}]},s_2004_s_13:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2004 S 13",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81792288,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_13/saturn/orb"}]},s_2004_s_17:{groups:["saturn","moons","minor","norse"],radius:2,label:"S/2004 S 17",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:88339680,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_17/saturn/orb"}]},s_2004_s_21:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"S/2004 S 21",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:115141824,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_21/saturn/orb"}]},s_2004_s_24:{groups:["saturn","moons","minor","gallic"],radius:1.5,label:"S/2004 S 24",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:114920640,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_24/saturn/orb"}]},s_2004_s_28:{groups:["saturn","moons","minor","norse"],radius:2,label:"S/2004 S 28",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:106225344,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_28/saturn/orb"}]},s_2004_s_31:{groups:["saturn","moons","minor","inuit"],radius:2,label:"S/2004 S 31",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:74354112,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_31/saturn/orb"}]},s_2004_s_36:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"S/2004 S 36",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:116774784,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_36/saturn/orb"}]},s_2004_s_37:{groups:["saturn","moons","minor","norse"],radius:2,label:"S/2004 S 37",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:64200384,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_37/saturn/orb"}]},s_2004_s_39:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"S/2004 S 39",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:115937568,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2004_s_39/saturn/orb"}]},s_2006_s_1:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"S/2006 S 1",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:83414016,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2006_s_1/saturn/orb"}]},s_2006_s_3:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2006 S 3",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:102453984,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2006_s_3/saturn/orb"}]},s_2007_s_2:{groups:["saturn","moons","minor","norse"],radius:3,label:"S/2007 S 2",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:65109312,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2007_s_2/saturn/orb"}]},s_2007_s_3:{groups:["saturn","moons","minor","norse"],radius:2.5,label:"S/2007 S 3",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:85440096,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2007_s_3/saturn/orb"}]},s_2009_s_1:{groups:["saturn","moons","propeller moonlet"],radius:.15,label:"S/2009 S 1",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:40608,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:.15,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=0,i.eccentricity=0,i.semiMajorAxis=117e3,i.meanAngularMotion=.00015472777,i.meanAnomalyAtEpoch=-1.5,i.orbitOrientation.set(-.9397445462795919,.02005900203250964,-.052689008288728606,-.33719681579275607),e.addOrbitalElements(-1e100,i),e.addOrbitalElements(1e100,i)}},s_2019_s_1:{groups:["saturn","moons","minor","inuit"],radius:3,label:"S/2019 S 1",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:38342592,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"s_2019_s_1/saturn/orb"}]},saturn_liv:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LIV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:85738176,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_liv/saturn/orb"}]},saturn_lv:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"Saturn LV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:96327360,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lv/saturn/orb"}]},saturn_lvi:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LVI",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:101297088,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lvi/saturn/orb"}]},saturn_lvii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LVII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:96869088,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lvii/saturn/orb"}]},saturn_lviii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LVIII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:140744736,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lviii/saturn/orb"}]},saturn_lix:{groups:["saturn","moons","minor","norse"],radius:3,label:"Saturn LIX",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:91120032,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lix/saturn/orb"}]},saturn_lx:{groups:["saturn","moons","minor","inuit"],radius:2,label:"Saturn LX",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:72782496,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lx/saturn/orb"}]},saturn_lxi:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"Saturn LXI",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:96300576,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lxi/saturn/orb"}]},saturn_lxii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LXII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:97908480,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lxii/saturn/orb"}]},saturn_lxiii:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LXIII",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:113160672,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lxiii/saturn/orb"}]},saturn_lxiv:{groups:["saturn","moons","minor","norse"],radius:1.5,label:"Saturn LXIV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:126476640,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:1.5,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lxiv/saturn/orb"}]},saturn_lxv:{groups:["saturn","moons","minor","norse"],radius:3,label:"Saturn LXV",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:104288256,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:3,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lxv/saturn/orb"}]},saturn_lxvi:{groups:["saturn","moons","minor","norse"],radius:2,label:"Saturn LXVI",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:109711584,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:2,shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"saturn_lxvi/saturn/orb"}]},siarnaq:{groups:["saturn","moons","minor","inuit"],radius:20,label:"Siarnaq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:76453632,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[20,20,20],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"siarnaq/saturn/orb"}]},skathi:{groups:["saturn","moons","minor","norse"],radius:4,label:"Skathi",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:63289728,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[4,4,4],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"skathi/saturn/orb"}]},skoll:{groups:["saturn","moons","minor","norse"],radius:3,label:"Skoll",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:74508768,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"skoll/saturn/orb"}]},surtur:{groups:["saturn","moons","minor","norse"],radius:3,label:"Surtur",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:107339904,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"surtur/saturn/orb"}]},suttungr:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Suttungr",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:88371648,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"suttungr/saturn/orb"}]},tarqeq:{groups:["saturn","moons","minor","inuit"],radius:3,label:"Tarqeq",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:77315904,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3,3,3],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"tarqeq/saturn/orb"}]},tarvos:{groups:["saturn","moons","minor","gallic"],radius:7.5,label:"Tarvos",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:81581472,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[7.5,7.5,7.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"tarvos/saturn/orb"}]},telesto:{groups:["saturn","moons","minor","trojan"],radius:12.4,label:"Telesto",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:163106,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[12.4,12.4,12.4],shadowEntities:["saturn"]},dynamo:[{url:"telesto/saturn/orb"},{url:"telesto/ori"}]},thrymr:{groups:["saturn","moons","minor","norse"],radius:3.5,label:"Thrymr",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:93146976,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[3.5,3.5,3.5],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"thrymr/saturn/orb"}]},ymir:{groups:["saturn","moons","minor","norse"],radius:9,label:"Ymir",parents:[[Number.NEGATIVE_INFINITY,"saturn"]],trail:{length:108358560,color:[.72,.65,.52,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[9,9,9],shadowEntities:["saturn"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"ymir/saturn/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e),i(161).default.register({ariel:{groups:["uranus","moons","major"],radius:578.9,label:"Ariel",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:217728,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:578.9,polarRadius:578.9,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"ariel/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["uranus"]},dynamo:[{url:"ariel/uranus/orb"},{url:"ariel/ori"}]},miranda:{groups:["uranus","moons","major"],radius:235.8,label:"Miranda",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:122125,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:235.8,polarRadius:235.8,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"miranda/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["uranus"]},dynamo:[{url:"miranda/uranus/orb"},{url:"miranda/ori"}]},oberon:{groups:["uranus","moons","major"],radius:761.4,label:"Oberon",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:1163223,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:761.4,polarRadius:761.4,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"oberon/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["uranus"]},dynamo:[{url:"oberon/uranus/orb"},{url:"oberon/ori"}]},titania:{groups:["uranus","moons","major"],radius:788.4,label:"Titania",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:752219,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:788.4,polarRadius:788.4,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"titania/color_$SIZE_$FACE.png",sizes:[4,512]}},shadowEntities:["uranus"]},dynamo:[{url:"titania/uranus/orb"},{url:"titania/ori"}]},umbriel:{groups:["uranus","moons","major"],radius:584.7,label:"Umbriel",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:358042,color:[.67,.92,1,.7]},spheroid:{equatorialRadius:584.7,polarRadius:584.7,planetographic:!1},spheroidLOD:{features:["shadowEntities"],textures:{color:{url:"umbriel/color_$SIZE_$FACE.png",sizes:[4,256]}},shadowEntities:["uranus"]},dynamo:[{url:"umbriel/uranus/orb"},{url:"umbriel/ori"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({belinda:{groups:["uranus","moons","minor","inner"],radius:45,label:"Belinda",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:53873,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[45,45,45],shadowEntities:["uranus"]},dynamo:[{url:"belinda/uranus/orb"},{url:"belinda/ori"}]},bianca:{groups:["uranus","moons","minor","inner"],radius:25.7,label:"Bianca",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:37548,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[25.7,25.7,25.7],shadowEntities:["uranus"]},dynamo:[{url:"bianca/uranus/orb"},{url:"bianca/ori"}]},caliban:{groups:["uranus","moons","minor","irregular"],radius:36,label:"Caliban",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:50068800,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[36,36,36],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"caliban/uranus/orb"}]},cordelia:{groups:["uranus","moons","minor","inner"],radius:20.1,label:"Cordelia",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:28947,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[20.1,20.1,20.1],shadowEntities:["uranus"]},dynamo:[{url:"cordelia/uranus/orb"},{url:"cordelia/ori"}]},cressida:{groups:["uranus","moons","minor","inner"],radius:39.8,label:"Cressida",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:40052,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[39.8,39.8,39.8],shadowEntities:["uranus"]},dynamo:[{url:"cressida/uranus/orb"},{url:"cressida/ori"}]},cupid:{groups:["uranus","moons","minor","inner"],radius:9,label:"Cupid",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:53395,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[9,9,9],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"cupid/uranus/orb"}]},desdemona:{groups:["uranus","moons","minor","inner"],radius:32,label:"Desdemona",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:40923,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[32,32,32],shadowEntities:["uranus"]},dynamo:[{url:"desdemona/uranus/orb"},{url:"desdemona/ori"}]},ferdinand:{groups:["uranus","moons","minor","irregular"],radius:10,label:"Ferdinand",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:243941760,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[10,10,10],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"ferdinand/uranus/orb"}]},francisco:{groups:["uranus","moons","minor","irregular"],radius:11,label:"Francisco",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:23030784,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[11,11,11],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"francisco/uranus/orb"}]},juliet:{groups:["uranus","moons","minor","inner"],radius:46.8,label:"Juliet",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:42601,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[46.8,46.8,46.8],shadowEntities:["uranus"]},dynamo:[{url:"juliet/uranus/orb"},{url:"juliet/ori"}]},mab:{groups:["uranus","moons","minor","inner"],radius:12.5,label:"Mab",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:79747,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[12.5,12.5,12.5],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"mab/uranus/orb"}]},margaret:{groups:["uranus","moons","minor","irregular"],radius:10,label:"Margaret",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:146430720,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[10,10,10],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"margaret/uranus/orb"}]},ophelia:{groups:["uranus","moons","minor","inner"],radius:22.4,label:"Ophelia",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:32521,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[22.4,22.4,22.4],shadowEntities:["uranus"]},dynamo:[{url:"ophelia/uranus/orb"},{url:"ophelia/ori"}]},perdita:{groups:["uranus","moons","minor","inner"],radius:15,label:"Perdita",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:55123,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[15,15,15],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"perdita/uranus/orb"}]},portia:{groups:["uranus","moons","minor","inner"],radius:67.6,label:"Portia",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:44340,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[67.6,67.6,67.6],shadowEntities:["uranus"]},dynamo:[{url:"portia/uranus/orb"},{url:"portia/ori"}]},prospero:{groups:["uranus","moons","minor","irregular"],radius:25,label:"Prospero",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:172177920,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[25,25,25],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"prospero/uranus/orb"}]},puck:{groups:["uranus","moons","minor","inner"],radius:81,label:"Puck",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:65822,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[81,81,81],shadowEntities:["uranus"]},dynamo:[{url:"puck/uranus/orb"},{url:"puck/ori"}]},rosalind:{groups:["uranus","moons","minor","inner"],radius:36,label:"Rosalind",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:48251,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[36,36,36],shadowEntities:["uranus"]},dynamo:[{url:"rosalind/uranus/orb"},{url:"rosalind/ori"}]},setebos:{groups:["uranus","moons","minor","irregular"],radius:24,label:"Setebos",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:190278720,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[24,24,24],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"setebos/uranus/orb"}]},stephano:{groups:["uranus","moons","minor","irregular"],radius:16,label:"Stephano",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:58449600,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_2/generic_asteroid_2.gltf",scale:[16,16,16],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"stephano/uranus/orb"}]},sycorax:{groups:["uranus","moons","minor","irregular"],radius:82,label:"Sycorax",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:110885760,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_3/generic_asteroid_3.gltf",scale:[82,82,82],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"sycorax/uranus/orb"}]},trinculo:{groups:["uranus","moons","minor","irregular"],radius:9,label:"Trinculo",parents:[[Number.NEGATIVE_INFINITY,"uranus"]],trail:{length:65499840,color:[.67,.92,1,.7]},model:{url:"$STATIC_ASSETS_URL/models/generic/asteroid_1/generic_asteroid_1.gltf",scale:[9,9,9],shadowEntities:["uranus"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"trinculo/uranus/orb"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_3d_winds:{groups:["earth","spacecraft"],occlusionRadius:.002,extentsRadius:.0025,label:"3D-Winds",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},dynamo:[{url:"sc_3d_winds"}]},sc_ace:{groups:["earth","spacecraft"],occlusionRadius:8e-4,extentsRadius:.0023,label:"ACE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:31715490},model:{url:"$STATIC_ASSETS_URL/models/sc_ace/ace.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.0033},animdata:[{url:"sc_ace",type:"pos"}]},sc_acrimsat:{groups:["earth","spacecraft"],radius:.0015,label:"ACRIMSAT",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_acrimsat/acrimsat.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.00238},dynamo:[{url:"sc_acrimsat"}]},sc_aim:{groups:["earth","spacecraft"],occlusionRadius:7e-4,extentsRadius:.0014,label:"AIM",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5788.83},dynamo:[{url:"sc_aim"}]},sc_aqua:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.007,label:"Aqua",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_aqua/Aqua.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_aqua",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_aqua"}]},sc_ascends:{groups:["earth","spacecraft"],radius:.004,label:"ASCENDS",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},dynamo:[{url:"sc_ascends"}]},sc_aura:{groups:["earth","spacecraft"],occlusionRadius:.00345,extentsRadius:.0085,label:"Aura",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_aura/Aura.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_aura",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_aura"}]},sc_c_nofs:{groups:["earth","spacecraft"],radius:.004,label:"C/NOFS",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},dynamo:[{url:"sc_c_nofs"}]},sc_calipso:{groups:["earth","spacecraft"],occlusionRadius:.00165,extentsRadius:.0043,label:"CALIPSO",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_calipso",axis:a.Vector3.YAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_calipso/calipso.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_calipso"}]},sc_chandra:{groups:["earth","spacecraft"],occlusionRadius:.0059,extentsRadius:.01,label:"Chandra",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:228505.5},align:{primary:{type:"point",target:"sun",axis:new a.Vector3(-.70710678118,-.70710678118,0)}},model:{url:"$STATIC_ASSETS_URL/models/sc_chandra/chandra.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_chandra/earth/all",type:"pos"}]},sc_clarreo:{groups:["earth","spacecraft"],radius:.004,label:"CLARREO",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},dynamo:[{url:"sc_clarreo"}]},sc_cloudsat:{groups:["earth","spacecraft"],radius:.0025,label:"CloudSat",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.5},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cloudsat",axis:a.Vector3.XAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cloudsat/CloudSat.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cloudsat"}]},sc_cluster_ii_fm5:{groups:["earth","spacecraft"],radius:.00145,label:"Rumba",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:195541.5},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm5",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm5"}]},sc_cluster_ii_fm6:{groups:["earth","spacecraft"],radius:.00145,label:"Salsa",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:195351},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm6",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm6"}]},sc_cluster_ii_fm7:{groups:["earth","spacecraft"],radius:.00145,label:"Samba",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:195316},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm7",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm7"}]},sc_cluster_ii_fm8:{groups:["earth","spacecraft"],radius:.00145,label:"Tango",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:195388},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_cluster_ii_fm8",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_cluster_ii/cluster_ii.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cluster_ii_fm8"}]},sc_cygnss_1:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_1",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_1"}]},sc_cygnss_2:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_2",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_2"}]},sc_cygnss_3:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 3",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_3",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_3"}]},sc_cygnss_4:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 4",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_4",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_4"}]},sc_cygnss_5:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 5",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_5",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_5"}]},sc_cygnss_6:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 6",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_6",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_6"}]},sc_cygnss_7:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 7",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_7",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_7"}]},sc_cygnss_8:{groups:["earth","spacecraft"],radius:8e-4,label:"CYGNSS 8",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_cygnss_8",axis:a.Vector3.YAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_cygnss/CYGNSS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_cygnss_8"}]},sc_dscovr:{groups:["earth","spacecraft"],occlusionRadius:9e-4,extentsRadius:.002,label:"DSCOVR",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:31536e3},align:{primary:{type:"point",target:"earth",axis:a.Vector3.XAxisNeg},secondary:{type:"velocity",target:"sc_dscovr",axis:a.Vector3.ZAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_dscovr/dscovr.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_dscovr/earth/all",type:"pos"}]},sc_eo_1:{groups:["earth","spacecraft"],occlusionRadius:.003,extentsRadius:.001,label:"EO-1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis},secondary:{type:"velocity",target:"sc_eo_1",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_eo_1/eo-1.gltf",rotate:[{y:45}],shadowEntities:["earth","moon"]},dynamo:[{url:"sc_eo_1"}]},sc_explorer_1:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.001,label:"Explorer-1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:6885.5},model:{url:"$STATIC_ASSETS_URL/models/sc_explorer_1/Explorer_1.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"velocity",target:"sc_explorer_1",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxisNeg,periodInHours:22e-6},animdata:[{url:"sc_explorer_1",type:"pos"}]},sc_face:{groups:["earth","spacecraft"],radius:.004,label:"FACE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},dynamo:[{url:"sc_face"}]},sc_fgrst:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"FGRST",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_fgrst"}]},sc_gacm:{groups:["earth","spacecraft"],radius:.004,label:"GACM",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_gacm"}]},sc_galex:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.0014,label:"GALEX",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_galex"}]},sc_geo_cape:{groups:["earth","spacecraft"],radius:.004,label:"GEO-CAPE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_geo_cape"}]},sc_geotail:{groups:["earth","spacecraft"],occlusionRadius:.0018,extentsRadius:.003,label:"Geotail",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:450372},animdata:[{url:"sc_geotail/earth/all",type:"pos"}]},sc_goes_12:{groups:["earth","spacecraft"],radius:.003,label:"GOES 12",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_12"}]},sc_goes_13:{groups:["earth","spacecraft"],radius:.003,label:"GOES 13",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_13"}]},sc_goes_14:{groups:["earth","spacecraft"],radius:.003,label:"GOES 14",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_14"}]},sc_goes_15:{groups:["earth","spacecraft"],radius:.003,label:"GOES 15",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},dynamo:[{url:"sc_goes_15"}]},sc_gpm:{groups:["earth","spacecraft"],occlusionRadius:.002,extentsRadius:.004,label:"GPM",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5549.5},model:{url:"$STATIC_ASSETS_URL/models/sc_gpm/GPM.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_gpm",axis:a.Vector3.ZAxis}},dynamo:[{url:"sc_gpm"}],postCreateFunction:t=>{const e=t.addController("spin");e.setJoint("GPM_antenna"),e.setRate(a.MathUtils.degToRad(192)),e.setAxis(a.Vector3.YAxisNeg,!0),e.setClampedToRealTime(!0)}},sc_grace_1:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace/grace.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_2",axis:a.Vector3.YAxisNeg},secondary:{type:"point",target:"earth",axis:a.Vector3.ZAxis}},animdata:[{url:"sc_grace-1",type:"pos"}]},sc_grace_2:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace/grace.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_1",axis:a.Vector3.YAxisNeg},secondary:{type:"point",target:"earth",axis:a.Vector3.ZAxis}},animdata:[{url:"sc_grace-2",type:"pos"}]},sc_grace_fo1:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-FO1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace_fo/graceFO.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_fo2",axis:a.Vector3.ZAxisNeg},secondary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg}},dynamo:[{url:"sc_grace_fo1"}],coverages:[{coverage:[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY],update:t=>{t.getComponentByType("connectedSprite").setTextureYOffset(-a.MathUtils.wrap(t.getScene().getEngine().getTime()/1,0,1))}}],postCreateFunction:t=>{const e=t.addComponent("connectedSprite","microwave");e.setTextureUrl("$STATIC_ASSETS_URL/sprites/sine_wave.png"),e.setEntity1("sc_grace_fo1"),e.setEntity1Offset(new a.Vector3(0,0,-.00165)),e.setEntity2("sc_grace_fo2"),e.setEntity2Offset(new a.Vector3(0,0,-.00165)),e.setWidth(5e-4),e.setColorMultiplier(new a.Color(.5,1,1)),e.setTextureRepeat(!0),e.setTextureStretch(4);const i=t.addComponent("connectedSprite","laser1");i.setTextureUrl("$STATIC_ASSETS_URL/sprites/line.png"),i.setEntity1("sc_grace_fo1"),i.setEntity1Offset(new a.Vector3(3e-4,15e-5,-.00165)),i.setEntity2("sc_grace_fo2"),i.setEntity2Offset(new a.Vector3(-3e-4,15e-5,-.00165)),i.setWidth(2e-5),i.setColorMultiplier(new a.Color(1,.24,.64)),i.setTextureRepeat(!1);const s=t.addComponent("connectedSprite","laser2");s.setTextureUrl("$STATIC_ASSETS_URL/sprites/line.png"),s.setEntity1("sc_grace_fo1"),s.setEntity1Offset(new a.Vector3(-3e-4,15e-5,-.00165)),s.setEntity2("sc_grace_fo2"),s.setEntity2Offset(new a.Vector3(3e-4,15e-5,-.00165)),s.setWidth(2e-5),s.setColorMultiplier(new a.Color(1,.24,.64)),s.setTextureRepeat(!1)}},sc_grace_fo2:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.0015,label:"GRACE-FO2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5575},model:{url:"$STATIC_ASSETS_URL/models/sc_grace_fo/graceFO.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sc_grace_fo1",axis:a.Vector3.ZAxisNeg},secondary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg}},dynamo:[{url:"sc_grace_fo2"}]},sc_grifex:{groups:["earth","spacecraft"],radius:15e-5,label:"GRIFEX",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5706.25},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_grifex",axis:a.Vector3.ZAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_grifex/grifex.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_grifex"}]},sc_hubble_space_telescope:{groups:["earth","spacecraft","telescope"],occlusionRadius:.0066,extentsRadius:.0066,label:"Hubble",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5748.5},model:{url:"$STATIC_ASSETS_URL/models/sc_hubble/Hubble.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_hubble_space_telescope",axis:a.Vector3.YAxis}},dynamo:[{url:"sc_hubble_space_telescope/earth/orb"}]},sc_hyspiri:{groups:["earth","spacecraft"],radius:.004,label:"HyspIRI",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5733},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_hyspiri",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_hyspiri/HyspIRI.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_hyspiri"}]},sc_ibex:{groups:["earth","spacecraft"],radius:5e-4,label:"IBEX",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:797489.16},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxis,periodInHours:.00416},model:{url:"$STATIC_ASSETS_URL/models/sc_ibex/iBEX.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_ibex",type:"pos"}]},sc_icesat_2:{groups:["earth","spacecraft"],occlusionRadius:.00198,extentsRadius:.004,label:"ICESat-2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5653.2},model:{url:"$STATIC_ASSETS_URL/models/sc_icesatii/ICESat2.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis},secondary:{type:"velocity",target:"sc_icesat_2",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_icesat_2"}]},sc_image:{groups:["earth","spacecraft"],occlusionRadius:.00113,extentsRadius:.01,label:"IMAGE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:55541},model:{url:"$STATIC_ASSETS_URL/models/sc_image/image.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_image",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_image"}]},sc_integral:{groups:["earth","spacecraft"],occlusionRadius:.0025,extentsRadius:.005,label:"INTEGRAL",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:229689},dynamo:[{url:"sc_integral"}]},sc_ipex:{groups:["earth","spacecraft"],radius:1e-4,label:"IPEX",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5862},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_ipex",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_ipex/IPEX.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_ipex"}]},sc_isas:{groups:["earth","spacecraft"],radius:.001,label:"ISAS",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:92680.5},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_isas",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_isas/isas.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_isas",type:"pos"}]},sc_iss:{groups:["earth","spacecraft"],occlusionRadius:.008,extentsRadius:.055,label:"ISS",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},model:{url:"$STATIC_ASSETS_URL/models/sc_iss/ISS_stationary.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_iss",axis:a.Vector3.ZAxis}},dynamo:[{url:"sc_iss"}],postCreateFunction:t=>{const e=new a.Vector3(0,.5,.5*Math.sqrt(3)),i=new a.Vector3(0,.5*Math.sqrt(3),-.5),s=new a.Vector3(0,.5,.5*Math.sqrt(3));let n=t.addController("align");n.setJoint("20_P4_Truss"),n.setPrimaryAxis(a.Vector3.XAxis),n.setSecondaryAxis(e),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("23_S4_Truss"),n.setPrimaryAxis(a.Vector3.XAxis),n.setSecondaryAxis(e),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("20_P4_Truss_01"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("20_P4_Truss_02"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("23_S4_Truss_01"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("23_S4_Truss_02"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("32_S6_Truss_01"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("32_S6_Truss_02"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("08_P6_Truss_01"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun"),(n=t.addController("align")).setJoint("08_P6_Truss_02"),n.setPrimaryAxis(i),n.setSecondaryAxis(s),n.setSecondaryAlignType("point"),n.setSecondaryTargetEntity("sun");const r=t.addController("spin");r.setJoint("RapidScat_dish"),r.setRate(a.MathUtils.degToRad(108)),r.setAxis(a.Vector3.ZAxis,!0),r.setClampedToRealTime(!0),r.setCoverage(new a.Interval(465418867.184,524890952.183));const o=t.getComponentByType("model");o.setHiddenObject("45_RapidScat",!0),t.addController("coverage").addCoverage(new a.Interval(465418867.184,575406069.184),()=>{o.setHiddenObject("45_RapidScat",!1)},()=>{o.setHiddenObject("45_RapidScat",!0)})}},sc_iss_ecostress:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"ECOSTRESS",parents:[[Number.NEGATIVE_INFINITY,"sc_iss"]],fixed:{orientation:a.Quaternion.Identity,position:new a.Vector3(.0200195,-.00202631,.0161099)},postCreateFunction:t=>{t.addController("rotateByParentOrientation")}},sc_iss_oco_3:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"OCO-3",parents:[[Number.NEGATIVE_INFINITY,"sc_iss"]],fixed:{orientation:a.Quaternion.Identity,position:new a.Vector3(.0156458,-.00195982,.0200232)},postCreateFunction:t=>{t.addController("rotateByParentOrientation")}},sc_iss_rapidscat:{groups:["instrument","sc_iss"],occlusionRadius:8e-4,extentsRadius:2e-4,label:"RapidScat",parents:[[Number.NEGATIVE_INFINITY,"sc_iss"]],fixed:{orientation:a.Quaternion.Identity,position:new a.Vector3(-.0100725,-.00133401,.0162145)},postCreateFunction:t=>{t.addController("rotateByParentOrientation")}},sc_ixpe:{groups:["earth","spacecraft","telescope"],occlusionRadius:.0055,extentsRadius:.0026,label:"IXPE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5400},fixed:{orientation:a.Quaternion.Identity},model:{url:"$STATIC_ASSETS_URL/models/sc_ixpe/ixpe.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_ixpe"}]},sc_jason_1:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"Jason-1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:6744.5},model:{url:"$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_jason_1",axis:a.Vector3.ZAxisNeg}},animdata:[{url:"sc_jason_1",type:"pos"}]},sc_jason_2:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"OSTM/Jason-2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:6744.25},model:{url:"$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_jason_2",axis:a.Vector3.ZAxisNeg}},dynamo:[{url:"sc_jason_2"}]},sc_jason_3:{groups:["earth","spacecraft"],occlusionRadius:.0014,extentsRadius:.004,label:"Jason-3",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:6721},model:{url:"$STATIC_ASSETS_URL/models/sc_ostm/ostm.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_jason_3",axis:a.Vector3.ZAxisNeg}},dynamo:[{url:"sc_jason_3"}]},sc_jwst:{groups:["earth","spacecraft"],radius:.01,label:"James Webb Space Telescope",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5900033.33},model:{url:"$STATIC_ASSETS_URL/models/sc_jwst/webb_deployed.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxisNeg},secondary:{type:"align",target:"sun",axis:a.Vector3.ZAxis,targetAxis:a.Vector3.ZAxis}},coverages:[{coverage:[Number.NEGATIVE_INFINITY,694937889.184],enter:t=>{t.getComponentByType("model").setUrl("$STATIC_ASSETS_URL/models/sc_jwst/webb_stowed.gltf")},exit:t=>{t.getComponentByType("model").setUrl("$STATIC_ASSETS_URL/models/sc_jwst/webb_deployed.gltf")}}],dynamo:[{url:"sc_jwst/earth/orb"}]},sc_landsat_5:{groups:["earth","spacecraft"],radius:.004,label:"Landsat 5",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},dynamo:[{url:"sc_landsat_5"}]},sc_landsat_7:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.004,label:"Landsat 7",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis},secondary:{type:"velocity",target:"sc_landsat_7",axis:a.Vector3.ZAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_landsat_7/LandSat7.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_landsat_7"}]},sc_landsat_8:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.004,label:"Landsat 8",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxisNeg},secondary:{type:"velocity",target:"sc_landsat_8",axis:a.Vector3.YAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_landsat_8/LandSat8.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_landsat_8"}]},sc_landsat_9:{groups:["earth","spacecraft"],occlusionRadius:.004,extentsRadius:.004,label:"Landsat 9",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis},secondary:{type:"velocity",target:"sc_landsat_9",axis:a.Vector3.XAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_landsat_9/Landsat9.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_landsat_9"}]},sc_list:{groups:["earth","spacecraft"],radius:.004,label:"LIST",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},dynamo:[{url:"sc_list"}]},sc_m_cubed:{groups:["earth","spacecraft"],radius:1e-4,label:"M-Cubed",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5768.333333333333},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_m_cubed",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_m_cubed/mCubed.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_m_cubed"}]},sc_mcubed_2:{groups:["earth","spacecraft"],radius:1e-4,label:"MCubed-2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5861},align:{primary:{type:"point",target:"earth",axis:a.Vector3.XAxisNeg},secondary:{type:"velocity",target:"sc_mcubed_2",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_mcubed_2/M-Cubed2.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mcubed_2"}]},sc_mms_1:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 1",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:85994},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_1"}]},sc_mms_2:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:85962},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_2"}]},sc_mms_3:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 3",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86347},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_3"}]},sc_mms_4:{groups:["earth","spacecraft"],occlusionRadius:.0017,extentsRadius:.013,label:"MMS 4",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86024},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.00556},model:{url:"$STATIC_ASSETS_URL/models/sc_mms/MMS.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_mms_4"}]},sc_nisar:{groups:["earth","spacecraft"],occlusionRadius:.006,extentsRadius:.006,label:"NISAR",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5573},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_nisar",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_nisar/Nisar.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_nisar"}]},sc_noaa_14:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 14",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_14"}]},sc_noaa_15:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 15",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_15"}]},sc_noaa_16:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 16",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_16"}]},sc_noaa_17:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 17",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_17"}]},sc_noaa_18:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 18",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_18"}]},sc_noaa_19:{groups:["earth","spacecraft"],radius:.004,label:"NOAA 19",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_noaa_19"}]},sc_nustar:{groups:["earth","spacecraft"],occlusionRadius:.011,extentsRadius:.011,label:"NuSTAR",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5798.66},dynamo:[{url:"sc_nustar"}]},sc_oco_2:{groups:["earth","spacecraft"],occlusionRadius:.0021,extentsRadius:.003,label:"OCO-2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.333333333333},model:{url:"$STATIC_ASSETS_URL/models/sc_oco_2/oco2.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxisNeg},secondary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},dynamo:[{url:"sc_oco_2"}]},sc_path:{groups:["earth","spacecraft"],radius:.004,label:"PATH",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_path"}]},sc_polar:{groups:["earth","spacecraft"],occlusionRadius:.0012,extentsRadius:.005,label:"Polar",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:66571},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_polar",axis:a.Vector3.ZAxis}},model:{url:"$STATIC_ASSETS_URL/models/sc_polar/polar.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_polar",type:"pos"}]},sc_quikscat:{groups:["earth","spacecraft"],occlusionRadius:.0016,extentsRadius:.0016,label:"QuikSCAT",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:6061.33},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_quikscat",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_quikscat/QuikSCAT.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_quikscat"}]},sc_race:{groups:["earth","spacecraft"],radius:15e-5,label:"RACE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_race"}]},sc_raincube:{groups:["earth","spacecraft"],radius:35e-5,label:"RainCube",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5743},model:{url:"$STATIC_ASSETS_URL/models/sc_raincube/Raincube.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_raincube",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_raincube"}]},sc_rax_2:{groups:["earth","spacecraft"],radius:2e-4,label:"RAX-2",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5743},dynamo:[{url:"sc_rax_2"}]},sc_rbsp_a:{groups:["earth","spacecraft"],radius:.004,label:"Van Allen Probe A",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:32214},model:{url:"$STATIC_ASSETS_URL/models/sc_rbsp/rbsp.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_rbsp_a",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_rbsp_a"}]},sc_rbsp_b:{groups:["earth","spacecraft"],radius:.004,label:"Van Allen Probe B",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:32574},model:{url:"$STATIC_ASSETS_URL/models/sc_rbsp/rbsp.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_rbsp_b",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_rbsp_b"}]},sc_sac_d:{groups:["earth","spacecraft"],radius:.003,label:"Aquarius",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5884.25},model:{url:"$STATIC_ASSETS_URL/models/sc_sac_d/aquarius.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.XAxis},secondary:{type:"velocity",target:"sc_sac_d",axis:a.Vector3.YAxis}},dynamo:[{url:"sc_sac_d"}]},sc_sclp:{groups:["earth","spacecraft"],radius:.004,label:"SCLP",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_sclp"}]},sc_sdo:{groups:["earth","spacecraft"],occlusionRadius:.0022,extentsRadius:.00315,label:"SDO",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86137.66},model:{url:"$STATIC_ASSETS_URL/models/sc_sdo/sdo.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_sdo",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_sdo"}]},sc_sentinel_6:{groups:["earth","spacecraft"],occlusionRadius:.0026,extentsRadius:.0026,label:"Sentinel-6 Michael Freilich",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.5},model:{url:"$STATIC_ASSETS_URL/models/sc_sentinel_6/Sentinel6.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_sentinel_6",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_sentinel_6"}]},sc_smap:{groups:["earth","spacecraft"],radius:.003,label:"SMAP",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5906.8},model:{url:"$STATIC_ASSETS_URL/models/sc_smap/SMAP.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_smap",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_smap"}],postCreateFunction:t=>{const e=t.addController("spin");e.setJoint("arm_etc"),e.setRate(a.MathUtils.degToRad(87.6)),e.setAxis(a.Vector3.YAxis,!0),e.setClampedToRealTime(!0)}},sc_soho:{groups:["earth","spacecraft"],occlusionRadius:.00215,extentsRadius:.00425,label:"SOHO",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:31536e3},model:{url:"$STATIC_ASSETS_URL/models/sc_soho/soho.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_soho",axis:a.Vector3.XAxis}},animdata:[{url:"sc_soho",type:"pos"}]},sc_sorce:{groups:["earth","spacecraft"],occlusionRadius:.001,extentsRadius:.0022,label:"SORCE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5812.5},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_sorce",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_sorce/sorce.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_sorce"}]},sc_suomi_npp:{groups:["earth","spacecraft"],occlusionRadius:.0022,extentsRadius:.003,label:"Suomi NPP",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5798.66},model:{url:"$STATIC_ASSETS_URL/models/sc_npp/NPP.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.XAxisNeg},secondary:{type:"velocity",target:"sc_suomi_npp",axis:a.Vector3.YAxis}},dynamo:[{url:"sc_suomi_npp"}]},sc_swift:{groups:["earth","spacecraft"],occlusionRadius:.0028,extentsRadius:.0028,label:"Swift",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_swift"}]},sc_swot:{groups:["earth","spacecraft"],occlusionRadius:.005,extentsRadius:.006,label:"SWOT",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_swot",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_swot/SWOT.gltf",shadowEntities:["earth","moon"]},dynamo:[{url:"sc_swot"}]},sc_tdrs_3:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 3",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86137.33},dynamo:[{url:"sc_tdrs_3"}]},sc_tdrs_5:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 5",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86137.66},dynamo:[{url:"sc_tdrs_5"}]},sc_tdrs_6:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 6",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86137.66},dynamo:[{url:"sc_tdrs_6"}]},sc_tdrs_7:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 7",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86151},dynamo:[{url:"sc_tdrs_7"}]},sc_tdrs_8:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 8",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86151.2},dynamo:[{url:"sc_tdrs_8"}]},sc_tdrs_9:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 9",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86151},dynamo:[{url:"sc_tdrs_9"}]},sc_tdrs_10:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 10",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86151.2},dynamo:[{url:"sc_tdrs_10"}]},sc_tdrs_11:{groups:["earth","spacecraft"],occlusionRadius:.0085,extentsRadius:.0085,label:"TDRS 11",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:86151},dynamo:[{url:"sc_tdrs_11"}]},sc_terra:{groups:["earth","spacecraft"],occlusionRadius:.0034,extentsRadius:.005,label:"Terra",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933.33},model:{url:"$STATIC_ASSETS_URL/models/sc_terra/Terra.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_terra",axis:a.Vector3.XAxisNeg}},dynamo:[{url:"sc_terra"}]},sc_tess:{groups:["earth","spacecraft","telescope"],occlusionRadius:.002,extentsRadius:.002,label:"TESS",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:591840},model:{url:"$STATIC_ASSETS_URL/models/sc_tess/TESS.gltf",shadowEntities:["earth","moon"]},fixed:{orientation:a.Quaternion.Identity},dynamo:[{url:"sc_tess/earth/orb"}]},sc_themis_a:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"THEMIS A",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:98428},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxis,periodInHours:8333e-7},dynamo:[{url:"sc_themis_a"}]},sc_themis_d:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"THEMIS D",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:114807},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxis,periodInHours:8333e-7},dynamo:[{url:"sc_themis_d"}]},sc_themis_e:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"THEMIS E",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:105907.5},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxis,periodInHours:8333e-7},dynamo:[{url:"sc_themis_e"}]},sc_timed:{groups:["earth","spacecraft"],occlusionRadius:.0015,extentsRadius:.005,label:"TIMED",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5933},dynamo:[{url:"sc_timed"}]},sc_trmm:{groups:["earth","spacecraft"],occlusionRadius:.00255,extentsRadius:.0073,label:"TRMM",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5545.6},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_trmm",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_trmm/TRMM.gltf",shadowEntities:["earth","moon"]},tle:{tleName:"TRMM",url:"$DYNAMIC_ASSETS_URL/tle/local_tles.txt",coverage:[-66052736.817,482328067.186]}},sc_uars:{groups:["earth","spacecraft"],occlusionRadius:.00535,extentsRadius:.00535,label:"UARS",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5490},animdata:[{url:"sc_uars",type:"pos"}]},sc_wind:{groups:["earth","spacecraft"],occlusionRadius:.0012,extentsRadius:.0075,label:"WIND",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:16485927},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"velocity",target:"sc_wind",axis:a.Vector3.XAxisNeg}},model:{url:"$STATIC_ASSETS_URL/models/sc_wind/wind.gltf",shadowEntities:["earth","moon"]},animdata:[{url:"sc_wind",type:"pos"}]},sc_wise:{groups:["earth","spacecraft"],occlusionRadius:.00142,extentsRadius:.00142,label:"WISE",parents:[[Number.NEGATIVE_INFINITY,"earth"]],trail:{length:5715.4},dynamo:[{url:"sc_wise"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_apollo_15:{groups:["moon","spacecraft"],radius:.004,label:"Apollo 15",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:6855},fixed:{orientation:a.Quaternion.Identity},animdata:[{url:"sc_apollo_15",type:"pos"}]},sc_capstone:{groups:["moon","spacecraft"],radius:5e-4,label:"CAPSTONE",parents:[[Number.NEGATIVE_INFINITY,"earth"],[716167469,"moon"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_capstone/capstone.gltf",shadowEntities:["earth","moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxisNeg},secondary:{type:"align",target:"moon",axis:a.Vector3.XAxis,targetAxis:a.Vector3.ZAxis}},dynamo:[{url:"sc_capstone/earth/orb"},{url:"sc_capstone/moon/orb"}]},sc_clementine:{groups:["moon","spacecraft"],radius:.002,label:"Clementine",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:5408.5},model:{url:"$STATIC_ASSETS_URL/models/sc_clementine/clementine.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxisNeg},secondary:{type:"point",target:"sun",axis:a.Vector3.ZAxisNeg}},animdata:[{url:"sc_clementine/moon/all",type:"pos"}]},sc_grail_a:{groups:["moon","spacecraft"],radius:.001,label:"Ebb",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:41115.75},model:{url:"$STATIC_ASSETS_URL/models/sc_grail/grail_b.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_grail_a",axis:a.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:a.Vector3.ZAxis}},animdata:[{url:"sc_grail_a/moon/all",type:"pos"}]},sc_grail_b:{groups:["moon","spacecraft"],radius:.001,label:"Flow",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:41239.8},model:{url:"$STATIC_ASSETS_URL/models/sc_grail/grail_b.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_grail_b",axis:a.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:a.Vector3.ZAxis}},animdata:[{url:"sc_grail_b/moon/all",type:"pos"}]},sc_ladee:{groups:["moon","spacecraft"],radius:.0012,label:"LADEE",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:7889.57},model:{url:"$STATIC_ASSETS_URL/models/sc_ladee/ladee.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_ladee",axis:a.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:a.Vector3.ZAxis}},animdata:[{url:"sc_ladee/moon/all",type:"pos"}]},sc_lcross:{groups:["moon","spacecraft"],occlusionRadius:.0013,extentsRadius:.00165,label:"LCROSS",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:3598022},model:{url:"$STATIC_ASSETS_URL/models/sc_lcross/lcross.gltf",shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_lcross",axis:a.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:a.Vector3.ZAxis}},animdata:[{url:"sc_lcross/moon/all",type:"pos"}]},sc_lunar_prospector:{groups:["moon","spacecraft"],occlusionRadius:653e-6,extentsRadius:.0013653,label:"Lunar Prospector",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:7260},model:{url:"$STATIC_ASSETS_URL/models/sc_lunar_prospector/lunar_prospector.gltf",shadowEntities:["moon"]},align:{primary:{type:"align",target:"moon",axis:a.Vector3.YAxisNeg,targetAxis:a.Vector3.ZAxis}},spin:{axis:a.Vector3.YAxisNeg,periodInHours:.008333},animdata:[{url:"sc_lunar_prospector/moon/all",type:"pos"}]},sc_lunar_reconnaissance_orbiter:{groups:["moon","spacecraft"],radius:.00272,label:"Lunar Reconnaissance Orbiter",parents:[[Number.NEGATIVE_INFINITY,"earth"],[298929666,"moon"]],trail:{length:7106.66,lengthCoverages:[[1e6,Number.NEGATIVE_INFINITY,299040641],[7106.66,299040641,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_lunar_reconnaissance_orbiter/LRO.gltf",rotate:[{z:-90}],shadowEntities:["moon"]},align:{primary:{type:"velocity",target:"sc_lunar_reconnaissance_orbiter",axis:a.Vector3.XAxisNeg},secondary:{type:"point",target:"moon",axis:a.Vector3.ZAxis}},dynamo:[{url:"sc_lunar_reconnaissance_orbiter/earth/orb"},{url:"sc_lunar_reconnaissance_orbiter/moon/orb"},{url:"sc_lunar_reconnaissance_orbiter/ori"}]},sc_smart_1:{groups:["moon","spacecraft"],occlusionRadius:.0015,extentsRadius:.00653,label:"SMART-1",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:273091},fixed:{orientation:a.Quaternion.Identity},animdata:[{url:"sc_smart_1/moon/all",type:"pos"}]},sc_themis_b:{groups:["moon","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"ARTEMIS P1",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:94838},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxis,periodInHours:8333e-7},animdata:[{url:"sc_themis_b/moon/all",type:"pos"}]},sc_themis_c:{groups:["moon","spacecraft"],occlusionRadius:4e-4,extentsRadius:.0017,label:"ARTEMIS P2",parents:[[Number.NEGATIVE_INFINITY,"moon"]],trail:{length:204186},model:{url:"$STATIC_ASSETS_URL/models/sc_themis/themis.gltf",shadowEntities:["moon"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}},spin:{axis:a.Vector3.YAxis,periodInHours:8333e-7},animdata:[{url:"sc_themis_c/moon/all",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_mars_science_laboratory:{groups:["mars","spacecraft","landers"],radius:.001515,label:"MSL",parents:[[Number.NEGATIVE_INFINITY,"earth"],[376039259,"sun"],[397477501,"mars"],[397502026,"sc_mars_science_laboratory_landing_site"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,397477501],[6720,397477501,397502026],[0,397502026,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_science_laboratory/msl_cruisestage.gltf"},align:{primary:{type:"point",target:"sc_mars_science_laboratory_landing_site",axis:a.Vector3.YAxisNeg}},dynamo:[{url:"sc_mars_science_laboratory/earth/orb"},{url:"sc_mars_science_laboratory/sun/orb"},{url:"sc_mars_science_laboratory/mars/pos"},{url:"sc_mars_science_laboratory/surface/pos"}],spin:{axis:a.Vector3.YAxisNeg,periodInHours:.00833333333,coverage:[Number.NEGATIVE_INFINITY,397502026]},postCreateFunction:t=>{const e=t.addController("rotate","landingRotation",t.getControllerByType("align")),i=new a.Quaternion;i.setFromAxes(a.Vector3.YAxis,a.Vector3.XAxisNeg,void 0),e.setRotation(i),e.setRotatingOrientation(!1),e.setCoverage(new a.Interval(397502026,Number.POSITIVE_INFINITY));const s=t.addController("rotateByParentOrientation","landingRotateByParent",t.getControllerByType("align"));s.setRotatingOrientation(!1),s.setCoverage(new a.Interval(397502026,Number.POSITIVE_INFINITY))}},sc_mars_science_laboratory_landing_site:{groups:["mars","spacecraft","sites"],radius:.001,label:"MSL Landing Site",parents:[[Number.NEGATIVE_INFINITY,"mars"]],fixed:{llaOnSpheroid:new a.LatLonAlt(-4.643851*Math.PI/180,137.4417*Math.PI/180,-4.926878)}},sc_mars_exploration_rover_1:{groups:["mars","spacecraft","landers"],radius:.00115,label:"Opportunity",parents:[[Number.NEGATIVE_INFINITY,"earth"],[111234172,"sun"],[128262836,"mars"],[128278487,"sc_mars_exploration_rover_1_landing_site"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,128262836],[6720,128262836,128278487],[0,128278487,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/mer_static.gltf",rotate:[{x:90}]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.ZAxisNeg},secondary:{type:"align",target:"mars",axis:a.Vector3.YAxis,targetAxis:a.Vector3.ZAxis},coverage:[Number.NEGATIVE_INFINITY,128278487]},dynamo:[{url:"sc_mars_exploration_rover_1/earth/orb"},{url:"sc_mars_exploration_rover_1/sun/orb"},{url:"sc_mars_exploration_rover_1/mars/pos"},{url:"sc_mars_exploration_rover_1/surface/pos"}],coverages:[{coverage:[128278487,Number.POSITIVE_INFINITY],enter:t=>{t.getComponentByType("trail").setRelativeToEntityOrientation(!0)},exit:t=>{t.getComponentByType("trail").setRelativeToEntityOrientation(!1)}}],postCreateFunction:t=>{const e=t.addController("fixed");e.setOrientation(a.Quaternion.Identity),e.setCoverage(new a.Interval(128278487,Number.POSITIVE_INFINITY));const i=t.addController("rotate"),s=new a.Quaternion;s.setFromAxes(a.Vector3.YAxis,a.Vector3.XAxisNeg,void 0),i.setRotation(s),i.setRotatingOrientation(!1),i.setCoverage(new a.Interval(128278487,Number.POSITIVE_INFINITY)),t.addController("rotateByParentOrientation").setCoverage(new a.Interval(128278487,Number.POSITIVE_INFINITY))}},sc_mars_exploration_rover_1_landing_site:{groups:["mars","spacecraft","sites"],radius:.001,label:"Opportunity Landing Site",parents:[[Number.NEGATIVE_INFINITY,"mars"]],fixed:{llaOnSpheroid:new a.LatLonAlt(-1.971417*Math.PI/180,354.47417*Math.PI/180,-2.01849)}},sc_mars_exploration_rover_2:{groups:["mars","spacecraft","landers"],radius:.00115,label:"Spirit",parents:[[Number.NEGATIVE_INFINITY,"earth"],[108887371,"sun"],[126444477,"mars"],[126462105,"sc_mars_exploration_rover_2_landing_site"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,126444477],[6720,126444477,126462105],[0,126462105,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_exploration_rover/mer_static.gltf",rotate:[{x:90}]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.ZAxisNeg},secondary:{type:"align",target:"mars",axis:a.Vector3.YAxis,targetAxis:a.Vector3.ZAxis},coverage:[Number.NEGATIVE_INFINITY,126462105]},dynamo:[{url:"sc_mars_exploration_rover_2/earth/orb"},{url:"sc_mars_exploration_rover_2/sun/orb"},{url:"sc_mars_exploration_rover_2/mars/pos"},{url:"sc_mars_exploration_rover_2/surface/pos"}],postCreateFunction:t=>{const e=t.addController("fixed");e.setOrientation(a.Quaternion.Identity),e.setCoverage(new a.Interval(126462105,Number.POSITIVE_INFINITY));const i=t.addController("rotate"),s=new a.Quaternion;s.setFromAxes(a.Vector3.YAxis,a.Vector3.XAxisNeg,void 0),i.setRotation(s),i.setRotatingOrientation(!1),i.setCoverage(new a.Interval(126462105,Number.POSITIVE_INFINITY)),t.addController("rotateByParentOrientation").setCoverage(new a.Interval(126462105,Number.POSITIVE_INFINITY))}},sc_mars_exploration_rover_2_landing_site:{groups:["mars","spacecraft","sites"],radius:.001,label:"Spirit Landing Site",parents:[[Number.NEGATIVE_INFINITY,"mars"]],fixed:{llaOnSpheroid:new a.LatLonAlt(-14.737596*Math.PI/180,175.47848*Math.PI/180,-2.614384)}},sc_insight:{groups:["mars","spacecraft","landers"],radius:.00306,label:"InSight",parents:[[Number.NEGATIVE_INFINITY,"earth"],[579182469.185,"sun"],[596376069.183,"mars"]],trail:{length:32137022.16,lengthCoverages:[[32137022.16,Number.NEGATIVE_INFINITY,596376069.183],[14400,596376069.183,596529871.284],[3600,596529871.284,596533602],[0,596533602,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_insight/model.gltf",rotate:[{y:90}]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.ZAxisNeg},secondary:{type:"align",target:"mars",axis:a.Vector3.YAxis,targetAxis:a.Vector3.ZAxis}},dynamo:[{url:"sc_insight/earth/pos"},{url:"sc_insight/sun/orb"},{url:"sc_insight/mars/orb"},{url:"sc_insight/ori"},{url:"sc_insight_edl/mars/pos"},{url:"sc_insight_edl/ori"}],coverages:[{coverage:[596529871.284,596533602],enter:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!0)},exit:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!1)}},{coverage:[596533602,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getControllerByType("align"),i=t.addController("fixed","fixedLanding",e),s=new a.Vector3(-2432.935716315694,2349.9743692542434,267.1293812071009);i.setPosition(s),t.addController("rotateByParentOrientation","fixedLandingRotation",e).setRotatingOrientation(!1)},exit:t=>{t.removeController("fixedLandingRotation"),t.removeController("fixedLanding")}}]},sc_marco_a:{groups:["mars","spacecraft"],radius:44375e-8,label:"MarCO A",parents:[[Number.NEGATIVE_INFINITY,"earth"],[579182469.185,"sun"],[596376069.183,"mars"],[596552080,"sun"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,579182469.185],[6720,579182469.185,596552080],[1e7,596552080,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_marco/model.gltf"},dynamo:[{url:"sc_marco_a/earth/orb"},{url:"sc_marco_a/sun/1/orb"},{url:"sc_marco_a/mars/orb"},{url:"sc_marco_a/sun/2/orb"}],align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}}},sc_marco_b:{groups:["mars","spacecraft"],radius:44375e-8,label:"MarCO B",parents:[[Number.NEGATIVE_INFINITY,"earth"],[579182469.185,"sun"],[596376069.183,"mars"],[596552080,"sun"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,579182469.185],[6720,579182469.185,596552080],[1e7,596552080,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_marco/model.gltf"},dynamo:[{url:"sc_marco_b/earth/orb"},{url:"sc_marco_b/sun/1/orb"},{url:"sc_marco_b/mars/orb"},{url:"sc_marco_b/sun/2/orb"}],align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis}}},sc_mars_odyssey:{groups:["mars","spacecraft"],radius:.0013,label:"Mars Odyssey",parents:[[Number.NEGATIVE_INFINITY,"earth"],[40233664,"sun"],[57128464,"mars"]],trail:{length:6727,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,57128464],[6727,57128464,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_odyssey/mars_odyssey.gltf",environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:new a.Vector3(-.95630475596,.29237170472,0)},secondary:{type:"velocity",target:"sc_mars_odyssey",axis:new a.Vector3(.29237170472,.95630475596,0)}},dynamo:[{url:"sc_mars_odyssey/earth/orb"},{url:"sc_mars_odyssey/sun/orb"},{url:"sc_mars_odyssey/mars/orb"},{url:"sc_mars_odyssey/ori"}]},sc_mars_reconnaissance_orbiter:{groups:["mars","spacecraft"],radius:.0068,label:"Mars Reconnaissance Orbiter",parents:[[Number.NEGATIVE_INFINITY,"earth"],[177429664,"sun"],[195285665,"mars"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,195285665],[6720,195285665,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_reconnaissance_orbiter/MRO.gltf",environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_mars_reconnaissance_orbiter",axis:a.Vector3.XAxis}},dynamo:[{url:"sc_mars_reconnaissance_orbiter/earth/orb"},{url:"sc_mars_reconnaissance_orbiter/sun/orb"},{url:"sc_mars_reconnaissance_orbiter/mars/orb"},{url:"sc_mars_reconnaissance_orbiter/ori"}]},sc_maven:{groups:["mars","spacecraft"],radius:.0057,label:"MAVEN",parents:[[Number.NEGATIVE_INFINITY,"earth"],[438296467,"sun"],[464590867,"mars"]],trail:{length:16139},model:{url:"$STATIC_ASSETS_URL/models/sc_maven/Maven.gltf",rotate:[{x:90},{z:90}],environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxis}},dynamo:[{url:"sc_maven/earth/orb"},{url:"sc_maven/sun/orb"},{url:"sc_maven/mars/orb"},{url:"sc_maven/ori"}]},sc_mars_express:{groups:["mars","spacecraft"],radius:.006,label:"Mars Express",parents:[[Number.NEGATIVE_INFINITY,"earth"],[108232264,"sun"],[125539264,"mars"]],trail:{length:25e3,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,126749131],[12720,126749131,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_express/mars_express.gltf",rotate:[{x:90},{z:-180}],environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.XAxisNeg}},dynamo:[{url:"sc_mars_express/earth/orb"},{url:"sc_mars_express/sun/orb"},{url:"sc_mars_express/mars/orb"},{url:"sc_mars_express/ori"}]},sc_perseverance:{groups:["mars","spacecraft","landers"],radius:.0015,label:"Mars 2020",parents:[[Number.NEGATIVE_INFINITY,"earth"],[649595376,"sun"],[666932224,"mars"]],trail:{length:1e7},model:{url:"$STATIC_ASSETS_URL/models/sc_perseverance/cruise/MSLcruiseStage.gltf"},align:{primary:{type:"point",target:"sun",axis:a.Vector3.YAxis},coverage:[Number.NEGATIVE_INFINITY,666953078]},spin:{axis:a.Vector3.YAxis,periodInHours:-.00833333333,coverage:[Number.NEGATIVE_INFINITY,666932224]},dynamo:[{url:"sc_perseverance/earth/orb"},{url:"sc_perseverance/sun/orb"},{url:"sc_perseverance/mars/pos"}],coverages:[{coverage:[666952341,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("trail");null!==e&&(e.setStartTime(1e3),e.setRelativeToEntityOrientation(!0),e.resetPoints());const i=t.get("align");null!==i&&(i.setPrimaryAlignType("velocity"),i.setPrimaryAxis(a.Vector3.YAxisNeg),i.setPrimaryTargetEntity(t.getName())),t.get("spin").setEnabled(!1)},exit:t=>{const e=t.get("trail");null!==e&&(e.setStartTime(1e7),e.setRelativeToEntityOrientation(!1),e.resetPoints());const i=t.get("align");null!==i&&(i.setPrimaryAlignType("point"),i.setPrimaryAxis(a.Vector3.YAxis),i.setPrimaryTargetEntity("sun")),t.get("spin").setEnabled(!0)}}],postCreateFunction:t=>{const e=t.addController("fixed");e.setPosition(new a.Vector3(700.6720498758596,3140.3161023698767,1073.6913476720615)),e.setOrientation(a.Quaternion.Identity),e.setCoverage(new a.Interval(666953078,Number.POSITIVE_INFINITY)),t.addController("rotateByParentOrientation").setCoverage(new a.Interval(666953078,Number.POSITIVE_INFINITY))}},sc_perseverance_landing_site:{groups:["mars","spacecraft","landers"],radius:.001,label:"Perseverance Landing Site",parents:[[Number.NEGATIVE_INFINITY,"mars"]],fixed:{llaOnSpheroid:new a.LatLonAlt(18.470270180371674*Math.PI/180,77.4326757785127*Math.PI/180,-2.2130185476344195)}},sc_phoenix:{groups:["mars","spacecraft"],radius:.0027,label:"Phoenix",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:45411186},model:{url:"$STATIC_ASSETS_URL/models/sc_phoenix/phoenix_cruise.gltf"},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxisNeg}},animdata:[{url:"sc_phoenix",type:"pos"}]},sc_trace_gas_orbiter:{groups:["mars","spacecraft"],radius:.00875915,label:"Trace Gas Orbiter",parents:[[Number.NEGATIVE_INFINITY,"earth"],[511941668,"sun"],[530107268,"mars"]],trail:{length:6720,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,530160041],[6720,530160041,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_trace_gas_orbiter/TGO.gltf",rotate:[{x:-90},{y:-90}],environmentMap:{cubemap:"$STATIC_ASSETS_URL/env_maps/park_gray/$FACE.jpg"},shadowEntities:["mars","deimos","phobos"]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.YAxisNeg},secondary:{type:"point",target:"sun",axis:a.Vector3.XAxisNeg}},dynamo:[{url:"sc_trace_gas_orbiter/earth/orb"},{url:"sc_trace_gas_orbiter/sun/orb"},{url:"sc_trace_gas_orbiter/mars/orb"},{url:"sc_trace_gas_orbiter/ori"}],postCreateFunction:t=>{let e=t.addController("align");e.setJoint("right_array_1"),e.setPrimaryAxis(a.Vector3.XAxis),e.setSecondaryAxis(a.Vector3.YAxis),e.setSecondaryAlignType("point"),e.setSecondaryTargetEntity("sun"),(e=t.addController("align")).setJoint("left_array_1"),e.setPrimaryAxis(a.Vector3.XAxis),e.setSecondaryAxis(a.Vector3.YAxis),e.setSecondaryAlignType("point"),e.setSecondaryTargetEntity("sun")}},sc_mars_orbiter_mission:{groups:["mars","spacecraft"],radius:.00275,label:"Mars Orbiter Mission",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:234146},animdata:[{url:"sc_mars_orbiter_mission/mars",type:"pos"}]},sc_viking_1_orbiter:{groups:["mars","spacecraft"],radius:.0047,label:"Viking 1 Orbiter",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:88649},animdata:[{url:"sc_viking_1_orbiter",type:"pos"}]},sc_viking_2_orbiter:{groups:["mars","spacecraft"],radius:.0047,label:"Viking 2 Orbiter",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:98694},animdata:[{url:"sc_viking_2_orbiter",type:"pos"}]},sc_mars_global_surveyor:{groups:["mars","spacecraft"],radius:.003,label:"Mars Global Surveyor",parents:[[Number.NEGATIVE_INFINITY,"mars"]],trail:{length:7068.67},model:{url:"$STATIC_ASSETS_URL/models/sc_mars_global_surveyor/mars_global_surveyor.gltf",shadowEntities:["mars"]},align:{primary:{type:"point",target:"mars",axis:a.Vector3.XAxisNeg}},animdata:[{url:"sc_mars_global_surveyor_mission",type:"pos"}]},sc_mars_climate_orbiter:{groups:["mars","spacecraft"],radius:.0011,label:"Mars Climate Orbiter",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:73762215},animdata:[{url:"sc_mars_climate_orbiter",type:"pos"}]},sc_mars_pathfinder:{groups:["mars","spacecraft"],radius:33e-5,label:"Mars Pathfinder",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:51497488},animdata:[{url:"sc_mars_pathfinder",type:"pos"}]},sc_mars_polar_lander:{groups:["mars","spacecraft"],radius:.0018,label:"Mars Polar Lander",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:41109006},animdata:[{url:"sc_mars_polar_lander",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_messenger:{groups:["mercury","spacecraft"],occlusionRadius:.00133,extentsRadius:.00184,label:"MESSENGER",parents:[[Number.NEGATIVE_INFINITY,"earth"],[145066469,"sun"],[175801890,"earth"],[176659095,"sun"],[214828942,"venus"],[215033751,"sun"],[234289415,"venus"],[234436749,"sun"],[253547108,"mercury"],[253671753,"sun"],[276485360,"mercury"],[276627276,"sun"],[307423681,"mercury"],[307651285,"sun"],[353474040,"mercury"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_messenger/Messenger.gltf",rotate:[{z:-90},{y:90}],shadowEntities:["mercury"]},align:{primary:{type:"point",target:"mercury",axis:a.Vector3.YAxis},secondary:{type:"velocity",target:"sc_messenger",axis:a.Vector3.ZAxis}},dynamo:[{url:"sc_messenger/earth/launch/orb"},{url:"sc_messenger/sun/1/orb"},{url:"sc_messenger/earth/flyby/orb"},{url:"sc_messenger/sun/2/orb"},{url:"sc_messenger/venus/flyby1/orb"},{url:"sc_messenger/sun/3/orb"},{url:"sc_messenger/venus/flyby2/orb"},{url:"sc_messenger/sun/4/orb"},{url:"sc_messenger/mercury/flyby1/orb"},{url:"sc_messenger/sun/5/orb"},{url:"sc_messenger/mercury/flyby2/orb"},{url:"sc_messenger/sun/6/orb"},{url:"sc_messenger/mercury/flyby3/orb"},{url:"sc_messenger/sun/7/orb"},{url:"sc_messenger/mercury/orb"},{url:"sc_messenger/ori"}]},sc_messenger_impact_site:{groups:["mercury","sc_messenger","sites"],radius:.001,label:"MESSENGER Impact Site",parents:[[Number.NEGATIVE_INFINITY,"mercury"]],fixed:{llaOnSpheroid:new a.LatLonAlt(.9501527254431932,-2.615904550043192,-.910251923861324),coverage:[483694028.351,Number.POSITIVE_INFINITY]}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_juno:{groups:["jupiter","spacecraft"],occlusionRadius:.001732,extentsRadius:.01,label:"Juno",parents:[[Number.NEGATIVE_INFINITY,"earth"],[366088266.183,"sun"],[434433667.182,"earth"],[434793667.182,"sun"],[519652868.184,"jupiter"],[676339597,"ganymede"],[676381521,"jupiter"],[717700360,"europa"],[717727733,"jupiter"],[757191924,"io"],[757203571,"jupiter"],[760247560,"io"],[760262808,"jupiter"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_juno/Juno.gltf",rotate:[{x:90}],shadowEntities:["jupiter","europa","ganymede","callisto","io"]},dynamo:[{url:"sc_juno/earth/launch/orb"},{url:"sc_juno/sun/preflyby/orb"},{url:"sc_juno/earth/flyby/orb"},{url:"sc_juno/sun/postflyby/orb"},{url:"sc_juno/jupiter/orb"},{url:"sc_juno/ganymede/orb"},{url:"sc_juno/europa/orb"},{url:"sc_juno/io/1/orb"},{url:"sc_juno/io/2/orb"},{url:"sc_juno/ori"}],coverages:[{coverage:[393471366,529749008],update:t=>{const e=t.getComponentByType("model").getThreeJsObjectByName("engine_cover");if(null!==e){const i=t.getScene().getEngine().getTime(),s=a.Sort.getIndex(i,n,(t,e)=>t[1]<e),r=n[s][0],o=n[s][1],l=a.MathUtils.clamp01(((o-r)/2-Math.abs(i-(o+r)/2))/600);e.rotation.x=a.MathUtils.lerp(Math.PI,Math.PI/8,l)}},exit:t=>{const e=t.getComponentByType("model").getThreeJsObjectByName("engine_cover");null!==e&&(e.rotation.x=Math.PI)}},{coverage:[399637867.183,520959604.184],update:t=>{const e=t.getComponentByType("particleSpray"),i=t.getScene().getEngine().getTime(),s=a.Sort.getIndex(i,r,(t,e)=>t[1]<e),n=r[s][0],o=r[s][1],l=n<=i&&i<o;e.setEnabled(l)},exit:t=>{t.getComponentByType("particleSpray").setEnabled(!1)}}],postCreateFunction:t=>{const e=t.addComponent("particleSpray");e.setNumberOfParticles(100),e.setSizeOfParticles(3e-4),e.setSpeedOfParticles(.01),e.setColorOfParticles(new a.Color(1,.75,0,.25)),e.setSpread(-3),e.setParticleSpacingRandom(!1),e.setLength(.003),e.setOriginOffset(new a.Vector3(0,0,-.0017)),e.setDirection(a.Vector3.ZAxisNeg),e.setEnabled(!1)}},sc_cassini:{groups:["saturn","spacecraft"],occlusionRadius:.0034,extentsRadius:.0055,label:"Cassini",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-69537536.818,"sun"],[-53179136.814,"venus"],[-53092736.814,"sun"],[-16495135.816,"venus"],[-16451935.816,"sun"],[-11951935.817,"earth"],[-11660335.817,"sun"],[139219264.185,"saturn"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_cassini/Cassini.gltf",rotate:[{x:-90},{z:180}],shadowEntities:["saturn","titan","enceladus","mimas","tethys"]},dynamo:[{url:"sc_cassini/earth/launch/orb"},{url:"sc_cassini/sun/1/orb"},{url:"sc_cassini/venus/flyby1/orb"},{url:"sc_cassini/sun/2/orb"},{url:"sc_cassini/venus/flyby2/orb"},{url:"sc_cassini/sun/3/orb"},{url:"sc_cassini/earth/flyby/orb"},{url:"sc_cassini/sun/4/orb"},{url:"sc_cassini/saturn/orb"},{url:"sc_cassini/ori"}],coverages:[{coverage:[157212064.184,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("huygens_probe",!0)},exit:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("huygens_probe",!1)}}]},sc_galileo:{groups:["jupiter","spacecraft"],occlusionRadius:.003,extentsRadius:.0055,label:"Galileo",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-321559829,"sun"],[-312199026,"venus"],[-311946958,"sun"],[-286252262,"earth"],[-285827020,"sun"],[-223105356,"earth"],[-222610262,"sun"],[-129268796,"jupiter"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_galileo/galileo.gltf",shadowEntities:["jupiter","earth","venus"],rotate:[{x:-90},{z:180}]},dynamo:[{url:"sc_galileo/earth/launch/orb"},{url:"sc_galileo/sun/orb"},{url:"sc_galileo/venus/flyby/orb"},{url:"sc_galileo/earth/flyby1/orb"},{url:"sc_galileo/earth/flyby2/orb"},{url:"sc_galileo/jupiter/orb"},{url:"sc_galileo/quat"}],postCreateFunction:t=>{const e=t.addController("align",void 0,t.getControllerByType("dynamo",6));e.setPrimaryAlignType("point"),e.setPrimaryTargetEntity("mercury"),e.setPrimaryAxis(a.Vector3.ZAxisNeg),e.setSecondaryAlignType("align"),e.setSecondaryAxis(a.Vector3.YAxis),e.setSecondaryTargetAxis(a.Vector3.ZAxis),e.setSecondaryTargetEntity("earth");const i=t.addController("spin");i.setJoint("spinning_section"),i.setRate(6*Math.PI/60),i.setAxis(a.Vector3.YAxisNeg,!0)}},sc_galileo_probe:{groups:["jupiter","spacecraft"],radius:72e-5,label:"Galileo Probe",parents:[[Number.NEGATIVE_INFINITY,"sc_galileo"],[-129268796,"jupiter"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_galileo_probe/galileo_probe.gltf",rotate:[{x:-90}]},fixed:{position:a.Vector3.Zero,orientation:a.Quaternion.Identity,coverage:[-321964226.73959994,-141114537.48322043]},dynamo:[{url:"sc_galileo_probe/galileo/orb"},{url:"sc_galileo_probe/jupiter/orb"}],coverages:[{coverage:[Number.NEGATIVE_INFINITY,-141114537.48322043],enter:t=>{t.getComponentByType("div").setEnabled(!1),t.getComponentByType("trail").setEnabled(!1),t.getControllerByType("translate").setTranslation(new a.Vector3(0,0,.001))},exit:t=>{t.getComponentByType("div").setEnabled(!0),t.getComponentByType("trail").setEnabled(!0),t.getControllerByType("translate").setTranslation(new a.Vector3(-16e-6,24e-6,7e-4))}}],postCreateFunction:t=>{t.get("model").setTranslation(new a.Vector3(0,0,-.001));const e=t.addController("translate");e.setTranslation(new a.Vector3(-16e-6,24e-6,7e-4)),e.setRelativeToOrientation(!0),e.setCoverage(new a.Interval(-321964226.73959994,-128353980)),t.addController("rotateByParentOrientation").setCoverage(new a.Interval(-321964226.73959994,-141114537.48322043));const i=t.addController("fixed");i.setOrientation(new a.Quaternion(.40004226980201746,.3894033591393042,-.7928008139628516,.24453645053961984)),i.setCoverage(new a.Interval(-141114537.48322043,Number.POSITIVE_INFINITY))}},sc_huygens:{groups:["saturn","spacecraft","titan"],occlusionRadius:.0013,extentsRadius:.0013,label:"Huygens",parents:[[Number.NEGATIVE_INFINITY,"saturn"],[158945582,"titan"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_huygens/Huygens.gltf",rotate:[{x:-90},{z:180}],shadowEntities:["saturn","titan","enceladus","mimas","tethys"]},fixed:{orientation:new a.Quaternion(.8295521744501194,.09912464029342342,-.04158756948048668,-.5479853735424731)},dynamo:[{url:"sc_huygens/saturn/orb"},{url:"sc_huygens/titan/orb"}],coverages:[{coverage:[158965616.707,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!0)},exit:t=>{const e=t.get("trail");null!==e&&e.setRelativeToEntityOrientation(!1)}}],postCreateFunction:t=>{t.get("model").setTranslation(new a.Vector3(.0013,0,-.0011));const e=t.addController("keyframe");e.addPositionKeyframe(158965616.707,new a.Vector3(-74.84608000701567,-3832.0774028380238,-305.9513410781612)),e.addPositionKeyframe(158965667.7750001,new a.Vector3(-168.19015737501377,-3541.733393771429,-291.12326824195395)),e.addPositionKeyframe(158965894.184,new a.Vector3(-376.8992769951708,-2686.9622048526126,-273.33138256355716));const i=t.addController("keyframe");i.addPositionKeyframe(158965894.184,new a.Vector3(-376.8992769951708,-2686.9622048526126,-273.33138256355716)),i.addPositionKeyframe(158974766.184,new a.Vector3(-251.2479743710496,-2548.813556954952,-266.5500089234507));const s=t.addController("translate");s.setTranslation(new a.Vector3(-.0013,0,.0011)),s.setRelativeToOrientation(!0),s.setCoverage(new a.Interval(157212064.184,158974766.184));const n=t.addController("spin");n.setAxis(new a.Vector3(-1,0,0),!0),n.setRate(.78539816339),n.setReferenceTime(157212064.184)}},sc_pioneer_10:{groups:["sun","jupiter","spacecraft"],radius:.002118055,label:"Pioneer 10",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-878146409,"sun"],[-824046472,"jupiter"],[-822011429,"sun"]],trail:{length:31536e4},model:{url:"$STATIC_ASSETS_URL/models/sc_pioneer/pioneer.gltf",rotate:[{x:90}]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis}},dynamo:[{url:"sc_pioneer_10/earth/orb"},{url:"sc_pioneer_10/sun/1/orb"},{url:"sc_pioneer_10/jupiter/orb"},{url:"sc_pioneer_10/sun/2/orb"}]},sc_pioneer_11:{groups:["sun","jupiter","saturn","spacecraft"],radius:.002118055,label:"Pioneer 11",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-843644357,"sun"],[-792658454,"jupiter"],[-790152245,"sun"],[-643302619,"saturn"],[-640194311,"sun"]],trail:{length:31536e4},model:{url:"$STATIC_ASSETS_URL/models/sc_pioneer/pioneer.gltf",rotate:[{x:90}]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis}},dynamo:[{url:"sc_pioneer_11/earth/orb"},{url:"sc_pioneer_11/sun/1/orb"},{url:"sc_pioneer_11/jupiter/orb"},{url:"sc_pioneer_11/sun/2/orb"},{url:"sc_pioneer_11/saturn/orb"},{url:"sc_pioneer_11/sun/3/orb"}]},sc_voyager_1:{groups:["jupiter","saturn","sun","spacecraft"],occlusionRadius:.00183,extentsRadius:.0043,label:"Voyager 1",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-703530245,"sun"],[-660264745,"jupiter"],[-655057463,"sun"],[-606239665,"saturn"],[-600733702,"sun"]],trail:{length:94608e4,lengthCoverages:[[15768e4,Number.NEGATIVE_INFINITY,377123932.454],[94608e4,377123932.454,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_voyager/Voyager.gltf",rotate:[{x:-90}]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxisNeg}},dynamo:[{url:"sc_voyager_1/earth/orb"},{url:"sc_voyager_1/sun/1/orb"},{url:"sc_voyager_1/jupiter/orb"},{url:"sc_voyager_1/sun/2/orb"},{url:"sc_voyager_1/saturn/orb"},{url:"sc_voyager_1/sun/3/orb"},{url:"sc_voyager_1/ori"}]},sc_voyager_2:{groups:["jupiter","saturn","uranus","neptune","sun","spacecraft"],occlusionRadius:.00183,extentsRadius:.0043,label:"Voyager 2",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-704774613,"sun"],[-650828783,"jupiter"],[-642276063,"sun"],[-582886481,"saturn"],[-574538624,"sun"],[-440395228,"uranus"],[-439259319,"sun"],[-327233138,"neptune"],[-326252606,"sun"]],trail:{length:94608e4,lengthCoverages:[[15768e4,Number.NEGATIVE_INFINITY,651751314.724],[94608e4,651751314.724,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_voyager/Voyager.gltf",rotate:[{x:-90}]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.ZAxisNeg}},dynamo:[{url:"sc_voyager_2/earth/orb"},{url:"sc_voyager_2/sun/1/orb"},{url:"sc_voyager_2/jupiter/orb"},{url:"sc_voyager_2/sun/2/orb"},{url:"sc_voyager_2/saturn/orb"},{url:"sc_voyager_2/sun/3/orb"},{url:"sc_voyager_2/uranus/orb"},{url:"sc_voyager_2/sun/4/orb"},{url:"sc_voyager_2/neptune/orb"},{url:"sc_voyager_2/sun/5/orb"},{url:"sc_voyager_2/ori"}]}});const n=[[393471366,393501486],[399019747,399883447],[400569547,400988887],[420541747,420794647],[454490527,454650187],[487136707,487309687],[519804068,521041748],[528958868,529749008]],r=[[399637867.183,399639659.183],[400933867.182,400935660.182],[420714067.185,420714072.185],[454572067.185,454572072.185],[487231267.185,487231272.185],[520957868.184,520959604.184]];e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(286),n=i(35);s.default.register({sc_dart:{groups:["spacecraft","65803_didymos","dimorphos"],occlusionRadius:.0012,extentsRadius:.00625,label:"DART",parents:[[Number.NEGATIVE_INFINITY,"earth"],[691418893,"sun"],[717454117,"65803_didymos"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_dart/dart.gltf",shadowEntities:["earth"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.YAxis},secondary:{type:"align",target:"sun",axis:n.Vector3.XAxisNeg,targetAxis:n.Vector3.ZAxis}},dynamo:[{url:"sc_dart/earth/orb"},{url:"sc_dart/sun/orb"},{url:"sc_dart/65803_didymos/pos"}],coverages:[{coverage:[716980217,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getControllerByType("align");e.setPrimaryTargetEntity("dimorphos"),e.setPrimaryAxis(n.Vector3.ZAxisNeg)},exit:t=>{const e=t.getControllerByType("align");e.setPrimaryTargetEntity("sun"),e.setPrimaryAxis(n.Vector3.YAxis)}}],postCreateFunction:t=>{const e=t.addController("keyframe",void 0,t.getControllerByType("align"));e.addPositionKeyframe(717503237,new n.Vector3(-10320.163052194115,13421.106828492655,5349.381737812169)),e.addPositionKeyframe(717506127.238318,new n.Vector3(-.9047084058613565,-.7147384471771195,-.30125475602973617))}},sc_dawn:{groups:["4_vesta","1_ceres","spacecraft"],occlusionRadius:885e-6,extentsRadius:.00985,label:"Dawn",parents:[[Number.NEGATIVE_INFINITY,"earth"],[244461608,"sun"],[288169447,"mars"],[288210177,"sun"],[363182466,"4_vesta"],[400075267,"sun"],[476712067,"1_ceres"]],trail:{length:659889.75},model:{url:"$STATIC_ASSETS_URL/models/sc_dawn/model.gltf",rotate:[{z:-90}]},fixed:{orientation:new n.Quaternion(.9999478154504517,.008904517167862874,.004868284692665544,-.0011729254143642916),coverage:[244168849.8323595,244171353.18400002]},dynamo:[{url:"sc_dawn/earth/orb"},{url:"sc_dawn/sun/1/orb"},{url:"sc_dawn/mars/orb"},{url:"sc_dawn/sun/2/orb"},{url:"sc_dawn/vesta/orb"},{url:"sc_dawn/sun/3/orb"},{url:"sc_dawn/ceres/orb"},{url:"sc_dawn/ori"}]},sc_deep_impact:{groups:["9p_tempel_1","103p_hartley_2","spacecraft"],occlusionRadius:.00165,extentsRadius:.00165,label:"Deep Impact",parents:[[Number.NEGATIVE_INFINITY,"earth"],[159287744,"sun"],[173560752,"9p_tempel_1"],[173923158,"sun"],[251798121,"earth"],[253531474,"sun"],[282984399,"earth"],[285405903,"sun"],[330384030,"earth"],[331534813,"sun"],[342017751,"103p_hartley_2"],[342368983,"sun"]],trail:{length:47421459,lengthCoverages:[[362406,173560752,173923158],[1733353,251798121,253531474],[2421504,282984399,285405903],[1150783,330384030,331534813],[351232,342017751,342368983]]},model:{url:"$STATIC_ASSETS_URL/models/sc_deep_impact/deep_impact_wo_impactor.gltf",rotate:[{y:-90}]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sc_deep_impact/earth/launch/orb"},{url:"sc_deep_impact/sun/orb"},{url:"sc_deep_impact/9p_tempel_1/pos"},{url:"sc_deep_impact/earth/flyby1/orb"},{url:"sc_deep_impact/earth/flyby2/orb"},{url:"sc_deep_impact/earth/flyby3/orb"},{url:"sc_deep_impact/103p_hartley_2/pos"},{url:"sc_deep_impact/quat"}]},sc_deep_impact_impactor:{groups:["9p_tempel_1","sc_deep_impact","spacecraft"],occlusionRadius:.001,extentsRadius:.001,label:"Deep Impact Impactor",parents:[[Number.NEGATIVE_INFINITY,"sc_deep_impact"],[173642464.18400002,"9p_tempel_1"]],trail:{length:27830},model:{url:"$STATIC_ASSETS_URL/models/sc_deep_impact_impactor/deep_impact_impactor.gltf",rotate:[{y:-90}]},fixed:{position:new n.Vector3(-713e-6,-55e-6,0),orientation:n.Quaternion.Identity,relativeToParent:!0,coverage:[158829812.068274,173642464.18400002]},dynamo:[{url:"sc_deep_impact_impactor/quat",coverage:[173642464.18400002,Number.POSITIVE_INFINITY]}],postCreateFunction:t=>{const e=t.addController("keyframe");e.addPositionKeyframe(173642464.18400002,new n.Vector3(-713e-6,-55e-6,0),"sc_deep_impact",void 0,"sc_deep_impact"),e.addPositionKeyframe(173656621.40411958,new n.Vector3(-123095.24746842826,-48294.70341251187,61743.99881253781),"sc_deep_impact",173642464.18400002),e.addPositionKeyframe(173727938.18158135,new n.Vector3(1.580046751199936,3.178179950746365,-.628457454223176));const i=t.addController("fixed","",t.getControllerByType("dynamo"));i.setOrientation(new n.Quaternion(.9060465048532422,.3173702681972099,.2649483984949708,.09032269948692226)),i.setCoverage(new n.Interval(173642464.18400002,Number.POSITIVE_INFINITY))}},sc_deep_impact_impactor_impact_site:{groups:["9p_tempel_1","sc_deep_impact","sc_deep_impact_impactor","sites"],radius:.001,label:"Deep Impact Impactor Impact Site",parents:[[Number.NEGATIVE_INFINITY,"9p_tempel_1"]],fixed:{position:new n.Vector3(3.1153282512332603,-1.2860729555237982,-1.277920399403075),orientation:n.Quaternion.Identity,relativeToParent:!0,coverage:[173727938.18158135,Number.POSITIVE_INFINITY]}},sc_deep_space_1:{groups:["9969_braille","spacecraft"],occlusionRadius:.00125,extentsRadius:.0045,label:"Deep Space 1",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-36628312,"sun"],[-13523799,"9969_braille"],[-13496699,"sun"],[54458637,"19p_borrelly"],[54476825,"sun"]],trail:{length:40845609,lengthCoverages:[[27100,-13523799,-13496699],[18188,54458637,54476825]]},model:{url:"$STATIC_ASSETS_URL/models/sc_deep_space_1/deep_space_1.gltf",rotate:[{x:90},{z:90}]},dynamo:[{url:"sc_deep_space_1/earth/orb"},{url:"sc_deep_space_1/sun/orb"},{url:"sc_deep_space_1/9969_braille/pos"},{url:"sc_deep_space_1/19p_borrelly/pos"},{url:"sc_deep_space_1/quat"}],postCreateFunction:t=>{const e=t.addController("align","",t.getControllerByType("dynamo",3));e.setPrimaryAlignType("point"),e.setPrimaryAxis(n.Vector3.XAxis),e.setPrimaryTargetEntity("earth"),e.setSecondaryAlignType("point"),e.setSecondaryAxis(n.Vector3.ZAxisNeg),e.setSecondaryTargetEntity("sun")}},sc_near_shoemaker:{groups:["253_mathilde","433_eros","spacecraft"],occlusionRadius:.002,extentsRadius:.0034,label:"NEAR",parents:[[Number.NEGATIVE_INFINITY,"sun"],[-61397606,"earth"],[-60793811,"sun"],[-79403925,"253_mathilde"],[-79210250,"sun"],[-8425610,"433_eros"]],trail:{length:63919069,lengthCoverages:[[4e5,-8425610,35279032.137],[0,35279032.137,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_near_shoemaker/near.gltf",rotate:[{x:90},{z:135}]},fixed:{orientation:new n.Quaternion(.5052018803124495,-.11842169431143575,.7652511949887616,-.3809697770341459),coverage:[-122129937,-121953528.049046]},dynamo:[{url:"sc_near_shoemaker/sun/orb"},{url:"sc_near_shoemaker/earth/flyby/orb"},{url:"sc_near_shoemaker/253_mathilde/pos"},{url:"sc_near_shoemaker/433_eros/orb"},{url:"sc_near_shoemaker/quat"}],postCreateFunction:t=>{const e=t.addController("orbitalElements"),i=new n.OrbitalElements;i.eccentricity=.3722732412046076,i.epoch=-122129937,i.semiMajorAxis=235420679.8644008,i.orbitOrientation.set(.25408339907533106,.05463135384055627,-.18986948069810847,.9467875272685549),i.meanAngularMotion=1.0085301888805118e-7,i.meanAnomalyAtEpoch=-.005941352116228519,e.addOrbitalElements(-122129937,i),e.addOrbitalElements(-113227200,i),e.setCoverage(new n.Interval(-122129937,-113227200));const s=t.addController("fixed");s.setPosition(new n.Vector3(.930389249841349,4.935129554115763,-4.002004469114965)),s.setOrientation(new n.Quaternion(.11222410400554989,.7066112547219852,-.6897721372150081,.11099857612696495)),s.setCoverage(new n.Interval(35279032.137,36675809.3654)),t.addController("rotateByParentOrientation").setCoverage(new n.Interval(35279032.137,36675809.3654))}},sc_near_shoemaker_landing_site:{groups:["433_eros","spacecraft","sites"],radius:.001,label:"NEAR Shoemaker Landing Site",parents:[[Number.NEGATIVE_INFINITY,"433_eros"]],fixed:{position:new n.Vector3(.930389249841349,4.935129554115763,-4.002004469114965),orientation:new n.Quaternion(.11222410400554989,.7066112547219852,-.6897721372150081,.11099857612696495),relativeToParent:!0,coverage:[36675809.3654,Number.POSITIVE_INFINITY]}},sc_lucy:{groups:["52246_donaldjohanson","3548_eurybates","15094_polymele","11351_leucus","21900_orus","617_patroclus","menoetius","spacecraft"],occlusionRadius:.002,extentsRadius:.007125,label:"Lucy",parents:[[Number.NEGATIVE_INFINITY,"earth"],[687915086,"sun"],[718960993,"earth"],[719531941,"sun"],[787134972,"earth"],[787532222,"sun"],[798252820,"52246_donaldjohanson"],[798584539,"sun"],[870652086,"3548_eurybates"],[872642047,"sun"],[872642047,"15094_polymele"],[875308504,"sun"],[891166024,"11351_leucus"],[894761809,"sun"],[909384911,"21900_orus"],[912190135,"sun"],[977590306,"earth"],[978108682,"sun"],[1046169596,"617_patroclus_barycenter"],[1047892376,"sun"]],trail:{length:63919069,lengthCoverages:[[570948,718960993,719531941],[397250,787134972,787532222],[331719,798252820,798584539],[1989961,870652086,872642047],[2666457,872642047,875308504],[3595785,891166024,894761809],[2805224,909384911,912190135],[518376,977590306,978108682],[1722780,1046169596,1047892376]]},model:{url:"$STATIC_ASSETS_URL/models/sc_lucy/lucy.gltf",rotate:[{x:90},{z:90}]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sc_lucy/earth/launch/orb"},{url:"sc_lucy/sun/orb"},{url:"sc_lucy/earth/flyby1/orb"},{url:"sc_lucy/earth/flyby2/orb"},{url:"sc_lucy/52246_donaldjohanson/pos"},{url:"sc_lucy/3548_eurybates/pos"},{url:"sc_lucy/15094_polymele/pos"},{url:"sc_lucy/11351_leucus/pos"},{url:"sc_lucy/21900_orus/pos"},{url:"sc_lucy/earth/flyby3/orb"},{url:"sc_lucy/617_patroclus/pos"},{url:"sc_lucy/quat"}],postCreateFunction:t=>{const e=t.addController("align",void 0,t.getControllerByType("dynamo",11));e.setPrimaryAlignType("point"),e.setPrimaryAxis(n.Vector3.XAxis),e.setPrimaryTargetEntity("earth"),e.setSecondaryAlignType("align"),e.setSecondaryAxis(n.Vector3.YAxis),e.setSecondaryTargetAxis(n.Vector3.ZAxis),e.setSecondaryTargetEntity("sun")}},sc_new_horizons:{groups:["134340_pluto","486958_2014_mu69","spacecraft"],radius:.00135,label:"New Horizons",parents:[[Number.NEGATIVE_INFINITY,"earth"],[191055829,"sun"],[225619606,"jupiter"],[226100665,"sun"],[490130161,"134340_pluto"],[490167848,"sun"],[598753684,"486958_arrokoth"],[600203601,"sun"]],trail:{length:94608e3},model:{url:"$STATIC_ASSETS_URL/models/sc_new_horizons/new_horizons.gltf",rotate:[{y:90}]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.YAxis}},dynamo:[{url:"sc_new_horizons/earth/orb"},{url:"sc_new_horizons/sun/1/orb"},{url:"sc_new_horizons/jupiter/orb"},{url:"sc_new_horizons/sun/2/orb"},{url:"sc_new_horizons/pluto/orb"},{url:"sc_new_horizons/sun/3/pos"},{url:"sc_new_horizons/mu69/pos"},{url:"sc_new_horizons/sun/4/pos"},{url:"sc_new_horizons/ori/1"},{url:"sc_new_horizons/ori/2"}]},sc_rosetta:{groups:["67p_churyumov_gerasimenko","spacecraft"],occlusionRadius:.0014,extentsRadius:.016,label:"Rosetta",parents:[[Number.NEGATIVE_INFINITY,"earth"],[131901500,"sun"],[162704887,"earth"],[163831232,"sun"],[225623375,"mars"],[225657862,"sun"],[248111015,"earth"],[248475560,"sun"],[311055929,"earth"],[311664877,"sun"],[452394238,"67p_churyumov_gerasimenko"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_rosetta/rosettaPhilae.gltf",rotate:[{x:180},{z:90}]},fixed:{orientation:n.Quaternion.Identity},dynamo:[{url:"sc_rosetta/earth/launch/orb"},{url:"sc_rosetta/sun/1/orb"},{url:"sc_rosetta/earth/flyby1/orb"},{url:"sc_rosetta/sun/2/orb"},{url:"sc_rosetta/mars/flyby/orb"},{url:"sc_rosetta/sun/3/orb"},{url:"sc_rosetta/earth/flyby2/orb"},{url:"sc_rosetta/sun/4/orb"},{url:"sc_rosetta/earth/flyby3/orb"},{url:"sc_rosetta/sun/5/orb"},{url:"sc_rosetta/67p_churyumov_gerasimenko/pos"},{url:"sc_rosetta/ori"}],coverages:[{coverage:[469053367.183,Number.POSITIVE_INFINITY],enter:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("Philae",!0)},exit:t=>{const e=t.get("model");null!==e&&e.setHiddenObject("Philae",!1)}}],postCreateFunction:t=>{const e=t.addController("align");e.setJoint("panels_01"),e.setSecondaryAlignType("point"),e.setSecondaryAxis(n.Vector3.ZAxis),e.setSecondaryTargetEntity("sun");const i=t.addController("align");i.setJoint("panels_02"),i.setSecondaryAlignType("point"),i.setSecondaryAxis(n.Vector3.ZAxis),i.setSecondaryTargetEntity("sun")}},sc_rosetta_impact_site:{groups:["67p_churyumov_gerasimenko","sc_rosetta","sites"],radius:.001,label:"Rosetta Impact Site",parents:[[Number.NEGATIVE_INFINITY,"67p_churyumov_gerasimenko"]],fixed:{position:new n.Vector3(1.7309310500292525,.3509303067271947,1.1641920075039298),orientation:n.Quaternion.Identity,relativeToParent:!0,coverage:[528503957.968,Number.POSITIVE_INFINITY]}},sc_osiris_rex:{groups:["101955_bennu","spacecraft"],occlusionRadius:.0016,extentsRadius:.0031,label:"OSIRIS-REx",parents:[[Number.NEGATIVE_INFINITY,"earth"],[527025408,"sun"],[558938468,"earth"],[559919190,"sun"],[591770603,"101955_bennu"],[674049669,"sun"],[748358886,"earth"]],trail:{length:102742.5,lengthCoverages:[[1e7,Number.NEGATIVE_INFINITY,599748661],[672e3,599748661,668095733],[1e7,668095733,Number.POSITIVE_INFINITY]]},model:{url:"$STATIC_ASSETS_URL/models/sc_osiris_rex/osiris_rex.gltf",rotate:[{x:90}],shadowEntities:["bennu"]},align:{primary:{type:"point",target:"sun",axis:n.Vector3.ZAxisNeg}},dynamo:[{url:"sc_osiris_rex/earth/launch/orb"},{url:"sc_osiris_rex/sun/1/orb"},{url:"sc_osiris_rex/earth/flyby/orb"},{url:"sc_osiris_rex/sun/2/orb"},{url:"sc_osiris_rex/bennu/pos"},{url:"sc_osiris_rex/sun/3/orb"},{url:"sc_osiris_rex/earth/landing/orb"},{url:"sc_osiris_rex/ori"}],postCreateFunction:t=>{const e=t.getComponentByType("model");e.setResourcesLoadedCallback(()=>{e.getThreeJsObjectByName("Tagsam_rod_bottom").rotation.x=0,e.getThreeJsObjectByName("Tagsam_rod_bottom").rotation.z=0,e.getThreeJsObjectByName("Tagsam_rod_top").rotation.x=0,e.getThreeJsObjectByName("Tagsam_rod_top").rotation.z=0,e.getThreeJsObjectByName("tagsam_head").rotation.x=0,e.getThreeJsObjectByName("tagsam_head").rotation.z=0}),a.default.makeSubobjectVisibleAnimation(e,"Tagsam_housing_cover",!0,[[593036911,!1]]),a.default.makeJointRotationAnimation(e,"Tagsam_rod_bottom","y",[[595442726,2.51758508612],[595442906,0],[595443086,0],[595443266,2.51758508612],[656489486,2.51758508612],[656489846,0],[656502896,0],[656503076,2.51758508612],[657366686,2.51758508612],[657367046,-.22013488789],[657367406,2.51758508612]]),a.default.makeJointRotationAnimation(e,"Tagsam_rod_top","y",[[593728111,-2.73247002363],[593728113,-2.58247002363],[595442726,-2.58247002363],[595442906,0],[595443086,0],[595443266,-2.58247002363],[656489486,-2.58247002363],[656489846,0],[656502896,0],[656503076,-2.58247002363],[657366686,-2.58247002363],[657366866,-1.57110175941],[657367046,-2.22286878863],[657367226,-1.57110175941],[657367406,-2.58247002363]]),a.default.makeJointRotationAnimation(e,"tagsam_head","y",[[595442906,-1.37257230233],[595442996,0],[595443086,-1.37257230233],[656489486,-1.37257230233],[656489576,0],[656502806,0],[656502896,-1.37257230233],[657366686,-1.37257230233],[657367046,-.55616487411]]),a.default.makeSubobjectVisibleAnimation(e,"tagsam_head",!0,[[657367046,!1]])}},sc_philae:{groups:["67p_churyumov_gerasimenko","spacecraft","landers"],radius:6e-4,label:"Philae",parents:[[Number.NEGATIVE_INFINITY,"67p_churyumov_gerasimenko"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_philae/philae.gltf",rotate:[{x:180},{z:90}]},fixed:{orientation:new n.Quaternion(.05763938670269045,.04093459828351704,.6750586755218195,.7343690110337115)},dynamo:[{url:"sc_philae/67p_churyumov_gerasimenko/pos"}],postCreateFunction:t=>{const e=new n.Vector3(.0021658104318583687,.0011575046500869896,.00011875498849156656),i=new n.Vector3(.00147,0,0),s=t.addController("translate");s.setTranslation(e),s.setCoverage(new n.Interval(469053367.183,469078512.324)),t.get("model").setTranslation(i)}},sc_philae_landing_site:{groups:["67p_churyumov_gerasimenko","sc_philae","sites"],radius:.001,label:"Philae Landing Site",parents:[[Number.NEGATIVE_INFINITY,"67p_churyumov_gerasimenko"]],fixed:{position:new n.Vector3(2.4452763955965984,-.12110982508097201,-.36032099522959377),orientation:n.Quaternion.Identity,relativeToParent:!0,coverage:[469078512.324,Number.POSITIVE_INFINITY]}},sc_psyche:{groups:["16_psyche","spacecraft"],occlusionRadius:.0031,extentsRadius:.025,label:"Psyche",parents:[[Number.NEGATIVE_INFINITY,"earth"],[713424696,"sun"],[736836669,"mars"],[737177380,"sun"],[820013200,"16_psyche"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_psyche/psyche.gltf",rotate:[{y:-90},{x:90}]},align:{primary:{type:"point",target:"earth",axis:n.Vector3.XAxisNeg}},dynamo:[{url:"sc_psyche/earth/orb"},{url:"sc_psyche/sun/orb"},{url:"sc_psyche/mars/orb"},{url:"sc_psyche/16_psyche/orb"}],postCreateFunction:t=>{const e=t.addController("align");e.setJoint("ArrayGimbleLeft"),e.setSecondaryAlignType("point"),e.setSecondaryAxis(n.Vector3.YAxis),e.setSecondaryTargetEntity("sun");const i=t.addController("align");i.setJoint("ArrayGimbleRight"),i.setSecondaryAlignType("point"),i.setSecondaryAxis(n.Vector3.YAxis),i.setSecondaryTargetEntity("sun")}},sc_stardust:{groups:["81p_wild_2","9p_tempel_1","spacecraft"],occlusionRadius:65e-5,extentsRadius:.002,label:"Stardust",parents:[[Number.NEGATIVE_INFINITY,"earth"],[-28038699,"sun"],[32627842,"earth"],[33120541,"sun"],[89379733,"5535_annefrank"],[89550209,"sun"],[126009572,"81p_wild_2"],[126678668,"sun"],[190336290,"earth"],[190866114,"sun"],[284944970,"earth"],[285742028,"sun"],[350896766,"9p_tempel_1"],[351068113,"sun"]],trail:{length:62659492},model:{url:"$STATIC_ASSETS_URL/models/sc_stardust/stardust_articulated.gltf",shadowEntities:["earth"],rotate:[{x:90},{z:90}]},fixed:{orientation:new n.Quaternion(.382740492391079,-.1080542417135509,-.5511677923678098,-.7335175941913997),coverage:[351017063,354279666]},dynamo:[{url:"sc_stardust/earth/launch/orb"},{url:"sc_stardust/sun/orb"},{url:"sc_stardust/earth/flyby1/orb"},{url:"sc_stardust/5535_annefrank/pos"},{url:"sc_stardust/81p_wild_2/pos"},{url:"sc_stardust/earth/flyby2/orb"},{url:"sc_stardust/earth/flyby3/orb"},{url:"sc_stardust/9p_tempel_1/pos"},{url:"sc_stardust/quat"}],coverages:[{coverage:[190576690.7833838,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getComponentByType("model");for(const t of["Stardust_capsule","Stardust_tex_01_c","Stardust_tex_02_c","Stardust_tex_03_c","Stardust_tex_02_c2","Stardust_Sample_Collection1"])e.setHiddenObject(t,!0)},exit:t=>{const e=t.getComponentByType("model");for(const t of["Stardust_capsule","Stardust_tex_01_c","Stardust_tex_02_c","Stardust_tex_03_c","Stardust_tex_02_c2","Stardust_Sample_Collection1"])e.setHiddenObject(t,!1)}}],postCreateFunction:t=>{const e=t.getComponentByType("model"),i=(t,e,i)=>[[4449664+e,t],[4449664+e+i,0],[10411264-e-i,0],[10411264-e,t],[81864064+e,t],[81864064+e+i,0],[92664064-e-i,0],[92664064-e,t],[125496064+e,t],[125496064+e+i,0],[126363664-e-i,0],[126363664-e,t]];a.default.makeJointRotationAnimation(e,"Stardust_capsule","x",i(1.481785,0,600)),a.default.makeJointRotationAnimation(e,"Stardust_Sample_Collection1","x",i(-Math.PI,610,300)),a.default.makeJointRotationAnimation(e,"Stardust_Sample_Collection2","x",i(-Math.PI,920,300))}},sc_stardust_src:{groups:["earth","spacecraft"],occlusionRadius:4e-4,extentsRadius:4e-4,label:"Stardust SRC",parents:[[Number.NEGATIVE_INFINITY,"sc_stardust"],[190576755.185,"earth"]],trail:{length:14547},fixed:{orientation:new n.Quaternion(.5761056269233067,.6860897901682099,.2627910947477326,.3582233199772653)},model:{url:"$STATIC_ASSETS_URL/models/sc_stardust_src/stardust_capsule.gltf",shadowEntities:["earth"],rotate:[{x:90},{z:90}]},dynamo:[{url:"sc_stardust_src/earth/pos"}],coverages:[{coverage:[190591100,Number.POSITIVE_INFINITY],enter:t=>{const e=t.getComponentByType("trail");e.setRelativeToEntityOrientation(!0),e.setStartTime(1600)},exit:t=>{const e=t.getComponentByType("trail");e.setRelativeToEntityOrientation(!1),e.setStartTime(18e3)}}],postCreateFunction:t=>{const e=t.addController("keyframe");e.addPositionKeyframe(190576690.7833838,new n.Vector3(-.0010057,0,1569e-7),"sc_stardust",void 0,"sc_stardust",void 0),e.addPositionKeyframe(190576755.185,new n.Vector3(-.016734488308429718,-.019199222326278687,-.00404781848192215),"sc_stardust");const i=t.addController("keyframe");i.addPositionKeyframe(190591163,new n.Vector3(-1979.4577357598625,-4478.591383446022,4136.322858267745),"earth"),i.addPositionKeyframe(190591445.184,new n.Vector3(-1947.8360605285134,-4491.082890234251,4123.1018367103425),"earth"),i.addPositionKeyframe(190591985.184,new n.Vector3(-1918.7633689113482,-4478.864184129612,4103.897124245734),"earth"),t.addController("rotateByParentOrientation").setCoverage(new n.Interval(190591163,190591985.184))}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(35);e.default=class{static makeSubobjectVisibleAnimation(t,e,i,a){if(0===a.length)return;a.sort((t,e)=>t[0]-e[0]);const n=t.getEntity();(n.getControllerByType("coverage")||n.addController("coverage")).addCoverage(new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),void 0,void 0,()=>{const r=n.getScene().getEngine().getTime(),o=s.Sort.getIndex(r,a,(t,e)=>t[0]<e);0===o?t.setHiddenObject(e,!i):t.setHiddenObject(e,!a[o-1][1])})}static makeJointRotationAnimation(t,e,i,a){if(0===a.length)return;a.sort((t,e)=>t[0]-e[0]);const n=t.getEntity();(n.getControllerByType("coverage")||n.addController("coverage")).addCoverage(new s.Interval(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),void 0,void 0,()=>{const r=t.getThreeJsObjectByName(e);if(null!==r){const t=n.getScene().getEngine().getTime(),e=s.Sort.getIndex(t,a,(t,e)=>t[0]<e);if(0===e)r.rotation[i]=a[0][1];else if(e===a.length)r.rotation[i]=a[a.length-1][1];else{const n=a[e-1],o=a[e],l=(t-n[0])/(o[0]-n[0]);r.rotation[i]=s.MathUtils.lerp(n[1],o[1],l)}}})}}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_kepler_space_telescope:{groups:["sun","spacecraft","telescope"],occlusionRadius:.00235,extentsRadius:.00235,label:"Kepler",parents:[[Number.NEGATIVE_INFINITY,"earth"],[290348743,"sun"]],trail:{length:32190048},model:{url:"$STATIC_ASSETS_URL/models/sc_kepler/Kepler.gltf"},align:{primary:{type:"align",target:"sun",targetAxis:new a.Vector3(.25176480336,-.66735243742,.7009092643),axis:a.Vector3.YAxis},secondary:{type:"point",target:"sun",axis:a.Vector3.XAxisNeg}},dynamo:[{url:"sc_kepler/earth/orb"},{url:"sc_kepler/sun/orb"}]},sc_mariner_2:{groups:["sun","spacecraft"],occlusionRadius:.002,extentsRadius:.0025,label:"Mariner 2",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:29411352},animdata:[{url:"sc_mariner_2",type:"pos"}]},sc_parker_solar_probe:{groups:["sun","spacecraft"],radius:.0015,label:"Parker Solar Probe",parents:[[Number.NEGATIVE_INFINITY,"earth"],[587454078,"sun"]],trail:{length:12942631},model:{url:"$STATIC_ASSETS_URL/models/sc_parker_solar_probe/PSP.gltf"},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxisNeg}},dynamo:[{url:"sc_parker_solar_probe/earth/orb"},{url:"sc_parker_solar_probe/sun/orb"}]},sc_spitzer:{groups:["sun","spacecraft"],occlusionRadius:.0085,extentsRadius:.00217,label:"Spitzer",parents:[[Number.NEGATIVE_INFINITY,"earth"],[115493678,"sun"]],trail:{length:32167331},model:{url:"$STATIC_ASSETS_URL/models/sc_spitzer/SPITZER.gltf",rotate:[{z:-90},{x:-90}],shadowEntities:["venus","mercury"]},fixed:{orientation:new a.Quaternion(.5258297992951877,.8139480432783324,-.1400557906856776,-.20341086625833524),coverage:[633777341.191,Number.POSITIVE_INFINITY]},dynamo:[{url:"sc_spitzer/earth/orb"},{url:"sc_spitzer/sun/orb"},{url:"sc_spitzer/quat"}]},sc_stereo_ahead:{groups:["sun","spacecraft"],occlusionRadius:.003,extentsRadius:.003,label:"STEREO Ahead",parents:[[Number.NEGATIVE_INFINITY,"earth"],[221418192,"sun"]],trail:{length:29809031},model:{url:"$STATIC_ASSETS_URL/models/sc_stereo_ahead/stereo_a.gltf",rotate:[{x:90}],shadowEntities:["venus","mercury"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_stereo_ahead",axis:a.Vector3.YAxisNeg}},dynamo:[{url:"sc_stereo_ahead/earth/orb"},{url:"sc_stereo_ahead/sun/orb"}]},sc_stereo_behind:{groups:["sun","spacecraft"],occlusionRadius:.003,extentsRadius:.003,label:"STEREO Behind",parents:[[Number.NEGATIVE_INFINITY,"earth"],[224468337,"sun"]],trail:{length:33473699},model:{url:"$STATIC_ASSETS_URL/models/sc_stereo_behind/stereo_b.gltf",rotate:[{x:90}],shadowEntities:["venus","mercury"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_stereo_behind",axis:a.Vector3.YAxisNeg}},dynamo:[{url:"sc_stereo_behind/earth/orb"},{url:"sc_stereo_behind/sun/orb"}]},sc_ulysses:{groups:["sun","spacecraft"],occlusionRadius:.002,extentsRadius:.002,label:"Ulysses",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:140294739},model:{url:"$STATIC_ASSETS_URL/models/sc_ulysses/ulysses.gltf",shadowEntities:["venus","mercury"]},align:{primary:{type:"point",target:"sun",axis:a.Vector3.ZAxis},secondary:{type:"velocity",target:"sc_ulysses",axis:a.Vector3.YAxisNeg}},animdata:[{url:"sc_ulysses",type:"pos"}]},sc_wmap:{groups:["sun","spacecraft"],occlusionRadius:.0026,extentsRadius:.0026,label:"WMAP",parents:[[Number.NEGATIVE_INFINITY,"sun"]],trail:{length:31536e3},animdata:[{url:"sc_wmap",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({sc_magellan:{groups:["venus","spacecraft"],occlusionRadius:.0032,extentsRadius:.0032,label:"Magellan",parents:[[Number.NEGATIVE_INFINITY,"sun"],[-296448521.457,"venus"]],trail:{length:void 0},model:{url:"$STATIC_ASSETS_URL/models/sc_magellan/magellan.gltf",shadowEntities:["venus"]},align:{primary:{type:"point",target:"earth",axis:a.Vector3.YAxis},secondary:{type:"align",axis:new a.Vector3(-Math.sqrt(.5),Math.sqrt(.5),0),target:"venus",targetAxis:a.Vector3.ZAxisNeg}},dynamo:[{url:"sc_magellan/venus/orb"}],postCreateFunction:t=>{const e=t.addController("orbitalElements",void 0,t.getControllerByType("align")),i=new a.OrbitalElements;i.epoch=-336394683.816,i.eccentricity=.1791852824104108,i.semiMajorAxis=128280596.63956015,i.meanAngularMotion=2.5073465306679634e-7,i.meanAnomalyAtEpoch=2.9229288382327625,i.orbitOrientation.set(.8728453580255966,.1876084386162498,-.08948587100888229,.4415159494547423),e.addOrbitalElements(-336388283.36,i),e.addOrbitalElements(-296448521.457,i);const s=t.addController("orbitalElements",void 0,t.getControllerByType("align")),n=new a.OrbitalElements;n.epoch=-296448521.457,n.eccentricity=1.272922970547487,n.semiMajorAxis=23358.593430196037,n.meanAngularMotion=.00015965302516479147,n.meanAnomalyAtEpoch=-6.138103356108873,n.orbitOrientation.set(-.49933963770188916,.11817755769547109,.7262027627540558,-.45751889408554064),s.addOrbitalElements(-296448521.457,n),s.addOrbitalElements(-296410230.351,n);const r=new a.OrbitalElements;r.epoch=-295884037.7511,r.eccentricity=.39186818222106645,r.semiMajorAxis=10434.012201911135,r.meanAngularMotion=.000534773863104956,r.meanAnomalyAtEpoch=-1.5165416917234864,r.orbitOrientation.set(-.4665778554219434,.18802595119032475,.7217932088991018,-.47535871728198204),s.addOrbitalElements(-296410230.351,r),s.addOrbitalElements(-295884037.7511,r)}},sc_venus_express:{groups:["venus","spacecraft"],occlusionRadius:9e-4,extentsRadius:.004,label:"Venus Express",parents:[[Number.NEGATIVE_INFINITY,"venus"]],trail:{length:779592.165087551},animdata:[{url:"sc_venus_express/venus/all",type:"pos"}]}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(161),a=i(35);s.default.register({rose_bowl:{groups:["comparison"],radius:.15,label:"Rose Bowl",parents:[],model:{url:"$STATIC_ASSETS_URL/models/comparison/rose_bowl/rose_bowl.gltf",rotate:[{x:90},{z:-90}]},fixed:{position:a.Vector3.Zero,orientation:a.Quaternion.Identity}},school_bus:{groups:["comparison"],radius:.0065,label:"School bus",parents:[],model:{url:"$STATIC_ASSETS_URL/models/comparison/school_bus/school_bus.gltf",rotate:[{x:90},{z:-90}]},fixed:{position:a.Vector3.Zero,orientation:a.Quaternion.Identity}},scientist:{groups:["comparison"],radius:835e-6,label:"Scientist",parents:[],model:{url:"$STATIC_ASSETS_URL/models/comparison/scientist/scientist.gltf",rotate:[{x:90}]},fixed:{position:a.Vector3.Zero,orientation:a.Quaternion.Identity}}}),e.default={}},function(t,e,i){"use strict";i.r(e);var s=i(35);class a extends s.BaseController{constructor(t,e,i){super(t,e,i),this._position=null,this._velocity=null,this._eccentricity=0,this._semiMajorAxis=0,this._meanAngularMotion=0,this._orbitOrientation=new s.Quaternion,this._orbitOrientationInversed=!1,this.addModifiedState("position")}setParams(t){this._eccentricity=t.eccentricity,this._semiMajorAxis=t.semiMajor*a.AUtoKm,this._meanAngularMotion=s.MathUtils.twoPi/(86400*t.period);const e=s.MathUtils.degToRad(t.inclination),i=s.MathUtils.degToRad(t.ra),n=s.MathUtils.degToRad(t.dec),r=new s.Vector3;r.x=Math.cos(Math.PI/2-e-n)*Math.cos(i+Math.PI),r.y=Math.cos(Math.PI/2-e-n)*Math.sin(i+Math.PI),r.z=Math.sin(Math.PI/2-e-n),-1===t.periapsisDirection&&(this._orbitOrientationInversed=!0,r.mult(r,t.periapsisDirection));const o=new s.Vector3;o.x=Math.cos(-n)*Math.cos(i+Math.PI),o.y=Math.cos(-n)*Math.sin(i+Math.PI),o.z=Math.sin(-n),o.cross(r,o),o.normalize(o),this._orbitOrientation.setFromAxes(r,o,void 0)}getOrbitOrientation(){return this._orbitOrientation}setOrbitOrientation(t){if(this._orbitOrientation.copy(t),this._orbitOrientationInversed){const t=new s.Vector3;this._orbitOrientation.getAxis(t,2);const e=new s.Quaternion;e.setFromAxisAngle(t,Math.PI),this._orbitOrientation.mult(e,this._orbitOrientation)}}__updatePositionAtTime(t,e){this._getPositionAtTime(t,e)}__updateVelocityAtTime(t,e){this._getVelocityAtTime(t,e)}__update(){const t=s.Vector3.pool.get(),e=s.Vector3.pool.get(),i=this.getEntity().getScene().getEngine().getTime();this._getPositionAtTime(t,i),this._getVelocityAtTime(e,i),this.getEntity().setPosition(t),this.getEntity().setVelocity(e),s.Vector3.pool.release(t),s.Vector3.pool.release(e)}_getPositionAtTime(t,e){const i=s.MathUtils.wrap(this._meanAngularMotion*e,-s.MathUtils.pi,+s.MathUtils.pi);let a=i;this._eccentricity>=.8&&(a=Math.sign(i)*s.MathUtils.pi);for(let t=0;t<20;t++){const t=(a-this._eccentricity*Math.sin(a)-i)/(this._eccentricity*Math.cos(a)-1);if(a+=t,Math.abs(t)<.00174532925)break}t.x=this._semiMajorAxis*(Math.cos(a)-this._eccentricity),t.y=this._semiMajorAxis*Math.sqrt(1-this._eccentricity*this._eccentricity)*Math.sin(a),t.z=0,t.rotate(this._orbitOrientation,t)}_getVelocityAtTime(t,e){const i=s.MathUtils.wrap(this._meanAngularMotion*e,-s.MathUtils.pi,+s.MathUtils.pi);let a=i;this._eccentricity>=.8&&(a=Math.sign(i)*s.MathUtils.pi);for(let t=0;t<20;t++){const t=(a-this._eccentricity*Math.sin(a)-i)/(this._eccentricity*Math.cos(a)-1);if(a+=t,Math.abs(t)<.00174532925)break}const n=this._semiMajorAxis*(1-this._eccentricity*Math.cos(a)),r=this._meanAngularMotion*this._semiMajorAxis*this._semiMajorAxis/n;t.x=-r*Math.sin(a),t.y=r*Math.sqrt(1-this._eccentricity*this._eccentricity)*Math.cos(a),t.z=0,t.rotate(this._orbitOrientation,t)}}a.AUtoKm=149597900,e.default=a},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(292),n=i(293),r=i(294),o=i(296);e.default=class extends s.BaseComponent{constructor(t,e,i){super(t,e,i),this._name=e,this._entity=i,this._global_alpha=null,this._alpha=[],this._dates=[],this._starPositions=[],this._clickable=!1,this._planetCount=0,this._starCount=0,this._visualBasedDiscovery=!0,this._selectedStarIndex=void 0,this._starTexture=null,this._interactable=!0,this._dragging=!1,this._zooming=!1,this._hasMouse=!1,this._cursorStartPos={x:0,y:0},this._onTouchStart=this._onTouchStart.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseClick=this._onMouseClick.bind(this),this._clickAction=this._clickAction.bind(this),this.init=this.init.bind(this),this.setInteractable=this.setInteractable.bind(this),this.setFilter=this.setFilter.bind(this),this.getFilterCount=this.getFilterCount.bind(this),this.setStarSprite=this.setStarSprite.bind(this),this.starFade=this.starFade.bind(this),Object(r.autoPlay)(!0),this.__setRadius(Number.POSITIVE_INFINITY)}init(t,e,i){this.starDB=t,this.planetDB=e,this.updateLabel=i,this._engine=this._entity.getScene().getEngine(),this.setFilter(null,0);let s=this._engine.getRootDiv();s.addEventListener("click",this._onMouseClick,!1),s.addEventListener("mousedown",this._onMouseDown,!1),s.addEventListener("mousemove",this._onMouseMove,!1),s.addEventListener("touchstart",this._onTouchStart,{passive:!1}),s.addEventListener("touchmove",this._onTouchMove,{passive:!1}),s.addEventListener("touchend",this._onTouchEnd,{passive:!1}),this.startTime=Date.now(),this.setStarSprite(0)}_clickAction(){if(!this.starDB||!this._clickable)return;let t=this.getEntity().getScene().getEngine().getViewport(0).getCamera();if(!this._interactable)return;this._intersectStars(t);let e=Object.keys(this.currentStarDB);if(null===this._selectedStarIndex||!e[this._selectedStarIndex])return void this.updateLabel();let i=this.currentStarDB[e[this._selectedStarIndex]];this.updateLabel(i)}_onTouchStart(t){t.preventDefault();let e=t.changedTouches[0];this._cursorStartPos.x=e.pageX,this._cursorStartPos.y=e.pageY,this._dragging=!1}_onTouchMove(t){t.preventDefault();let e=t.changedTouches[0];Math.max(Math.abs(e.pageX-this._cursorStartPos.x),Math.abs(e.pageY-this._cursorStartPos.y))>5&&(this._dragging=!0),t.touches.length>1&&(this._zooming=!0)}_onTouchEnd(t){t.preventDefault(),this._dragging||this._zooming||this._clickAction(),this._dragging=!1,0===t.touches.length&&(this._zooming=!1)}_onMouseDown(t){this._cursorStartPos.x=t.clientX,this._cursorStartPos.y=t.clientY,this._dragging=!1}_onMouseMove(t){this._hasMouse=!0,Math.max(Math.abs(t.clientX-this._cursorStartPos.x),Math.abs(t.clientY-this._cursorStartPos.y))>5&&(this._dragging=!0)}_onMouseClick(){this._dragging||this._clickAction(),this._dragging=!1}setInteractable(t){this._interactable=t}setFilter(t=null,e=null){this.currentStarDB=Object.assign({},this.starDB),this.currentPlanetDB=Object.assign({},this.planetDB);let i=!0;this.planetDiscovery=[0,0];var r=[],l=[],c=[];if(t&&"all"!==t){let e={},s={};for(let a=0;a<t.length;a++){let n=t[a];if("planets"===n.db){let t=this.planetDB?Object.keys(this.planetDB):[];for(let a=0;a<t.length;a++){let r=this.planetDB[t[a]],o=!1;if(r){let t=r[n.field];o="equal"===n.op?t===n.value:t.indexOf(n.value)>=0,n.value.indexOf("Kepler")>=0&&n.value.indexOf("K2")>=0&&(o=t.indexOf("Kepler")>=0||t.indexOf("K2")>=0),o&&r&&(i=!1,this.planetDiscovery[0]=!this.planetDiscovery[0]||this.planetDiscovery[0]>r.date?r.date:this.planetDiscovery[0],this.planetDiscovery[1]=!this.planetDiscovery[1]||this.planetDiscovery[1]<r.date?r.date:this.planetDiscovery[1],e[r.pl_hostname]=this.starDB[r.pl_hostname],s[r.exo_id]=r)}}}else if("stars"===n.db){let t=this.starDB?Object.keys(this.starDB):[];for(let s=0;s<t.length;s++){let a=this.starDB[t[s]],r=!1;if(a){let t=a[n.field];r="equal"===n.op?t===n.value:"visible"===n.op?parseFloat(t)>0&&parseFloat(t)<=parseFloat(n.value):t.indexOf(n.value)>=0,n.value.indexOf("Kepler")>=0&&n.value.indexOf("K2")>=0&&(r=t.indexOf("Kepler")>=0||t.indexOf("K2")>=0);let s=this.planetDB?this.planetDB[a.planets[0]]:null;r&&s&&(i=!1,this.planetDiscovery[0]=!this.planetDiscovery[0]||this.planetDiscovery[0]>s.date?s.date:this.planetDiscovery[0],this.planetDiscovery[1]=!this.planetDiscovery[1]||this.planetDiscovery[1]<s.date?s.date:this.planetDiscovery[1],e[a.exo_id]=a)}}}}this.currentStarDB=e,this.currentPlanetDB=s}let h=this.currentStarDB?Object.keys(this.currentStarDB):[],d=[],u=[];this._starPositions=[];for(var p=0;p<h.length;p++){let t=this.currentStarDB[h[p]];if(this._starPositions.push(t.positionJ2000),t&&t.position&&-1!==t.position[0]){if(r.push(t.positionJ2000.x,t.positionJ2000.y,t.positionJ2000.z),l.push(t.color[0],t.color[1],t.color[2]),this._visualBasedDiscovery&&this.planetDB){let e=null;for(let s=0;s<t.planets.length;s++){let a=this.planetDB[t.planets[s]];a&&!e&&(i&&(this.planetDiscovery[0]=!this.planetDiscovery[0]||this.planetDiscovery[0]>a.date?parseInt(a.date):this.planetDiscovery[0],this.planetDiscovery[1]=!this.planetDiscovery[1]||this.planetDiscovery[1]<a.date?parseInt(a.date):this.planetDiscovery[1]),e=a.date?parseInt(a.date):null)}d.push(e),u.push(0)}else u.push(null!==e?e:1);let s=t.planet_count||1;t.planets&&Array.isArray(t.planets)&&(s=t.planets.length>s?t.planets.length:s),c.push(s)}}this._threeJsObject&&(this._threeJsObject.material.dispose(),this._threeJsObject.geometry.dispose(),this.getEntity().getScene().getThreeJsScene().remove(this._threeJsObject));const m=new s.THREE.ShaderMaterial({uniforms:{texture:new s.THREE.Uniform(this._starTexture)},vertexShader:a.default.join("\n"),fragmentShader:n.default.join("\n"),blending:s.THREE.CustomBlending,blendDst:s.THREE.DstAlphaFactor,depthWrite:!1,transparent:!0,vertexColors:!0});s.ThreeJsHelper.setupLogDepthBuffering(m),this.getThreeJsMaterials().push(m);const g=new s.THREE.BufferGeometry;g.setAttribute("position",new s.THREE.Float32BufferAttribute(r,3)),g.setAttribute("color",new s.THREE.Float32BufferAttribute(l,3)),g.setAttribute("planet",new s.THREE.Float32BufferAttribute(c,1)),g.setAttribute("alpha",new s.THREE.Float32BufferAttribute(u,1)),this._threeJsObject=new s.THREE.Points(g,m),s.ThreeJsHelper.setupObject(this,this._threeJsObject),this._threeJsObject.name="Exostars_"+this.getName(),this._threeJsObject.material.uniforms.starTexture={value:this._starTexture},this._threeJsObject.visible=!0,this.getThreeJsObjects().push(this._threeJsObject),this._starCount=o.default.isEmptyObj(this.currentStarDB)?0:Object.keys(this.currentStarDB).length,this._planetCount=o.default.isEmptyObj(this.currentPlanetDB)?0:Object.keys(this.currentPlanetDB).length,this._alpha=u,this._dates=d,this._threeJsObject.material.needsUpdate=!0}getFilterCount(){return{starCount:this._starCount,planetCount:this._planetCount}}setStarSprite(t){switch(this._starTexture&&this._starTexture.dispose(),this._starTexture=(new s.THREE.TextureLoader).load(window.config.moduleUrl+"assets/image/exofield/starSpriteTwinkle.png"),t){case 0:this._starTexture=(new s.THREE.TextureLoader).load(window.config.moduleUrl+"assets/image/exofield/starSpriteTwinkle.png");break;case 1:this._starTexture=(new s.THREE.TextureLoader).load(window.config.moduleUrl+"assets/image/exofield/starSpriteNumber.png");break;case 2:this._starTexture=(new s.THREE.TextureLoader).load(window.config.moduleUrl+"assets/image/exofield/starSpriteNumbersBall.png")}this._starTexture.flipY=!1,this._threeJsObject&&(this._threeJsObject.material.uniforms.starTexture={value:this._starTexture})}starFade(t,e=2e3){if(!this.currentStarDB||!this.currentPlanetDB)return;let i=this._threeJsObject.geometry.attributes,s=Object.keys(this.currentStarDB),a=this.planetDiscovery[0];const n=this.planetDiscovery[1]-this.planetDiscovery[0];this.filterTween&&Object(r.remove)(this.filterTween);let o=t?0:1,l=t?1:0;this.filterTween=new r.Tween({value:o}).to({value:l},e).on("update",({value:e})=>{a=t?this.planetDiscovery[0]*(1-e)+(this.planetDiscovery[1]+n)*e:(this.planetDiscovery[0]-n)*(1-e)+this.planetDiscovery[1]*e,a=Math.round(a);let r=!1;for(let n=0;n<s.length;n++){if(r=null===this._dates[n]||void 0===this._dates[n],this.planetDiscovery&&this.planetDiscovery[0]&&this.planetDiscovery[1]?this.planetDiscovery[1]-this.planetDiscovery[0]==0&&(r=!0):r=!0,r)this._alpha[n]=t?this._alpha[n]>e?this._alpha[n]:e:this._alpha[n]<e?this._alpha[n]:e;else if(t){if(this._dates[n]<=a){const t=(this._dates[n]-this.planetDiscovery[0])/(this.planetDiscovery[1]-this.planetDiscovery[0]),i=0===t?1:(2*e-t)/t;this._alpha[n]<i&&(this._alpha[n]=i)}}else if(this._dates[n]>=a){const t=(this.planetDiscovery[1]-this._dates[n])/(this.planetDiscovery[1]-this.planetDiscovery[0]),i=0===t?0:1-(1-e)/t;this._alpha[n]>i&&(this._alpha[n]=i)}this._alpha[n]=this._alpha[n]>1?1:this._alpha[n],this._alpha[n]=this._alpha[n]<0?0:this._alpha[n],i.alpha.array[n]=this._alpha[n]}i.alpha.needsUpdate=!0,e===l&&(this._clickable=t)}).start()}__prepareForRender(t){if(!this._threeJsObject)return;let e=this.getEntity().getCameraSpacePosition(t);this._threeJsObject.position.set(e.x,e.y,e.z),this._interactable&&this._threeJsObject.visible&&this._hasMouse&&this._intersectStars(t)}__setVisible(t){this._threeJsObject.visible=t}_intersectStars(t){const e=this.getEntity().getScene().getEngine().getInput().getCursorPosition(),i=s.Vector3.pool.get();t.getEntity().getPositionRelativeToEntity(i,s.Vector3.Zero,this.getEntity());const a=s.Vector3.pool.get();t.getViewport().getNormalSpacePositionFromPixelSpacePosition(a,e),t.getCameraSpacePositionFromNormalSpacePosition(a,a),a.normalize(a);const n=s.Vector3.pool.get(),r=s.Vector3.pool.get();let o=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=0;for(let e=0,s=this._starPositions.length;e<s;e++){n.sub(this._starPositions[e],i);const s=n.dot(a);if(s<0)continue;r.addMult(n,a,-s);const h=r.magnitude(),d=t.getNormalSpaceRadiusFromRadius(h,s);o>d&&(l=t.getViewport().getPixelSpaceRadiusFromNormalSpaceRadius(d))<=35&&(o=d,c=e)}s.Vector3.pool.release(r),s.Vector3.pool.release(n),s.Vector3.pool.release(i),s.Vector3.pool.release(a),o<Number.POSITIVE_INFINITY?(this._hasMouse&&(this._engine.getViewportDiv().style.cursor="pointer"),this._selectedStarIndex=c):(this._hasMouse&&(this._engine.getViewportDiv().style.cursor="default"),this._selectedStarIndex=void 0)}}},function(t,e,i){"use strict";i.r(e);e.default=["attribute float size;","attribute float alpha;","attribute float planet;","varying vec4 vColor;","varying float count;","#ifdef L_EXT_frag_depth","\tvarying float fragDepth;","#else","\tuniform float nearDistance;","\tuniform float midDistance;","#endif","void main() {","    vColor = vec4(color, alpha);","    count = planet;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    float pointSizeBase = 35.0;","    float pointCutoff = 6000000000000000.0;","    float ratio = length(mvPosition)  / pointCutoff;","    gl_PointSize =  pointSizeBase * clamp(exp(1.0 - ratio), 1.0, 64.0);","    gl_Position = projectionMatrix * mvPosition;","\t#ifdef L_EXT_frag_depth","\t\tfragDepth = gl_Position.w;","\t#else","\t\tfloat z = gl_Position.w;","\t\tif (z < midDistance) {","\t\t\tgl_Position.z = nearDistance * (z - midDistance) / (midDistance - nearDistance);","\t\t}","\t\telse {","\t\t\tfloat logFactor = 0.01254291648; // 1 / log2(1e24 - midDistance + 1.0)","\t\t\tgl_Position.z = log2(z - midDistance + 1.0) * logFactor;","\t\t\tgl_Position.z *= gl_Position.w;","\t\t}","\t#endif","}"]},function(t,e,i){"use strict";i.r(e);e.default=["uniform sampler2D starTexture;","#ifdef L_EXT_frag_depth","\tuniform mat4 projectionMatrix;","\tvarying float fragDepth;","#endif","varying vec4 vColor;","varying float count;","vec2 getCoordinates() {","\tfloat planetCount = floor(count + 0.5) - 1.0;","   float offsetX = mod(planetCount, 4.0) / 4.0;","   float offsetY = floor(planetCount / 4.0) / 4.0;","   return vec2(gl_PointCoord.x / 4.0 + offsetX, gl_PointCoord.y / 4.0 + offsetY);","}","void main() {","   gl_FragColor = vColor * texture2D( starTexture, getCoordinates() );","\t// Log-Depth Buffering","\t#ifdef L_EXT_frag_depth","\t\tfloat logFactor = 0.01254291648; // 1 / log2(1 + 1e24)","\t\tgl_FragDepthEXT = projectionMatrix[1][3] * log2(1.0 + fragDepth) * logFactor + projectionMatrix[2][3];","\t#endif","}"]},,,function(t,e,i){"use strict";i.r(e);const s=function(t,e,i){return t<e?e:t>i?i:t},a=function(t){var e=Math.max(t[0],t[1],t[2]),i=Math.min(t[0],t[1],t[2]),s=t.slice();if(s[0]=0,s[1]=0,s[2]=e,e===i)return s;var a=e-i;s[1]=a/e;var n=t.map((function(t){return(t-i)/a}));return e===t[0]?(s[0]=(n[1]-n[2])/6,s[0]<0&&(s[0]+=1)):e===t[1]?s[0]=(2+n[2]-n[0])/6:e===t[2]&&(s[0]=(4+n[0]-n[1])/6),s},n=function(t){var e=t.slice();if(0===t[1])return e[0]=e[1]=e[2],e;var i=t[2]*t[1];e[0]=e[1]=e[2]=t[2]-i;var a=6*t[0],n=i*(1-Math.abs(a%2-1));return a<1?(e[0]+=i,e[1]+=n):a<2?(e[0]+=i,e[1]+=n):a<3?(e[1]+=i,e[2]+=n):a<4?(e[2]+=i,e[1]+=n):a<5?(e[2]+=i,e[0]+=n):a<6&&(e[0]+=i,e[2]+=n),e.map((function(t){return s(t,0,1)}))};e.default={MISSIONS:[{name:"TESS",id:"sc_tess",title:"TESS",subtitle:"",img:"image/generic/image_TESS_TransitingExoplanetSurveySatellite.jpg",paragraphs:["Launched in 2018, TESS (Transiting Exoplanet Survey Satellite) is designed to search for and discover new exoplanets by observing transits in an all-sky survey. TESS’s main instrument is a set of four wide-angle CCD cameras, similar to those used on ground-based automated transit survey telescopes such as SuperWASP. Whereas ground-based all-sky surveys have been most effective at finding giant planets, TESS aims to discover rocky planets that transit nearby stars, ideal candidates for further characterization with large ground-based telescopes or the future James Webb Space Telescope."]},{name:"JWST",id:"sc_jwst",title:"James Webb Space Telescope",subtitle:"",img:"image/generic/jwst.jpg",paragraphs:["The James Webb Space Telescope (JWST) is a large infrared telescope with a 6.5 meter primary mirror, and will study every phase in the history of our Universe. The deployment of the James Webb Space Telescope was possibly the most complex ever done in space, having over 300 single points of failure in the two-week process of deployment."]},{name:"Kepler",id:"sc_kepler_space_telescope",frozenTime:595511069.183,title:"Kepler and K2",subtitle:"",img:"image/generic/image_Kepler.jpg",paragraphs:["Launched in 2009, NASA's Kepler mission spent over four years intently observing a single patch of sky and discovered over 1,000 planets around other stars, with thousands more potential planet discoveries waiting to be confirmed. In June 2014, the Kepler spacecraft's operations were extended with a new mission, dubbed “K2,” continuing the search for extrasolar planets outside of its original observing field. In November 2018, a final command was sent to the telescope to cease communications and begin “retirement,” after it ran out of fuel."]},{name:"Spitzer",id:"sc_spitzer",frozenTime:633614369.185,title:"Spitzer Space Telescope",subtitle:"NASA",img:"image/generic/image_SpitzerSpaceTelescope.jpg",paragraphs:['An infrared space telescope and part of NASA’s Great Observatories program, Spitzer was responsible for numerous exoplanet science milestones, including the first detection of an exoplanet atmosphere and the first temperature map of an exoplanet. Launched in 2003, Spitzer followed the Earth around the sun in what is known as an "Earth-trailing" orbit. The mission completed in January 2020.']},{name:"Hubble",id:"sc_hubble_space_telescope",title:"Hubble Space Telescope",subtitle:"NASA",img:"image/generic/image_HubbleSpaceTelescope.jpg",paragraphs:["One of the most influential space missions ever launched, the Hubble Space Telescope, launched in 1990, has provided astronomers with more than pretty pictures -- Hubble has contributed significant exoplanet discoveries, including one of the first visible-light images of a planet beyond our solar system. Hubble has also been able to detect exoplanet atmospheres and remains one of the few instruments capable of making such detailed measurements."]}],randomColor:function(t,e,i){for(let e=0;e<t.length;e++)t[e]=t[e]>1?t[e]/=255:t[e];i||(i=Math.random());var r=a(t).map((function(t,a){var n=t+e[a]*(2*i()-1);return s(n,0,1)}));return n(r)},shuffle:function(t,e){e||(e=Math.random);const i=t.slice();for(let t=0;t<i.length;t++){const s=e(),a=Math.floor(s*(t+1)),n=i[t];i[t]=i[a],i[a]=n}return i},HSBtoRGB:n,RGBtoHSB:a,hashCode:function(t){if(!t||0===t.length)return 0;for(var e=0,i=t.length,s=0;s<i;s++)e=(e<<5)-e+t.charCodeAt(s)|0;return e},ParkMiller:function(t){var e={seed:t||2147483647*Math.random()};return e.seed|=0,e.seed=t%2147483647,e.seed<=0&&(e.seed+=2147483647),e.next=function(){return e.seed=16807*e.seed%2147483647|0},e.float=function(){return(e.next()-1)/2147483646},e},SVec4:function(t){return t&&4===t.length?`vec4(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`:null},numberToComma:function(t){return t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):null},calculateRawDistance:function(t){return!t||t.length<3?-1:Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},convertToDistanceString:function(t){return t<0?"Unknown":(t>9461e9?t=this.numberToComma(Math.round(t/9461e9))+" light-years":t>1e9?t=this.numberToComma(Math.round(.6213712*t/1e9))+" billion mi":t>1e6?t=this.numberToComma(Math.round(.6213712*t/1e6))+" million mi":t>1e3?t=this.numberToComma(Math.round(.6213712*t/1e3))+" thousand mi":t>0&&(t=Math.round(.6213712*t*10)/10+" mi"),t)},isEmptyObj:t=>{if(!t)return!0;for(let e in t)if(t.hasOwnProperty(e))return!1;return!0}}},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(158),n=i(298),r=i(301),o=i(304),l=i(305),c=i(296);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(i,!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const p=6378.1,m=149597900,g=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);e.default=class{constructor(t,e,i,s){this._pioneer=t,this._scene=e,this._contentManager=null,this._pathChangeHandler=null,this._starfield=null,this._keplerCandidates=null,this._tessCandidates=null,this._currentSystem=null,this._deleteQueue=[],this._isLightOn=!1,this._forcedLightOn=!1,this._milkywaySprite=null,this._systemLabel=null,this._systemList=[],this._selection=null,this._cameraManager=i,this._isMobile=s,this._createExostar=this._createExostar.bind(this),this.setContentManager=this.setContentManager.bind(this),this.createLabel=this.createLabel.bind(this),this.updateLabel=this.updateLabel.bind(this),this.setExoSystem=this.setExoSystem.bind(this),this.cleanExoSystems=this.cleanExoSystems.bind(this),this.deleteExoSystem=this.deleteExoSystem.bind(this),this._removeExoSystem=this._removeExoSystem.bind(this),this._createExoSystem=this._createExoSystem.bind(this),this.toggleConstellations=this.toggleConstellations.bind(this),this.setStarSprite=this.setStarSprite.bind(this),this.setGalaxySpriteAlpha=this.setGalaxySpriteAlpha.bind(this),this.isHabzoneOn=this.isHabzoneOn.bind(this),this.setHabzone=this.setHabzone.bind(this),this.getFilterCount=this.getFilterCount.bind(this),this.setFilter=this.setFilter.bind(this),this.showKeplerCandidates=this.showKeplerCandidates.bind(this),this.showTESSCandidates=this.showTESSCandidates.bind(this),this.isLightOn=this.isLightOn.bind(this),this.toggleLight=this.toggleLight.bind(this),this.createLabel(),window.addEventListener("cameraupdate",async t=>{let{type:e}=t.detail;"spacecraft"===e?this._isLightOn||this.toggleLight(!0):(this._forcedLightOn&&this._isLightOn&&this.toggleLight(),this._forcedLightOn=!1)},!1)}_createExostar(t){let e=n.default.create(this._pioneer,this._scene,t,this._pathChangeHandler);return this._deleteQueue.indexOf(t.exo_id)<0&&this._deleteQueue.push(t.exo_id),e}setContentManager(t){this._contentManager=t}setPathChangeHandler(t){this._pathChangeHandler=t}createLabel(){const t=this._scene.get("earth");this._systemLabel=this._scene.addEntity("systemLabel"),this._systemLabel.setParent(t),this._systemLabel.setPosition(s.Vector3.Zero),this._systemLabel.setOrientation(s.Quaternion.Identity);const e=this._systemLabel.addComponent("div").getDiv();e.innerHTML='<label class="title">VOID</label>',e.id="void";let i=document.createElement("label");i.className="subtitle",i.innerText="Click to zoom",e.appendChild(i),e.className="exostar pioneer-label-div",e.style.cursor="pointer",e.addEventListener("click",t=>{t.stopPropagation(),this._systemLabel.setEnabled(!1),this._pathChangeHandler(`${window.config.moduleUrl}system/${e.id}`)},{passive:!1}),e.addEventListener("touchstart",t=>{t.stopPropagation(),t.preventDefault()},{passive:!1}),e.addEventListener("touchmove",t=>{t.stopPropagation(),t.preventDefault()},{passive:!1}),e.addEventListener("touchend",t=>{t.stopPropagation(),t.preventDefault(),this._systemLabel.setEnabled(!1),this._pathChangeHandler(`${window.config.moduleUrl}system/${e.id}`)},{passive:!1}),this._systemLabel.setEnabled(!1)}updateLabel(t){if(!t)return this._systemLabel.setEnabled(!1),void this.select(null);if(!this._cameraManager.isTransitioning()&&this._selection!==t.id){this.select(t.id),this._systemLabel.setOcclusionRadius(t.radius),this._systemLabel.setExtentsRadius(t.radius),this._systemLabel.setPosition(t.positionJ2000);let e=this._systemLabel.get("div").getDiv();e.childNodes[0].innerText=t.displayName,e.id=t.id,this._systemLabel.setEnabled(!0)}}async toggleConstellations(t){const e=this._scene.get("sun");if(null===e)return;let i=e.getComponentByType("constellations");t&&null===i?((i=e.addComponent("constellations"))instanceof a.ConstellationsComponent&&(i.setUrl("$STATIC_ASSETS_URL/stars/constellations.bin"),i.setColor(new s.Color(.35,.7,1,.5))),await this._pioneer.waitUntilNextFrame(),await i.getLoadedPromise()):t||null===i||e.removeComponent(i)}setExoSystem(t){let e=this._contentManager.getSystemInfo(t);if(!e)for(let i=0;i<l.length;i+=1)t===l[i].exo_id&&((e=l[i]).planets=[],e.positionJ2000=new s.Vector3(e.position[2],-e.position[0],e.position[1]),e.positionJ2000.rotate(g,e.positionJ2000));e&&(this._currentSystem=e,this._systemList.push(e.exo_id),(void 0!==e.length&&e.length>0||!c.default.isEmptyObj(e))&&this._createExoSystem(e))}cleanExoSystems(){if(this._systemList.length>1){let t=this._systemList.pop(),e=this._systemList.pop();for(;void 0!==e;){if(e!==t){let t=this._contentManager.getSystemInfo(e);this._removeExoSystem(t)}e=this._systemList.pop()}this._systemList.push(t)}}hideExoSystem(){}showExoSystem(){null!==this._currentSystem&&this._scene.get(this._currentSystem.exo_id)&&this._scene.get(this._currentSystem.exo_id).setEnabled(!0)}deleteExoSystem(){null!==this._currentSystem&&(this._removeExoSystem(this._currentSystem),this._systemList=[],this._currentSystem=null)}_removeExoSystem(t){if(!t)return;this._scene.get("sun","sprite").setEnabled(!0),this._scene.removeEntity("habzone_"+t.exo_id);const e=t.planets;for(let t=e.length-1;t>=0;t--)r.default.destroy(this._scene,e[t]);if(t.stars)for(let e=t.stars.length-1;e>=0;e--)t.stars[e]&&n.default.destroy(this._scene,t.stars[e]);t&&n.default.destroy(this._scene,t)}_createExoSystem(t){if(!t||!t.exo_id||this._scene.get(t.exo_id))return;const e=[];if(o[t.exo_id]&&o[t.exo_id].stars){let i=this._scene.get(t.exo_id);if(i)return;(i=this._scene.addEntity(t.exo_id)).setParent(this._scene.get("sun")),i.setOcclusionRadius(1e-6),i.setOrientation(s.Quaternion.Identity),i.setPosition(t.positionJ2000),i.addComponent("label").setText("x"),this._currentSystem.stars=o[t.exo_id].stars;for(let i=0;i<o[t.exo_id].stars.length;i++){let a=d({},t),n=o[t.exo_id].stars[i];a.exo_id=n.exo_id,a.displayName=n.displayName;for(let t in n)a[t]=n[t];const r=this._createExostar(a);if(r){r.setOcclusionRadius(a.radius),r.setParent(this._scene.get(t.exo_id)),void 0===o[t.exo_id].inclination&&(o[t.exo_id].inclination=-1);let n=d({},t),l=o[t.exo_id].stars[0].st_mass/o[t.exo_id].stars[1].st_mass;n.semiMajor=o[t.exo_id].semiMajor/(1+Math.pow(l,0===i?1:-1)),n.inclination=o[t.exo_id].inclination,n.eccentricity=o[t.exo_id].eccentricity,n.period=o[t.exo_id].period,n.ra=o[t.exo_id].ra,n.displayName=a.displayName,n.exo_id=a.exo_id,n.periapsisDirection=0===i?1:-1,r.addController("keplerianorbit").setParams(n);let c=r.addComponent("trail");c.setStartTime(86400*n.period),c.setColor(new s.Color(1,.5,.2,.7)),c.setRelativeToEntityOrientation(!0),c.setAlphaFade(.1),c.resetPoints(),e.push(r)}}}else e.push(this._createExostar(t));let i=null;const a=[];for(let e=0;e<t.planets.length;e++){let s=this._contentManager.dbObj.planets[t.planets[e]];if(!s)break;if(s.radius=s.pl_rade>0?s.pl_rade*p:71492,!this._scene.get(s.exo_id)){const n=10*s.radius;i?Math.abs(s.semiMajor-i)*m<=n&&(i=s.semiMajor,s.semiMajor=i-n*(e+1)/m):i=s.semiMajor;const o=r.default.create(this._pioneer,this._scene,t,s,this._pathChangeHandler);s.inclination>=0&&a.push(o),this._deleteQueue.indexOf(s.exo_id)<0&&this._deleteQueue.push(s.exo_id)}}const n=new s.Vector3;for(let t=0,e=a.length;t<e;t++){const e=new s.Vector3;a[t].get("keplerianorbit").getOrbitOrientation().getAxis(e,2),n.add(n,e)}n.magnitude()>0?n.normalize(n):n.set(0,0,1);let l=null,c=Number.POSITIVE_INFINITY;for(let t=0,e=a.length;t<e;t++){const e=new s.Vector3;a[t].get("keplerianorbit").getOrbitOrientation().getAxis(e,2);const i=e.angle(n);c>i&&(c=i,l=e)}null===l&&(l=new s.Vector3(0,0,1));const h=new s.Quaternion,u=new s.Vector3;if(u.cross(l,s.Vector3.ZAxis),u.magnitude()>0?u.normalize(u):u.set(1,0,0),h.setFromAxes(u,void 0,l),t.orientation=h,o[t.exo_id]&&o[t.exo_id].stars)for(let e=0;e<o[t.exo_id].stars.length;e++){const i=o[t.exo_id].stars[e];o[t.exo_id].inclination<0&&this._scene.get(i.exo_id,"keplerianorbit").setOrbitOrientation(h)}for(let e=0;e<t.planets.length;e++){let i=this._contentManager.dbObj.planets[t.planets[e]];i&&(i.inclination<0&&this._scene.get(i.exo_id,"keplerianorbit").setOrbitOrientation(h))}if(t.habZone){const e=this._scene.addEntity("habzone_"+t.exo_id);if(this._scene.get(t.exo_id)){e.addParentingTableEntry(0,t.exo_id),e.setOcclusionRadius(t.habZone[1]),e.setExtentsRadius(t.habZone[1]),e.setCanOcclude(!1),e.setPosition(s.Vector3.Zero),e.setOrientation(h);const i=e.addComponent("annulus");i.setInnerRadius(t.habZone[0]),i.setOuterRadius(t.habZone[1]),i.setIgnoreDistance(!1),i.setMinDistance(t.habZone[0]/1e3),i.setMaxDistance(1e3*t.habZone[1]),i.setColor(new s.Color(0,.458,.486,.25))}}this._scene.get("sun","sprite").setEnabled(!1)}setStarSprite(t){this._starfield||(this._starfield=this._scene.get("sun").get("Exostarfield")),this._starfield.setStarSprite(t)}setGalaxySpriteAlpha(t){null===this._milkywaySprite&&(this._milkywaySprite=this._scene.get("milky_way","sprite"));let e=s.Vector3.pool.get();t.getPositionRelativeToEntity(e,s.Vector3.Zero,this._milkywaySprite.getEntity());let i=e.magnitude()/this._milkywaySprite.getEntity().getOcclusionRadius()-1;const a=t.getPosition().magnitude(),n=s.MathUtils.clamp01(a/8e17);let r=s.Vector3.pool.get(),o=s.Vector3.pool.get();t.getOrientation().getAxis(r,1),this._scene.get("milky_way").getOrientation().getAxis(o,2);let l=1;if(!r.isNaN()&&!o.isNaN()){let t=Math.abs(r.dot(o)),e=this._isMobile()?5:3;l=Math.pow(t,e),i=s.MathUtils.clamp01(i),l=s.MathUtils.lerp(l,n,i,!0)}let c=Math.min(n,l);this._milkywaySprite.setColorMultiplier(new s.Color(1,1,1,c)),s.Vector3.pool.release(e),s.Vector3.pool.release(r),s.Vector3.pool.release(o)}isHabzoneOn(){if(this._currentSystem){let t=this._scene.getEntity("habzone_"+this._currentSystem.exo_id);return null!==t&&t.isEnabled()}return!1}getObjectById(t){return this._scene.get(t)}setHabzone(t){if(this._currentSystem){const{exo_id:e,habZone:i}=this._currentSystem;let s=this._scene.getEntity("habzone_"+e);if(s&&s.setEnabled(t),t&&e&&i){let t=this._scene.getEntity("habzone_"+e);t||(t=this._scene.addEntity("habzone_"+e));const s=t.getComponentByType("annulus");s&&(s.setInnerRadius(i[0]),s.setOuterRadius(i[1]),s.setIgnoreDistance(!1),s.setMinDistance(i[0]/1e3),s.setMaxDistance(1e3*i[1]))}return e}}getFilterCount(){return this._starfield||(this._starfield=this._scene.get("sun").get("Exostarfield")),this._starfield.getFilterCount()}setFilter(t=null,e=null){this._starfield||(this._starfield=this._scene.get("sun").get("Exostarfield")),this._starfield.setFilter(t,e)}starFade(t,e=1e3){this._starfield&&this._starfield.starFade(t,e)}showKeplerCandidates(t){this._keplerCandidates||(this._keplerCandidates=this._scene.get("sun").getComponent("ExoKeplercandidatefield")),this._keplerCandidates.starFade(t,t?1e3:0)}showTESSCandidates(t){this._tessCandidates||(this._tessCandidates=this._scene.get("sun").getComponent("ExoTESScandidatefield")),this._tessCandidates.starFade(t,t?1e3:0)}isLightOn(){return this._isLightOn}toggleLight(t=!1){this._forcedLightOn=t,this._isLightOn=!this._isLightOn,this._scene.getEntity("camera").get("lightSource").setEnabled(this._isLightOn)}getSelection(){return this._selection}select(t){this._selection=t}showPlacemarks(t){const e=this._scene.get("placemarks");if(e&&e.getNumChildren())for(let i=0;i<e.getNumChildren();i++)e.getChild(i).setEnabled(t)}}},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(299),n=i(300);class r{static create(t,e,i,a){if(!i)return console.warn("WARNING:",i.displayName," not found"),null;let o=e.get(i.exo_id);if(o)return o;const l=e.get("earth");(o=e.addEntity(i.exo_id)).setOcclusionRadius(i.radius),o.setExtentsRadius(i.radius),o.setParent(l),o.setPosition(i.positionJ2000),o.setOrientation(s.Quaternion.Identity);const c=n[i.starType][0],h=n[i.starType][1],d=o.addComponent("div").getDiv();d.innerHTML='<label class="title">'+i.displayName+"</label>",d.className="exostar pioneer-label-div",d.addEventListener("click",t=>{a(`${window.config.moduleUrl}system/${i.id}`)},!1),d.addEventListener("touchend",t=>{a(`${window.config.moduleUrl}system/${i.id}`)},!1);const u=o.addComponent("spheroid",i.exo_id),p=o.addComponent("spheroidLOD",i.exo_id+"_LOD");p.setFeature("colorMapEmmissive",!0),u.setPolarRadius(i.radius),u.setEquatorialRadius(i.radius),p.setForceLoaded(!0),p.setResourcesLoadedCallback(async()=>{r.applyNoise(p,i)});const m=window.config.moduleUrl+"assets/image/exostar/genericType_grayscale.png";p.setTexture("color",m,p.getTextureSizes("color"));let g=o.addComponent("sprite");g.setBillboard(!0),g.setTextureUrl("$STATIC_ASSETS_URL/sprites/sun_glow.png");const _=5*i.radius;g.setSize(new s.Vector2(_,_)),g.setSizeUnits("km"),g.setTransparent(!0),g.setColorMultiplier(new s.Color(c[0],c[1],c[2]));let f=o.addComponent("atmosphere");return f.setEmissivity(1),f.setScaleHeight(10),f.setDensity(3e-6),f.setColor(new s.Color(h[0],h[1],h[2])),o.addComponent("lightSource"),o}static destroy(t,e){e&&(clearInterval(e.updateUniform),t.removeEntity(e.exo_id))}static applyNoise(t,e){const i=t.getThreeJsMaterials();if(!i||!Array.isArray(i)||0===i.length)return;const r=i[0],o=n[e.starType][0],l=n[e.starType][1],c=new s.THREE.Vector3(o[0],o[1],o[2]);r.uniforms.colorBright=new s.THREE.Uniform(c);const h=new s.THREE.Vector3(l[0],l[1],l[2]);r.uniforms.colorDark=new s.THREE.Uniform(h),r.uniforms.wallTime=new s.THREE.Uniform(0),e.updateUniform=setInterval(()=>{r&&r.uniforms&&(r.uniforms.wallTime=new s.THREE.Uniform(Date.now()/1e3%1e3))},1),r.uniforms.perlinGain=new s.THREE.Uniform(.36),r.uniforms.perlinAmplitude=new s.THREE.Uniform(1),r.uniforms.perlinLacunarity=new s.THREE.Uniform(5.2),r.uniforms.perlinDensity=new s.THREE.Uniform(4.7),r.uniforms.limbDist=new s.THREE.Uniform(.8),r.uniforms.limbValue=new s.THREE.Uniform(-1),r.uniforms.noiseMult=new s.THREE.Uniform(3),r.uniforms.perlinVelocity=new s.THREE.Uniform(.015);let d="// ATMOSPHERE";r.fragmentShader=r.fragmentShader.replace(d,a.default.join("\n")+d);let u="";u+="\tvec4 ret = noise( length(colorPixel) );\n",u+="\tcolorPixel = vec4(colorBright * ret.r + (1.0 - ret.r) * colorDark, 1.0);\n",d="// Apply diffuse shading.",r.fragmentShader=r.fragmentShader.replace(d,"\tvec4 ret = noise( length(colorPixel) );\n\tcolorPixel = vec4(colorBright * ret.r + (1.0 - ret.r) * colorDark, 1.0);\n"+d),r.needsUpdate=!0}}e.default=r},function(t,e,i){"use strict";i.r(e);e.default=["uniform float perlinGain;","uniform float perlinAmplitude;","uniform float perlinLacunarity;","uniform float perlinDensity;","uniform float noiseMult;","uniform float perlinVelocity;","uniform float wallTime;","uniform vec3 colorBright;","uniform vec3 colorDark;","#define M_PI 3.1415926535897","bool isNan(float val)","{","  return (val <= 0.0 || 0.0 <= val) ? false : true;","}","vec4 permute1(vec4 x) {","    return mod((x * 125.0 + 13.0) * x, 155.0);;","}","float PerlinNoise(vec3 P) {","  vec3 Pi0 = floor(P); // Integer part for indexing","  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1","  Pi0 = mod(Pi0, 255.0);","  Pi1 = mod(Pi1, 255.0);","  vec3 Pf0 = fract(P); // Fractional part for interpolation","  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0","  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);","  vec4 iy = vec4(Pi0.yy, Pi1.yy);","  vec4 iz0 = Pi0.zzzz;","  vec4 iz1 = Pi1.zzzz;","  vec4 ixy = permute1(permute1(ix) + iy);","  vec4 ixy0 = permute1(ixy + iz0);","  vec4 ixy1 = permute1(ixy + iz1);","  vec4 gx0 = ixy0 * (1.0 / 7.0);","  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;","  gx0 = fract(gx0);","  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);","  vec4 sz0 = step(gz0, vec4(0.0));","  gx0 -= sz0 * (step(0.0, gx0) - 0.5);","  gy0 -= sz0 * (step(0.0, gy0) - 0.5);","  vec4 gx1 = ixy1 * (1.0 / 7.0);","  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;","  gx1 = fract(gx1);","  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);","  vec4 sz1 = step(gz1, vec4(0.0));","  gx1 -= sz1 * (step(0.0, gx1) - 0.5);","  gy1 -= sz1 * (step(0.0, gy1) - 0.5);","  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);","  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);","  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);","  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);","  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);","  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);","  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);","  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);","  float n000 = dot(g000, Pf0);","  float n100 = dot(g100, vec3(Pf1.x,  Pf0.yz));","  float n010 = dot(g010, vec3(Pf0.x,  Pf1.y, Pf0.z));","  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));","  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));","  float n101 = dot(g101, vec3(Pf1.x,  Pf0.y, Pf1.z));","  float n011 = dot(g011, vec3(Pf0.x,  Pf1.yz));","  float n111 = dot(g111, Pf1);","  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), Pf0.z);","  vec2 n_yz = mix(n_z.xy, n_z.zw, Pf0.y);","  float n_xyz = mix(n_yz.x, n_yz.y, Pf0.x);","  return 3.5 * n_xyz;","}","float fbm(vec3 P) {","    float sum = 0.0;","    float amplitude = perlinAmplitude;","    for(int i = 0; i < 3; i++) {","        amplitude *= perlinGain;","        sum += amplitude * PerlinNoise(P);","        P *= perlinLacunarity;","    }","    return sum;","}","float pattern(vec3 p) {","    float time = wallTime * perlinVelocity;","    vec3 q;","    q.x = fbm(p + vec3(3.7 * time, 2.7 * time, -1.7 * time));","    q.y = q.x;","    q.z = q.x;","    vec3 r;","    r.x = fbm(p + 4.0 * q + vec3(1.3 * time, -2.3 * time, 3.3 * time));","    r.y = r.x;","    r.z = r.x;","    return fbm(p + 4.0 * r);","}","vec4 noise(float m) {","    float theta = 2.0 * M_PI * vColorUV.x;","    float phi = M_PI * vColorUV.y;","    float _x = cos(theta) * sin(phi);","    float _y = sin(theta) * sin(phi);","    float _z = -cos(phi);","    vec3 spatialPosition = vec3(_x,_y,_z);","    float color = pattern(spatialPosition * perlinDensity);","    vec4 c = vec4(color, color, color, 1.0);","    c *= noiseMult / m;","    return c;","}"]},function(t){t.exports=JSON.parse('{"":[[1,1,0.65],[1,0.9,0.2]],"Unknown":[[1,1,0.65],[1,0.9,0.2]],"A":[[1,1,1],[0.8,0.8,1]],"B":[[0.8,0.9,1],[0.65,0.65,1]],"F":[[1,0.9,0.7],[0.85,0.75,0.3]],"G":[[1,1,0.65],[1,0.9,0.2]],"K":[[1,1,0.4],[0.8,0.5,0.2]],"L":[[0.75,0.2,0],[0.4,0.2,0]],"M":[[0.9,0.2,0],[0.5,0.1,0]],"O":[[0.9,0.9,1],[0.65,0.65,1]],"S":[[1,0.7,0.2],[0.75,0.35,0.2]],"T":[[0.8,0.4,0.2],[0.2,0.1,0.2]],"W":[[1,1,0.65],[1,0.9,0.2]]}')},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(296),n=i(302),r=i(303);class o{static create(t,e,i,a,r){if(!a||!i)return void console.warn("WARNING:",a.displayName," not found");let l=e.get(a.exo_id);if(l)return l;(l=e.addEntity(a.exo_id)).setOcclusionRadius(a.radius),l.setExtentsRadius(a.radius),l.setParent(e.get(i.exo_id)),l.setOrientation(s.Quaternion.Identity),l.addController("keplerianorbit").setParams(a);let c=n[a.exo_id];if(a&&c&&c.tidalLock){let t=l.addController("align");t.setPrimaryAlignType("point"),t.setPrimaryTargetEntity(i.exo_id),t.setPrimaryAxis(s.Vector3[c.tidalLock.primary]),t.setSecondaryAlignType("velocity"),t.setSecondaryTargetEntity(a.exo_id),t.setSecondaryAxis(s.Vector3[c.tidalLock.secondary])}if(a&&c&&c.model){const t=l.addComponent("model");if(t.setUrl(window.config.moduleUrl+c.model),c.modelScale){const e=c.modelScale;t.setScale(new s.Vector3(e[0],e[1],e[2]))}if(c.modelRotate)for(let e=0;e<c.modelRotate.length;e++){const i=c.modelRotate[e],a=new s.Quaternion,n=new s.Vector3(i[0],i[1],i[2]);a.setFromAxisAngle(n,Math.PI/180*i[3]),t.setRotation(a)}}else{if("HD_209458_b"===a.id){a.visType="Jovian";const t=l.addComponent("sprite");t.setBillboard(!0),t.setTextureUrl("$STATIC_ASSETS_URL/sprites/sun_glow.png");const e=10*a.radius;t.setSize(new s.Vector2(e,e)),t.setSizeUnits("km"),t.setTransparent(!0),t.setColorMultiplier(new s.Color(75/255,111/255,129/255))}const t=l.addComponent("spheroid",a.exo_id),e=l.addComponent("spheroidLOD",a.exo_id+"_LOD");if(t.setPolarRadius(a.radius),t.setEquatorialRadius(a.radius),a.exo_id&&c&&c.texture){const t=window.config.moduleUrl+"assets/image/exoplanet/";e.setTexture("color",t+c.texture,e.getTextureSizes("color")),c.specular&&(e.setTexture("specular",t+c.texture,e.getTextureSizes("specular")),e.setFeature("specularMap",!0))}else e.setForceLoaded(!0),e.setResourcesLoadedCallback(async()=>{o.applyCustomTexture(e,a)})}const h=l.addComponent("div").getDiv();h.innerHTML='<label class="title">'+a.displayName+"</label>",h.className="exoplanet",h.addEventListener("click",t=>{r(`${window.config.moduleUrl}planet/${a.id}`)}),h.addEventListener("touchend",t=>{r(`${window.config.moduleUrl}planet/${a.id}`)},!1);const d=l.addComponent("trail");return d.setStartTime(86400*a.period),d.setColor(new s.Color(1,1,1,.5)),d.setAlphaFade(.1),d.resetPoints(),l}static destroy(t,e){e&&t.removeEntity(e)}static applyCustomTexture(t,e){let i=a.default.ParkMiller(a.default.hashCode(e.exo_id));const n=r[e.visType]||r.Unknown;if(!n)return void console.error("visType is wrong",e.visType);let o=i.float(),l="",c="";const h=window.config.moduleUrl+"assets/image/exoplanet/base",d=window.config.moduleUrl+"assets/image/exoplanet/norm";if(n.normMaps&&n.normMaps.length>0){let e=Math.round(o*n.normMaps.length);e=(e=e<0?0:e)>=n.normMaps.length?n.normMaps.length-1:e,t.setTexture("normal",d+n.normMaps[e]+".png",t.getTextureSizes("normal")),t.setFeature("normalMap",!0)}const u=t.getThreeJsMaterials();if(!u||!Array.isArray(u)||0===u.length)return;const p=u[0],m=(new s.THREE.TextureLoader).load(h+n.baseMaps[0]+".jpg");p.uniforms.base0=new s.THREE.Uniform(m),l+="uniform sampler2D base0;\n",c+="colorPixel += texture2D(base0, vColorUV);\n";let g=0;if(n.baseMaps.length>1){const t=(new s.THREE.TextureLoader).load(h+n.baseMaps[1]+".jpg");p.uniforms.base1=new s.THREE.Uniform(t),l+="uniform sampler2D base1;\n",c+="colorPixel += "+(1-(g=i.float())).toPrecision(8)+" * texture2D(base1, vColorUV);\n"}const _=n.baseColors.map(t=>a.default.randomColor(t[0],t[1],i.float));_&&3===_.length&&(c+="colorPixel = colorPixel.r * "+a.default.SVec4(_[0]),c+=" + colorPixel.g * "+a.default.SVec4(_[1]),c+=" + colorPixel.b * "+a.default.SVec4(_[2])+";\n");const f=n.detailCount[0]+Math.floor(i.float()*(1+n.detailCount[1]-n.detailCount[0]));let y=[];f>0&&(y=a.default.shuffle(n.detailMaps,i.float).slice(0,f));var b=n.detailColors.slice(0,f).map((function(t,e){return a.default.randomColor(t[0],t[1],i.float)}));const T=window.config.moduleUrl+"assets/image/exoplanet/detail";for(let t=0;t<f;t++){const e=(new s.THREE.TextureLoader).load(T+y[t]+".png");p.uniforms["detail"+t]=new s.THREE.Uniform(e)}for(let t=0;t<f;t++)l+="uniform sampler2D detail"+t+";\n",c+="float alpha"+t+" = texture2D(detail"+t+", vColorUV).a;\n",c+="colorPixel = alpha"+t+" * "+a.default.SVec4(b[t])+" + (1.0 - alpha"+t+") * colorPixel;\n";p.fragmentShader=l+p.fragmentShader,p.fragmentShader=p.fragmentShader.replace("\t#ifndef colorMapEmmissive\n",c+"\t#ifndef colorMapEmmissive\n"),p.needsUpdate=!0}}e.default=o},function(t){t.exports=JSON.parse('{"GJ_504_b":{"texture":"GJ_504_b.jpg"},"HAT-P-11_b":{"texture":"HAT-P-11_b.jpg"},"HD_189733_b":{"texture":"HD_189733_b.jpg"},"Kepler-7_b":{"texture":"Kepler-7_b.jpg","tidalLock":{"primary":"YAxis","secondary":"XAxis"}},"Kepler-22_b":{"texture":"Kepler-22_b.jpg","specular":"Kepler-22_b_specular.jpg"},"Kepler-452_b":{"texture":"Kepler-452_b.jpg"},"OGLE-2005-BLG-390L_b":{"texture":"OGLE-2005-BLG-390L_b.jpg","specular":"OGLE-2005-BLG-390L_b_specular.jpg"},"Proxima_Cen_b":{"texture":"Proxima_Cen_b.jpg"},"TRAPPIST-1_b":{"texture":"TRAPPIST-1_b.jpg","specular":"TRAPPIST-1_b_specular.jpg"},"TRAPPIST-1_c":{"texture":"TRAPPIST-1_c.jpg","specular":"TRAPPIST-1_c_specular.jpg"},"TRAPPIST-1_d":{"texture":"TRAPPIST-1_d.jpg","specular":"TRAPPIST-1_d_specular.jpg"},"TRAPPIST-1_e":{"texture":"TRAPPIST-1_e.jpg","atmosphere":{"color":[0.94,0.56,0.17]}},"TRAPPIST-1_f":{"texture":"TRAPPIST-1_f.jpg","tidalLock":{"primary":"XAxis","secondary":"YAxisNeg"}},"TRAPPIST-1_g":{"texture":"TRAPPIST-1_g.jpg","specular":"TRAPPIST-1_g_specular.jpg"},"TRAPPIST-1_h":{"texture":"TRAPPIST-1_h.jpg"},"YZ_Cet_d":{"texture":"YZ_Cet_d.jpg"},"KOI-55_b":{"modelScale":[5,5,5],"modelRotate":[[0,1,0,90],[1,0,0,90]],"model":"assets/model/KOI-55_b/KOI-55b.gltf","tidalLock":{"primary":"YAxisNeg","secondary":"XAxisNeg"}},"PSR_B1257+12_b":{"modelScale":[2,2,2],"model":"assets/model/PSR_B1257_12b/PSR_B1257_12b.gltf","tidalLock":{"primary":"YAxisNeg","secondary":"XAxisNeg"}},"AU_Mic_b":{"modelScale":[50000,50000,50000],"modelRotate":[[0,1,0,90],[1,0,0,90]],"model":"assets/model/AUMicb/AUMicb.gltf","tidalLock":{"primary":"YAxisNeg","secondary":"XAxisNeg"}},"TrES-2_b":{"modelScale":[130000,130000,130000],"modelRotate":[[0,0,1,90]],"model":"assets/model/TrES-2_b/Tres2b.gltf","tidalLock":{"primary":"YAxisNeg","secondary":"XAxisNeg"}},"WASP-12_b":{"modelScale":[346,346,346],"modelRotate":[[0,0,1,-90]],"model":"assets/model/WASP-12_b/WASP-12B.gltf","tidalLock":{"primary":"YAxisNeg","secondary":"XAxisNeg"}},"55_Cnc_e":{"modelScale":[23000,23000,23000],"modelRotate":[[0,0,1,90]],"model":"assets/model/55Cancri_e/55Cancri_e.gltf","tidalLock":{"primary":"YAxisNeg","secondary":"XAxisNeg"}}}')},function(t){t.exports=JSON.parse('{"Gas Giant":{"baseMaps":[5,6],"baseColors":[[[205,69,69,255],[0,0,0,0]],[[56,197,56,255],[0,0,0,0]],[[83,83,196,255],[0,0,0,0]]],"detailCount":[2,3],"detailMaps":[5,6,7],"detailColors":[[[169,162,132,128],[0.5,0,0.1,0.5]],[[66,92,131,128],[0.5,0,0.1,0.5]],[[230,122,101,128],[0.5,0,0.1,0.5]]]},"Neptune-like":{"baseMaps":[5,6],"baseColors":[[[205,69,69,255],[0,0,0,0]],[[56,197,56,255],[0,0,0,0]],[[83,83,196,255],[0,0,0,0]]],"detailCount":[2,3],"detailMaps":[5,6,7],"detailColors":[[[169,162,132,128],[0.5,0,0.1,0.5]],[[66,92,131,128],[0.5,0,0.1,0.5]],[[230,122,101,128],[0.5,0,0.1,0.5]]]},"Hot Jupiter":{"baseMaps":[6],"baseColors":[[[255,0,0,255],[0,0,0,0]],[[0,255,0,255],[0,0,0,0]],[[0,0,255,255],[0,0,0,0]]],"detailCount":[2,3],"detailMaps":[5,6,7],"detailColors":[[[255,119,0,128],[0.014,0,0.1,0.5]],[[255,80,0,128],[0.028,0,0.1,0.5]],[[255,225,0,128],[0.014,0,0.1,0.5]]]},"lavaAtmos":{"baseMaps":[2,4],"baseColors":[[[255,240,51,255],[0.028,0.1,0.1,0]],[[230,84,74,255],[0.028,0.1,0.1,0]],[[15,11,3,255],[0.028,0.1,0.1,0]]],"normMaps":[2,4],"detailCount":[1,2],"detailMaps":[1,2,3,4],"detailColors":[[[255,255,255,212],[0,0,0,0.1]],[[255,255,199,53],[0,0,0,0.1]]]},"lavaNoAtmos":{"baseMaps":[2,4],"baseColors":[[[255,240,51,255],[0.028,0.1,0.1,0]],[[230,84,74,255],[0.028,0.1,0.1,0]],[[15,11,3,255],[0.028,0.1,0.1,0]]],"normMaps":[2,4],"detailCount":[0,0],"detailMaps":[],"detailColors":[]},"iceAtmos":{"baseMaps":[1],"baseColors":[[[238,238,238,255],[0.028,0.1,0.1,0]],[[0,148,255,255],[0.028,0.1,0.1,0]],[[202,221,255,255],[0.028,0.1,0.1,0]]],"normMaps":[1],"detailCount":[1,2],"detailMaps":[1,2,3,4],"detailColors":[[[255,255,255,28],[0,0,0,0.1]],[[255,255,255,183],[0,0,0,0.1]]]},"desertAtmos":{"baseMaps":[2,4],"baseColors":[[[238,188,144,255],[0.05,0.15,0.15,0]],[[213,176,118,255],[0.05,0.15,0.15,0]],[[188,160,96,255],[0.05,0.15,0.15,0]]],"normMaps":[2,4],"detailCount":[1,1],"detailMaps":[1,2,3,4],"detailColors":[[[255,255,255,212],[0,0,0.1,0.1]]]},"desertNoAtmos":{"baseMaps":[2,4],"baseColors":[[[238,188,144,255],[0.05,0.15,0.15,0]],[[213,176,118,255],[0.05,0.15,0.15,0]],[[188,160,96,255],[0.05,0.15,0.15,0]]],"normMaps":[2,4],"detailCount":[0,0],"detailMaps":[],"detailColors":[]},"Unknown":{"baseMaps":[5,6],"baseColors":[[[157,123,123,255],[0,0,0,0]],[[149,180,149,255],[0,0,0,0]],[[125,125,161,255],[0,0,0,0]]],"detailCount":[1,2],"detailMaps":[5,6,7],"detailColors":[[[131,111,109,30],[0.5,0,0.03,0.02]],[[93,94,106,35],[0.5,0,0.06,0.01]]]}}')},function(t){t.exports=JSON.parse('{"Kepler-16":{"semiMajor":0.224,"ra":289.075714,"eccentricity":0.15944,"period":42.079,"stars":[{"displayName":"Kepler-16A","exo_id":"Kepler-16_A","magnitude":1,"st_mass":0.654,"radius":451439,"starType":"K"},{"displayName":"Kepler-16B","exo_id":"Kepler-16_B","magnitude":1,"st_mass":0.1959,"radius":157388,"starType":"M"}]},"Kepler-34":{"semiMajor":0.22882,"ra":296.435822,"eccentricity":0.52087,"period":27.7958103,"stars":[{"displayName":"Kepler-34A","exo_id":"Kepler-34_A","magnitude":1,"st_mass":1.0479,"radius":808264,"starType":"G"},{"displayName":"Kepler-34B","magnitude":1,"exo_id":"Kepler-34_B","st_mass":1.0208,"radius":760191,"starType":"G"}]}}')},function(t){t.exports=JSON.parse('[{"exo_id":"alf_Cen_A","pl_hostname":"alf_Cen_A","hostname":"alf_Cen_A","displayName":"Alpha Centauri A","tic_id":"TIC 471011145","st_eei_orbsep":"1.233","sy_dist":1.3384,"smass":1.11,"st_mass":1.11,"sy_vmag":-0.01,"st_rad":1.231,"st_lum":"0.1821","st_teff":5776,"dec":-60.833973,"ra":219.90207,"st_optmag":-0.01,"st_vj":-0.01,"st_j":-0.01,"st_dist":1.3384,"planet_count":0,"position":[26190240075953.492,-27951117672623.586,-15439968914574.748],"habZone":[183055507.9684397,311415220.021774],"starType":"G","color":[1,0.9,0.2],"constellation":"Reticulum","magnitude":-0.01,"mass":2.2077900000000003e+30,"radius":856406.7000000001,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"alf_Cen_B","pl_hostname":"alf_Cen_B","hostname":"alf_Cen_B","displayName":"Alpha Centauri B","tic_id":"TIC 471011144","st_eei_orbsep":"0.709","sy_dist":1.3459,"smass":0.94,"st_mass":0.94,"sy_vmag":1.35,"st_rad":0.859,"st_lum":"-0.2984","st_teff":5244,"dec":-60.837528,"ra":219.896096,"st_optmag":1.35,"st_vj":1.35,"st_j":1.35,"st_dist":1.3459,"planet_count":0,"position":[26334692475543.547,-28110117675937.047,-15526117253064.973],"habZone":[107562108.95710455,187550352.4260419],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Reticulum","magnitude":1.35,"mass":1.86966e+30,"radius":597606.3,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"eps_Eri","pl_hostname":"eps_Eri","hostname":"eps_Eri","displayName":"Epsilon Eridani","tic_id":"TIC 118572803","st_eei_orbsep":"0.582","sy_dist":3.2161,"smass":0.78,"st_mass":0.78,"sy_vmag":3.72,"st_rad":0.746,"st_lum":"-0.4707","st_teff":5098,"dec":-9.458262,"ra":53.232685,"st_optmag":3.72,"st_vj":3.72,"st_j":3.72,"st_dist":3.2161,"planet_count":0,"position":[-65458976225870.14,-46154421785602.09,58593379081456.58],"habZone":[88786850.27653149,155893325.12496436],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Orion","magnitude":3.72,"mass":1.55142e+30,"radius":518992.2,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"61_Cyg_B","pl_hostname":"61_Cyg_B","hostname":"61_Cyg_B","displayName":"61 Cygni B","tic_id":"TIC 165602023","st_eei_orbsep":"0.279","sy_dist":3.4947,"smass":0.63,"st_mass":0.63,"sy_vmag":6.05,"st_rad":0.551,"st_lum":"-1.1091","st_teff":4107,"dec":38.742054,"ra":316.73026,"st_optmag":6.05,"st_vj":6.05,"st_j":6.05,"st_dist":3.4947,"planet_count":0,"position":[26049573571309.023,84848390812104.06,61242266879820.42],"habZone":[44023352.74897417,80936661.3799776],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Perseus","magnitude":6.05,"mass":1.2530700000000001e+30,"radius":383330.7,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"61_Cyg_A","pl_hostname":"61_Cyg_A","hostname":"61_Cyg_A","displayName":"61 Cygni A","tic_id":"TIC 165602000","st_eei_orbsep":"0.377","sy_dist":3.4972,"smass":0.68,"st_mass":0.68,"sy_vmag":5.2,"st_rad":0.637,"st_lum":"-0.8466","st_teff":4441,"dec":38.749416,"ra":316.72476,"st_optmag":5.2,"st_vj":5.2,"st_j":5.2,"st_dist":3.4972,"planet_count":0,"position":[26063846272950.105,84918984405055.88,61274221112814.055],"habZone":[58902305.02689713,106680020.96964338],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Perseus","magnitude":5.2,"mass":1.35252e+30,"radius":443160.9,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"eps_Ind_A","pl_hostname":"eps_Ind_A","hostname":"eps_Ind_A","displayName":"Epsilon Indi A","tic_id":"TIC 231698181","st_eei_orbsep":"0.471","sy_dist":3.6389,"smass":0.72,"st_mass":0.72,"sy_vmag":4.69,"st_rad":0.728,"st_lum":"-0.654","st_teff":4641,"dec":-56.785976,"ra":330.84024,"st_optmag":4.69,"st_vj":4.69,"st_j":4.69,"st_dist":3.6389,"planet_count":0,"position":[64863172337530.65,-74268257974769.55,53711034467915.5],"habZone":[73023075.30192515,131030485.05628869],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Telescopium","magnitude":4.69,"mass":1.4320800000000002e+30,"radius":506469.6,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"tau_Cet","pl_hostname":"tau_Cet","hostname":"tau_Cet","displayName":"Tau Ceti","tic_id":"TIC 419015728","st_eei_orbsep":"0.711","sy_dist":3.6502,"smass":0.94,"st_mass":0.94,"sy_vmag":3.49,"st_rad":0.826,"st_lum":"-0.2961","st_teff":5356,"dec":-15.93748,"ra":26.017012,"st_optmag":3.49,"st_vj":3.49,"st_j":3.49,"st_dist":3.6502,"planet_count":0,"position":[-31283784741699.89,-47272647464398.984,97328963035464.22],"habZone":[107417779.96433474,186308349.5286589],"starType":"G","color":[1,0.9,0.2],"constellation":"Cetus","magnitude":3.49,"mass":1.86966e+30,"radius":574648.2,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"AX_Mic","pl_hostname":"AX_Mic","hostname":"AX_Mic","displayName":"AX Microscopii","tic_id":"TIC 159746875","st_eei_orbsep":"0.323","sy_dist":3.9709,"smass":0.49,"st_mass":0.49,"sy_vmag":6.69,"st_rad":0.832,"st_lum":"-0.9803","st_teff":3599,"dec":-38.867363,"ra":319.31363,"st_optmag":6.69,"st_vj":6.69,"st_j":6.69,"st_dist":3.9709,"planet_count":0,"position":[87646661886354.22,-45805473286934.11,72341862091466.89],"habZone":[51715425.28272114,97114572.07791714],"starType":"M","color":[0.9,0.3,0],"constellation":"Puppis","magnitude":6.69,"mass":9.746100000000001e+29,"radius":578822.4,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"sig_Dra","pl_hostname":"sig_Dra","hostname":"sig_Dra","displayName":"Sigma Draconis","tic_id":"TIC 259237827","st_eei_orbsep":"0.659","sy_dist":5.7547,"smass":0.87,"st_mass":0.87,"sy_vmag":4.67,"st_rad":0.782,"st_lum":"-0.3624","st_teff":5298,"dec":69.66118,"ra":293.08997,"st_optmag":4.67,"st_vj":4.67,"st_j":4.67,"st_dist":5.7547,"planet_count":0,"position":[-14140578655647.686,175344997552929.5,24204621026270.99],"habZone":[99734605.59820461,173457173.40491107],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Camelopardalis","magnitude":4.67,"mass":1.73043e+30,"radius":544037.4,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"HD_20794","pl_hostname":"HD_20794","hostname":"HD_20794","displayName":"HD 20794","tic_id":"TIC 301051051","st_eei_orbsep":"0.809","sy_dist":6.0434,"smass":0.97,"st_mass":0.97,"sy_vmag":4.26,"st_rad":0.913,"st_lum":"-0.1842","st_teff":5432,"dec":-43.069782,"ra":49.98188,"st_optmag":4.26,"st_vj":4.26,"st_j":4.26,"st_dist":6.0434,"planet_count":0,"position":[-45064949626855.13,-158336450819105.56,87598568152449.48],"habZone":[121754938.54478586,210422145.23141974],"starType":"G","color":[1,0.9,0.2],"constellation":"Phoenix","magnitude":4.26,"mass":1.9293300000000002e+30,"radius":635174.1,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"del_Pav","pl_hostname":"del_Pav","hostname":"del_Pav","displayName":"Delta Pavonis","tic_id":"TIC 409891396","st_eei_orbsep":"1.118","sy_dist":6.1084,"smass":0.94,"st_mass":0.94,"sy_vmag":3.55,"st_rad":1.198,"st_lum":"0.0969","st_teff":5576,"dec":-66.18207,"ra":302.1817,"st_optmag":3.55,"st_vj":3.55,"st_j":3.55,"st_dist":6.1084,"planet_count":0,"position":[127696092522514.56,-132578524444914.48,40540091842585.63],"habZone":[167371736.2912165,287329867.84815794],"starType":"G","color":[1,0.9,0.2],"constellation":"Circinus","magnitude":3.55,"mass":1.86966e+30,"radius":833448.6,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"HD_219134","pl_hostname":"HD_219134","hostname":"HD_219134","displayName":"HD 219134","tic_id":"TIC 283722336","st_eei_orbsep":"0.516","sy_dist":6.5325,"smass":0.75,"st_mass":0.75,"sy_vmag":5.57,"st_rad":0.723,"st_lum":"-0.5753","st_teff":4874,"dec":57.168354,"ra":348.32074,"st_optmag":5.57,"st_vj":5.57,"st_j":5.57,"st_dist":6.5325,"planet_count":0,"position":[-47075568447366.61,164198107211132.78,107024150340528.22],"habZone":[79321270.80658469,140770445.30561924],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Ursa Major","magnitude":5.57,"mass":1.4917500000000002e+30,"radius":502991.1,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"HD_4628","pl_hostname":"HD_4628","hostname":"HD_4628","displayName":"HD 4628","tic_id":"TIC 257393898","st_eei_orbsep":"0.548","sy_dist":7.435,"smass":0.78,"st_mass":0.78,"sy_vmag":5.74,"st_rad":0.728,"st_lum":"-0.5226","st_teff":5007,"dec":5.280615,"ra":12.095738,"st_optmag":5.74,"st_vj":5.74,"st_j":5.74,"st_dist":7.435,"planet_count":0,"position":[-52318730160822.125,330484282789.0039,223374858715149.62],"habZone":[83870057.79633094,147901644.86429203],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Virgo","magnitude":5.74,"mass":1.55142e+30,"radius":506469.6,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"107_Psc","pl_hostname":"107_Psc","hostname":"107_Psc","displayName":"107 Piscium","tic_id":"TIC 113710966","st_eei_orbsep":"0.673","sy_dist":7.6051,"smass":0.85,"st_mass":0.85,"sy_vmag":5.24,"st_rad":0.828,"st_lum":"-0.3434","st_teff":5204,"dec":20.268505,"ra":25.624008,"st_optmag":5.24,"st_vj":5.24,"st_j":5.24,"st_dist":7.6051,"planet_count":0,"position":[-119682839435302.17,36716780602281.37,198487953710118.7],"habZone":[102265072.32101527,178653604.27304873],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Pisces","magnitude":5.24,"mass":1.69065e+30,"radius":576039.6,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"pi3_Ori","pl_hostname":"pi3_Ori","hostname":"pi3_Ori","displayName":"pi3 Orionis","tic_id":"TIC 399665349","st_eei_orbsep":"1.646","sy_dist":8.0684,"smass":1.25,"st_mass":1.25,"sy_vmag":3.19,"st_rad":1.321,"st_lum":"0.433","st_teff":6443,"dec":6.9612756,"ra":72.460045,"st_optmag":3.19,"st_vj":3.19,"st_j":3.19,"st_dist":8.0684,"planet_count":0,"position":[-228198022544464.16,-66047869278876.78,74477683158547.02],"habZone":[238161929.06410217,394200990.33077234],"starType":"F","color":[0.85,0.75,0.3],"constellation":"Pisces","magnitude":3.19,"mass":2.4862500000000002e+30,"radius":919019.7,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"bet_CVn","pl_hostname":"bet_CVn","hostname":"bet_CVn","displayName":"Beta Canum Venaticorum","tic_id":"TIC 458445966","st_eei_orbsep":"1.073","sy_dist":8.4395,"smass":1.08,"st_mass":1.08,"sy_vmag":4.24,"st_rad":1.034,"st_lum":"0.0611","st_teff":5878,"dec":41.35748,"ra":188.43561,"st_optmag":4.24,"st_vj":4.24,"st_j":4.24,"st_dist":8.4395,"planet_count":0,"position":[-42137306630801.69,169278410321617.3,-193353955934466.4],"habZone":[158586498.67842868,268575307.2119941],"starType":"G","color":[1,0.9,0.2],"constellation":"Cygnus","magnitude":4.24,"mass":2.14812e+30,"radius":719353.8,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"61_Vir","pl_hostname":"61_Vir","hostname":"61_Vir","displayName":"61 Virginis","tic_id":"TIC 422478973","st_eei_orbsep":"0.909","sy_dist":8.5551,"smass":0.97,"st_mass":0.97,"sy_vmag":4.74,"st_rad":0.982,"st_lum":"-0.0833","st_teff":5552,"dec":-18.311195,"ra":199.60132,"st_optmag":4.74,"st_vj":4.74,"st_j":4.74,"st_dist":8.5551,"planet_count":0,"position":[110127976214223.66,-42650720649262.61,-236092747823338.7],"habZone":[136147838.84167966,233986236.20121706],"starType":"G","color":[1,0.9,0.2],"constellation":"Puppis","magnitude":4.74,"mass":1.9293300000000002e+30,"radius":683177.4,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"zet_Tuc","pl_hostname":"zet_Tuc","hostname":"zet_Tuc","displayName":"Zeta Tucanae","tic_id":"TIC 425935521","st_eei_orbsep":"1.123","sy_dist":8.5866,"smass":1.11,"st_mass":1.11,"sy_vmag":4.23,"st_rad":1.063,"st_lum":"0.101","st_teff":5932,"dec":-64.874794,"ra":5.0177503,"st_optmag":4.23,"st_vj":4.23,"st_j":4.23,"st_dist":8.5866,"planet_count":0,"position":[86393215108403.44,-224004686958110.16,112068173050364.45],"habZone":[165684571.49966013,279938452.23191434],"starType":"F","color":[0.85,0.75,0.3],"constellation":"Dorado","magnitude":4.23,"mass":2.2077900000000003e+30,"radius":739529.1,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"HD_192310","pl_hostname":"HD_192310","hostname":"HD_192310","displayName":"HD 192310","tic_id":"TIC 326096771","st_eei_orbsep":"0.636","sy_dist":8.7991,"smass":0.77,"st_mass":0.77,"sy_vmag":5.73,"st_rad":0.818,"st_lum":"-0.3936","st_teff":5087,"dec":-27.032976,"ra":303.82245,"st_optmag":5.73,"st_vj":5.73,"st_j":5.73,"st_dist":8.7991,"planet_count":0,"position":[233426746615162.7,-33299104597328.97,134617751765821.61],"habZone":[96977451.81171902,170363942.8664586],"starType":"K","color":[0.8,0.5,0.2],"constellation":"Scorpius","magnitude":5.73,"mass":1.5315300000000002e+30,"radius":569082.6,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"bet_Com","pl_hostname":"bet_Com","hostname":"bet_Com","displayName":"Beta Comae Berenices","tic_id":"TIC 445070560","st_eei_orbsep":"1.165","sy_dist":9.1291,"smass":1.11,"st_mass":1.11,"sy_vmag":4.23,"st_rad":1.079,"st_lum":"0.1326","st_teff":5996,"dec":27.878183,"ra":197.9683,"st_optmag":4.23,"st_vj":4.23,"st_j":4.23,"st_dist":9.1291,"planet_count":0,"position":[18081698533850.54,151404682322425.3,-236857878928643.03],"habZone":[171388905.09046575,288782769.6772566],"starType":"F","color":[0.85,0.75,0.3],"constellation":"Taurus","magnitude":4.23,"mass":2.2077900000000003e+30,"radius":750660.2999999999,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"gam_Pav","pl_hostname":"gam_Pav","hostname":"gam_Pav","displayName":"Gamma Pavonis","tic_id":"TIC 265488188","st_eei_orbsep":"1.211","sy_dist":9.2618,"smass":1.14,"st_mass":1.14,"sy_vmag":4.21,"st_rad":1.086,"st_lum":"0.166","st_teff":6095,"dec":-65.366196,"ra":321.61087,"st_optmag":4.21,"st_vj":4.21,"st_j":4.21,"st_dist":9.2618,"planet_count":0,"position":[171204891609386.75,-208918030817130.4,93369153826928.69],"habZone":[177548020.41397503,297918775.14556515],"starType":"F","color":[0.85,0.75,0.3],"constellation":"Carina","magnitude":4.21,"mass":2.2674599999999998e+30,"radius":755530.2000000001,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"61_UMa","pl_hostname":"61_UMa","hostname":"61_UMa","displayName":"61 Ursae Majoris","tic_id":"TIC 101641846","st_eei_orbsep":"0.78","sy_dist":9.5794,"smass":0.94,"st_mass":0.94,"sy_vmag":5.31,"st_rad":0.862,"st_lum":"-0.2154","st_teff":5491,"dec":34.201637,"ra":175.26256,"st_optmag":5.31,"st_vj":5.31,"st_j":5.31,"st_dist":9.5794,"planet_count":0,"position":[-84616597572085.55,144410965033634,-243636508076022.78],"habZone":[117186515.84575349,201969589.3817532],"starType":"G","color":[1,0.9,0.2],"constellation":"Gemini","magnitude":5.31,"mass":1.86966e+30,"radius":599693.4,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"iot_Per","pl_hostname":"iot_Per","hostname":"iot_Per","displayName":"Iota Persei","tic_id":"TIC 116988032","st_eei_orbsep":"1.494","sy_dist":10.5407,"smass":1.08,"st_mass":1.08,"sy_vmag":4.05,"st_rad":1.404,"st_lum":"0.3484","st_teff":5952,"dec":49.613277,"ra":47.26675,"st_optmag":4.05,"st_vj":4.05,"st_j":4.05,"st_dist":10.5407,"planet_count":0,"position":[-240568823478387.34,165723317767928.8,143008672971918.84],"habZone":[220136650.09474456,371619443.33306503],"starType":"G","color":[1,0.9,0.2],"constellation":"Andromeda","magnitude":4.05,"mass":2.14812e+30,"radius":976762.7999999999,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"HD_141004","pl_hostname":"HD_141004","hostname":"HD_141004","displayName":"HD 141004","tic_id":"TIC 296740796","st_eei_orbsep":"1.415","sy_dist":11.8186,"smass":1.09,"st_mass":1.09,"sy_vmag":4.42,"st_rad":1.356,"st_lum":"0.3018","st_teff":5898,"dec":7.353073,"ra":236.61089,"st_optmag":4.42,"st_vj":4.42,"st_j":4.42,"st_dist":11.8186,"planet_count":0,"position":[258504708192781.7,162946748897340.2,-199043319383320.78],"habZone":[209221906.42948818,354020215.7201739],"starType":"G","color":[1,0.9,0.2],"constellation":"Delphinus","magnitude":4.42,"mass":2.1680100000000003e+30,"radius":943369.2000000001,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"zet2_Ret","pl_hostname":"zet2_Ret","hostname":"zet2_Ret","displayName":"Zeta2 Reticuli","tic_id":"TIC 279649049","st_eei_orbsep":"1.008","sy_dist":12.0464,"smass":1.07,"st_mass":1.07,"sy_vmag":5.24,"st_rad":0.983,"st_lum":"0.0073","st_teff":5847,"dec":-62.506363,"ra":49.553413,"st_optmag":5.24,"st_vj":5.24,"st_j":5.24,"st_dist":12.0464,"planet_count":0,"position":[11345550085548.678,-354469966411947.56,111324581589811.97],"habZone":[149364502.08995688,253301550.5559367],"starType":"G","color":[1,0.9,0.2],"constellation":"Hydrus","magnitude":5.24,"mass":2.1282300000000003e+30,"radius":683873.1,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"zet1_Ret","pl_hostname":"zet1_Ret","hostname":"zet1_Ret","displayName":"Zeta1 Reticuli","tic_id":"TIC 279649057","st_eei_orbsep":"0.891","sy_dist":12.0391,"smass":1.01,"st_mass":1.01,"sy_vmag":5.53,"st_rad":0.911,"st_lum":"-0.1","st_teff":5710,"dec":-62.57532,"ra":49.44235,"st_optmag":5.53,"st_vj":5.53,"st_j":5.53,"st_dist":12.0391,"planet_count":0,"position":[11895314429005.693,-354238533750975.4,111251940018752.6],"habZone":[132745171.64907382,226496970.52027062],"starType":"G","color":[1,0.9,0.2],"constellation":"Hydrus","magnitude":5.53,"mass":2.0088900000000002e+30,"radius":633782.7000000001,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""},{"exo_id":"58_Eri","pl_hostname":"58_Eri","hostname":"58_Eri","displayName":"58 Eridani","tic_id":"TIC 117979951","st_eei_orbsep":"0.983","sy_dist":13.2413,"smass":1.04,"st_mass":1.04,"sy_vmag":5.49,"st_rad":0.962,"st_lum":"-0.0149","st_teff":5833,"dec":-16.934456,"ra":71.901215,"st_optmag":5.49,"st_vj":5.49,"st_j":5.49,"st_dist":13.2413,"planet_count":0,"position":[-293530472730453.6,-256976191933242.38,121425407723653.52],"habZone":[145556442.4520385,246995954.81122515],"starType":"G","color":[1,0.9,0.2],"constellation":"Aquarius","magnitude":5.49,"mass":2.0685600000000002e+30,"radius":669263.4,"system_radius":149597870,"maxSemiMajorAxis":149597870,"planet_ids":""}]')},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(305),n=i(158);class r{constructor(t,e,i){this._pioneer=t,this._scene=e,this._camera=e.get("camera"),this._contentManager=null,this._currentSystem="",this._currentObject="",this._id=null,this._defaultMaxDistance=73686231697268e3,this._galaxyViewCoverageUpdate=this._galaxyViewCoverageUpdate.bind(this),this.setContentManager=this.setContentManager.bind(this),this.goToGalaxyView=this.goToGalaxyView.bind(this),this.flyToObject=this.flyToObject.bind(this),this.flyToEarth=this.flyToEarth.bind(this),this.flyToSurface=this.flyToSurface.bind(this),this.getLatLon=this.getLatLon.bind(this),this.formatLatLon=this.formatLatLon.bind(this),this.readCameraAE=this.readCameraAE.bind(this),this.getAEFromEntity=this.getAEFromEntity.bind(this),this._galaxyViewTarget=e.addEntity("galaxy_view_target"),this._galaxyViewTarget.setParent(e.getEntity("earth")),this._galaxyViewTarget.setPosition(s.Vector3.Zero);const a=this._galaxyViewTarget.addController("coverage");if(a.addCoverage(s.Interval.Infinite,void 0,void 0,this._galaxyViewCoverageUpdate),a.addDependentState("earth","orientation"),a.addDependentState("milky_way","orientation"),i.spout){const t=this._camera.addComponent("spout");t instanceof s.SpoutComponent&&i.spoutRenderWidth&&t.setRenderWidth(i.spoutRenderWidth)}}setContentManager(t){this._contentManager=t}isTransitioning(){return!(null===this._pioneer.get("main","camera","transition"))}async goToGalaxyView(){this._camera.clearControllers();let t=new CustomEvent("cameraupdate",{detail:{id:"earth",type:"galaxy"}});window.dispatchEvent(t);try{await n.Cameras.goToEntity(this._camera,this._scene.get("earth"),{distance:r.milkyWayRadius/42,transitionFunction:n.Transitions.jumpToLocationOnSphere.bind(void 0,0,0,!0,this._scene.get("earth"))})}catch(t){return}let e=new CustomEvent("cameraupdatedone",{detail:{id:"earth",type:"galaxy"}});window.dispatchEvent(e),this._currentSystem="",this._currentObject=""}async goToObjectView(t,e){const i=!this._camera.getPosition().isNaN(),a=this._scene.get(t),o=this._contentManager.getSystemInfo(t),l=this._scene.get(this._currentObject),c=o?o.exo_id:"solar_system",h=this._scene.get(c)||this._scene.get("sun"),d=o?o.system_radius:r.solarSystemRadius/10;if(""!==this._currentObject&&t!==this._currentObject){const t=s.Vector3.pool.get();this._getSystemDestination(t,o),await n.Cameras.goToEntity(this._camera,l,{up:!1,zoom:!1,destination:t,duration:1,transitionFunction:n.Transitions.jumpToLocationOnSphere.bind(void 0,0,a.getOcclusionRadius(),!0,a)}),s.Vector3.pool.release(t)}if(""!==this._currentSystem&&c!==this._currentSystem&&t.indexOf("sc_")<0){await this._lookAtObject(h);const t=s.Vector3.pool.get();this._getSystemDestination(t,o),await n.Cameras.goToEntity(this._camera,h,{up:!0,zoom:!1,destination:t,duration:2,transitionFunction:n.Transitions.jumpToLocationOnSphere.bind(void 0,0,h.getOcclusionRadius(),!0,h)}),s.Vector3.pool.release(t)}const u=this.getDistanceForRadius(a.getOcclusionRadius());if(await this._flyToObject(a,u,i?1:0),e){const t=new s.Vector3,e=new s.Vector3;e.cross(a.getPosition(),this._camera.getPosition()),e.normalize(e);const r=Math.PI-this._camera.getPosition().angle(a.getPosition()),o=Math.PI/4,l=new s.Quaternion,c=Math.max(0,r-o);l.setFromAxisAngle(e,c),t.rotate(l,this._camera.getPosition()),t.normalize(t),t.mult(t,u),await n.Cameras.goToEntity(this._camera,a,{up:!0,zoom:!0,destination:t,duration:i?c/2:0,transitionFunction:n.Transitions.jumpToLocationOnSphere.bind(void 0,0,a.getOcclusionRadius(),!0,a)})}this._currentSystem=c,this._currentObject=t,this._camera.get("zoom")&&this._camera.get("zoom").setDistanceClamp(new s.Interval(1.25*a.getOcclusionRadius(),6*d)),this._addCinematicController(this._camera,!0)}async goToSystemView(t,e=!0,i=!1){const o=!this._camera.getPosition().isNaN();let l=this._contentManager.getSystemInfo(t);if(!l)for(let e=0;e<a.length;e+=1)a[e].exo_id===t&&(l=a[e]);const c=this._scene.get(l.exo_id);""!==this._currentSystem&&await this._lookAtObject(c),""!==this._currentSystem&&l.exo_id!==this._currentSystem&&await this._flyToObject(c,2*l.system_radius,2);const h=s.Vector3.pool.get();this._getSystemDestination(h,l,e,i),await n.Cameras.goToEntity(this._camera,c,{up:!0,zoom:!0,destination:h,duration:o?1:0,transitionFunction:n.Transitions.jumpToLocationOnSphere.bind(void 0,0,c.getOcclusionRadius(),!0,c)}),s.Vector3.pool.release(h),this._currentSystem=t,this._currentObject="",this._camera.get("zoom").setDistanceClamp(new s.Interval(1.25*c.getOcclusionRadius(),6*Math.max(l.habZone&&l.habZone[0],l.habZone&&l.habZone[1],l.system_radius,r.solarSystemRadius))),this._addCinematicController(this._camera,!0)}async _lookAtObject(t){const e=new s.Vector3,i=new s.Vector3;this._camera.getOrientation().getAxis(i,1),this._camera.getPosition().isNaN()||t.getPositionRelativeToEntity(e,s.Vector3.Zero,this._camera),await n.Cameras.goToEntity(this._camera,t,{up:!1,distance:e.magnitude(),duration:i.angle(e)/2})}async _flyToObject(t,e,i){const a=new s.Vector3;if(this._camera.getPosition().isNaN()||t.getPositionRelativeToEntity(a,s.Vector3.Zero,this._camera),0===a.magnitude()&&(i=0),t&&t.getParent()&&"earth"===t.getParent().getName()){const e=t.getParent().getComponentByType("spheroidLOD");if(e){const t=e.getTextureNames();if(t&&Array.isArray(t))for(let i=0;i<t.length;i++){const s=e.getTextureUrl(t[i]);e.setTexture(t[i],s,e.getTextureSizes(t[i]))}}}await n.Cameras.goToEntity(this._camera,t,{up:!1,distance:e,duration:i})}_getSystemDestination(t,e,i,a){const n=e?e.exo_id:"solar_system",o=this._scene.get(n),l=e?e.system_radius:r.solarSystemRadius/10;let c=0;const h=this._scene.getEntity("habzone_"+n);if(a){if(c=2*e.system_radius,e.planets&&Array.isArray(e.planets)){let t=0,i=0;for(let s=0;s<e.planets.length;s++){const a=this._contentManager.getDB("planets")[e.planets[s]];a&&(0===s?(t=a.semiMajor?a.semiMajor:0,i=a.semiMajor?a.semiMajor:0):(t=Math.max(t,a.semiMajor?a.semiMajor:0),i=Math.min(i,a.semiMajor?a.semiMajor:0)))}const s=30.1,a=.4;a>t?c=3*a*149597900:s>t&&a<i?c=3*s*149597900:s>t&&a>i?c=3*s*149597900:a>i&&(c=3*i*149597900)}}else c=e&&i&&null!==h&&h.isEnabled()&&e.habZone&&2===e.habZone.length?3.5*Math.max(l,e.habZone[0],e.habZone[1]):3.5*l;const d=s.Vector3.pool.get();o?o.getOrientation().getAxis(d,2):r.j2000ToEclipJ2000Rotation.getAxis(d,2);const u=s.Vector3.pool.get();u.copy(this._camera.getPosition()),u.isNaN()&&u.copy(s.Vector3.XAxisNeg),u.addMult(u,d,-u.dot(d)),u.normalize(u),t.add(u,d),s.Vector3.pool.release(u),s.Vector3.pool.release(d),t.normalize(t),t.mult(t,c)}async flyToObject(t,e,i=!0,s=!1){try{this._camera.clearControllers();let a=this._contentManager.getSystemInfo(t);const n=new CustomEvent("cameraupdate",{detail:{id:t,type:e,system:a}});window.dispatchEvent(n),"star"===e||"planet"===e||"spacecraft"===e?await this.goToObjectView(t,"planet"===e):"system"===e&&await this.goToSystemView(t,i,s);const r=new CustomEvent("cameraupdatedone",{detail:{id:t,type:e,system:a}});window.dispatchEvent(r)}catch(t){throw t}}async moveToCompare(t,e){const i=e.getController("compare"),a=new s.Vector3;i.getOrientation().getAxis(a,2);const r=new s.Vector3;"school_bus"===e.getName()?(r.neg(i.getPosition()),r.normalize(r),r.addMult(r,a,.4)):r.cross(a,i.getPosition()),r.normalize(r);const o=(t.getOcclusionRadius()+e.getOcclusionRadius()+i.getPosition().magnitude())/2;r.mult(r,this.getDistanceForRadius(o));try{await n.Cameras.goToEntity(this._camera,t,{up:!1,destination:r,destinationUp:a,duration:1,transitionFunction:n.Transitions.jumpToLocationOnSphere.bind(void 0,0,t.getOcclusionRadius(),!1,t)})}catch(t){return}this._camera.get("zoom").setDistanceClamp(new s.Interval(1.25*o,20*o))}async flyToEarth(){let t=new CustomEvent("cameraupdate",{detail:{id:"earth",type:"planet"}});window.dispatchEvent(t);let e=this._scene.get("earth");const i=this._scene.get("sun");return i&&i.getComponentByType("lightSource")&&i.getComponentByType("lightSource").setEnabled(!0),n.Cameras.goToEntity(this._camera,e,{}).then(()=>{let t=this._camera.addController("pick");t.setPickedEntity(e),t.setCallback(t=>{t.rotateInverse(e.getOrientation(),t),window.exoUI&&window.exoUI.footer&&window.exoUI.footer.pickedLocation(t)}),this._camera.get("zoom").setDistanceClamp(new s.Interval(1.25*e.getOcclusionRadius(),6*e.getOcclusionRadius()));const i=this._camera.addController("pick");i.setPickedEntity(e),i.setTriggerOnHover(!0),i.setCallback(t=>{window.exoUI&&window.exoUI.footer&&window.exoUI.footer.setHoverPosition(!0)});let a=new CustomEvent("cameraupdatedone",{detail:{id:"earth",type:"planet"}});window.dispatchEvent(a)}).catch(()=>{})}async flyToSurface(t,e){let i=this._scene.getEntity("cameraTarget"),a=i.getControllerByType("fixed");i.getControllerByType("rotateByParentOrientation")||i.addController("rotateByParentOrientation"),a.getEntity().setParent(t);const r=new s.Quaternion,o=t.get("spheroid"),l=new s.LatLonAlt;o.llaFromXYZ(l,e),o.orientationFromLLA(r,l),a.setOrientation(r);const c=new s.Vector3;o.upFromLLA(c,l),c.mult(c,25),e.add(e,c),a.setPosition(e),await this._pioneer.waitUntilNextFrame();let h=new CustomEvent("cameraupdate",{detail:{id:"earth",type:"surface"}});window.dispatchEvent(h);let d=this._camera.get("camera").getVerticalFieldOfView()/5,u=new s.Vector3(0,-.001*Math.cos(d),-.001*Math.sin(d));u.rotate(i.getOrientation(),u);let p=t.getComponentByType("atmosphere");null!==p&&p.setEnabled(!1),await n.Cameras.goToEntity(this._camera,i,{destination:u,up:!0,zoom:!1}).catch(()=>{});const m=this._camera.get("orbit");m&&m.setPitchAngleLimits(new s.Interval(-Math.PI/2,Math.PI/18));let g=new CustomEvent("cameraupdatedone",{detail:{id:"earth",type:"surface"}});window.dispatchEvent(g)}getLatLon(t,e){if(null===e||t.isNaN())return;const i=e.getComponentByType("spheroid");if(null==i||null===parent||t.isNaN())return null;const a=s.LatLonAlt.pool.get();i.llaFromXYZ(a,t);const n={latitude:s.MathUtils.radToDeg(a._lat),longitude:s.MathUtils.radToDeg(a._lon)};return s.LatLonAlt.pool.release(a),null==n.latitude||null==n.longitude?null:n}formatLatLon(t,e){return{lat:t<0?Math.abs(t).toFixed(2)+"°S":t.toFixed(2)+"°N",lon:e<0?Math.abs(e).toFixed(2)+"°W":e.toFixed(2)+"°E"}}readCameraAE(){let t={azimuth:0,elevation:0};return this.getAEFromEntity(this._camera,t),t}getAEFromEntity(t,e){let i=s.Vector3.pool.get(),a=s.AER.pool.get(),n=s.Quaternion.pool.get();n.inverse(t.getParent().getOrientation()),t.getOrientation().getAxis(i,1),i.rotate(n,i),a.setFromVector(i),e.azimuth=(90-s.MathUtils.radToDeg(a.azimuth)).toFixed(2),e.azimuth=s.MathUtils.wrap(e.azimuth,0,360).toFixed(2),e.elevation=s.MathUtils.radToDeg(a.elevation).toFixed(2),s.Quaternion.pool.release(n),s.AER.pool.release(a),s.Vector3.pool.release(i)}_galaxyViewCoverageUpdate(t){const e=t.getScene().get("earth"),i=t.getScene().get("milky_way"),a=this._camera.getPosition().magnitude(),n=s.Vector3.pool.get(),r=s.Vector3.pool.get();e.getOrientation().getAxis(n,2),i.getOrientation().getAxis(r,2);const o=s.Vector3.pool.get(),l=Math.log(1+(a-4331287782369)/634940534727848);o.slerp(n,r,l,!0),s.Vector3.pool.release(n),s.Vector3.pool.release(r);const c=s.Vector3.pool.get();this._camera.getOrientation().getAxis(c,1),c.setNormalTo(o,c);const h=s.Quaternion.pool.get();h.setFromAxes(void 0,c,o),s.Vector3.pool.release(c),s.Vector3.pool.release(o),t.setOrientation(h),s.Quaternion.pool.release(h)}_getNicePositionForCamera(t,e,i){const a=s.Vector3.pool.get(),n=s.Vector3.pool.get();e.getPositionRelativeToEntity(a,s.Vector3.Zero,i),a.normalize(a),e.getOrientation().getAxis(n,2),n.setNormalTo(a,n),t.cross(n,a),t.addMult(t,a,-.5),t.addMult(t,n,.4),t.normalize(t),s.Vector3.pool.release(n),s.Vector3.pool.release(a),t.mult(t,this.getDistanceForRadius(e.getOcclusionRadius()))}_addCinematicController(t,e){const i=t.getControllerByType("align"),a=t.addController("spin",void 0,i);a instanceof s.SpinController&&(a.setAxis(s.Vector3.ZAxis,!0),a.setRate(s.MathUtils.degToRad(1)),a.setUsingRealTime(!0),a.setRotatingPosition(!0));const n=t.addController("tap");n instanceof s.TapController&&n.setTapCallback(()=>{t.removeController(a),t.removeController(n)})}getDistanceForRadius(t){const e=this._camera.get("camera"),i=Math.min(e.getHorizontalFieldOfView(),e.getVerticalFieldOfView());return t/Math.sin(i/2)*1.2}}r.milkyWayRadius=12e17,r.solarSystemRadius=4478351247,r.j2000ToEclipJ2000Rotation=new s.Quaternion(.9791532214288992,-.2031230389823101,0,0),e.default=r},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(305);const n=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);e.default=class{constructor(t,e,i){this._pioneer=t,this._scene=e,this._planets=i,this._contentManager=null,this._cameraManager=null,this._isCompareSS=!1,this._isPlanet=!1,this._compareObject=null,this._customOrientation={sc_spitzer:{horz:2,vert:0,distance:this._defaultDistance,scientist:{pos:1,neg:!0,ori:[{axis:s.Vector3.YAxis,angle:Math.PI/2},{axis:s.Vector3.XAxis,angle:Math.PI/2}]},school_bus:{neg:!0,pos:1,ori:[{axis:s.Vector3.ZAxis,angle:Math.PI}]}},sc_kepler_space_telescope:{horz:2,vert:1,distance:this._defaultDistance,scientist:{pos:0,neg:!1,ori:[{axis:s.Vector3.XAxis,angle:-Math.PI/2},{axis:s.Vector3.YAxis,angle:Math.PI}]},school_bus:{neg:!1,pos:0,ori:[{axis:s.Vector3.ZAxis,angle:-Math.PI/2}]}},sc_hubble_space_telescope:{horz:2,vert:1,distance:this._defaultDistance,scientist:{pos:0,neg:!1,ori:[{axis:s.Vector3.XAxis,angle:-Math.PI/2},{axis:s.Vector3.YAxis,angle:Math.PI}]},school_bus:{pos:0,neg:!1,ori:[{axis:s.Vector3.ZAxis,angle:-Math.PI/2}]}},sc_tess:{horz:1,vert:0,distance:this._defaultDistance,scientist:{pos:2,neg:!1,ori:[{axis:s.Vector3.YAxis,angle:Math.PI/2}]},school_bus:{neg:!1,pos:2,ori:[{axis:s.Vector3.XAxis,angle:Math.PI/2}]}}},this._defaultDistance=this._defaultDistance.bind(this),this.setContentManager=this.setContentManager.bind(this),this.setCameraManager=this.setCameraManager.bind(this),this.compareSystem=this.compareSystem.bind(this),this.comparePlanet=this.comparePlanet.bind(this),this.compare=this.compare.bind(this),this.reset=this.reset.bind(this),this.resetAll=this.resetAll.bind(this)}setContentManager(t){this._contentManager=t}setCameraManager(t){this._cameraManager=t}compareSystem(t,e){if(this._isCompareSS=t,this.reset(),"sun"===e)return;if(!t)return void this._planets.forEach(e=>{e.getComponentByType("div").setEnabled(t),e.getComponentByType("trail").setEnabled(t),e.getComponentByType("spheroid").setEnabled(!t),e.setEnabled(t)});let i=this._contentManager.getDB("stars")[e];if(!i)for(let t=0;t<a.length;t+=1)a[t].exo_id===e&&(i=a[t]);if(!i)return;const r=new s.Quaternion;r.multInverseR(i.orientation,n),this._planets.forEach(e=>{e.addParentingTableEntry(0,i.exo_id);const s=e.getComponentByType("spheroidLOD");if(s){const t=s.getTextureNames();if(t&&Array.isArray(t))for(let e=0;e<t.length;e++){const i=s.getTextureUrl(t[e]);s.setTexture(t[e],i,s.getTextureSizes(t[e]))}}e.getComponentByType("div").setEnabled(t),e.getComponentByType("trail").setEnabled(t),e.getComponentByType("spheroid").setEnabled(!t),e.setEnabled(t),e.getController("compare")&&e.removeController("compare");const a=e.addController("rotate","compare"),n=this._scene.get(i.exo_id);a.getEntity().setParent(n),a.setRotation(r)}),this._cameraManager.flyToObject(i.exo_id,"system",!1,!0)}comparePlanet(t,e){let i=this._contentManager.getDB("planets")[t]||null;if(e){if(i)return this._isPlanet=!0,this.compare(i.exo_id,e)}else if(this.reset(),i)return this._cameraManager.flyToObject(i.exo_id,"planet")}compare(t,e){if(this.reset(),!t||!e)return;let i;if(i="string"==typeof t?this._scene.get(t):t,this._compareObject="string"==typeof e?this._scene.get(e):e,this._compareObject.addParentingTableEntry(0,i.getName()),null!==i&&null!==this._compareObject){null!==i&&null!==i.get("sprite")&&i.get("sprite").setEnabled(!1);let t=this._customOrientation[i.getName()],e=t?t[this._compareObject.getName()]:null,s=i.getOcclusionRadius(),a=this._compareObject.getOcclusionRadius();this._setCompareObject(i,t,e,s,a);const n=this._compareObject.getComponentByType("spheroidLOD");if(n){const t=n.getTextureNames();if(t&&Array.isArray(t))for(let e=0;e<t.length;e++){const i=n.getTextureUrl(t[e]);n.setTexture(t[e],i,n.getTextureSizes(t[e]))}}return this._cameraManager.moveToCompare(i,this._compareObject)}}reset(){null!==this._compareObject&&(null!==this._compareObject.getParent()&&null!==this._compareObject.getParent().get("sprite")&&this._compareObject.getParent().get("sprite").setEnabled(!0),this._compareObject.removeController("compare"),this._compareObject.setEnabled(!1),this._compareObject=null)}resetAll(){this._isCompareSS?this.compareSystem(!1):this.reset()}_defaultDistance(t,e){return 1.5*Math.max(t,e)}_setCompareObject(t,e,i,a,n){let r=t.getOrientation();r.isNaN()&&(r=new s.Quaternion);let o=new s.Vector3;i&&"pos"in i?r.getAxis(o,i.pos):(r.getAxis(o,2),o.cross(o,t.getPosition()),o.normalize(o));let l=e&&"distance"in e?e.distance(a,n):1.5*(a+n);i&&i.neg&&(l=-l),o.mult(o,l);let c=new s.Quaternion,h=new s.Quaternion;if(i&&"ori"in i)for(let t=0;t<i.ori.length;t++){let e=i.ori[t];h.setFromAxisAngle(e.axis,e.angle),c.mult(h,c)}c.mult(r,c),this._compareObject.getController("compare")&&this._compareObject.removeController("compare");const d=this._compareObject.addController("fixed","compare");d.setPosition(o),d.setOrientation(c),d.getEntity().setParent(t),this._compareObject.setEnabled(!0)}}},function(t,e,i){"use strict";i.r(e);var s=i(35),a=i(309),n=i.n(a),r=i(304);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const h=new s.Quaternion(.9791532214288992,.2031230389823101,0,0);e.default=class{constructor(t){this._pioneer=t,this._dbArray={stars:[],planets:[],candidates:[],constellations:[],tesscandidates:[]},this._dbObj={stars:{},planets:{},candidates:{},constellations:{},tesscandidates:{}},this._apiUrl=window.config.mbAPI+"/api/v1",this._obsUrl=window.config.mbAPI+"/eox_data/observatories.json",this._discoveryUrl=this._apiUrl+"/detection_methods/",this._data={},this._apiData={},this._systemId=null,this._customNames={K2:"Kepler"},this._fetchJSON=this._fetchJSON.bind(this),this._fetchData=this._fetchData.bind(this),this._createExoDatabase=this._createExoDatabase.bind(this),this._fromUTF8Array=this._fromUTF8Array.bind(this),this.init=this.init.bind(this),this.getDB=this.getDB.bind(this),this.getStarInfo=this.getStarInfo.bind(this),this.getSystemInfo=this.getSystemInfo.bind(this),this.getAPIStar=this.getAPIStar.bind(this),this.getAPIPlanet=this.getAPIPlanet.bind(this),this.getAPIPlanets=this.getAPIPlanets.bind(this),this.getAPIObservatory=this.getAPIObservatory.bind(this),this.getAPIObservatories=this.getAPIObservatories.bind(this),this.getAPIDiscovery=this.getAPIDiscovery.bind(this),this.getAPIDiscoveries=this.getAPIDiscoveries.bind(this),window.addEventListener("cameraupdate",async t=>{let{system:e}=t.detail;if(void 0!==e&&this._systemId!==e.id){this._systemId=e.id;let t=this._fetchJSON(this._apiUrl+"/stars/?condition_1="+e.id+":exo_id").then(t=>{if(0===t.items.length)throw Error("empty");this._apiData.star=t.items[0]}).catch(t=>{console.warn("Information not found in the API ("+t+")")}),i=this._fetchJSON(this._apiUrl+"/planets/?condition_1="+e.id+":pl_hostname").then(t=>{this._apiData.planets=t.items}).catch(t=>{console.warn("Information not found in the API ("+t+")")});await Promise.all([t,i]).catch(t=>{console.warn("Could not load all the information ("+t+")")})}},!1)}async init(){await this._fetchData();const t=window.config.dynamicUrl;if(!t)return;let e=null;e="https://"+n.a.join(t,"exo/db/EyesExoPlanetDatabase.bin"),await this._createExoDatabase(e,"planets"),e="https://"+n.a.join(t,"exo/db/EyesExoCandidateDatabase.bin"),await this._createExoDatabase(e,"candidates"),e="https://"+n.a.join(t,"exo/db/EyesExoTessCandidateDatabase.bin"),await this._createExoDatabase(e,"tesscandidates"),e="https://"+n.a.join(t,"exo/db/EyesExoStarDatabase.bin"),await this._createExoDatabase(e,"stars");let i=await this._fetchJSON("https://"+n.a.join(t,"exo/db/candidateCount.json"));i&&i.count&&(this.keplerCandidateCount=i.count)}async getData(t){if(!t)return null;if(this._data[t])return this._data[t];if(this.dbObj.planets[t]||this.dbObj.stars[t]){let e=t,i="star";if(this.dbObj.planets[t]){i="planet";const s=this.dbObj.planets[t],a=this.dbObj.stars[s.hostname];e=a&&a.id?a.id:null}const s=await this._fetchJSON(this._apiUrl+"/stars/?condition_1="+e+":exo_id");if(!s||!s.items||0===!s.items.length)return console.warn("Empty star data"),null;if("planet"===i){const i=await this._fetchJSON(this._apiUrl+"/planets/?condition_1="+e+":pl_hostname");if(i&&i.items)for(let e=0;e<i.items.length;e+=1)if(i.items[e].exo_id===t)return this._data[t]=l({},this.dbObj.planets[t],{},i.items[e]),this._data[t]}else if(this.dbObj.stars[t])return this._data[t]=l({},this.dbObj.stars[t],{},s),this._data[t]}return null}getKeplerCandidateCount(){return this.keplerCandidateCount||"NA"}getAPIStar(){return this._apiData.star||{}}getAPIPlanet(t){if(!this._apiData||!this._apiData.planets)return null;for(let e=0;e<this._apiData.planets.length;e++){let i=this._apiData.planets[e];if(i.exo_id===t)return i}return null}getAPIPlanets(){return this._apiData.planets}getAPIObservatory(t){this._customNames.hasOwnProperty(t)&&(t=this._customNames[t]);for(let e=0;e<this._apiData.observatories.length;e++){let i=this._apiData.observatories[e];if("XO Project"===i.exo_id&&(i.exo_id="XO"),i.exo_id===t)return i}return null}getAPIObservatories(){return this._apiData.observatories}getAPIDiscovery(t){for(let e=0;e<this._apiData.discoveryMethods.length;e++){let i=this._apiData.discoveryMethods[e];if(i.title.toLowerCase()===t.toLowerCase())return i}return null}getAPIDiscoveries(){return this._apiData.discoveryMethods}getDB(t,e=!1){return e?this._dbArray[t]||[]:this._dbObj[t]||{}}getStarInfo(t,e=!1,i=!1){let s=this.getDB("stars",i)[t];if(!s)for(let i in r)if(r[i]&&r[i].stars){let a=r[i].stars;for(let n=a.length-1;n>=0;n--)if(a[n].exo_id===t){s=e?this.getDB("stars")[i]:{displayName:a[n].displayName,st_optmag:a[n].st_optmag,starType:a[n].starType};break}}return s}getSystemInfo(t){const e=this.getStarInfo(t,!0)||this.getDB("planets")[t];return e&&e.pl_hostname?this.getDB("stars")[e.pl_hostname]:e}get dbArray(){return this._dbArray}get dbObj(){return this._dbObj}async _fetchJSON(t){let e=t.replace(/\+/g,"%2b");return fetch(e).then(t=>t.json()).catch(t=>{console.error("_fetchJSON:",t)})}async _fetchData(){let t=this._fetchJSON(this._obsUrl).then(t=>{this._apiData.observatories=t}).catch(t=>{console.error("_fetchData:",t)}),e=this._fetchJSON(this._discoveryUrl).then(t=>{this._apiData.discoveryMethods=t.items}).catch(t=>{console.error("_fetchData:",t)});return Promise.all([t,e])}async _createExoDatabase(t,e){if(!t)return;let i=await this._pioneer.getDownloader().download(t,!0);try{if(i&&i.content){let t=new s.Reader(i.content),a=t.readInt64(),n=[];if(1163415344===a){let i=t.readUInt16();for(let e=0;e<i;e++){let e=t.readInt16(),i=t.readInt16(),s=t.readString(i);n.push({type:e,key:s})}for(;!t.isAtEnd();){let i={},a=t.readInt16(),r=t.readString(a);i.id=r;for(let e=0;e<n.length;e++){let s=n[e],a=0;switch(s.type){case-1:case 1:a=t.readInt16(),i[s.key]=t.readString(a);break;case 4:i[s.key]=t.readFloat64();break;case 5:i[s.key]=[t.readFloat32(),t.readFloat32()];break;case 8:i[s.key]=[t.readFloat64(),t.readFloat64(),t.readFloat64()];break;default:console.warn(s.type+" is not defined")}}if(i.planet_ids){let t=i.planet_ids;if(t=(t=t?t.split(":"):[]).filter(t=>t.length>0&&"NA"!==t),i.planets=t,0===i.planets.length){this._dbArray.planets.filter(t=>t&&t.pl_hostname===i.exo_id).forEach(t=>{i.planets.push(t.exo_id)}),i.planet_count=i.planets.length}}i.position&&(i.positionJ2000=new s.Vector3(i.position[2],-i.position[0],i.position[1]),i.positionJ2000.rotate(h,i.positionJ2000)),this._dbObj[e][i.exo_id]=i,this._dbArray[e].push(i)}}else console.error("Invalid Exo database magic number")}}catch(t){console.warn("e: ",t)}}_fromUTF8Array(t){let e,i="";for(e=0;e<t.length;e++){var s=t[e];if(s<128)i+=String.fromCharCode(s);else if(s>191&&s<224)i+=String.fromCharCode((31&s)<<6|63&t[e+1]),e+=1;else if(s>223&&s<240)i+=String.fromCharCode((15&s)<<12|(63&t[e+1])<<6|63&t[e+2]),e+=2;else{var a=((7&s)<<18|(63&t[e+1])<<12|(63&t[e+2])<<6|63&t[e+3])-65536;i+=String.fromCharCode(a>>10|55296,1023&a|56320),e+=3}}return i}}},,function(t,e){t.exports={Yerevan:{text:"Yerevan",latLng:[40.183333,44.516667]},Sydney:{text:"Sydney",latLng:[-33.867139,151.207114]},"La Paz":{text:"La Paz",latLng:[-16.49901,-68.146248]},Bangkok:{text:"Bangkok",latLng:[13.7234186,100.4762319]},Houston:{text:"Houston",latLng:[29.7632836,-95.3632715]},Vancouver:{text:"Vancouver",latLng:[49.263588,-123.138565]},Berlin:{text:"Berlin",latLng:[52.5234051,13.4113999]},Bogota:{text:"Bogota",latLng:[4.609866,-74.08205]},Manila:{text:"Manila",latLng:[14.6010326,120.9761599]},Lagos:{text:"Lagos",latLng:[6.441158,3.417977]},Tehran:{text:"Tehran",latLng:[35.696216,51.422945]},Istanbul:{text:"Istanbul",latLng:[41.012379,28.975926]},Marrakesh:{text:"Marrakesh",latLng:[31.631321,-8.012478]},Ulaanbaatar:{text:"Ulaanbaatar",latLng:[47.921378,106.90554]},"New York":{text:"New York",latLng:[40.7142691,-74.0059729]},"Los Angeles":{text:"Los Angeles",latLng:[34.0522342,-118.2436849]},Beijing:{text:"Beijing",latLng:[39.904667,116.408198]},Tokyo:{text:"Tokyo",latLng:[35.6894875,139.6917064]},Johannesburg:{text:"Johannesburg",latLng:[-26.201452,28.045488]},Delhi:{text:"Delhi",latLng:[28.635308,77.22496]},Moscow:{text:"Moscow",latLng:[55.755786,37.617633]},Paris:{text:"Paris",latLng:[48.8566667,2.3509871]},"Rio De Janeiro":{text:"Rio De Janeiro",latLng:[-22.9035393,-43.2095869]},"Mexico City":{text:"Mexico City",latLng:[19.4270499,-99.1275711]},London:{text:"London",latLng:[51.5001524,-.1262362]},Cairo:{text:"Cairo",latLng:[30.064742,31.249509]},Mumbai:{text:"Mumbai",latLng:[19.017656,72.856178]},Karachi:{text:"Karachi",latLng:[24.893379,67.028061]},Honolulu:{text:"Honolulu",latLng:[21.3069444,-157.8583333]},Anchorage:{text:"Anchorage",latLng:[61.2180556,-149.9002778]},Shanghai:{text:"Shanghai",latLng:[31.230708,121.472916]},Miami:{text:"Miami",latLng:[25.7742657,-80.1936589]},"Kansas City":{text:"Kansas City",latLng:[39.0997265,-94.5785667]},"Buenos Aires":{text:"Buenos Aires",latLng:[-34.6084175,-58.3731613]},Oslo:{text:"Oslo",latLng:[59.9138204,10.7387413]},Singapore:{text:"Singapore",latLng:[1.352083,103.819836]},Lisbon:{text:"Lisbon",latLng:[38.7071631,-9.135517]},Rome:{text:"Rome",latLng:[41.8954656,12.4823243]},Perth:{text:"Perth",latLng:[-31.9554,115.85859]},Darwin:{text:"Darwin",latLng:[-12.461334,130.841904]},Christchurch:{text:"Christchurch",latLng:[-43.531637,172.636645]},Guam:{text:"Guam",latLng:[13.444304,144.793731]}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312),r=i(35),o=i(296);e.default=class extends s.PureComponent{constructor(t){super(t),this.state={},this.menu=a.a.createRef()}componentDidMount(){this.sideInterval=setInterval(()=>{let t=this.props.scene.get("camera").getParent();if(t){let e=t.getName();if(!e)return;let i=!1;if("earth"===this.props.controller&&"cameraTarget"===e){let t=this.props.getManager("camera").readCameraAE();if(t){let{azimuth:e,elevation:s}=t;s+="°",e>=157.5&&e<=202.5&&(e+="°S"),e>=247.5&&e<=292.5&&(e+="°W"),(e>=337.5||e<=22.5)&&(e+="°N"),e>=67.5&&e<=112.5&&(e+="°E"),e>202.5&&e<247.5&&(e+="°SW"),e>292.5&&e<337.5&&(e+="°NW"),e>22.5&&e<67.5&&(e+="°NE"),e>112.5&&e<157.5&&(e+="°SE"),i=!0,this.setState({azimuth:e,elevation:s})}}const s=this.props.scene.get("camera"),a=r.Vector3.pool.get();s.getPositionRelativeToEntity(a,r.Vector3.Zero,this.props.scene.get("earth"));const n=o.default.convertToDistanceString(a.magnitude()-this.props.scene.get("earth").getOcclusionRadius());this.setState({distanceFromEarth:n,telescope:i}),r.Vector3.pool.release(a),this.props.getManager("scene").setGalaxySpriteAlpha(s)}},1e3/24)}componentWillUnmount(){this.sideInterval&&clearInterval(this.sideInterval)}render(){const{azimuth:t,elevation:e,distanceFromEarth:i,telescope:s}=this.state;return a.a.createElement("div",{id:"sideId",className:"toggle-ui-desktop toggle-ui-mobile"},i&&"earth"!==this.props.controller&&a.a.createElement("div",{className:"leftInfoPanel"},a.a.createElement("p",null,"You are"),a.a.createElement("div",{className:"dynamicInfo"},i),a.a.createElement("p",null,"from Earth")),s&&a.a.createElement("div",{className:"leftInfoPanel telescope"},a.a.createElement("p",{className:"dynamicInfo"},"Telescope Bearing"),a.a.createElement("div",{className:"dynamicInfo"},a.a.createElement(n.default,{className:"icon",src:window.config.moduleUrl+"assets/svg/doubleArrowHorizontal.svg"}),a.a.createElement("span",null,t)),a.a.createElement("div",{className:"dynamicInfo"},a.a.createElement(n.default,{className:"icon",src:window.config.moduleUrl+"assets/svg/doubleArrowVertical.svg"}),a.a.createElement("span",null,e))))}}},,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312),r=i(319),o=i.n(r),l=i(296),c=i(320),h=i(321),d=i(322),u=i(328),p=i(330),m=i(323),g=i(332),_=i(35),f=i(305);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={init:!1,lightOn:!1,panelIsOpen:!1,showHoverDiv:!1,hoverPosition:{x:-999,y:-999}},window.exoUI?window.exoUI.footer=this:window.exoUI={footer:this},this.mousePosition={x:-999,y:-999},this.isHoverOverEarth=!1,this.mouseOverInterval=0,this.faq=a.a.createRef(),this.settingsToggle=a.a.createRef(),this.settings=a.a.createRef(),this.infoPanel=a.a.createRef(),this.habZone=a.a.createRef(),this.alert=a.a.createRef(),this.hoverDiv=a.a.createRef(),this._update=this._update.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._updateMousePosition=this._updateMousePosition.bind(this),this._toggleLight=this._toggleLight.bind(this),this._generateFooterNav=this._generateFooterNav.bind(this),this._handleFooterButton=this._handleFooterButton.bind(this),this.handleProps=this.handleProps.bind(this),this.handlePanelChange=this.handlePanelChange.bind(this),c.default.initialize()}componentDidMount(){this.props.pioneer.addCallback(this._update,!0),this.mounted=!0,window.addEventListener("mousemove",this._mouseMoveHandler,!1),this.mouseOverInterval=setInterval(this._updateMousePosition,20),window.addEventListener?window.addEventListener("message",this.handleMessage.bind(this),!1):window.attachEvent&&window.attachEvent("onmessage",this.handleMessage.bind(this))}handleMessage(t){if(!t||!t.data||!t.data.type)return;let{type:e,text:i}=t.data;switch(e){case"hideFooter":document.getElementById("footerBarId").style.display="none",document.getElementById("dropUpId").style.bottom="10px",document.getElementById("footerTitleId").style.bottom="0px";break;case"hideSide":document.getElementById("sideId").style.display="none";break;case"changeTitle":document.getElementById("entryTitleId").innerText=i;break;case"changeSubtitle":document.getElementById("entrySubtitleId").innerText=i}}componentWillUnmount(){this.mounted=!1,this.props.pioneer.removeCallback(this._update),clearInterval(this.mouseOverInterval),window.removeEventListener("mousemove",this._mouseMoveHandler)}_update(){this.mounted&&(this.isHoverOverEarth&&!this.isAlertVisible||this.setState({showHoverDiv:!1}),this.isHoverOverEarth=!1)}setHoverPosition(t){this.alert.current.state.open||(this.setState({showHoverDiv:t,hoverPosition:this.mousePosition}),this.isHoverOverEarth=t)}async _mouseMoveHandler(t){let e=t||window.event;this.state.showHoverDiv&&(e.clientX===this.mousePosition.x&&this.clientY===this.mousePosition.y||(this.mousePosition={x:e.clientX,y:e.clientY}))}_updateMousePosition(){this.setState({hoverPosition:this.mousePosition})}_toggleLight(){let t=!this.state.lightOn;this.setState({lightOn:t},()=>{this.props.getManager("scene").toggleLight()})}handleProps(){let{info:t,starField:e,getManager:i}=this.props;if(!t)return;let s={},a=null,n=null,r=[];if(i("scene").showKeplerCandidates(!1),i("scene").showTESSCandidates(!1),"star"===t.controller){let e=t.id?i("content").getStarInfo(t.id):null;if(!e)for(let i=0;i<f.length;i+=1)t.id===f[i].exo_id&&(e=f[i]);if(e){let t=i("content").getDB("stars",!0);if((t=t.filter(t=>t.starType===e.starType&&t.exo_id!==e.exo_id)).length>3){let e=[];for(let i=0;i<3;i++)e.push(t.splice(Math.random()*(t.length-1),1).pop());t=e}({footerTitle:n,footerButtons:r}=this._generateFooterNav("star",{title:e.starType,buttons:t}))}}else if("planet"===t.controller&&t.id){let e=t.id?i("content").getDB("planets")[t.id]:null;if(e){switch(e.plType){case"Neptunian":case"sub-Neptunian":({footerTitle:n,footerButtons:r}=this._generateFooterNav("planet",[{text:"Neptune-likes",params:'["Planet Types", "Neptune-like"]'},{text:e.pl_discmethod+" Discoveries",params:`["Detection Method", "${e.pl_discmethod}"]`}]));break;case"Gas Giant":case"Jovian":case"super-Jovian":case"sub-Jovian":({footerTitle:n,footerButtons:r}=this._generateFooterNav("planet",[{text:"Gas Giants",params:'["Planet Types", "Gas Giant"]'},{text:e.pl_discmethod+" Discoveries",params:`["Detection Method", "${e.pl_discmethod}"]`}]));break;case"Terrestrial":({footerTitle:n,footerButtons:r}=this._generateFooterNav("planet",[{text:"Terrestrials",params:'["Planet Types", "Terrestrial"]'},{text:e.pl_discmethod+" Discoveries",params:`["Detection Method", "${e.pl_discmethod}"]`}]));break;case"super-Terrestrial":case"Super Earth":({footerTitle:n,footerButtons:r}=this._generateFooterNav("planet",[{text:"Super Earths",params:'["Planet Types", "Super Earth"]'},{text:e.pl_discmethod+" Discoveries",params:`["Detection Method", "${e.pl_discmethod}"]`}]));break;case"Unknown":({footerTitle:n,footerButtons:r}=this._generateFooterNav("planet",[{text:"Unknowns",params:'["Planet Types", "Unknown"]'},{text:e.pl_discmethod+" Discoveries",params:`["Detection Method", "${e.pl_discmethod}"]`}]))}r&&r.length<=3&&e.displayName.indexOf("Kepler")>=0&&r.push({text:"Kepler Discoveries",type:"page",params:'["Kepler Discoveries"]',f:this._handleFooterButton})}}else if("spacecraft"===t.controller&&t.id)({footerTitle:n,footerButtons:r}=this._generateFooterNav("mission",t));else if("earth"===t.controller)({footerTitle:n,footerButtons:r}=this._generateFooterNav("main"));else if(t.category){switch(({footerTitle:n,footerButtons:r}=this._generateFooterNav("main")),i("camera").goToGalaxyView(),t.category){case"all":break;case"GasGiant":i("scene").setFilter([{db:"planets",field:"visType",value:"Gas Giant"},{db:"planets",field:"visType",value:"Hot Jupiter"}]);break;case"NeptuneLike":i("scene").setFilter([{db:"planets",field:"visType",value:"Neptune-like"}]);break;case"SuperEarth":i("scene").setFilter([{db:"planets",field:"plType",value:"super-Terrestrial"}]);break;case"Terrestrial":i("scene").setFilter([{db:"planets",field:"plType",value:"Terrestrial",op:"equal"},{db:"planets",field:"plType",value:"Small",op:"equal"}]);break;case"Unknown":i("scene").setFilter([{db:"planets",field:"plType",value:"Unknown",op:"equal"}]);break;case"KeplerConfirmed":case"KeplerCandidates":case"KeplerAllDiscoveries":switch(t.category){case"KeplerConfirmed":i("scene").setFilter([{db:"planets",field:"pl_facility",value:"Kepler K2"}]);break;case"KeplerCandidates":i("scene").showKeplerCandidates(!0),i("scene").setFilter([{db:"planets",field:"pl_facility",value:"NA",op:"equal"}]);break;case"KeplerAllDiscoveries":i("scene").showKeplerCandidates(!0),i("scene").setFilter([{db:"planets",field:"pl_facility",value:"Kepler K2"}])}break;case"TESSConfirmed":case"TESSCandidates":case"TESSAllDiscoveries":switch(t.category){case"TESSConfirmed":i("scene").setFilter([{db:"planets",field:"pl_facility",value:"TESS"}]);break;case"TESSCandidates":i("scene").showTESSCandidates(!0),i("scene").setFilter([{db:"planets",field:"pl_facility",value:"NA",op:"equal"}]);break;case"TESSAllDiscoveries":i("scene").showTESSCandidates(!0),i("scene").setFilter([{db:"planets",field:"pl_facility",value:"TESS"}])}break;default:console.warn("Category is not recognized:",t.category)}e&&e.starFade(!0,1e3)}else if(t.observatory){({footerTitle:n,footerButtons:r}=this._generateFooterNav("main"));let{observatory:s}=t;switch(s=s.replace(/_/g," ")){case"XO Project":s="XO";break;case"KELT-North":case"KELT-South":s="KELT";break;case"SuperWASP-North":case"SuperWASP-South":s="SuperWASP"}i("scene").setFilter([{db:"planets",field:"pl_facility",value:s}]),a=i("scene").getFilterCount()||{},e&&e.starFade(!0,1e3)}s.lightOn=i("scene").isLightOn(),a&&(s.init=!0),s=Object.assign(s,{footerTitle:n,footerButtons:r}),this.setState(s,()=>{this.infoPanel&&this.infoPanel.current&&this.infoPanel.current.handleProps(),this.habZone&&this.habZone.current&&this.habZone.current.handleProps()})}_generateFooterNav(t,e){let i="",s=[];switch(t){case"main":i="VIEW FROM",s=[{text:"SPACE",type:"path",f:this._handleFooterButton},{text:"EARTH",type:"path",params:"earth",f:this._handleFooterButton}];break;case"mission":i="MISSIONS",s=l.default.MISSIONS.filter(t=>t.id!==e.id).map(t=>({text:t.name,type:"path",params:`spacecraft/${t.id}`,f:this._handleFooterButton}));break;case"planet":i="MORE PLANETS LIKE THIS",s=e.map(t=>({text:t.text,type:"page",params:t.params,f:this._handleFooterButton}));break;case"star":i="MORE SYSTEMS WITH "+e.title+" STARS",s=e.buttons.map(t=>({text:t.displayName,type:"path",params:`system/${t.id}`,f:this._handleFooterButton}))}return{footerTitle:i,footerButtons:s}}_handleFooterButton(t){switch(t.currentTarget.dataset.type){case"path":{let e=t.currentTarget.dataset.params||"/";"/"===e&&this.props.resetHomeView(),this.props.MainPathChanged(e);break}case"page":{let e=JSON.parse(t.currentTarget.dataset.params);this.props.openGalleryPage(...e);break}}}handlePanelChange(t){this.setState({panelIsOpen:t})}getLocationName(t,e){let i=this.props.getManager("camera").formatLatLon(t,e);return c.default.getLocationName(t,e).then(t=>t).catch(()=>i.lat+", "+i.lon)}async pickedLocation(t){let e=this.props.scene.get("earth"),{latitude:i,longitude:s}=this.props.getManager("camera").getLatLon(t,e),n=await this.getLocationName(i,s);this.setState({location:n},()=>{this.alert.current.open({message:a.a.createElement("p",{className:"location"},this.state.location),bgClick:this.alert.current.close,button:{text:"Go",f:()=>{this.alert.current.close(),this.props.getManager("camera").flyToSurface(e,t),setTimeout(()=>{this.handleProps()},1e3)}}})})}convertLatLonToPosition(t,e){t=_.MathUtils.degToRad(t),e=_.MathUtils.degToRad(e);const i=this.props.scene.get("earth").get("spheroid").getSpheroid();let s=new _.Vector3,a=new _.LatLonAlt(t,e);return i.xyzFromLLA(s,a),s}render(){let{info:t,isMobile:e,isLandscape:i,pioneer:s,scene:r,getManager:l,openDetailPanel:c}=this.props,{lightOn:_,location:f,panelIsOpen:y,showHoverDiv:b,footerTitle:T,footerButtons:v}=this.state,E=a.a.createElement(a.a.Fragment,null,a.a.createElement(h.default,{ref:this.alert}),"planet"===t.controller&&a.a.createElement("div",{key:Math.random(),className:"hypotheticalVisualization"},a.a.createElement("label",null,"Hypothetical visualization")),"system"===t.controller&&a.a.createElement(p.default,{ref:this.habZone,isMobile:e,pioneer:s,getManager:l,id:t.id}),a.a.createElement(g.default,{ref:this.infoPanel,pioneer:s,scene:r,starField:this.props.starField,open:y,onPanelChange:this.handlePanelChange,isMobile:e,isLandscape:i,location:f,getManager:l,openDetailPanel:c,info:t}));return e?a.a.createElement("div",null,E):(b&&this.hoverDiv.current?(this.hoverDiv.current.style.display="block",this.hoverDiv.current.style.left=this.mousePosition.x+"px",this.hoverDiv.current.style.top=this.mousePosition.y+"px"):this.hoverDiv.current&&(this.hoverDiv.current.style.display="none"),a.a.createElement(a.a.Fragment,null,b&&t&&"earth"===t.controller&&a.a.createElement("div",{id:"earthHoverDiv",ref:this.hoverDiv},a.a.createElement("span",{className:"hover_message"},a.a.createElement("span",{className:"target_image"},a.a.createElement(n.default,{src:window.config.moduleUrl+"assets/svg/crosshairs_circle.svg"})),a.a.createElement("h3",{className:"hover_text"},"Click anywhere on the globe"))),a.a.createElement("footer",{id:"footerId"},E,a.a.createElement("div",{id:"footerBarId",className:"footerBar"},T&&a.a.createElement("label",{className:"footerLink"},T),v&&v.map((e,i)=>{let s=!1;return t&&t.controller&&("SPACE"===e.text&&"home"===t.controller?s=!0:"EARTH"===e.text&&"earth"===t.controller&&(s=!0)),a.a.createElement("button",{key:i,"data-type":e.type,"data-params":e.params,className:s?"footerButton footerButtonActive":"footerButton",onClick:e.f},e.text)}),a.a.createElement("div",{className:"footerBarRight"},a.a.createElement(d.default,{default:t&&"home"===t.controller}),a.a.createElement("div",{className:"footerSVGDiv"},a.a.createElement(n.default,{className:_?"svg svgWhite footerSVG":"svg svgBlue footerSVG",src:window.config.moduleUrl+"assets/svg/light.svg",onClick:this._toggleLight})),a.a.createElement("div",{ref:this.settingsToggle,className:"footerSVGDiv"},a.a.createElement(u.default,{ref:this.settings,pioneer:s,scene:r,toggleButton:this.settingsToggle,getManager:l}),a.a.createElement(n.default,{className:"svg svgBlue footerSVG",src:window.config.moduleUrl+"assets/svg/settings.svg",onClick:()=>{this.settings.current.toggle()}})),a.a.createElement("div",{className:"footerSVGDiv"},a.a.createElement(n.default,{className:"svg svgBlue footerSVG",src:window.config.moduleUrl+"assets/svg/faq.svg",onClick:()=>{this.faq.current.open()}})),a.a.createElement("div",{className:"footerSVGDiv",onClick:()=>{let{fullScreen:t}=this.state;this.setState({fullScreen:!t}),o.a.toggle()}},a.a.createElement("span",{className:"fullscreen"+(this.state.fullScreen?" on":"")}))),a.a.createElement(m.default,{ref:this.faq,isMobile:e})))))}}},,function(t,e,i){"use strict";i.r(e);class s{static async getLocationName(t,e){return null===this._geocoder?"":new Promise((i,s)=>{this._geocoder.geocode({location:{lat:t,lng:e}},(function(t,e){if("OK"===e&&t[0]){const e={};for(let i=0;i<t[0].address_components.length;i++){const s=t[0].address_components[i];s.types.includes("country")&&(e.country=s.long_name),s.types.includes("administrative_area_level_1")&&(e.adminArea1=s.long_name),s.types.includes("administrative_area_level_2")&&(e.adminArea2=s.long_name),s.types.includes("administrative_area_level_3")&&(e.adminArea3=s.long_name),s.types.includes("administrative_area_level_4")&&(e.adminArea4=s.long_name),s.types.includes("locality")&&(e.locality=s.long_name)}const a=[];e.country&&a.unshift(e.country),e.adminArea1&&a.unshift(e.adminArea1),e.locality&&a.unshift(e.locality),e.adminArea4&&a.length<3&&a.unshift(e.adminArea4),e.adminArea3&&a.length<3&&a.unshift(e.adminArea3),e.adminArea2&&a.length<3&&a.unshift(e.adminArea2),0===a.length&&s("Unknown location"),i(a.join(", "))}else s("Unknown location")}))})}static async initialize(){const t=document.createElement("script");t.async=!0,t.defer=!0,t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDiZRdV8ZyjHFfy5P6KWfhjIFUoswuajQ",t.onload=()=>{this._geocoder=new google.maps.Geocoder},document.head.appendChild(t)}}s._geocoder=null,e.default=s},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={open:!1,button:null,message:""},this._alertWindow=a.a.createRef(),this._handleBgClick=this._handleBgClick.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}open(t={}){t.open=!0,this.setState(t,()=>{document.addEventListener("mousedown",this._handleBgClick,!1)})}close(){this.setState({open:!1},()=>{document.removeEventListener("mousedown",this._handleBgClick)})}_handleBgClick(t){if(this._alertWindow.current.contains(t.target))return;const{bgClick:e}=this.state;e&&e()}render(){const{button:t,message:e,open:i}=this.state,{className:s}=this.props;return i?a.a.createElement("div",{className:"alertDiv"+(s?" "+s:"")},a.a.createElement("div",{ref:this._alertWindow,className:"alertWindow"},e&&a.a.createElement("label",null,e),t&&a.a.createElement("button",{onClick:t.f},t.text))):null}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(323),r=i(312),o=i(325),l=i.n(o);i(327);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.neverShow=a.a.createRef(),this.faq=a.a.createRef(),this.closeHelper=this.closeHelper.bind(this),this.state={hide:!1,open:!!t.default}}componentDidMount(){let t=l.a.load("hideHelper");"true"===t||!0===t?this.setState({hide:!0,open:!1}):this.setState({hide:!1})}closeHelper(){l.a.save("hideHelper",this.neverShow.current.checked),this.setState({open:!1})}render(){let{open:t,hide:e}=this.state,{isMobile:i}=this.props;return a.a.createElement("div",null,!i&&a.a.createElement("div",{className:"helperFooterButton",onClick:()=>{this.setState({open:!t})}},a.a.createElement("label",null,"What am I looking at"),a.a.createElement(r.default,{className:"svg svgWhite helperSVG",src:window.config.moduleUrl+"assets/svg/faq.svg"})),t&&a.a.createElement("section",{className:"helperDiv"},a.a.createElement("div",{style:{height:window.innerHeight,display:"flex"}},a.a.createElement("div",{className:i?"helperContentMobileDiv scrollable":"helperContentDiv"},a.a.createElement("button",{className:"headerButton closeButton helperClose",onClick:this.closeHelper},a.a.createElement("span",{className:"buttonIcon close"})),a.a.createElement("label",{className:"helperTitle"},"Did you know?"),a.a.createElement("label",{className:"helperLabel"},"On average, it is estimated that there is at least one planet for every star in the galaxy. That means there's something on the order of billions of planets in our galaxy alone, many in Earth's size range. These planets outside of our solar system are known as ",a.a.createElement("label",{style:{color:"white"}},"Exoplanets"),"."),a.a.createElement("label",{className:"helperLabel"},"Highlighted stars are known to have, or have good prospects for, orbiting exoplanets. Once you click the ‘Explore Now’ button below, you will be able to select any of the highlighted stars to learn more about these confirmed planets and compare them to our solar system or navigate through the filters."),a.a.createElement("div",{style:{textAlign:"center"}},a.a.createElement("button",{className:"helperExploreButton",onClick:this.closeHelper},"Explore Now")),a.a.createElement("div",{className:"helperImageDiv"},a.a.createElement("img",{alt:"4-stars-centered",src:window.config.moduleUrl+"assets/image/generic/4-stars-centered.png",onClick:this.closeHelper})),a.a.createElement("div",{style:{textAlign:"center"}},a.a.createElement("input",{ref:this.neverShow,type:"checkbox",id:"box-1",checked:e,onChange:()=>{this.setState({hide:!e})}}),a.a.createElement("label",{htmlFor:"box-1"},"Please do not show this upon next visit."),a.a.createElement("button",{className:"helperFAQ",onClick:()=>{this.closeHelper(),this.faq.current.open()}},"Eyes on Exoplanets FAQ"))))),a.a.createElement(n.default,{ref:this.faq,isMobile:i}))}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s);i(324);const n=[{text:"What is an exoplanet?",subText:['An exoplanet is a planet outside our solar system, usually orbiting another star. They are also sometimes called "extrasolar planets," "extra-" implying that they are outside of our solar system.'],link:window.config.mbAPI+"/faq/3/what-is-an-exoplanet/"},{text:"What are exoplanets made of?",subText:["The exoplanets for which astronomers are able to measure both their sizes (diameters) and masses, have densities that are suggestive of compositions ranging from very rocky (like Earth and Venus) to very gas-rich (like Jupiter and Saturn). Exoplanets are made up of elements similar to that of the planets in our solar system, but their mixes of those elements may differ. Some planets may be dominated by water or ice, while others are dominated by iron or carbon."]},{text:"Are there any exoplanets like Earth?",subText:['Not yet. We haven’t found a planet that can support life like Earth. So far, our home is unique in the universe. We have found many Earth-sized rocky exoplanets, some of which are in the habitable zones of their stars. The next step in studying them is to analyze their atmospheres for “biosignature" molecules, which may be a sign of life.']},{text:"Are other solar systems like ours?",subText:["Other solar systems, called planetary systems, come in many shapes and sizes. When scientists first started searching for planetary systems, they expected them to look like our solar system, with inner rocky planets and outer cold gas giants and ice planets. But some solar systems pack many planets into very compact orbits with short orbital periods, while others have only a few planets with orbits that last hundreds of years. Some planetary systems have Jupiter-like giants that orbit their star in a few hours, and are hot enough to melt metal. Some exoplanets even orbit multiple stars. So far astronomers have detected relatively few planetary systems with architectures like our solar system."]},{text:"Do exoplanets have stars like our Sun?",subText:["Yes, some do. Kepler-452b is an example of a planet that orbits a star like our sun. Both our sun and Kepler-452 are G dwarf stars, which make up only 3 percent of the stars in the universe. More common are M dwarf stars– small red stars that make up 75 percent of all the stars we know.","Other stars in our universe range from massive and hot O-type stars to the small and cool M dwarf stars like TRAPPIST-1 and Proxima Centauri. Scientists have found planets around five star types that range from red, to orange, to bluish-white. Some planets even orbit two or three stars at a time.","(Note: “Dwarf” is actually the name for a regular-sized adult star, distinguishing them from giant stars. An example of a giant star is Rigel, the blue supergiant found in the constellation Orion)."]},{text:"How do exoplanets get their names?",subText:['Exoplanet names can look long and complicated at first, but they have a logic behind them that is important to scientists cataloging thousands of planets. Let’s use HD 189733 b (a blue-ish planet where it may rain glass sideways) as an example. The first part of the name is usually the telescope or survey that found it. In this case "HD" stands for the "Henry Draper Catalogue,” a widely-used star catalog. The number 189733 is the order in which the star was catalogued by position (the 189,733rd star added to the catalog). The lowercase letter "b" stands for the planet, in the order in which the planet was found. The first planet found is always named b, with ensuing planets named c, d, e, f and so on.'],link:window.config.mbAPI+"/faq/20/how-do-exoplanets-get-their-names/"},{text:"Is there life on other planets?",subText:["Earth is the only planet we know of with life on it...so far. Scientists are searching the galaxy for planets similar to Earth, and signs of life. As we see on Earth, life can adapt to conditions that human beings would consider very harsh (temperature, radiation, salinity, acidity, aridity, etc). So it may be possible that life started on other worlds and adapted to conditions quite alien to what we are used to."],link:window.config.mbAPI+"/faq/5/is-there-life-on-other-planets/"},{text:"How many exoplanets are there?",subText:['To date, over 4,000 exoplanets have been discovered and considered "confirmed." However, there are nearly 3,000 other "candidate" exoplanet detections that require further observations in order to say for sure whether or not the exoplanet is real.'],link:window.config.mbAPI+"/faq/6/how-many-exoplanets-are-there/"},{text:"Where are exoplanets?",subText:['In a lot of places! Most of the exoplanets discovered so far are in a relatively small region of our galaxy, the Milky Way. ("Small" meaning within thousands of light years of the solar system). That is as far as current telescopes have been able to probe.'],link:window.config.mbAPI+"/faq/7/where-are-exoplanets/"},{text:"What is the closest exoplanet to Earth?",subText:['Proxima Centauri b, which is about four light-years away. Its mass is consistent with it being slightly larger than Earth. Based on what we know about exoplanets, and planets in our solar system similar in mass to Earth, it is most likely a rocky planet. Proxima Centauri b orbits in the "habitable zone" of its star, which means it could have liquid water on its surface– if it has an atmosphere which could support it.',"Calculations suggest that the one side of the exoplanet Proxima b faces its star all the time, which would make for a very different atmosphere and weather than we have on Earth. Its parent star, Proxima Centauri, is a dim red dwarf star that gives off about 600 times less light than our sun. Proxima Centauri is the closest star to the Earth after our sun, but it is still about 9,000 times further than planet Neptune."]},{text:"How do we find exoplanets?",subText:["The successes of discovering exoplanets in recent decades seem to be telling us that the galaxy is teeming with trillions of exoplanets, but finding them isn't easy. Planets are typically billions of times fainter than the stars they orbit, and they are incredibly distant. The challenges of observing extrasolar planets stem from four basic facts:","PPP Planets don't produce any light of their own, except when they’re recently formed (i.e. young).","PPP They are an enormous distance from us.","PPP They are lost in the blinding glare of their parent stars.","'PPP Their sizes and masses are typically much, much smaller than that of the stars they orbit.","It’s pretty rare for astronomers to see an exoplanet through their telescopes the way you might see Mars through a telescope from Earth. That’s called direct imaging, and only a handful of exoplanets have been found this way (and these tend to be young gas giant planets orbiting very far from their stars).","Most exoplanets are found through indirect methods: measuring the dimming of a star that happens to have a planet pass in front of it, or monitoring the spectrum of a star for the tell-tale signs of a planet pulling on its star and causing its light to subtly Doppler shift. NASA’s Kepler Space Telescope finds thousands of planets by observing “transits,” the slight dimming of light from a star when its tiny planet passes between it and our telescopes. Other methods include gravitational lensing, the “wobble method,” and direct imaging."]},{text:"Will a person ever go to an exoplanet?",subText:["Not anytime soon, given the enormous distances between the stars and the time it would take to travel between them with our current technology. Perhaps one day a robot will visit an exoplanet like the rovers on Mars. But that day too is still very far in the future. First, we have to learn how to travel much faster and further in space than we’ve ever gone before. Keeping humans alive to complete such a long journey is probably the biggest challenge. Today, NASA is concentrating on the steps to get humans to Mars, which is our next-door neighbor. In the meantime, you can “stand” on an illustration of an exoplanet surface with our virtual reality."]},{text:"Will we ever take real images of exoplanets?",subText:["Yes! In recent years, NASA has taken many some images of exoplanets that are light-years away. In the images, the planets sometimes look like faint spots next to blotted out regions (where the bright light of the planet's star has been subtracted). Examples of imaged planets orbit the bright stars Fomalhaut, HR 8799, and Beta Pictoris. The upcoming James Webb Space Telescope and WFIRST missions will image more exoplanets around nearby stars. The big challenge for NASA is to image Earth-like planets orbiting nearby stars, which tend to be about 10 billion times fainter than their stars."]},{text:"How many telescopes are looking for exoplanets?",subText:["There are telescopes in space, on the ground and even in the air that are being used to hunt exoplanets. NASA has three telescopes in space currently studying exoplanets – one observatory dedicated to discovering exoplanets (the Transiting Exoplanet Survey Satellite), and two powerful, general-purpose observatories that conduct a wide range of astronomical observations, including exoplanet science (Hubble Space Telescope, Spitzer Space Telescope). More than two dozen telescopes on the ground are being used to discover and characterize exoplanets, ranging from small robotic observatories to large telescopes like the Keck Observatories in Hawaii. Even SOFIA, NASA's infrared observatory built into a Boeing 747-SP airplane, has conducted some exoplanet observations."]},{text:"Do any exoplanets have rings?",subText:["Rings orbit all of the gas giant planets in our solar system. They range from being very dusty (Jupiter), to very icy (Saturn), to very carbon-rich (Uranus and Neptune). This hints that rings may be common around cold gas giant exoplanets orbiting other stars too. A very large ring system has been detected around one candidate exoplanet, J1407 b; however the rings cover tens of millions of miles. It may be a disk of material forming exomoons rather than ring system similar to Saturn's."]},{text:"Do exoplanets have water on them?",subText:["Scientists have found water molecules in the atmospheres of more than one exoplanet, but some of those planets are very hot and probably not suitable for life as we know it. Scientists have yet to discover liquid water, like oceans or lakes. They are looking for exoplanets with liquid water in an area called the “habitable zone” around stars."]},{text:"What is the habitable zone or “Goldilocks zone”?",subText:["The habitable zone is the area around a star where it is not too hot and not too cold for liquid water to exist on the surface of surrounding planets."],link:window.config.mbAPI+"/faq/15/what-is-the-habitable-zone-or-goldilocks-zone/"}],r=[{text:"Why does NASA's planet count differ from other databases?",subText:"Different online databases of exoplanet discoveries have varying criteria for what they count as an exoplanet discovery, and some are more lenient than others. There's no universally accepted 'official' count. NASA's Exoplanet Archive, the database this visualization uses for its exoplanet count, requires that planets be documented in a published scientific paper that's been reviewed and approved by other astronomers. It's more strict than some other online databases."},{text:"I heard about a new exoplanet that isn't listed under 'latest discoveries' in this visualization. Why isn't it listed there?",subText:"A new exoplanet will appear in this visualization once the discovery has been published in a refereed scientific journal and vetted by scientists at the NASA Exoplanet science Institute (NExScI). Otherwise, it will not be shown, even though the discovery may have been announced in a news release or in media reports."},{text:"Why is 2015 considered the 20th anniversary of exoplanet discoveries?",subText:"The year 2015 marks the 20th anniversary of the discovery of 51 Pegasi b, which is widely acknowledged as the first true exoplanet to be identified in orbit around a normal star. However, other planetary bodies outside our solar system were detected earlier than this, including HD 1147672 b (or Latham's Planet) which was initially thought to be a brown dwarf and was only later confirmed to be a planet. Additionally, the existence of so-called 'pulsar planets,' rocky worlds orbiting the stellar remnant of a supernova, were confirmed as early as 1992."},{text:"Why do the planet counts displayed for some planet types in “Eyes on Exoplanets” differ slightly from the counts shown on the Exoplanet Exploration website?",subText:"In some cases, there is insufficient data to visualize either the planet’s orbit, radius, or mass, and these planets are omitted from “Eyes on Exoplanets.” If future astronomical observations fill in the missing gaps, these planets will be included."}];e.default=class extends s.PureComponent{constructor(t){super(t),this.state={open:!1,indexTop:null,indexSecond:null},this.open=this.open.bind(this),this.close=this.close.bind(this)}open(){this.setState({open:!0})}close(){this.setState({open:!1})}render(){const{open:t,indexTop:e,indexSecond:i}=this.state,{isMobile:s}=this.props;return a.a.createElement("div",{className:"faqWindow overlay"+(t?" active scrollable":" hidden")},s?a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))):a.a.createElement("button",{className:"headerButton closeButton big",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})),a.a.createElement("div",{className:"faqTopSection"},a.a.createElement("div",{className:"faqTitleDiv"},a.a.createElement("h2",{className:"faqTitle"},"Frequently Asked Questions"),a.a.createElement("a",{href:window.config.mbAPI+"/eyes-on-exoplanets-web/",target:"_blank",rel:"noopener noreferrer",className:"faqLink small"},"About Eyes on Exoplanets ›")),n.map((t,i)=>a.a.createElement("div",{key:i},a.a.createElement("a",{href:"#",className:"faqQuestionTitle",onClick:()=>{e===i?this.setState({indexTop:null}):this.setState({indexTop:i})}},t.text),e===i&&t.subText.map((t,e)=>t.indexOf("PPP")>=0?(t=t.replace("PPP",""),a.a.createElement("ul",{key:e},a.a.createElement("li",{className:"faqSubTextList"},t))):11===i?(t=t.replace("virtual reality.",""),a.a.createElement("div",null,a.a.createElement("p",{className:"faqSubText"+(t.indexOf("Note:")>=0?" italic":"")},t,a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"faqLink",href:window.config.mbAPI+"/trappist1/#VR360"},"virtual reality"),"."))):a.a.createElement("p",{key:e,className:"faqSubText"+(t.indexOf("Note:")>=0?" italic":"")},t)),e===i&&t.link&&a.a.createElement("div",{className:"faqDetailedAnswerContainer"},a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.link,className:"faqDetailedAnswer"},"detailed answer ›"))))),a.a.createElement("div",{className:"faqBottomSection"},r.map((t,e)=>a.a.createElement("div",{key:e},a.a.createElement("a",{href:"#",className:"faqQuestionTitle",onClick:()=>{i===e?this.setState({indexSecond:null}):this.setState({indexSecond:e})}},t.text),i===e&&a.a.createElement("p",{className:"faqSubText"},t.subText)))),a.a.createElement("div",{className:"faqDoneDiv"},a.a.createElement("button",{className:"faqDone",onClick:this.close},"Close")))}}},function(t,e,i){},,,function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s);i(329);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={open:!1,showLabels:!0,showUI:!0,lightOn:!1,sprite:0},this._settingsRef=a.a.createRef(),this._handleBgClick=this._handleBgClick.bind(this),this._createSettingEntry=this._createSettingEntry.bind(this),this._showUI=this._showUI.bind(this),this._showLabels=this._showLabels.bind(this),this._toggleLight=this._toggleLight.bind(this),this._setSprite=this._setSprite.bind(this),this.handleProps=this.handleProps.bind(this),this.toggle=this.toggle.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}handleProps(){let t=this.props.getManager("scene").isLightOn();t!==this.state.lightOn&&this.setState({lightOn:t})}toggle(){this.state.open?this.close():this.open()}open(){this.setState({open:!0},()=>{this.props.isMobile||document.addEventListener("click",this._handleBgClick,!1)})}close(){this.setState({open:!1},()=>{this.props.isMobile||document.removeEventListener("click",this._handleBgClick)})}_handleBgClick(t){let{toggleButton:e}=this.props;e.current&&e.current.contains(t.target)||this._settingsRef.current&&this._settingsRef.current.contains(t.target)||this.close()}_createSettingEntry(t,{className:e="",titleClass:i="",entry:s=null,checkStatus:n=!1,onChange:r=null}={}){return a.a.createElement("div",{className:"settingsEntry "+e},a.a.createElement("div",null,a.a.createElement("label",{className:i},t)),null===s?a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement("label",{className:"switch"},a.a.createElement("input",{type:"checkbox",checked:n,onChange:r}),a.a.createElement("span",{className:"slider round"}))):s)}_showLabels(t){let e=t.currentTarget.checked;this.setState({showLabels:e});for(let t=0;t<this.props.scene.getNumEntities();t++){let i=this.props.scene.getEntity(t).getComponentByType("div");i&&i.getDiv()&&i.setEnabled(e)}}_showUI(){const{isMobile:t}=this.props,{showUI:e}=this.state,i=t?"toggle-ui-mobile":"toggle-ui-desktop",s=document.getElementsByClassName(i);if(s){for(let t=0;t<s.length;t++){s[t].style.opacity=e?0:1}this.setState({showUI:!e})}}_toggleLight(t){let e=t.currentTarget.checked;this.setState({lightOn:e},()=>{this.props.getManager("scene").toggleLight()})}_setSprite(t){let e=parseInt(t.currentTarget.getAttribute("value"));this.setState({sprite:e},()=>{this.props.getManager("scene").setStarSprite(this.state.sprite)})}render(){let{open:t,showLabels:e,showUI:i,lightOn:s,sprite:n}=this.state;const{isMobile:r}=this.props;return a.a.createElement("div",{className:"settings"+(r?" overlay":"")+(t?" active":" hidden"),ref:this._settingsRef},r&&a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))),this._createSettingEntry("SETTINGS",{className:"first",titleClass:"settingsTitle",entry:!r&&a.a.createElement("button",{className:"headerButton closeButton small panelButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"}))}),this._createSettingEntry("Show labels",{checkStatus:e,onChange:this._showLabels}),this._createSettingEntry("Show user interface",{checkStatus:i,onChange:this._showUI}),r?this._createSettingEntry("Flood lighting",{checkStatus:s,onChange:this._toggleLight}):null,this._createSettingEntry("Star symbol",{className:"last",entry:a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement("div",{style:{display:"flex"}},[0,1,2].map(t=>a.a.createElement("div",{key:t,className:"settingsSubSVG _"+t+(n===t?" active":""),value:t,onClick:this._setSprite}))))}),a.a.createElement("div",{className:"footerSettingsSquare"}))}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(305);i(331);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={open:!0,on:!0,valid:!1},this._update=this._update.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.toggle=this.toggle.bind(this)}componentDidMount(){this.mounted=!0,this.props.pioneer.addCallback(this._update,!0),this.props.isMobile&&this.setState({open:!1}),this.handleProps()}componentWillUnmount(){this.props.pioneer.removeCallback(this._update),this.mounted=!1}handleProps(){let t=!1;if(this.props&&this.props.id){let e=this.props.getManager("content").getDB("stars")[this.props.id];if(!e)for(let t=0;t<n.length;t+=1)n[t].exo_id===this.props.id&&(e=n[t]);e&&e.habZone&&Array.isArray(e.habZone)&&2===e.habZone.length&&(t=e.habZone[0]*e.habZone[1]!=0)}this.setState({valid:t})}_update(){if(!this.mounted)return;const t=this.props.getManager("scene").isHabzoneOn();this.state&&this.state.on!==t&&this.setState({on:t})}open(){this.setState({open:!0})}close(t){t.stopPropagation(),this.setState({open:!1})}toggle(){this.setState({on:!this.state.on},()=>{const t=this.props.getManager("scene").setHabzone(this.state.on);try{this.props.getManager("camera").flyToObject(t,"system",this.state.on)}catch(t){}})}render(){const{open:t,on:e,valid:i}=this.state,{isMobile:s}=this.props;return i?a.a.createElement("div",{className:"hzDiv toggle-ui-desktop toggle-ui-mobile "+(t?"":" minimized"),onClick:s?this.open:null},a.a.createElement("div",{className:"content"},a.a.createElement("label",{className:"checkboxSquare"},a.a.createElement("input",{type:"checkbox",checked:e,onChange:this.toggle}),a.a.createElement("span",{className:"checkboxMark"+(e?" checked":"")}),"Habitable Zone"),s&&a.a.createElement("button",{className:"closeButton small panelButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))):null}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312),r=i(296),o=i(305),l=i(333),c=i(334),h=i(335),d=i(337);i(339),i(340);const u=["A","F","L","M","O","S"];e.default=class extends s.PureComponent{constructor(t){super(t);const e=this.props.getManager("content").getAPIObservatories()||c.OBSERVATORY;this.state={open:t.open,location:t.location,telescope:!1,explore:!1,constellations:!1,onlyVisibleStars:!1,expandButton:!1,title:"",subtitle:"",imgSrc:"",OBSERVATORY:e,paragraphs:[]},this._assetsBaseUrl=window.config.moduleUrl+"assets/",this._imgBaseUrl=this._assetsBaseUrl+"image/generic/",this._subTitles={star:({type:t,optmag:e})=>{let i="";return i="Unknown"===t?"A star of unknown type,":(u.indexOf(t)>=0?"An ":"A ")+t+"-type star,",i+=" which is ",!isNaN(e)&&e<6?i+="visible with the unaided eye from Earth.":i+=" too faint to be seen with the unaided eye from Earth.","M"===t&&(i="An M-type star. The most common type of star – which is much redder, cooler, and dimmer than the Sun."),i},system:({planetCount:t,type:e,position:i})=>t+(t>1?" planets":" planet")+" orbiting "+("Unknown"===e?"a star of unknown type, ":(u.indexOf(e)>=0?"an ":"a ")+e+"-type star, ")+r.default.convertToDistanceString(r.default.calculateRawDistance(i)-this.props.scene.get("earth").getOcclusionRadius())+" from Earth.",planet:{neptunian:"A Neptune-like ice giant planet",jovian:"A giant planet composed mainly of gas",superearth:"A potentially rocky world, larger than Earth",terrestrial:"A rocky world outside our solar system",unknown:""},earth:t=>t?null:"Choose a location to see field of stars from that part of Earth at the current time",filterPlanet:t=>r.default.numberToComma(t)+" planets | "},this._filterInfo={GasGiant:t=>({title:"Gas Giants",subtitle:this._subTitles.filterPlanet(t)+this._subTitles.planet.jovian,imgSrc:this._imgBaseUrl+"gasgiant.jpg",paragraphs:["This planet belongs to a class known as gas giants, similar to Jupiter or Saturn in our solar system. These planets are typically made of the two lightest and most common elements—hydrogen and helium—but may have dense cores of heavier elements. They lack a solid, well-defined surface and are consider unpromising targets in the search for life."]}),NeptuneLike:t=>({title:"Neptune-like",subtitle:this._subTitles.filterPlanet(t)+this._subTitles.planet.neptunian,imgSrc:this._imgBaseUrl+"neptune-like.jpg",paragraphs:["This planet is a Neptunian world, similar to Uranus or Neptune in our solar system. It is larger than a rocky world but smaller than a gas giant. This type of planet typically has a thick, gaseous atmosphere made of hydrogen and helium, with increasing temperatures and pressure toward the core. This planet is unlikey to be hospitable to life due to the high temperature and pressure deep in its thick atmosphere."]}),SuperEarth:t=>({title:"Super Earth",subtitle:this._subTitles.filterPlanet(t)+this._subTitles.planet.superearth,imgSrc:this._imgBaseUrl+"terrestrial.jpg",paragraphs:["Super Earths are exotic planets unlike any in our solar system. They are more massive than Earth yet lighter than gas giants like Neptune, and they can be made of gas, rock or a combination of both. There are about 70 known to circle stars beyond our sun, and NASA's Kepler mission has detected hundreds of candidates."]}),Terrestrial:t=>({title:"Terrestrial",subtitle:this._subTitles.filterPlanet(t)+this._subTitles.planet.terrestrial,imgSrc:this._imgBaseUrl+"terrestrial.jpg",paragraphs:["Terrestrial planets are rocky, with iron-rich cores, like Mercury, Venus, Earth and Mars in our solar system. These four innermost planets in our solar system demonstrate how terrestrial planets can have a variety of atmospheres and surface conditions. A terrestrial planet that is located in a star’s habitable zone may have the right conditions for liquid water, which is considered a prerequisite for life as we know it."]}),MilkyWay:(t,e)=>({title:"Milky Way Galaxy",subtitle:t&&e?r.default.numberToComma(t)+" solar systems | "+r.default.numberToComma(e)+" confirmed planets":"",imgSrc:this._imgBaseUrl+"milkywaythumbnail.png",paragraphs:["Our Sun and all the planets around it are part of a galaxy known as the Milky Way. Our galaxy is about 100,000 light-years in diameter and contains hundreds of billions of stars, along with enough gas and dust to make billions more stars.","A galaxy is a large group of stars, gas, and dust bound together by gravity. The total number of galaxies contained in the observable universe is estimated to be in the hundreds of billions. Like more than two-thirds of the known galaxies, the Milky Way has a spiral shape, organized into arms of giant stars that illuminate interstellar gas and dust."],explore:!0}),Kepler:(t,e)=>{let i=r.default.MISSIONS.filter(t=>"sc_kepler_space_telescope"===t.id)[0];return Object.assign(i,{subtitle:(t&&t.length>0?r.default.numberToComma(t.length)+" confirmed planets":"")+(e>0?" | "+r.default.numberToComma(e)+" candidates":""),imgSrc:this._assetsBaseUrl+i.img})},TESS:(t,e)=>{let i=r.default.MISSIONS.filter(t=>"sc_tess"===t.id)[0];return Object.assign(i,{subtitle:(t&&t.length>0?r.default.numberToComma(t.length)+" confirmed planets":"")+(e&&e.length>0?" | "+r.default.numberToComma(e.length)+" candidates":""),imgSrc:this._assetsBaseUrl+i.img})}},this.mobilePanel=a.a.createRef(),this.explorePanel=a.a.createRef(),this._update=this._update.bind(this),this._getFilterInfo=this._getFilterInfo.bind(this),this._getViewInfo=this._getViewInfo.bind(this),this._getTelescopeDisplay=this._getTelescopeDisplay.bind(this),this._toggleVisibleStars=this._toggleVisibleStars.bind(this),this._toggleConstellations=this._toggleConstellations.bind(this),this._changeLocation=this._changeLocation.bind(this),this._openPanel=this._openPanel.bind(this)}componentDidMount(){this.props.pioneer.addCallback(this._update,!0),this.mounted=!0,this.handleProps()}componentWillUnmount(){this.props.pioneer.removeCallback(this._update),this.mounted=!1}_update(){if(!this.mounted)return;let t=this.props.scene.get("camera").getParent();if(t){const e="cameraTarget"===t.getName();this.state.telescope!==e&&this.setState({telescope:e},this.handleProps)}}async handleProps(){if(!this.props)return;const{info:t,location:e}=this.props,{title:i,telescope:s,OBSERVATORY:a}=this.state;let n,c={};switch(t.controller){case"star":if(!(n=t.id?this.props.getManager("content").getStarInfo(t.id):null))for(let e=0;e<o.length;e+=1)t.id===o[e].exo_id&&(n=o[e]);n&&(c=await this._getViewInfo(n.displayName,"star",{type:n.starType,st_optmag:n.st_optmag,optmag:n.st_optmag})),c.open=!1,l.filter(e=>e&&t&&e.exo_id===t.id).length>0&&(c.expandButton=!0);break;case"system":(n=t.id?this.props.getManager("content").getDB("stars")[t.id]:null)&&(c=await this._getViewInfo(n.displayName,"system",{planetCount:n.planet_count,type:n.starType,position:n.position})),c.open=!1;break;case"planet":(n=t.id?this.props.getManager("content").getDB("planets")[t.id]:null)&&i!==n.displayName&&(c=await this._getViewInfo(n.displayName,"planet",{category:n.plType,ratio:n.pl_rade})),c.expandButton=!0,c.open=!1;break;case"spacecraft":switch(t.id){case"sc_kepler_space_telescope":c=Object.assign(c,this._getFilterInfo("KeplerAllDiscoveries"));break;case"sc_tess":c=Object.assign(c,this._getFilterInfo("TESSAllDiscoveries"));break;default:(n=t.id?r.default.MISSIONS.filter(e=>e.id===t.id)[0]:null)&&((c=Object.assign(c,n)).imgSrc=this._assetsBaseUrl+n.img)}c.expandButton=!0;break;case"earth":(c=await this._getViewInfo(s?null:"View from Earth","earth")).open=!1;break;default:if(t.category)c.expandButton=!0,c=Object.assign(c,this._getFilterInfo(t.category));else if(t.observatory){let{observatory:e}=t;e=e.replace(/_/g," "),c.expandButton=!0;for(let t=a.length-1;t>=0;t--){let i=a[t];if(i.name===e){let t=i.image,e=window.config.mbAPI+"/assets/eox/observatories/";t.indexOf(e)<0&&(t=e+t),c.title=i.name,c.subtitle=i.by,c.imgSrc=t,c.paragraphs=[i.description];break}}}}"expandButton"in c||(c.expandButton=!1),"explore"in c||(c.explore=!1),s||(c.constellations=!1,c.onlyVisibleStars=!1),e!==this.state.location&&(c.location=e),r.default.isEmptyObj(c)||this.setState(c,()=>{s||(this.props.getManager("scene").toggleConstellations(!1),"earth"===t.controller&&(this.props.getManager("scene").setFilter(),this.props.getManager("scene").starFade(!0,1e3)))})}_getFilterInfo(t){let e;switch(t){case"KeplerConfirmed":case"KeplerCandidates":case"KeplerAllDiscoveries":{let t=this.props.getManager("content").getKeplerCandidateCount(),e=this.props.getManager("content").getDB("planets",!0);return e=e.filter(t=>"Kepler"===t.pl_facility||"K2"===t.pl_facility),this._filterInfo.Kepler(e,t)}case"TESSConfirmed":case"TESSCandidates":case"TESSAllDiscoveries":{let t=this.props.getManager("content").getDB("tesscandidates",!0),e=this.props.getManager("content").getDB("planets",!0);return e=e.filter(t=>t.pl_facility.indexOf("TESS")>=0),this._filterInfo.TESS(e,t)}case"GasGiant":case"NeptuneLike":case"SuperEarth":case"Terrestrial":return e=this.props.getManager("scene").getFilterCount()||{},this._filterInfo[t](e.planetCount);default:return e=this.props.getManager("scene").getFilterCount()||{},this._filterInfo.MilkyWay(e.starCount,e.planetCount)}}async _getViewInfo(t,e,i={}){let s={title:t};switch(e){case"star":s.subtitle=this._subTitles.star(i);break;case"system":s.subtitle=this._subTitles.system(i);break;case"planet":switch(i.category){case"Neptunian":case"sub-Neptunian":case"Neptune-like":s.subtitle=this._subTitles.planet.neptunian;break;case"Jovian":case"sub-Jovian":case"super-Jovian":case"Gas Giant":s.subtitle=this._subTitles.planet.jovian;break;case"super-Terrestrial":case"Super Earth":s.subtitle=this._subTitles.planet.superearth;break;case"Terrestrial":s.subtitle=this._subTitles.planet.terrestrial;break;default:s.subtitle=this._subTitles.planet.unknown}break;case"earth":s.subtitle=this._subTitles.earth(this.state.telescope)}if(this.props.info&&this.props.getManager){const t=this.props.getManager("content"),e=await t.getData(this.props.info.id);s.subtitle=e&&e.subtitle?e.subtitle:s.subtitle}return s}_getTelescopeDisplay(t,e){return this.props.isMobile?a.a.createElement("div",null,a.a.createElement(h.default,{ref:this.mobilePanel,title:"View Options",type:"settings",tabs:[{text:"Only stars visible to the naked eye",checkStatus:t,tabFunction:this._toggleVisibleStars},{text:"Constellations",checkStatus:e,tabFunction:this._toggleConstellations}]}),a.a.createElement("button",{className:"rightPanelToggle",onClick:this._openPanel},a.a.createElement("span",{className:"rightPanelToggleIcon view"}))):a.a.createElement("div",{className:"telescopeDisplay"},a.a.createElement("div",null,a.a.createElement("label",{style:{paddingRight:"15px"}},"Display")),a.a.createElement("div",null,a.a.createElement("label",{className:"checkboxSquare"},a.a.createElement("input",{type:"checkbox",checked:t,onChange:this._toggleVisibleStars}),a.a.createElement("span",{className:"checkboxMark"+(t?" checked":"")}),"Only stars visible to the naked eye"),a.a.createElement("label",{className:"checkboxSquare"},a.a.createElement("input",{type:"checkbox",checked:e,onChange:this._toggleConstellations}),a.a.createElement("span",{className:"checkboxMark"+(e?" checked":"")}),"Constellations")))}_toggleVisibleStars(){let t=!this.state.onlyVisibleStars;this.setState({onlyVisibleStars:t},()=>{t?this.props.getManager("scene").setFilter([{db:"stars",field:"st_optmag",value:"6",op:"visible"}]):this.props.getManager("scene").setFilter([{db:"stars",field:"displayName",value:""}]),this.props.starField.starFade(!0,1e3)})}_toggleConstellations(){let t=!this.state.constellations;this.setState({constellations:t},()=>{this.props.getManager("scene").toggleConstellations(t)})}_changeLocation(){this.setState({telescope:!1,constellations:!1},()=>{this.props.getManager("scene").toggleConstellations(!1),this.props.getManager("camera").flyToEarth(),this.handleProps()})}_openPanel(){this.mobilePanel.current.open()}renderText(t,e){return a.a.createElement("div",{className:"text"},t.map((t,e)=>a.a.createElement("p",{key:t+e,style:{color:"#acacac"}},t)),e&&a.a.createElement("img",{alt:"eox_explore_icon",className:"exploreImg",src:window.config.moduleUrl+"assets/image/generic/eox_explore_icon.png",onClick:()=>{this.explorePanel.current.open()}}))}render(){let{open:t,telescope:e,location:i,constellations:s,onlyVisibleStars:r,expandButton:o,title:c,subtitle:h,paragraphs:u,explore:p,imgSrc:m}=this.state;const{isMobile:g,info:_}=this.props,f="planet"===_.controller||l.filter(t=>!(!t||!_||t.exo_id!==_.id)&&(c=t.displayName,!0)).length>0;return a.a.createElement("div",{className:"toggle-ui-desktop toggle-ui-mobile"},e&&this._getTelescopeDisplay(r,s),a.a.createElement("div",{id:"footerTitleId",className:"info-panel"+(t?" active scrollable":" hidden")+(e?" telescope":"")},a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"header"},a.a.createElement("h1",{id:"entryTitleId",className:"title"},c),o&&a.a.createElement("button",{className:"expand",onClick:()=>{if(f)this.props.openDetailPanel();else{let t=!this.state.open;this.setState({open:t}),this.props.onPanelChange(t)}}},a.a.createElement("span",{className:"buttonIcon"+(f?" plus":t?" down":" up")})),h&&a.a.createElement("div",{id:"entrySubtitleId",className:"subtitle"},h)),t&&a.a.createElement(a.a.Fragment,null,!this.props.isLandscape&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"image"},a.a.createElement("img",{src:m})),this.renderText(u,p))),this.props.isLandscape&&a.a.createElement("div",{className:"landsclapeInfo"},a.a.createElement("div",{className:"image"},a.a.createElement("img",{src:m})),this.renderText(u,p)))),e&&a.a.createElement("div",{className:"telescopeDiv"},a.a.createElement("div",{className:"telescopeChangeLocation"},a.a.createElement("button",{className:"backButton",onClick:this._changeLocation},a.a.createElement(n.default,{className:"svg svgBlue",src:window.config.moduleUrl+"assets/svg/back.svg"})),a.a.createElement("div",null,a.a.createElement("label",{className:"locationLabel"},"Location:"),a.a.createElement("label",null,i)),a.a.createElement("button",{className:"changeLocationButton",onClick:this._changeLocation},"CHANGE LOCATION")),!g&&this._getTelescopeDisplay(r,s))),a.a.createElement(d.default,{ref:this.explorePanel,getManager:this.props.getManager,isMobile:g}))}}},function(t){t.exports=JSON.parse('[{"exo_id":"alf_Cen_A","pl_hostname":"alf_Cen_A","tic_id":"TIC 471011145","displayName":"Alpha Centauri A","pl_hostname_lookup":"alf Cen A","Tagline":"One of the closest stars to Earth","Existing info":"The nearest stars beyond the solar system are those in Alpha Centauri. It is made up of three stars: Alpha Centauri A (officially named Rigil Kentaurus), Alpha Centauri B (Toliman), and Alpha Centauri C (Proxima Centauri), which is smaller and fainter than the other two stars. Alpha Centauri A and B form a binary system, which looks like a single star to the naked eye. This binary is so bright that it appears as the third brightest point beyond the solar system. Located in the constellation Centaurus, Alpha Centauri is prominent in the southern hemisphere, and it serves as one of the southern Pointer stars, pointing to the Southern Cross. Alpha Centauri A and B are both Sun-like stars, but Alpha Centauri A is slightly larger and yellow in color. Compared to the Sun, Alpha Centauri A has about the same mass and temperature, but it is about 25% bigger. The star is also older and shines brighter than the Sun.","Pop culture":"From Aboriginal Australian astronomy to modern science fiction, Alpha Centauri has featured prominently in storytelling about the night sky. In sci-fi literature, Alpha Centauri has been the inspiration for and fictionalized home to planets hosting life, as in the works of Isaac Asimov, Cixin Liu, Larry Niven, and Mary Doria Russell.  Alpha Centauri has appeared in a range of video games, comics, films and television. The film  \\"Avatar\\" takes place in the Alpha Centauri system, as do \\"Babylon 5\\", \\"Lost in Space\\", \\"Star Trek\\", and \\"Transformers\\".","Planet detection paragraph & timeline":"To date, no exoplanets have been confirmed around Alpha Centauri A. Being in a binary star system may make planet formation more difficult, but current theories suggest the probability of an Earth-like planet in the system. Being so close to the Earth and so similar to the Sun, Alpha Centauri A is a popular target for exoplanet searches. In 2021, the Breakthrough Watch Initiative’s ground-based imaging suggested the possible detection of an unconfirmed exoplanet candidate. If this detection is confirmed as a planet, rather than dust around the star or data artifact, it implies that the planet would be a sub-Neptune in the star’s habitable zone. As a Sun-like star close to Earth, Alpha Centauri A is a prime target for exoplanet discovery with future telescopes.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nThe star has low magnetic activity, but being part of a binary system makes detections of an exoplanet, especially an Earth-like planet, difficult in this system. ","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and bright, it is a prime imaging target. Being in a binary star system makes direct imaging of smaller Earth-like planets around Alpha Centauri A more challenging. A ground-based telescope offered hints at a possible sub-Neptune exoplanet candidate. Future large space telescopes will be able to validate this gaseous planet candidate and search for new exoplanets down to Earth size in the star’s habitable zone.","Astrometry":"0 planets have been detected to date around this star using astrometry.\\n\\nBeing bright, relatively close to Earth, and in a binary system makes Alpha Centauri A an ideal candidate for study with astrometry, from space telescopes using new optics technology."},{"exo_id":"alf_Cen_B","pl_hostname":"alf_Cen_B","tic_id":"TIC 471011144","displayName":"Alpha Centauri B","pl_hostname_lookup":"alf Cen B","Tagline":"One of the closest stars to Earth","Existing info":"The nearest stars beyond the solar system are those in Alpha Centauri. It is made up of three stars: Alpha Centauri A (officially named Rigil Kentaurus), Alpha Centauri B (Toliman), and Alpha Centauri C (Proxima Centauri), which is smaller and fainter than the other two stars. Alpha Centauri A and B form a binary system, which looks like a single star to the naked eye. This binary is so bright that it appears as the third brightest point beyond the solar system. Located in the constellation Centaurus, Alpha Centauri is prominent in the southern hemisphere, and it serves as one of the Pointer stars, pointing to the Southern Cross. Alpha Centauri A and B are both Sun-like stars, but Alpha Centauri B is slightly smaller and orange in color. Compared to the Sun, Alpha Centauri B is less massive, cooler, and older. Like the Sun, it has low stellar magnetic activity, but is half as luminous.","Pop culture":"From Aboriginal Australian astronomy to modern science fiction, Alpha Centauri has featured prominently in storytelling about the night sky. In sci-fi literature, Alpha Centauri has been the inspiration for and fictionalized home to planets hosting life, as in the works of Isaac Asimov, Cixin Liu, Larry Niven, and Mary Doria Russell. It also has appeared in a range of video games, comics, films and television. Alpha Centauri is the setting for the film \\"Avatar,\\" and features in the worlds of \\"Babylon 5,\\" \\"Lost in Space,\\" \\"Star Trek,\\" and \\"Transformers.\\"","Planet detection paragraph & timeline":"Alpha Centauri B has no confirmed exoplanets to date. In 2012, an exoplanet candidate was detected, using three years of radial velocity data. The proposed exoplanet had a mass similar to Earth, but it orbited much closer to its star. The claimed detection was later refuted, with studies suggesting that it was an artifact in the data and its processing. As a Sun-like star close to Earth, Alpha Centauri B remains a prime target for exoplanet discovery. Future space telescopes for direct imaging and astrometry aim to explore this system for what could be one of the nearest Earth-like planets to the solar system.","RV planets & prospects":"0 planets have been confirmed to date around this star using radial velocities.\\n\\nIn 2012, a hot Earth-mass exoplanet candidate was suggested by radial velocity measurements of Alpha Centauri B. The exoplanet candidate was later refuted. While being in a binary system complicates measurements of Alpha Centauri B, the star’s low magnetic activity helps its radial velocity prospects.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and bright, it is a prime imaging target. Being in a binary star system makes direct imaging of smaller Earth-like planets around Alpha Centauri B more challenging. Future large space telescopes will be able to validate the exoplanet candidate and search for new exoplanets down to Earth’s size in the star’s habitable zone.","Astrometry":"0 planets have been detected to date around this star using astrometry.\\n\\nBeing bright, nearby, and in a binary system makes Alpha Centauri B an ideal candidate for study with astrometry, from space telescopes using new optics technology."},{"exo_id":"eps_Eri","pl_hostname":"eps_Eri","tic_id":"TIC 118572803","displayName":"Epsilon Eridani","pl_hostname_lookup":"eps Eri","Tagline":"A nearby star like the Sun, already known to host a planet","Existing info":"Epsilon Eridani is one of the closest star systems – our third closest neighbor – making it visible to the naked eye. Named Ran by the International Astronomical Union, after the Norse goddess of the sea, Epsilon Eridani is the fifth-brightest star in the southern constellation Eridanus, which takes the shape of a river. Epsilon Eridani is similar to the Sun, but it is slightly smaller and cooler, with an orange hue. Compared to the Sun, this star has more magnetic activity, and it rotates slightly faster. It also contains a lower abundance of elements heavier than helium. An interesting feature of the Epsilon Eridani system is that around the star, there is a dusty debris disk and an inner asteroid belt.","Pop culture":"As a nearby Sun-like star with the prospect of hosting a habitable zone planet, Epsilon Eridani and its potential planets are commonly featured in works of fiction, including \\"Star Trek\\" and \\"Babylon 5.\\" Epsilon Eridani has featured in countless games, including \\"Halo\\" and \\"Race for the Galaxy.\\" In Isaac Asimov’s novels \\"Foundation’s Edge\\" and \\"Robots and Empire,\\" a fictional planet of Epsilon Eridani serves as the first \\"non-Spacer\\" planet to be settled. Author Andy Weir also chose to feature this star as a character’s home in his novel, \\"Project Hail Mary.\\" In Marvel Comics’ \\"Fantastic Four\\" stories, it is revealed that one destination is Epsilon Eridani.","Planet detection paragraph & timeline":"To date, one gas giant planet (named Epsilon Eridani b) has been confirmed, using radial velocity data over the period of 1980-2000, from telescopes on the ground. Based on interactions between potential planets and the dusty disk in the system, other planets have been suggested but never confirmed. In the past century, Epsilon Eridani has been the subject of searches for extraterrestrial radio communication, through experiments by Frank Drake and others. It also has been included as a target in efforts for interstellar travel. As Sun-like star close to Earth with a planetary system, Epsilon Eridani is a promising target for future exploration. Due to the large amount of dust orbiting the star, future direct imaging missions will probably not be able to detect any Earth-sized planets directly, but they can hope to see the gravitational imprint of habitable zone planets on the system’s dust.","RV planets & prospects":"1 gas giant exoplanet has been detected to date around this star using radial velocities.\\n\\nIt is difficult to detect exoplanets around Epsilon Eridani because the star has strong magnetic activity. It is only with long-term radial velocity monitoring that a large gas giant planet was found in 2016, outside of the star’s habitable zone.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nEfforts to directly image exoplanets around Epsilon Eridani are underway, but have not yet succeeded. The planet discovered with the radial velocity method, Epsilon Eridani b, is an active target for direct imaging, both from space- and ground-based telescopes. Due to the large amount of dust orbiting the star, future direct imaging missions will probably not be able to detect any Earth-sized planets directly. However, they can hope to see the gravitational imprint of habitable zone planets on the system’s dust."},{"exo_id":"61_Cyg_B","pl_hostname":"61_Cyg_B","tic_id":"TIC 165602023","displayName":"61 Cygni B","pl_hostname_lookup":"61 Cyg B","Tagline":"One of a pair of nearby, fast-moving stars","Existing info":"61 Cygni B is part of a binary star system in the constellation Cygnus the swan. Both 61 Cygni B and its companion 61 Cygni A are among the closest stars seen in the northern hemisphere. The stars orbit each other every 659 years, making them appear as two of the fastest-moving stars in the sky. Visible in dark skies, the stars are near the limit of what can be seen with the naked eye. Both stars in 61 Cygni are orange dwarfs, intermediate between larger stars like the Sun and smaller red dwarf stars. 61 Cygni B is slightly smaller than 61 Cygni A, and it is cooler and more magnetically active than the Sun.","Pop culture":"The nearby star system 61 Cygni has been included throughout popular culture as a potential host for planets and life. On the television series \\"Star Trek,\\" it served as the location of the planet Tellar Prime, the homeworld of the Tellarites, and is featured in the original series pilot episode, \\"The Cage.\\" It also appeared as home to an alien race in the British television show \\"Blake’s 7.\\" The 61 Cygni star system has been featured in computer games and the novels of Isaac Asimov, C. J. Cherryh, and Alastair Reynolds, among others. Interestingly, Hal Clement’s 1953 novel, \\"Mission of Gravity,\\" was inspired by 1940s claims of a potential third body, such as a large planet, detected in 61 Cygni.","Planet detection paragraph & timeline":"To date, no exoplanets have been confirmed around 61 Cygni B. Searches around the star began in the mid-20th century. Measurements of the star’s radial velocity over decades have yet to detect a planet and ruled out the possibility of giant planets far from the star. However, analysis of astrometry from the Gaia spacecraft suggests that there is an unseen object orbiting 61 Cygni B, causing the binary stars’ motions to be distorted. Estimates suggest that this unseen object is roughly 10 times the mass of Jupiter, making it a potential planet or brown dwarf. Given the location and stellar type of 61 Cygni B, it continues to be actively studied and will be a prime target for direct imaging with future space telescopes.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nRadial velocity measurements over decades have not found planets in the system and placed limits on what might be in the system.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\n61 Cygni B is a prime target for direct imaging, which will enable a search for exoplanets down to the size of Earth, in the star’s habitable zone. The two stars in the system 61 Cygni A and B have a wide separation between them, meaning that direct imaging with future space observatories will be little-troubled by the presence of the companion star."},{"exo_id":"61_Cyg_A","pl_hostname":"61_Cyg_A","tic_id":"TIC 165602000","displayName":"61 Cygni A","pl_hostname_lookup":"61 Cyg A","Tagline":"One of a pair of nearby, fast-moving stars","Existing info":"61 Cygni A is part of a binary star system in the constellation Cygnus the swan. Both 61 Cygni A and its companion 61 Cygni B are among the closest stars seen in the northern hemisphere. The stars orbit each other every 659 years, making them appear as two of the fastest-moving stars in the sky. Visible in dark skies, the stars are near the limit of what can be seen with the naked eye. Both stars in 61 Cygni are orange dwarfs, intermediate between larger stars like the Sun and smaller red dwarf stars. 61 Cygni A is slightly larger than 61 Cygni B, but it is still smaller, cooler and more magnetically active than the Sun.","Pop culture":"The nearby star system 61 Cygni has been included throughout popular culture as a potential host for planets and life. On the television series \\"Star Trek,\\" it served as the location of the planet Tellar Prime, the homeworld of the Tellarites, and is featured in the original series pilot episode, \\"The Cage.\\" It also appeared as home to an alien race in the British television show \\"Blake’s 7.\\" The 61 Cygni star system has been featured in computer games and the novels of Isaac Asimov, C. J. Cherryh, and Alastair Reynolds, among others. Interestingly, Hal Clement’s 1953 novel, \\"Mission of Gravity,\\" was inspired by 1940s claims of a potential third body, such as a large planet, detected in 61 Cygni.","Planet detection paragraph & timeline":"To date, no exoplanets have been confirmed around 61 Cygni A. Searches around the star began in the mid-20th century. Measurements of the star’s radial velocity over decades have yet to detect a planet and ruled out the possibility of giant planets far from the star. Even so, 61 Cygni A remains an attractive candidate for exoplanet searches, given the location and type of the star. As an orange dwarf star that is so near to Earth, 61 Cygni A is a prime target for direct imaging with future space telescopes.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nRadial velocity measurements over decades have not found planets in the system and placed limits on what might be in the system.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\n61 Cygni A is a prime target for direct imaging, which will enable a search for exoplanets down to the size of Earth, in the star’s habitable zone. The two stars in the system 61 Cygni A and B have a wide separation between them, meaning that direct imaging with future space observatories will be little-troubled by the presence of the companion star."},{"exo_id":"eps_Ind_A","pl_hostname":"eps_Ind_A","tic_id":"TIC 231698181","displayName":"Epsilon Indi A","pl_hostname_lookup":"eps Ind A","Tagline":"A bright nearby star with multiple companions","Existing info":"Epsilon Indi A is an orange star located deep in the southern sky. It is the sixth nearest star system visible to the naked eye and the fifth brightest star in the constellation Indus. Relative to the Sun it is somewhat smaller and cooler, with a slightly lower abundance of elements heavier than helium. The star also has a slightly faster rotation period and higher levels of magnetic activity than the Sun. Far from the star (Epsilon Indi A), there is a pair of brown dwarf stars (Epsilon Indi Ba and Bb). These brown dwarf companions have masses just below the threshold needed to sustain core nuclear fusion and become stars in their own right.","Pop culture":"As a bright nearby star, Epsilon Indi has been referenced in science fiction and games. In Larry Niven’s 1973 novel \\"Protector,\\" the planet Home is set around Epsilon Indi. In Robert Sawyer’s novel \\"Starplex,\\" one of the closest portals to Earth is in New New York, set in the Epsilon Indi system. Elsewhere, Epsilon Indi has been included in everything from \\"Star Trek\\" episodes to \\"Frontier Elite\\" video games.","Planet detection paragraph & timeline":"Radial velocity data have suggested the presence of a gas giant planet around Epsilon Indi, known as Epsilon Indi A b. Estimates indicate that the planet is at least a few times the mass of Jupiter, with an orbital period of 50-80 years, but additional work is needed to confirm the planet’s existence and establish its properties. The planet is a target for observations by the Webb Telescope. As a bright and nearby star, Epsilon Indi A’s planetary system also is a prime target for direct imaging from space. Future large space telescopes will be able to detect exoplanets down to the size of Earth in its habitable zone, identify the atmospheric constituents of these planets, and determine their habitability.","RV planets & prospects":"1 gas giant planet has been detected to date around this star using radial velocities.\\n\\nEpsilon Indi is a magnetically quiet star where the radial velocity technique can be used to best effect. Years of past observations have suggested a gas giant planet outside of the habitable zone. Continuing observations are needed to confirm the planet and provide an improved picture of its properties.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and bright, its planetary system will be a prime imaging target for future space telescopes. Those missions will be able to detect exoplanets down to Earth size in Epsilon Indi\'s habitable zone, identify their atmospheric constituents, and determine if they have habitable conditions."},{"exo_id":"tau_Cet","pl_hostname":"tau_Cet","tic_id":"TIC 419015728","displayName":"Tau Ceti","pl_hostname_lookup":"tau Cet","Tagline":"A bright nearby star with planets in the habitable zone","Existing info":"Tau Ceti is the second brightest Sun-like star in the sky. Visible to the naked eye, it is located near the celestial equator, in the constellation Cetus, the sea monster. Compared to the Sun, it has a lower abundance of elements heavier than helium, rotates more slowly, and has weaker magnetic activity. Around the star, there is a broad, inclined, dusty debris disk, which corresponds to Tau Ceti\'s version of the Kuiper Belt. While Tau Ceti’s disk is smaller and dustier than our own Kuiper Belt, the habitable zone around Tau Ceti is not very dusty.","Pop culture":"As one of the nearest Sun-like stars, Tau Ceti has been the setting of numerous works of science fiction. Two worlds around Tau Ceti provide the backdrop for Ursula K. Le Guin’s anarchic utopia novel, \\"The Dispossessed,\\" whereas in Kim Stanley Robinson\'s novel, \\"Aurora,\\" travelers aim to colonize an Earth analog around Tau Ceti. Other authors who have featured Tau Ceti include Isaac Asimov, Arthur C. Clarke, Frank Herbert, and Robert Heinlein. A planet around Tau Ceti even serves as the setting for the 1968 film, \\"Barbarella.\\"","Planet detection paragraph & timeline":"To date, multiple planets have been detected around Tau Ceti. In 2012, five exoplanets were reported, but as of 2017 only two of these planets were confirmed: two potential super-Earths known as Tau Ceti e and f. These planets lie at the inner and outer edges of the star’s habitable zone, respectively. While additional observations are needed to confirm and clarify the nature of Tau Ceti\'s planetary system, a giant planet like our own Jupiter appears to be ruled out. As a magnetically quiet star, Tau Ceti has long been monitored with radial velocity observations, which have resulted in the planets detected to date. As a bright and nearby star, Tau Ceti’s planetary system is also a prime target for direct imaging from space.  Future large space telescopes will be able to detect exoplanets down to the size of Earth in Tau Ceti\'s habitable zone and image the already discovered super-Earth, Tau Ceti e. With these future missions, it will be possible to identify the atmospheric constituents of these planets and determine their habitability.","RV planets & prospects":"2 super-Earth planets have been confirmed as of 2017, with potentially others detected. \\n\\nTau Ceti is a magnetically quiet star, making it well suited to radial velocity measurements. It has long been the subject of radial velocity studies, which have already yielded multiple planetary detections, including two potential super-Earths at the inner and outer edges of the habitable zone. More planets have been reported, but continuing observations are needed to help provide an improved picture of Tau Ceti’s planetary system.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and bright, its planetary system is a prime imaging target. Future large space telescopes will be able to detect exoplanets down to Earth size in Tau Ceti\'s habitable zone, identify their atmospheric constituents, and determine if they have habitable conditions. Any dust clouds near the habitable zone could also be studied in great detail."},{"exo_id":"AX_Mic","pl_hostname":"AX_Mic","tic_id":"TIC 159746875","displayName":"AX Microscopii","pl_hostname_lookup":"AX Mic","Tagline":"The brightest red dwarf in the sky","Existing info":"AX Microscopii (also known as Lacaille 8760) is the brightest red dwarf star in the night sky and one of the closest stars to the Sun. Located in the constellation Microscopium, this star is generally too faint to see with the naked eye. Smaller and cooler than the Sun, Lacaille 8760 is much redder and more magnetically active, with stellar flares erupting on an almost daily basis. Given its smaller size, Lacaille 8760 will outlive the Sun by tens of billions of years.","Pop culture":"Lacaille 8760 is mentioned in print materials connected with \\"Aliens,\\" the sequel to the sci-fi film, \\"Alien.\\" It is also part of the Earth Empire in the novelization of the British television series \\"Dr. Who.\\"","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around Lacaille 8760. With high-contrast direct imaging, it will become possible to search this star for Earth-sized planets in the star’s habitable zone. The prospect of finding an Earth analog around this nearby red dwarf makes it a good target for direct imaging with future space telescopes","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nWith such a magnetically active star, it is difficult to use radial velocity measurements to constrain the presence of planets in the system.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, Lacaille 8760 is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"sig_Dra","pl_hostname":"sig_Dra","tic_id":"TIC 259237827","displayName":"Sigma Draconis","pl_hostname_lookup":"sig Dra","Tagline":"A star visible to the naked eye, where the search for planets continues","Existing info":"Sigma Draconis (officially named Alsafi) is an orange star located high in the northern sky. It is the 18th brightest star in the constellation Draco the Dragon and is visible to the naked eye. Relative to the Sun, it is slightly smaller and cooler, with a slightly lower abundance of elements heavier than helium, slightly faster rotation period, and higher levels of stellar magnetic activity.","Pop culture":"From television to literature, the naked eye star Sigma Draconis has been featured as a fictionalized planet host and homeworld. In \\"Star Trek,\\" it served as the host for nine planets, three of which harbored life. Novels by Poul Anderson, Eleanor Arnason, and David Weber, among others, invoke life on a planet orbiting this star, and Sigma Draconis has also appeared in board games and computer games, such as \\"Dune II.\\"","Planet detection paragraph & timeline":"Sigma Draconis has been monitored for radial velocity signals since the mid-2000s. To date, no planetary companions have been found, with Jupiter or Saturn-like planets ruled out within a few astronomical units of the star. Current techniques place only weak limits on planets that might be orbiting this star. A planetary system as varied and rich as our own could be present and escape detection today. Because the star is nearby and moderately bright, it will be a prime target for exploration with future space telescopes. Exoplanets down to Earth size will be detectable in Sigma Dra\'s habitable zone, while subsequent spectroscopy would be able identify their atmospheric constituents and determine if they have habitable conditions. In less than a week of observing, a future space telescope could reveal what is currently hidden in the glare of this neighboring star.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, Sigma Draconis is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"HD_20794","pl_hostname":"HD_20794","tic_id":"TIC 301051051","displayName":"HD 20794","pl_hostname_lookup":"HD 20794","Tagline":"A nearby Sun-like star harboring planets and a disk","Existing info":"HD 20794, also known as 82 Eridani, is a Sun-like star visible to the naked eye in the southern constellation Eridanus. Relative to the Sun, it is slightly smaller and cooler, older, and contains a lower abundance of elements heavier than helium. 82 Eridani is a fast-moving yellow star, with low levels of stellar magnetic activity, and is surrounded by a cool, dusty disk.","Pop culture":"Well before exoplanets were detected around 82 Eridani, it was featured as the host star for planets in multiple novels and short stories, including Poul Anderson\'s \\"Orbit Unlimited.\\" It also served as the host to the sci-fi world of Epona, the backdrop of multiple stories in \\"Analog Science Fiction and Fact\\" magazine.","Planet detection paragraph & timeline":"Multiple planets have been detected around 82 Eridani. Years of radial velocity data suggest that four super-Earth planets might be present within the habitable zone, with detections of up to six planets claimed. As a nearby Sun-like star hosting planets, 82 Eridani is a prime target for exploration with future space telescopes, including those using direct imaging.","RV planets & prospects":"4 planets have been detected to date around this star using radial velocities.\\n\\nThe star’s low magnetic activity makes it a good candidate for radial velocity detections. Radial velocity monitoring of the star over time has revealed multiple Super-Earth planets in the system. Confirmations are needed for the potential planet candidates.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nAs a bright, nearby star, 82 Eridani is a prime target for future direct imaging. Future space telescopes will be able to search for rocky exoplanets down to Earth size in the star’s habitable zone and characterize planets that have been suggested by radial velocity data of the star. The outermost of the four planets detected by radial velocity is a super-Earth that could be imaged immediately by proposed future direct imaging missions."},{"exo_id":"del_Pav","pl_hostname":"del_Pav","tic_id":"TIC 409891396","displayName":"Delta Pavonis","pl_hostname_lookup":"del Pav","Tagline":"A nearby star, well-suited for exoplanet searches","Existing info":"Delta Pavonis is a nearby Sun-like star visible to the naked eye in the southern constellation of Pavo. While it is larger than the Sun, the star is slightly less massive and has similarly low levels of magnetic activity. Compared to the Sun, it contains a higher abundance of elements heavier than helium and rotates more slowly.","Pop culture":"Delta Pavonis has hosted a planet in numerous fictional works, from an ocean planet called Caladan in the Dune novels to Delta Pavonis IV hosting humanoid cats in \\"The Transformers\\" animated television show.","Planet detection paragraph & timeline":"Delta Pavonis has long been a favorite star for exoplanet searches, given how bright and nearby this low-magnetic activity star is. To date, the only planet candidate in the system comes from astrometry done with the Gaia spacecraft and ground-based telescope data. It hints at a candidate planet similar to Jupiter, on a wide orbit, far from the star. Previously listed as SETI’s best nearby G-type star for study, Delta Pavonis will continue to be the subject of exoplanet searches. It will be a prime target for exploration with future space telescopes, including those focused on direct imaging.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nDelta Pavonis has low stellar magnetic activity, making it well-suited for radial velocity studies. Recent studies indicate the presence of a long-period planet but more data is needed to confirm it.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nAs a bright, nearby star, Delta Pavonis is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone.  ","Astrometry":"0 planets have been confirmed with astrometry of this star to date.\\n\\nA Jupiter-analog planet candidate has been suggested by astrometry data from the Gaia spacecraft. \\n"},{"exo_id":"HD_219134","pl_hostname":"HD_219134","tic_id":"TIC 283722336","displayName":"HD 219134","pl_hostname_lookup":"HD 219134","Tagline":"A bright nearby star with multiple planets","Existing info":"HD 219134 is an orange dwarf star in the constellation Cassiopeia. It is relatively nearby and close to the limit of what can be seen with the naked eye. Compared to the Sun, HD 219134 is older, smaller and less luminous, with a lower abundance of elements heavier than helium, and low levels of stellar magnetic activity.","Planet detection paragraph & timeline":"HD 219134 has been detected as a system with six possible exoplanets. The innermost planet, HD 219134 b, is a rocky super-Earth planet. This and three additional exoplanets (one additional rocky super-Earth, one Neptunian world, and one Jovian world) were deduced using radial velocity data. Two months after the initial announcement, a six-planet solution was proposed, adding two new planets. Of the planets detected, the Spitzer space telescope determined that two of them are transiting rocky super-Earths. As a bright, nearby star hosting planets, HD 219134 is a prime target for further exploration with upcoming space telescopes, with the outermost planet being particularly well suited to further observations.","RV planets & prospects":"6 planets have been detected to date around this star using radial velocities.\\n\\nRadial velocity measurements have revealed the presence of multiple planets around HD 219134, ranging from rocky Super Earths to gas giant planets. The star’s low stellar magnetic activity levels make it well suited to radial velocity measurements.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.\\n\\nWhile no planets were first discovered via transits around this star, two planet candidates detected with the radial velocity method have been found to transit the star.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nAs a bright, nearby star, HD 219134 is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone and characterize the exoplanets already discovered. The outermost planet will be readily detectable by future space-based exoplanet imaging missions."},{"exo_id":"HD_4628","pl_hostname":"HD_4628","tic_id":"TIC 257393898","displayName":"HD 4628","pl_hostname_lookup":"HD 4628","Tagline":"A nearby star worth exploring","Existing info":"HD 4628 is an orange-red dwarf star, located in the constellation Pisces, the pair of fish. Located 24 light-years away, this star is near to the Earth but barely visible to the naked eye. Compared to the Sun, it is smaller, less luminous, cooler, and slightly older. It has relatively low magnetic activity and appears to move quickly across the sky.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around HD 4628. Radial velocity surveys have ruled out gas giant planets within a few astronomical units of the star. Nevertheless, HD 4628 is a prime target for exoplanet exploration because it is a relatively bright and nearby star, with properties close to those of the Sun. The potential for discovery is present and relies on future technologies and telescopes to reveal what’s currently unseen.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nAs a star with relatively low stellar magnetic activity, HD 4628 has been a good target for radial velocity studies, but to date no planets have been found with this method.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nAs a nearby star, just bright enough to be seen with the naked eye, HD 219134 is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"107_Psc","pl_hostname":"107_Psc","tic_id":"TIC 113710966","displayName":"107 Piscium","pl_hostname_lookup":"107 Psc","Tagline":"A nearby star to explore","Existing info":"107 Piscium is an orange dwarf star in the constellation Pisces, faintly visible to the naked eye. Older than the Sun, the star is smaller and less massive, with a slightly lower abundance of elements heavier than helium. The star has low levels of magnetic activity and rotates slowly.","Pop culture":"In Alastair Reynolds\' 2003 novel, \\"Absolution Gap,\\" and in Jack McDevitt\'s novel, \\"Starhawk,\\" 107 Piscium is orbited by a planet.","Planet detection paragraph & timeline":"To date, no planets have been detected around 107 Piscium. Previous radial velocity searches have ruled out the presence of a Jovian planet within a few astronomical units of the star. As a relatively bright and nearby star, with properties similar to the Sun, 107 Piscium is a good target for exoplanet exploration. The potential for discovery relies on future technologies and telescopes to reveal what’s currently unseen.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nAs a star with low stellar magnetic activity, 107 Piscium has been a good candidate for radial velocity planet searches, and past searches have ruled out a Jupiter-mass planet within a few astronomical units of the star.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nAs a nearby star, just bright enough to be seen with the naked eye, 107 Piscium is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone.  "},{"exo_id":"pi3_Ori","pl_hostname":"pi3_Ori","tic_id":"TIC 399665349","displayName":"pi3 Orionis","pl_hostname_lookup":"pi3 Ori","Tagline":"A bright star in Orion worth exploring","Existing info":"Pi3 Orionis, also known as Tabit, is a hot Sun-like star visible to the naked eye in the constellation Orion, where it is the brightest star in Orion’s shield. Located relatively nearby, at a distance of 26 light-years, this yellow-white star is larger, hotter, and nearly three times more luminous than the Sun. It has a low level of magnetic activity, nearly equal to the Sun. Pi3 Orionis may be a variable star","Pop culture":"In Star Trek non-canon fandom, Pi3 Orionis is located in the Beta-Quadrant near Federation space, but is not part of the Federation. It was visited by Zefram Cochrane (the inventor of warp drive) on his last voyage in 2120.","Planet detection paragraph & timeline":"To date, no planets have been detected around Pi3 Orionis. While its low magnetic activity makes the star well suited to radial velocity searches, direct imaging with future space telescopes could reveal as yet unseen Earthlike planets. As a bright nearby star, Pi3 Orionis is a prime target for future exoplanet exploration.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nAs a star with low magnetic activity, Pi3 Orionis has been a target for radial velocity planet searches, but no planets have been detected yet, with massive planets ruled out within a few astronomical units.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nAs a bright nearby star, Pi3 Orionis is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone.  "},{"exo_id":"bet_CVn","pl_hostname":"bet_CVn","tic_id":"TIC 458445966","displayName":"Beta Canum Venaticorum","pl_hostname_lookup":"bet CVn","Tagline":"A bright star similar to the Sun located nearby","Existing info":"Beta Canum Venaticorum (officially named Chara) is a nearby Sun-like star – the second brightest star in the northern constellation Canes Venatici. Given how similar it is to the Sun, Chara has been identified as one of the most promising potential planetary hosts. It is only slightly larger and hotter than the Sun, with very low levels of magnetic activity. Chara may be a double or multiple star system, which complicates the search for potential planets.","Pop culture":"Chara was featured in the short story, \\"The Hunters of Asterion,\\" and the book, \\"The Chara Talisman,\\" as well as in the sci-fi game \\"2300 AD.\\"","Planet detection paragraph & timeline":"Chara has been a prime target for planet searches of all forms, including SETI searches with radio telescopes. To date, no planets – habitable or otherwise – have been found. There may be habitable planets in the system, but the potential for discovery is very much still present and relies on future technologies to reveal what’s currently unseen.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nChara has very low levels of magnetic activity, making it the ideal target for this method. Radial velocity observations of Chara with the Keck telescope (2000-2020) have ruled out the presence of giant planets in the inner part of this system, leaving terrestrial planets – including a packed multi-planet system –- a possibility. More precise radial velocity surveys, with a precision of about 0.1 meters per second, would be needed to detect such planets.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nChara is well suited for direct imaging with future space telescopes. These future searches would be able to explore a significant fraction of the star’s habitable zone and would be aided by how bright a potential Earth analog around Chara would be."},{"exo_id":"61_Vir","pl_hostname":"61_Vir","tic_id":"TIC 422478973","displayName":"61 Virginis","pl_hostname_lookup":"61 Vir","Tagline":"A bright Sun-like star that hosts a multiplanet system","Existing info":"61 Virginis is a bright Sun-like star located relatively nearby in the constellation Virgo. 61 Virginis is remarkably similar to the Sun in size and mass, but is older, slightly cooler, and less luminous. The star has low levels of magnetic activity and a low abundance of elements heavier than helium. Far from the star, there is a broad, dusty debris disk.","Pop culture":"A planetary system around 61 Virginis is the fictional home to human settlement efforts in short stories, such as Ken Liu\'s \\"The Waves and Mono No Aware,\\" Alastair Reynolds\' \\"Poseidon\'s Children\\" trilogy, as well as flight simulation and role-playing games.","Planet detection paragraph & timeline":"61 Virginis is home to three planets that were detected using five years of radial velocity data. Two of the planets are estimated to be Neptune sized, while one is a super-Earth. The three planets lie between the star and its debris disk. When these planets were discovered in 2009, the presence of the super-Earth made 61 Virginis the first G-type, Sun-like star to host a super-Earth mass planet. As a bright star that is so similar to the Sun, 61 Virginis is still an active target for exoplanet searches. Future space telescopes, capable of direct imaging to look for a rocky Earth-sized planet in the star’s habitable zone, will make 61 Virginis a prime target for further exploration.","RV planets & prospects":"3 planets have been detected to date around this star using radial velocities.\\n\\n1 Super-Earth and 2 Neptune-sized planets have been detected from radial velocity measurements around 61 Virginis. Since the star has low magnetic activity, it is well suited for radial velocity studies.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\n61 Virginis is well suited for direct imaging with future space telescopes. These future searches will easily be able to detect the outermost of the three known exoplanets in the system, as well as explore a significant fraction of the star’s habitable zone, and would be aided by how bright a potential Earth analog around the star would be. Direct imaging would also be able to characterize the atmospheres and surfaces of the planets that have been suggested by existing radial velocity data."},{"exo_id":"zet_Tuc","pl_hostname":"zet_Tuc","tic_id":"TIC 425935521","displayName":"Zeta Tucanae","pl_hostname_lookup":"zet Tuc","Tagline":"A bright star, larger than the Sun, orbited by a dusty disk","Existing info":"Zeta Tucanae is a bright star visible to the naked eye, found in the southern constellation Tucana, the toucan. Located relatively close to Earth, Zeta Tucanae is a main sequence star that is slightly larger, hotter, and brighter than the Sun. Compared to the Sun, Zeta Tucanae has a lower abundance of elements heavier than helium and exhibits relatively low magnetic activity. The star hosts a cool, dusty debris disk.","Pop culture":"In the television series \\"Babylon 5,\\" a planet orbiting Zeta Tucanae serves as the home world of the Centauri Republic. In the novel \\"The Cunning Blood,\\" the star hosts multiple planets, including both a marginally habitable planet and an Earth-like prison planet named Hell.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around Zeta Tucanae. As a bright Sun-like star so near to Earth, Zeta Tucanae is a promising target for future exoplanet exploration, particularly with direct imaging. If there are habitable planets in the system, future space telescopes capable of high contrast imaging would reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, Zeta Tucanae is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"HD_192310","pl_hostname":"HD_192310","tic_id":"TIC 326096771","displayName":"HD 192310","pl_hostname_lookup":"HD 192310","Tagline":"A bright star that harbors planets","Existing info":"HD 192310, also known as HR 7722, is a relatively nearby orange dwarf star. Faintly visible to the naked eye, the star is located in the southern constellation Capricornus. Relative to the Sun, HD 192310 is smaller, cooler, and older, with similar abundances of elements heavier than helium. Less than half as bright as the Sun, the star has an orange hue and very low levels of magnetic activity.","Pop culture":"HD 192310 is referenced in a graphic novella \\"Aliens: Inhuman Condition,\\" which extends the world of the movie \\"Alien.\\" In this work, there is a planet around HD 192310 named Narvis-4, which houses an Artificial Humanoid Fabrication Plant.","Planet detection paragraph & timeline":"Two exoplanets have been confirmed around HD 192310. Discovered in 2011 from radial velocity measurements, the planets are similar to Neptune, orbiting near the inner and outer edges of the star’s habitable zone. As a bright, nearby star, HD 192310 is well suited to future exoplanet exploration, particularly with direct imaging. If there are habitable planets in the system, future space telescopes capable of high contrast imaging would reveal them.","RV planets & prospects":"2 planets have been detected to date around this star using radial velocities.\\n\\nThe star is well suited to radial velocity studies due to its low magnetic activity. Radial velocity monitoring led to the detection of 2 Neptune-like planets on the inner and outer edges of the star’s habitable zone.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, HD 192310 is a prime target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone and characterize the planets detected with radial velocity measurements."},{"exo_id":"bet_Com","pl_hostname":"bet_Com","tic_id":"TIC 445070560","displayName":"Beta Comae Berenices","pl_hostname_lookup":"bet Com","Tagline":"A bright nearby star set for exoplanet exploration","Existing info":"Beta Comae Berenices is a Sun-like star in the northern constellation Coma Berenices. Bright enough to be seen with the naked eye, the star is located relatively near to Earth. This star is slightly larger and hotter than the Sun, and 50% more luminous. Compared to the Sun, the star rotates faster, with a slightly higher abundance of elements heavier than helium and more stellar magnetic activity.","Pop culture":"References to Beta Comae Berenices have been found in popular culture, as in the manual for \\"FSpace Role-Playing Game,\\" in which the star hosts an Earth-like planet inhabited by a colony of millions.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around Beta Comae Berenices. With high-contrast direct imaging, it will become possible to search this star for Earth-sized planets. The prospect of finding an Earth analog around this bright, nearby Sun-like star makes it a good target for direct imaging with future space telescopes.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, Beta Comae Berenices is a good target for future direct imaging. future large space telescopes will be able to search for rocky exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"gam_Pav","pl_hostname":"gam_Pav","tic_id":"TIC 265488188","displayName":"Gamma Pavonis","pl_hostname_lookup":"gam Pav","Tagline":"A bright magnetically active star close enough for future observations","Existing info":"Gamma Pavonis is a bright star, visible to the naked eye in the southern constellation of Pavo the Peacock. Larger and hotter than the Sun, the star has a yellow-white hue. Compared to the Sun, Gamma Pavonis contains a lower abundance of elements heavier than helium, and it has high levels of magnetic activity.","Pop culture":"Gamma Pavonis has been referenced throughout popular culture as a potential planet host. Featured in the video game, \\"Halo,\\" Gamma Pavonis is also part of a range of role-playing games and books. In the \\"Undying Mercenaries\\" book series, Gamma Pavonis is home to a planet filled with machine life forms, known as Machine World.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around Gamma Pavonis. As a hot Sun-like star so near to Earth, Gamma Pavonis is a promising target for future exoplanet exploration, particularly with direct imaging. If there are habitable planets in the system, future space telescopes capable of high-contrast imaging could reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nGamma Pavonis is a magnetically active star, making it challenging for radial velocity planet searches.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, Gamma Pavonis is a good target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"61_UMa","pl_hostname":"61_UMa","tic_id":"TIC 101641846","displayName":"61 Ursae Majoris","pl_hostname_lookup":"61 UMa","Tagline":"A bright magnetically active star close enough for future observations","Existing info":"61 Ursae Majoris is a star like the Sun, located relatively close to Earth, in the northern constellation Ursa Major. The star is faintly visible to the naked eye, with a yellow-orange hue. Compared to the Sun, 61 Ursae Majoris is slightly smaller and cooler, with a slightly lower abundance of elements heavier than helium. The star has high levels of magnetic activity.","Pop culture":"61 Ursae Majoris is the host star for planets in \\"Star Trek,\\" the video game, \\"Mass Effect,\\" as well as Larry Niven\'s short story \\"The Warriors\\" and the role-playing game, \\"2300 AD.\\"","Planet detection paragraph & timeline":"No planets have been detected to date around 61 Ursae Majoris. While radial velocity planet searches have come up empty, complicated by the star’s stellar magnetic activity, 61 Ursae Majoris remains a promising target for future exoplanet exploration. Given that it is a bright, nearby Sun-like star, it is well suited for direct imaging. If there are habitable planets in the system, future space telescopes capable of high-contrast imaging could reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\n61 Ursae Majoris is a magnetically active star, making it challenging for radial velocity planet searches.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, 61 Ursae Majoris is a good target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"iot_Per","pl_hostname":"iot_Per","tic_id":"TIC 116988032","displayName":"Iota Persei","pl_hostname_lookup":"iot Per","Tagline":"A bright star relatively nearby","Existing info":"Iota Persei is a bright star like the Sun, located relatively close to Earth, in the northern constellation Perseus. Larger and warmer than the Sun, Iota Persei is more than twice as luminous. Visible to the naked eye, it appears yellow-white. It has low levels of magnetic activity, and it has a slightly higher abundance of elements heavier than helium, as compared to the Sun.","Pop culture":"Iota Persei has been referenced in science-fiction literature as a potential planet host.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around Iota Persei. As a bright Sun-like star so near to the Earth, Iota Persei is a promising target for future exoplanet exploration, particularly with direct imaging. If there are planets in the habitable zone around this Sun-like star, future space telescopes capable of high contrast imaging could reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nIota Persei exhibits low levels of stellar magnetic activity, making it well-suited to radial velocity planet searches.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, Iota Persei is a good target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"HD_141004","pl_hostname":"HD_141004","tic_id":"TIC 296740796","displayName":"HD 141004","pl_hostname_lookup":"HD 141004","Tagline":"A bright star, located relatively nearby, that hosts a planet","Existing info":"HD 141004, also known as Lambda Serpentis, is a star like the Sun located relatively close to Earth, in the constellation Serpens. Larger and warmer than the Sun, the star is twice as luminous and is visible to the naked eye. It has low levels of magnetic activity and a slightly lower abundance of elements heavier than helium, as compared to the Sun.","Pop culture":"Lambda Serpentis is featured as a planetary system in the \\"Halo\\" video game franchise and the \\"Blue Planet\\" role-playing game, as well as episodes of \\"Star Trek.\\"","Planet detection paragraph & timeline":"To date, one Neptune-like giant planet (named HD 141004 b) has been detected around this star, using radial velocity data. As a nearby, Sun-like star hosting a planet, HD 141004 is a prime target for future exoplanet exploration, particularly with direct imaging. If there are planets in the habitable zone around this Sun-like star, future space telescopes capable of high contrast imaging could reveal them.","RV planets & prospects":"1 planet has been detected to date around this star using radial velocities\\n\\nRadial velocity monitoring led to the detection of a Neptune-like planet around this star, interior to the habitable zone, which was confirmed in 2021. Given the low magnetic activity of the star, it is well suited to further radial velocity studies.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, HD 141004 is a good target for future direct imaging. future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone and characterize the planet that has already been detected in the system."},{"exo_id":"zet2_Ret","pl_hostname":"zet2_Ret","tic_id":"TIC 279649049","displayName":"Zeta2 Reticuli","pl_hostname_lookup":"zet2 Ret","Tagline":"A Sun-like star in a bright, nearby binary system","Existing info":"Zeta2 Reticuli is one of two stars in a wide binary system called Zeta Reticuli, in the southern constellation Reticulum. This star and its companion, Zeta1 Reticuli, are both Sun-like stars, with Zeta2 Reticuli being slightly larger and brighter. Although comparable in size and luminosity to the Sun, Zeta2 Reticuli is slightly warmer and more massive. It has a higher abundance of elements heavier than helium, relative to the Sun, and intermediate levels of magnetic activity. The star is faintly visible to the naked eye.","Pop culture":"The Zeta Reticuli system has played a central role across a variety of media. The sci-fi horror films \\"Alien\\" and \\"Prometheus\\" feature expeditions to Zeta Reticuli. From television to literature, it has been the site of extraterrestrial life and technology. It has been included in the card game Yu-Gi-Oh, lyrics of the Muse song \\"Exo-Politics,\\" and even as part of the backstory for the alien-themed snack, Space Raiders.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected in the Zeta Reticuli system. As a star so similar to the Sun, located relatively close to Earth, Zeta2 Reticuli is a promising target for future exoplanet exploration, particularly with direct imaging. If there are planets in the star’s habitable zone, future space telescopes capable of high contrast imaging could reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby, at a wide separation from its binary companion, and the habitable zone would be far enough from the central star to image, Zeta2 Reticuli is a good target for future direct imaging.  Future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone.  "},{"exo_id":"zet1_Ret","pl_hostname":"zet1_Ret","tic_id":"TIC 279649057","displayName":"Zeta1 Reticuli","pl_hostname_lookup":"zet1 Ret","Tagline":"A Sun-like star in a bright, nearby binary system","Existing info":"Zeta1 Reticuli is one of two stars in a wide binary system called Zeta Reticuli, in the southern constellation Reticulum. This star and its companion, Zeta2 Reticuli, are both Sun-like stars, with Zeta2 Reticuli being slightly larger and brighter. Compared to the Sun, Zeta1 Reticuli is slightly smaller and less luminous, with more magnetic activity and a higher abundance of elements heavier than helium. The star is faintly visible to the naked eye.","Pop culture":"The Zeta Reticuli system has played a central role across a variety of media. The sci-fi horror films \\"Alien\\" and \\"Prometheus\\" feature expeditions to Zeta Reticuli. From television to literature, it has been the site of extraterrestrial life and technology. It has been included in the card game Yu-Gi-Oh, lyrics of the Muse song \\"Exo-Politics,\\" and even as part of the backstory for the alien-themed snack, Space Raiders.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected in the Zeta Reticuli system. As a star similar to the Sun, located relatively close to the Earth, Zeta1 Reticuli is a promising target for future exoplanet exploration, particularly with direct imaging. If there are planets in the star’s habitable zone, future space telescopes capable of high contrast imaging could reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby, at a wide separation from its binary companion, and the habitable zone would be far enough from the central star to image, Zeta1 Reticuli is a good target for future direct imaging. Future large space telescopes will be able to search for rocky exoplanets down to Earth size in the star’s habitable zone."},{"exo_id":"58_Eri","pl_hostname":"58_Eri","tic_id":"TIC 117979951","displayName":"58 Eridani","pl_hostname_lookup":"58 Eri","Tagline":"A bright, young Sun-like star nearby","Existing info":"58 Eridani is a star like the Sun located relatively close to Earth. It is faintly visible to the naked eye in the southern constellation Eridanus. Comparable in size, temperature and luminosity to the Sun, the star has a relatively higher abundance of elements heavier than helium. 58 Eridani is a young, magnetically active star, surrounded by a dusty debris disk.","Pop culture":"58 Eridani has been featured in several works, including Ted Chiang\'s short story, \\"Omphalos,\\" and M.D. Cooper\'s \\"Aeon 14\\" series.","Planet detection paragraph & timeline":"To date, no exoplanets have been detected around 58 Eridani. As a star similar to the Sun, located relatively close to Earth, 58 Eridani is a promising target for future exoplanet exploration, particularly with direct imaging. If there are planets in the star’s habitable zone, future space telescopes capable of high contrast imaging could reveal them.","RV planets & prospects":"0 planets have been detected to date around this star using radial velocities.\\n\\nThe magnetic activity of the star makes 58 Eridani a more challenging target for radial velocity planet searches.","Transit planets & prospects":"0 planets have been detected to date around this star with transits.","Imaging planets & prospects":"0 planets have been detected to date around this star using direct imaging.\\n\\nBecause the star is nearby and the habitable zone would be far enough from the central star to image, 58 Eridani is a good target for future direct imaging. Future large space telescopes will be able to search for exoplanets down to Earth size in the star’s habitable zone."}]')},function(t,e,i){"use strict";i.r(e),i.d(e,"OBSERVATORY",(function(){return a})),i.d(e,"HOME",(function(){return s}));let s=[{svgPath:window.config.moduleUrl+"assets/svg/planet.svg",list:[{text:"PLANET TYPES"}],text:["Planet","Type"]},{svgPath:window.config.moduleUrl+"assets/svg/missions.svg",list:[{text:"Kepler Discoveries"},{text:"TESS Discoveries"}],text:["Missions"]},{svgPath:window.config.moduleUrl+"assets/svg/observatory.svg",list:["All Observatories","Anglo-Australian Telescope","Arecibo Observatory","Bohyunsan Optical Astronomical Observatory","CHEOPS (CHaracterizing ExOPlanets Satellite)","Cerro Tololo Inter-American Observatory","CoRoT","Fred Lawrence Whipple Observatory","Gemini Observatory","HATNet","HATSouth","Haute-Provence Observatory","Hubble Space Telescope","Infrared Survey Facility","KELT","Kepler and K2","Kitt Peak National Observatory","La Silla Observatory","Las Campanas Observatory","Leoncito Astronomical Complex","Lick Observatory","MEarth Project","MOA","McDonald Observatory","OGLE","Oak Ridge Observatory","Okayama Astrophysical Observatory","Palomar Observatory","Paranal Observatory","Parkes Observatory","Qatar","Roque de los Muchachos Observatory","Spitzer Space Telescope","Subaru Telescope","SuperWASP","TESS","Teide Observatory","Thueringer Landessternwarte Tautenburg","TrES","United Kingdom Infrared Telescope","W. M. Keck Observatory","XO Project","Xinglong Station","Yunnan Astronomical Observatory"],text:["Observatory"]}],a=[{name:"Anglo-Australian Telescope",exo_id:"Anglo-Australian Telescope",image:window.config.mbAPI+"/assets/eox/observatories/image_Anglo_AustralianTelescope",date:"1974",category:"Earth (Siding Spring Observatory, New South Wales, Australia)",by:"Australian Astronomical Observatory",description:"The AAT is a 3.9 m telescope at Siding Spring Observatory with a high-resolution spectrograph, the University College London Echelle Spectrograph (UCLES). The AAT has been used by the Anglo-Australian Planet Search Program since 1998 to discover exoplanets using the radial velocity method."},{name:"Arecibo Observatory",exo_id:"Arecibo Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_AreciboObservatory",date:"1960",category:"Earth (Arecibo, Puerto Rico)",by:"SRI International / USRA / UMET",description:"Arecibo’s 305 m (1,000 ft) radio telescope is the largest single-aperture telescope in the world. It has been used to study the radio emissions from pulsars, and in this capacity was used to discover the first known pulsar planets in 1992. Today, Arecibo is part of SETI (Search for Extra-Terrestrial Intelligence), watching for signs of life in the form of radio transmissions from elsewhere in the galaxy."},{name:"Bohyunsan Optical Astronomical Observatory",exo_id:"Bohyunsan Optical Astronomical Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_BohyunsanOpticalAstronomicalObservatory",date:"1996",category:"Earth (Gyeongbuk, South Korea)",by:"Korea Astronomy and Space Science Institute",description:"BOAO, along with Okayama Astrophysical Observatory in Japan and Xinglong Station in China, has been used by an international team to discover exoplanets using the radial velocity method as part of the East Asian Planet Search Network."},{name:"CHEOPS (CHaracterizing ExOPlanets Satellite)",exo_id:"CHEOPS (CHaracterizing ExOPlanets Satellite)",image:window.config.mbAPI+"/assets/eox/observatories/image_CHEOPS_CHaracterizingExOPlanetsSatellite",date:"2017 (planned)",category:"Space (Sun-synchronous LEO)",by:"ESA / Swiss Space Office",description:"Planned for launch in 2017, the CHEOPS spacecraft is intended to examine transiting exoplanets around nearby, bright stars with a 0.30 m reflector telescope to accurately measure their radii. Its main targets will be planets for which ground-based studies have already established mass estimates in the range between the mass of Earth and the mass of Neptune; knowing both mass and radius with sufficient precision will allow scientists to determine the approximate composition and type of these planets, helping to establish where the terrestrial “Super Earth” category ends and gas giants begin."},{name:"Cerro Tololo Inter-American Observatory",exo_id:"Cerro Tololo Inter-American Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_CerroTololoInter_AmericanObservatory",date:"1962",category:"Earth (Coquimbo Region, Chile)",by:"National Optical Astronomy Observatory",description:"Located near La Serena, Chile, CTIO conducts research on dark energy and other topics of interest in astronomy. The CTIO 1.5 m telescope has CHIRON mounted, a precise fiber-fed spectrometer that has been used to discover exoplanets using radial velocity measurements."},{name:"CoRoT",exo_id:"CoRoT",image:window.config.mbAPI+"/assets/eox/observatories/image_CoRoT",date:"December 27, 2006",category:"Space (Earth orbit)",by:"CNES / ESA",description:"Operated by the French Space Agency (CNES), ESA, and other partners, CoRoT (French: COnvection ROtation et Transits planétaires; English: Convection Rotation and Planetary Transits) was launched in 2006 to collect asteroseismology data and search for transiting exoplanets. As the first space mission designed with the capability to detect transiting exoplanets, CoRoT led the way for later, more advanced transit observatories such as Kepler and the upcoming PLATO and TESS spacecraft."},{name:"Fred Lawrence Whipple Observatory",exo_id:"Fred Lawrence Whipple Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_FredLawrenceWhippleObservatory",date:"1966",category:"Earth (Mount Hopkins, Arizona)",by:"Harvard-Smithsonian Center for Astrophysics",description:"Among a collection of gamma-ray instruments and other telescopes, Whipple Observatory hosts a 1.5 m reflector with the Advanced Fiber Optic Echelle spectrometer (AFOE) installed. The site is also host to a HATNet telescope and one of the MEarth Project’s installations."},{name:"Gemini Observatory",exo_id:"Gemini Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_GeminiObservatory",date:"2000",category:"Earth (Mauna Kea, Hawaii, USA and Cerro Pachón, Chile)",by:"Association of Universities for Research in Astronomy",description:"The Gemini Observatory consists of a pair of separated twin 8.1 m telescopes, one on Mauna Kea in Hawaii (Gemini North) and one on a mountain in the Chilean Andes (Gemini South). Together the two sites are home to some of the most advanced observatory equipment available to modern astronomers, particularly advanced optics. Gemini has already contributed to the efforts to directly image exoplanets and is likely to contribute even more in the future when the Gemini Planet Imager instrument begins operations."},{name:"HATNet",exo_id:"HATNet",image:window.config.mbAPI+"/assets/eox/observatories/image_HATNet",date:"2000",category:"Earth",by:"Harvard-Smithsonian Center for Astrophysics and Mauna Kea Observatory",description:"Based on a prototype developed by a Hungarian undergraduate student and his advisors at Eötvös Loránd University, the Hungarian Automated Telescope Network consists of three small, fully automated robotic telescopes at two sites in the northern hemisphere. With the addition of HATSouth, the network provides full coverage of both hemispheres. The network scans the sky nightly, watching for signs of transiting exoplanets."},{name:"HATSouth",exo_id:"HATSouth",image:window.config.mbAPI+"/assets/eox/observatories/image_HATSouth",date:"2009",category:"Earth",by:"Las Campanas Observatory (LCO),  High Energy Stereoscopic System (HESS), and Siding Spring Observatory (SSO)",description:"Based on a prototype developed by a Hungarian undergraduate student and his advisors at Eötvös Loránd University, the Hungarian Automated Telescope Network - Southern Hemisphere consists of three small, fully automated robotic telescopes at sites spread throughout the southern hemisphere. When combined with the original three HATNet telescopes in the northern hemisphere, the HAT network provides full coverage of both hemispheres. The network scans the sky nightly, watching for signs of transiting exoplanets."},{name:"Haute-Provence Observatory",exo_id:"Haute-Provence Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_Haute_ProvenceObservatory",date:"1937",category:"Earth (Alpes-de-Haute-Provence, France)",by:"CNRS, Aix Marseille University",description:"Located atop a plateau in the southeast of France, Haute-Provence Observatory’s largest telescope, a 1.93 m reflector, has been used successfully to hunt exoplanets using the radial velocity method. The first known exoplanet around a main sequence star, 51 Pegasi b, was discovered 1995 using the ELODIE instrument at Haute-Provence."},{name:"Hubble Space Telescope",exo_id:"Hubble Space Telescope",image:window.config.mbAPI+"/assets/eox/observatories/image_HubbleSpaceTelescope",date:"April 24, 1990",category:"Space (Earth orbit)",by:"NASA",description:"One of the most influential space missions ever launched, the Hubble Space Telescope, launched in 1990, has provided astronomers with more than pretty pictures -- Hubble has contributed significant exoplanet discoveries, including one of the first visible-light images of a planet beyond our solar system. Hubble has also been able to detect exoplanet atmospheres and remains one of the few instruments capable of making such detailed measurements."},{name:"Infrared Survey Facility",exo_id:"Infrared Survey Facility",image:window.config.mbAPI+"/assets/eox/observatories/image_InfraredSurveyFacility",date:"2000",category:"Earth (Sutherland, South Africa)",by:"South African Astronomical Observatory / Nagoya University",description:"The Infrared Survey Facility at Sutherland’s SIRIUS imaging instrument on its 1.4 m telescope has been used to discover an exoplanet through near-infrared imaging."},{name:"KELT",exo_id:"KELT",image:window.config.mbAPI+"/assets/eox/observatories/image_KELT",date:"2005",category:"Earth (Arizona, USA and Sutherland, South Africa)",by:"Ohio State University and other Universities",description:"The Kilodegree Extremely Little Telescope survey project consists of two robotic telescopes searching for transiting exoplanets around bright stars."},{name:"Kepler and K2",exo_id:"Kepler",image:window.config.mbAPI+"/assets/eox/observatories/image_Kepler",date:"March 7, 2009",category:"Space (Earth-trailing orbit)",by:"NASA",description:"Launched in 2009, NASA's Kepler mission spent over four years intently observing a single patch of sky and discovered over 1,000 planets around other stars, with thousands more potential planet discoveries waiting to be confirmed. Since June 2014, the Kepler spacecraft's operations have been extended with a new mission, dubbed “K2,” continuing the search for extrasolar planets outside of its original observing field."},{name:"Kitt Peak National Observatory",exo_id:"Kitt Peak National Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_KittPeakNationalObservatory",date:"1958",category:"Earth (Kitt Peak, Arizona, USA)",by:"National Optical Astronomy Observatory",description:"Kitt Peak is home to a 0.9 m coudé feed telescope, used for an exoplanet survey, as well as a 2.1 m telescope with a custom built doppler spectrometer, the Exoplanet Tracker."},{name:"La Silla Observatory",exo_id:"La Silla Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_LaSillaObservatory",date:"1964",category:"Earth (Coquimbo Region, Chile)",by:"European Southern Observatory",description:"At its dry and remote site in Chile’s Atacama desert, La Silla Observatory has access to some of the darkest night skies on Earth. Among other instruments, La Silla plays host to HARPS (the High Accuracy Radial Velocity Planet Searcher) mounted on its 3.6 m telescope, and CORALIE, a spectrograph mounted on La Silla’s 1.2 m telescope."},{name:"Las Campanas Observatory",exo_id:"Las Campanas Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_LasCampanasObservatory",date:"1971",category:"Earth (Atacama Region, Chile)",by:"Carnegie Institution for Science",description:"Located in Chile above the Atacama desert, Las Campanas observatory operates the twin 6.5 m Magellan telescopes, which have several spectrographic instruments for discovering exoplanets through the radial velocity method. Las Campanas is also home to the main instrument of the OGLE project, operated by the University of Warsaw."},{name:"Leoncito Astronomical Complex",exo_id:"Leoncito Astronomical Complex",image:window.config.mbAPI+"/assets/eox/observatories/image_LeoncitoAstronomicalComplex",date:"1983",category:"Earth (San Juan Province, Argentina)",by:"National Scientific and Technical Research Council",description:"Located in Argentina’s El Leoncito National Park, an area which rarely sees cloud cover, Leoncito Astronomical Complex is home to several telescopes. The observatory’s 2.15 m Jorge Sahade telescope has been used to detect exoplanets by observing eclipse timing variations."},{name:"Lick Observatory",exo_id:"Lick Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_LickObservatory",date:"1876",category:"Earth (Mount Hamilton, California, USA)",by:"University of California",description:"The world’s first permanently occupied mountaintop observatory, Lick Observatory is situated just east of California’s Silicon Valley.  Lick Observatory has been used to discover several of the moons of Jupiter, near-Earth asteroids, and many exoplanets. Most exoplanet discovery research at the observatory is done with the Hamilton spectrograph on the 3.0 m Shane telescope, using the radial velocity method."},{name:"MEarth Project",exo_id:"MEarth Project",image:window.config.mbAPI+"/assets/eox/observatories/image_MEarthProject",date:"2008",category:"Earth (Mount Hopkins, Arizona, USA and Coquimbo Region, Chile)",by:"Harvard-Smithsonian Center for Astrophysics",description:"A robotic observatory adjunct to Fred Lawrence Whipple Observatory in Arizona, MEarth’s installation monitors the brightness of red dwarf stars, searching for transiting exoplanets."},{name:"MOA",exo_id:"MOA",image:window.config.mbAPI+"/assets/eox/observatories/image_MOA",date:"1995",category:"Earth (Mount John, South Island, New Zealand)",by:"University of Canterbury / Nagoya University",description:"Microlensing Observations in Astrophysics is a collaborative project between researchers in New Zealand and Japan that observes microlensing phenomena to investigate dark matter and exoplanets. MOA uses a 1.8 m telescope in New Zealand which was specially built for the project."},{name:"McDonald Observatory",exo_id:"McDonald Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_McDonaldObservatory",date:"1932",category:"Earth (Davis Mountains, Texas, USA)",by:"University of Texas at Austin",description:"Atop Mount Fowlkes in the Davis Mountains in western Texas, the McDonald Observatory hosts one of the largest optical telescopes in the world, the 9.2 m Hobby-Eberly Telescope. Unique in that it is optimized for spectrography, the telescope’s three spectrograph instruments have been used to measure the mass of one of the largest known black holes, in addition to discovering exoplanets through precise radial velocity measurements of stars."},{name:"OGLE",exo_id:"OGLE",image:window.config.mbAPI+"/assets/eox/observatories/image_OGLE",date:"1992",category:"Earth (Atacama Region, Chile)",by:"Operated by: University of Warsaw",description:"The Optical Gravitational Lensing Experiment is a Polish project dedicated to using the microlensing technique to discover dark matter; its discovery of more than two dozen exoplanets has been a side benefit. From a dedicated telescope specially constructed by the project at Las Campanas Observatory in the Chilean desert, OGLE watches for gravitational microlensing events that can sometimes indicate the presence of an unseen planet. OGLE has also discovered several planets by observing transits."},{name:"Oak Ridge Observatory",exo_id:"Oak Ridge Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_OakRidgeObservatory",date:"1933",category:"Earth (Harvard, Massachusetts, USA)",by:"Harvard University",description:"Also known as the George R. Agassiz Station, Oak Ridge was formerly a facility of the Harvard-Smithsonian Astrophysical Observatory until 2005. The 61 in (1.55 m) Wyeth telescope was used by David Latham et al. in their 1989 discovery of the optically unseen sub brown dwarf HD 114762 b, arguably the first exoplanet ever detected."},{name:"Okayama Astrophysical Observatory",exo_id:"Okayama Astrophysical Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_OkayamaAstrophysicalObservatory",date:"1960",category:"Earth (Mount Chikurinji, Okayama, Japan)",by:"National Astronomical Observatory of Japan",description:"A facility of the National Astronomical Observatory of Japan, Okayama Observatory’s main telescope is a 1.88 m reflector with HIDES (the High Dispersion Echelle Spectrograph) and other spectrographs mounted. Okayama Astrophysical Observatory, along with Xinglong Station in China and Bohyunsan Optical Astronomical Observatory in South Korea, has been used by an international team to discover exoplanets using the radial velocity method as part of the East Asian Planet Search Network."},{name:"Palomar Observatory",exo_id:"Palomar Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_PalomarObservatory",date:"1928",category:"Earth (California, USA)",by:"California Institute of Technology",description:"Located in the mountains of southern California, Palomar Observatory is home to the historic 200 in (5.1 m) Hale Telescope, which was the largest in the world for over twenty-five years following its construction in 1949. The Palomar High Angular Resolution Observer (PHARO) adaptive optics camera on the Hale Telescope has been used to discover exoplanets by direct imaging. Many of the municipalities in the area near Palomar have taken steps to reduce light pollution that might affect the observatory’s operations."},{name:"Paranal Observatory",exo_id:"Paranal Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_ParanalObservatory",date:"1998",category:"Earth (Cerro Paranal, Chile)",by:"European Southern Observatory",description:"By total light-collecting area, Paranal Observatory in the Atacama desert of Chile is the largest observatory in the southern hemisphere. Paranal is home to the Very Large Telescope (VLT) a set of four identical 8.2 m telescopes that can be combined to create an interferometer, the VLTI. This combined instrument allows astronomers are able to see with a resolution equivalent to distinguishing the two headlights of a car at the distance of the moon, making the VLTI an invaluable tool for imaging exoplanets directly."},{name:"Parkes Observatory",exo_id:"Parkes Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_ParkesObservatory",date:"1961",category:"Earth (Parkes, New South Wales, Australia)",by:"Commonwealth Scientific and Industrial Research Organization",description:"Parkes Observatory (a.k.a. “The Dish”) is a large radio astronomy facility in Australia. The main instrument is a 64 m altitude-azimuth radio dish telescope, which has been used to discover pulsar planets."},{name:"Qatar",exo_id:"Qatar",image:window.config.mbAPI+"/assets/eox/observatories/image_Qatar",date:"2008",category:"Earth (Mayhill, New Mexico, USA)",by:"Qatar Foundation",description:"The Qatar Exoplanet Survey, funded by the semi-private non-profit Qatar Foundation, uses a purpose-built automated robotic observatory to conduct a survey looking for transiting exoplanets. The design and location of the instrument were chosen to complement the SuperWASP network of automated telescopes."},{name:"Roque de los Muchachos Observatory",exo_id:"Roque de los Muchachos Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_RoquedelosMuchachosObservatory",date:"1979",category:"Earth (La Palma, Canary Islands)",by:"European Northern Observatory",description:"According to astronomical seeing data, Roque de los Muchachos Observatory on the island of La Palma has the second best conditions for optical and near-infrared observation in the northern hemisphere, behind the Mauna Kea Observatories site. It is home to the 10.4 m Gran Telescopio Canarias, currently the largest in the world. The observatory’s Telescopio Nazionale Galileo (TNG) 3.58 m telescope is equipped with HARPS-N, a high-precision echelle spectrograph for radial velocity exoplanet discovery based on the original HARPS instrument on the 3.6 m telescope at ESO La Silla Observatory."},{name:"Spitzer Space Telescope",exo_id:"Spitzer Space Telescope",image:window.config.mbAPI+"/assets/eox/observatories/image_SpitzerSpaceTelescope",date:"August 25, 2003",category:"Space (Earth-trailing orbit)",by:"NASA",description:"An infrared space telescope and part of NASA’s Great Observatories program, Spitzer was responsible for numerous exoplanet science milestones, including the first detection of an exoplanet atmosphere and the first temperature map of an exoplanet. Launched in 2003, Spitzer followed the Earth around the sun in what is known as an “Earth-trailing” orbit. The mission completed in January 2020."},{name:"Subaru Telescope",exo_id:"Subaru Telescope",image:window.config.mbAPI+"/assets/eox/observatories/image_SubaruTelescope",date:"1986",category:"Earth (Mauna Kea, Hawaii, USA)",by:"National Astronomical Observatory of Japan",description:"On top of Mauna Kea in Hawaii, next door to the W. M. Keck Observatory, sits the 8.2 m Subaru Telescope, the flagship installation of the National Astronomical Observatory of Japan. The Subaru Telescope has been used to collect radial velocity data for many planet discoveries. Its HiCIAO (High-Contrast Coronographic Imager for Adaptive Optics) instrument has also contributed to research on direct imaging of exoplanets."},{name:"SuperWASP",exo_id:"SuperWASP",image:window.config.mbAPI+"/assets/eox/observatories/image_SuperWASP",date:"2002",category:"Earth",by:"Multiple UK Universities",description:"The UK’s leading exoplanet search program, SuperWASP (Wide-Angle Search for Planets) is a network of two robotic telescope installations, one on the island of La Palma in the Canary Islands and the other in Sutherland, South Africa. The telescopes operate autonomously and continuously year-round, providing full coverage of both hemispheres of the sky. Each installation contains eight small wide-angle cameras that monitor millions of stars simultaneously, watching for the telltale dip in brightness that indicates a planetary transit. The array can gather up to 100 gigabytes of data per night."},{name:"TESS",exo_id:"Transiting Exoplanet Survey Satellite (TESS)",image:window.config.mbAPI+"/assets/eox/observatories/image_TESS_TransitingExoplanetSurveySatellite",date:"2018",category:"Space (High Eccentricity HEO)",by:"NASA",description:"Launched in 2018, TESS (Transiting Exoplanet Survey Satellite) is designed to search for and discover new exoplanets  by observing transits in an all-sky survey. TESS’s main instrument is a set of four wide-angle CCD cameras, similar to those used on ground-based automated transit survey telescopes such as SuperWASP. Whereas ground-based all-sky surveys have been most effective at finding giant planets, TESS aims to discover rocky planets that transit nearby stars, ideal candidates for further characterization with large ground-based telescopes or the future James Webb Space Telescope."},{name:"Teide Observatory",exo_id:"Teide Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_TeideObservatory",date:"1964",category:"Earth (Tenerife, Canary Islands)",by:"Instituto de Astrofísica de Canarias",description:"The IAC-80 0.80 m telescope at Teide Observatory has been used to directly image a large near deuterium burning limit exoplanet."},{name:"Thueringer Landessternwarte Tautenburg",exo_id:"Thueringer Landessternwarte Tautenburg",image:window.config.mbAPI+"/assets/eox/observatories/image_ThueringerLandessternwarteTautenburg",date:"1960",category:"Earth (Tautenburg, Germany)",by:"Thueringian State Observatory",description:"Thueringer Landessternwarte Tautenburg, also known as Karl Schwarzschild Observatory, hosts the 2.0 m Alfred Jensch telescope. The observatory has been used to discover exoplanets using the radial velocity method."},{name:"TrES",exo_id:"TrES",image:window.config.mbAPI+"/assets/eox/observatories/image_TrES",date:"2003",category:"Earth (Lowell Observatory, Palomar Observatory, and Canary Islands)",by:"Harvard-Smithsonian Center for Astrophysics",description:"The Transatlantic Exoplanet Survey uses a network of three 10 cm robotic telescopes spread across the northern hemisphere to search for transiting exoplanets. TrES is no longer operational."},{name:"United Kingdom Infrared Telescope",exo_id:"United Kingdom Infrared Telescope",image:window.config.mbAPI+"/assets/eox/observatories/image_UnitedKingdomInfraredTelescope",date:"1975",category:"Earth (Mauna Kea, Hawaii)",by:"University of Arizona / University of Hawaii / Lockheed Martin Advanced Technology Center",description:"The United Kingdom Infrared Telescope (UKIRT), located at the Mauna Kea Observatories site, is used to conduct the UKIRT Infrared Deep Sky Survey. As part of the survey, the facility has discovered a handful of transiting exoplanets. Originally owned by the UK Science and Technology Facilities Council, ownership was transferred to the University of Hawaii in 2014. UKIRT is currently funded by NASA and operated by the University of Arizona in conjunction with the University of Hawaii and the Lockheed Martin Advanced Technology Center."},{name:"W. M. Keck Observatory",exo_id:"W. M. Keck Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_W_M_KeckObservatory",date:"1985",category:"Earth (Mauna Kea, Hawaii, USA)",by:"California Association for Research in Astronomy",description:"Situated on the summit of Hawaii’s Mauna Kea, the two 10 m telescopes of the W. M. Keck Observatory are among the largest in the world and are equipped with an advanced adaptive optics system to compensate for blurring due to atmospheric turbulence. One of the observatory’s most complex main instruments is HIRES (the High Resolution Echelle Spectrometer), which is capable of precisely measuring changes in a star’s radial velocity. It is one of the leading ground-based observatories for exoplanet research."},{name:"XO Project",exo_id:"XO Project",image:window.config.mbAPI+"/assets/eox/observatories/image_XO",date:"2005",category:"Earth (Haleakala, Hawaii, USA)",by:"XO Project",description:"The XO project is an automated photometric search for transiting exoplanets. The autonomous installation was built from commercially available equipment and parts, and consists of two 200mm telephoto camera lenses, along with sensors and computer-controlled mount. The XO Telescope is located on the summit of Haleakala on the island of Maui in Hawaii."},{name:"Xinglong Station",exo_id:"Xinglong Station",image:window.config.mbAPI+"/assets/eox/observatories/image_XinglongStation",date:"pre-1995",category:"Earth (Yanshan Mountains, Hebei, China)",by:"National Astronomical Observatory of China",description:"Along with Okayama Astrophysical Observatory in Japan and Bohyunsan Optical Astronomical Observatory in South Korea, China’s Xinglong Station has been used by an international team to discover exoplanets using the radial velocity method as part of the East Asian Planet Search Network."},{name:"Yunnan Astronomical Observatory",exo_id:"Yunnan Astronomical Observatory",image:window.config.mbAPI+"/assets/eox/observatories/image_YunnanAstronomicalObservatory",date:"1972",category:"Earth (Kunming, Yunnan, China)",by:"Chinese Academy of Sciences",description:"This Chinese observing station’s 2.4 m Lijiang telescope has been used to discover an exoplanet through observing eclipse timing variations."}]},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(296);i(336);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={open:!1,tabIndex:0,listIndices:{},panelIndex:null},this._panel=a.a.createRef(),this.open=this.open.bind(this),this.close=this.close.bind(this),this.handleProps=this.handleProps.bind(this),this._handleBgClick=this._handleBgClick.bind(this),this._openPanel=this._openPanel.bind(this),this._closePanel=this._closePanel.bind(this),this._getPanelContent=this._getPanelContent.bind(this),this._getSubpanelContent=this._getSubpanelContent.bind(this),this._handleSelection=this._handleSelection.bind(this),this._createSettingEntry=this._createSettingEntry.bind(this)}componentDidMount(){this.handleProps()}handleProps(){let{tabs:t,tabIndex:e}=this.props,{listIndices:i}=this.state,s={};e!==this.state.tabIndex&&(s.tabIndex=e);let a=t[e];a&&Array.isArray(a.list)&&(a.list.length<=1?s.panelIndex=null:s.panelIndex=e);let r=!1;for(let e=t.length-1;e>=0;e--){let a=t[e];"listIndex"in a&&i[e]!==a.listIndex&&(i[e]=a.listIndex,r=!0,s.panelIndex=null)}r&&(s.listIndices=i),n.default.isEmptyObj(s)||this.setState(s)}open(){this.setState({open:!0},()=>{document.addEventListener("touchstart",this._handleBgClick,!1),document.addEventListener("click",this._handleBgClick,!1)})}close(){this.setState({open:!1},()=>{document.addEventListener("touchstart",this._handleBgClick,!1),document.removeEventListener("click",this._handleBgClick)})}_handleBgClick(t){"main"===t.target.id&&this.close()}_openPanel(t){this.setState({panelIndex:t})}_closePanel(){this.setState({panelIndex:null})}_getPanelContent(t){switch(t){case"settings":{let{tabs:t}=this.props;return t.map((t,e)=>this._createSettingEntry(t.text,e,{checkStatus:t.checkStatus,onChange:t.tabFunction}))}default:return this._getSubpanelContent()}}_getSubpanelContent(){let{tabIndex:t,panelIndex:e,listIndices:i}=this.state,{tabs:s,info:n}=this.props;switch(e){case null:return s.map((e,i)=>{let s=e.text[0].toLowerCase(),r=e.list&&e.list.length>1;if(e.list&&0===e.list.length)return null;let o="compare"!==s&&t===i?" current":"";if(e.text&&Array.isArray(e.text)&&n&&n.controller)for(let t=0;t<e.text.length;t+=1)o=e.text[t].toLowerCase()===n.controller.toLowerCase()?" current":" ";return a.a.createElement("li",{key:i,className:"menuItem "+s+o,onClick:()=>{r?this._openPanel(i):e.tabFunction&&this._handleSelection(e.tabFunction)}},a.a.createElement("div",{className:"icon"}),e.text.join(" "),r?a.a.createElement("div",{className:"arrowBox"},a.a.createElement("span",{className:"arrowRight"})):null)});default:{let n=s[e];return n&&Array.isArray(n.list)?n.list.map((s,r)=>{let o="compare"===n.text[0].toLowerCase();return a.a.createElement("li",{key:r,className:"menuItem"+(t!==e&&!o||i[e]!==r?"":" current"),onClick:()=>{o||(t=e),i[e]=r,this.setState({tabIndex:t,listIndices:i}),this._handleSelection(n.listFunction,s)}},n.listRenderFunction?n.listRenderFunction(s):s)}):null}}}_handleSelection(t,e){t&&(t(e),this.close())}_createSettingEntry(t,e,{checkStatus:i=!1,onChange:s=null}={}){return a.a.createElement("div",{key:e,className:"settingsEntry"},a.a.createElement("div",null,a.a.createElement("label",null,t)),a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement("label",{className:"switch"},a.a.createElement("input",{type:"checkbox",checked:i,onChange:s}),a.a.createElement("span",{className:"slider round"}))))}render(){let{open:t,panelIndex:e}=this.state,{title:i,type:s}=this.props;return a.a.createElement("div",{ref:this._panel,className:"rightPanel"+(t?" active scrollable":" hidden"),onClick:this._handleBgClick},a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerLeft"},null===e?a.a.createElement("div",{className:"title"},i):a.a.createElement("button",{className:"headerButton",onClick:this._closePanel},a.a.createElement("span",{className:"buttonIcon arrowLeft"}))),a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton small panelButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))),a.a.createElement("ul",{className:"menuOptions"},this._getPanelContent(s)))}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(296);i(338);e.default=class extends s.Component{constructor(t){super(t),this.state={open:!1},this.close=this.close.bind(this),this.open=this.open.bind(this)}open(){this.setState({open:!0})}close(){this.setState({open:!1})}render(){if(!this.state.open)return null;let t=n.default.isEmptyObj(this.props.getManager("content").getDB("stars"))?null:Object.keys(this.props.getManager("content").getDB("stars")).length,e=n.default.isEmptyObj(this.props.getManager("content").getDB("planets"))?null:Object.keys(this.props.getManager("content").getDB("planets")).length,i=this.props.getManager("content").getKeplerCandidateCount()||null,s=n.default.isEmptyObj(this.props.getManager("content").getDB("tesscandidates"))?null:Object.keys(this.props.getManager("content").getDB("tesscandidates")).length;return t=n.default.numberToComma(t),e=n.default.numberToComma(e),i=n.default.numberToComma(i+s),a.a.createElement("div",{className:"explore overlay scrollable"},this.props.isMobile?a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))):a.a.createElement("button",{className:"headerButton closeButton big",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})),a.a.createElement("section",{className:"header"},a.a.createElement("header",null,a.a.createElement("h1",null,"Milky Way"))),a.a.createElement("section",{className:"content-page"},a.a.createElement("figure",{className:"image"},a.a.createElement("img",{alt:"universe",src:window.config.moduleUrl+"assets/image/generic/universe.jpg"})),a.a.createElement("div",{className:"stats block"},a.a.createElement("div",{className:"title"},"Discoveries"),a.a.createElement("div",{className:"data-block first"},a.a.createElement("div",{className:"count"},e),a.a.createElement("div",{className:"label"},"confirmed")),a.a.createElement("div",{className:"separator first"}),a.a.createElement("div",{className:"data-block"},a.a.createElement("div",{className:"count"},i),a.a.createElement("div",{className:"label"},"nasa candidates")),a.a.createElement("div",{className:"separator last"}),a.a.createElement("div",{className:"data-block last"},a.a.createElement("div",{className:"count"},t),a.a.createElement("div",{className:"label"},"plantary systems"))),a.a.createElement("div",{className:"content small block"},a.a.createElement("h2",null,"The Milky Way"),a.a.createElement("div",{className:"subtitle"},a.a.createElement("p",null,"From ",a.a.createElement("a",{href:"https://science.nasa.gov/",target:"_blank",rel:"noopener noreferrer"},"NASA’s Science Mission Directorate website"))),a.a.createElement("p",null,"Our galaxy, the Milky Way, is typical: it has hundreds of billions of stars, enough gas and dust to make billions more stars, and at least ten times as much dark matter as all the stars and gas put together. And it’s all held together by gravity."),a.a.createElement("p",null,"Like more than two-thirds of the known galaxies, the Milky Way has a spiral shape. At the center of the spiral, a lot of energy and, occasionally, vivid flares are being generated. Based on the immense gravity that would be required to explain the movement of stars and the energy expelled, the astronomers conclude that the center of the Milky Way is a supermassive black hole."),a.a.createElement("p",null,"Other galaxies have elliptical shapes, and a few have unusual shapes like toothpicks or rings. The Hubble Ultra Deep Field (HUDF) shows this diversity. Hubble observed a tiny patch of sky (one-tenth the diameter of the moon) for one million seconds (11.6 days) and found approximately 10,000 galaxies, of all sizes, shapes, and colors. From the ground, we see very little in this spot, which is in the constellation Fornax."),a.a.createElement("h3",null,"Formation"),a.a.createElement("p",null,"After the Big Bang, the Universe was composed of radiation and subatomic particles. What happened next is up for debate - did small particles slowly team up and gradually form stars, star clusters, and eventually galaxies? Or did the Universe first organize as immense clumps of matter that later subdivided into galaxies?"),a.a.createElement("h3",null,"Collisions"),a.a.createElement("p",null,"The shapes of galaxies are influenced by their neighbors, and, often, galaxies collide. The Milky Way is itself on a collision course with our nearest neighbor, the Andromeda galaxy. Even though it is the same age as the Milky Way, Hubble observations reveal that the stars in Andromeda's halo are much younger than those in the Milky Way. From this and other evidence, astronomers infer that Andromeda has already smashed into at least one and maybe several other galaxies."))),a.a.createElement("div",{className:"close-button"},a.a.createElement("button",{onClick:this.close},"Close")))}}},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312),r=i(296),o=i(342);i(345);e.default=class extends s.PureComponent{constructor(t){super(t),this._resetHomeView=this._resetHomeView.bind(this)}_resetHomeView(){this.props.MainPathChanged("/"),this.props.resetHomeView()}render(){const{isMobile:t,scene:e,openMenuOverlay:i,openPlanetBrowser:s,MainPathChanged:l,getManager:c}=this.props;return a.a.createElement("div",{className:"headerBar toggle-ui-desktop"},a.a.createElement("div",{className:"headerLeft toggle-ui-mobile"},a.a.createElement("a",{className:"nasa_logo",href:"https://www.nasa.gov",title:"visit nasa.gov",target:"_blank",rel:"noopener noreferrer"}),a.a.createElement("button",{className:"brand_logo",title:"Eyes on Exoplanets home",onClick:this._resetHomeView},"Eyes on Exoplanets",a.a.createElement("span",{className:"beta"},"beta"))),a.a.createElement("div",{className:"headerRight"},t?a.a.createElement("button",{className:"headerButton",onClick:i},a.a.createElement("span",{className:"menuIcon"})):a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"headerButton galaxyIcon",onClick:this._resetHomeView},a.a.createElement(n.default,{className:"galaxySVG",src:window.config.moduleUrl+"assets/svg/galaxy_icon.svg"}),"home"),a.a.createElement("button",{className:"headerButton",onClick:s},"browse destinations"),a.a.createElement("div",{className:"missionMenu"},a.a.createElement("button",{className:"headerButton"},"missions"),a.a.createElement("div",{className:"missionMenuNav"},a.a.createElement("div",{className:"missionMenuContentSquare"}),a.a.createElement("div",{className:"missionMenuContent"},r.default.MISSIONS.map((t,e)=>a.a.createElement("label",{key:e,onClick:()=>{l(`spacecraft/${t.id}`)}},t.name))))),a.a.createElement(o.default,{isMobile:t,getManager:c,scene:e,MainPathChanged:l}))))}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312),r=i(343),o=i.n(r),l=i(296);i(344);e.default=class extends s.Component{constructor(t){super(t),this.planetDB=this.props.getManager("content").getDB("planets",!0),this.fusePlanet=new o.a(this.planetDB,{shouldSort:!0,threshold:.5,location:0,distance:1,maxPatternLength:32,minMatchCharLength:3,keys:["displayName"]}),this.starDB=this.props.getManager("content").getDB("stars",!0),this.fuseStar=new o.a(this.starDB,{shouldSort:!0,threshold:.5,location:0,distance:1,maxPatternLength:32,minMatchCharLength:3,keys:["displayName"]}),this.state={searchableDB:"planets",open:!1,closeMenu:t.closeMenu,searchResult:[]},this._ignoreClick=!1,this._placeholderText="Type a name or a partial name of a planet or star.",this.searchMainRef=a.a.createRef(),this.searchRef=a.a.createRef(),this._selectSearchInputClick=this._selectSearchInputClick.bind(this),this._onTabSelect=this._onTabSelect.bind(this),this._onItemSelect=this._onItemSelect.bind(this),this._clearSearch=this._clearSearch.bind(this),this._renderResults=this._renderResults.bind(this),this._renderResult=this._renderResult.bind(this),this.open=this.open.bind(this)}componentDidMount(){document.addEventListener("click",this._selectSearchInputClick,!1)}componentWillUnmount(){document.removeEventListener("click",this._selectSearchInputClick)}_selectSearchInputClick(t){this._ignoreClick?this._ignoreClick=!1:this.searchMainRef.current&&this.searchMainRef.current.contains(t.target)||this.state.searchResult&&0!==this.state.searchResult.length||this.setState({open:!1})}searchDB(t){if(!t)return void this.setState({searchResult:[],searchText:null});let{searchableDB:e}=this.state,i=[],s=t;if(s=(s=(s=(s=s.replace(/ /g,"")).replace(/-/g,"")).replace(/_/g,"")).toLowerCase(),"planets"===e){const e=this.props.getManager("content").getDB("stars");(i=this.planetDB.filter(t=>{if(!t||!t.displayName)return!1;let{displayName:i,pl_hostname:a}=t,n=!0;if(e[a]){const{position:t}=e[a];if(t&&3===t.length){const e=t[0]*t[1]*t[2];n=!0,1!==Math.abs(e)&&0!==e||(n=!1)}}return!!n&&(i=(i=(i=(i=i.replace(/ /g,"")).replace(/-/g,"")).replace(/_/g,"")).toLowerCase()).indexOf(s)>=0}))&&0!==i.length||(i=this.fusePlanet.search(t));const a=this.props.getManager("content").getDB("stars");(i=i.filter(t=>!!(t&&t.displayName&&t.pl_hostname)&&a[t.pl_hostname])).sort((function(t,e){return t.displayName.length-e.displayName.length}))}else"stars"===e&&((i=this.starDB.filter(t=>{if(!t||!t.displayName)return!1;let{displayName:e,position:i}=t,a=!1;if(i&&3===i.length){const t=i[0]*i[1]*i[2];a=!0,1!==Math.abs(t)&&0!==t||(a=!1)}return!!a&&(e=(e=(e=(e=e.replace(/ /g,"")).replace(/-/g,"")).replace(/_/g,"")).toLowerCase()).indexOf(s)>=0}))&&0!==i.length||(i=this.fuseStar.search(t)),i.sort((function(t,e){return t.displayName.length-e.displayName.length})));i=i.filter((t,e)=>(t.plType&&(t.plType=t.plType.indexOf("Jovian")>=0?"Gas Giant":t.plType,t.plType=t.plType.indexOf("super-Terrestrial")>=0?"Super Earth":t.plType,t.plType=t.plType.indexOf("Neptunian")>=0?"Neptune-like":t.plType),e<15));for(let t=0;t<i.length;t++){let e=i[t].position||[0,0,0];if(i[t].pl_hostname){let s=this.props.getManager("content").getDB("stars",!0);for(let a=0;a<s.length;a++)s[a].pl_hostname===i[t].pl_hostname&&(e=s[a].position)}i[t].distanceFromEarth=l.default.convertToDistanceString(l.default.calculateRawDistance(e)-this.props.scene.get("earth").getOcclusionRadius())}this.setState({searchResult:i,searchText:t})}_onTabSelect(t){let{db:e,text:i}=t.currentTarget.dataset;this.setState({searchableDB:e},()=>{this.searchDB(i)})}_onItemSelect(t){let{db:e,id:i}=t.currentTarget.dataset;this.props.closeMenu&&this.props.closeMenu(),this._clearSearch(),"planets"===e?this.props.MainPathChanged(`planet/${i}`):this.props.MainPathChanged(`system/${i}`)}_clearSearch(){this.searchRef.current.value=null,this.setState({searchText:null,searchResult:[],open:!1})}open(){this._ignoreClick=!0,this.setState({open:!0})}_renderResults(t,e){let i=t.length-1;return t.map((t,s)=>a.a.createElement("div",{key:s,"data-db":e,"data-id":t.id,onClick:this._onItemSelect},this._renderResult(e,t,s===i?"last":"")))}_renderResult(t,e,i){let s;return s="planets"===t?[{label:"Distance from Earth:",text:e.distanceFromEarth},{label:"Planet Type:",text:e.plType},{label:"Discovery Date:",text:e.date}]:[{label:"Star Type:",text:e.starType},{label:"Planets:",text:e.planet_count},{label:"Distance from Earth:",text:e.distanceFromEarth}],a.a.createElement("div",{className:"searchGridEntry "+i},a.a.createElement("div",null,a.a.createElement("label",{style:{color:"#9AA9FB",margin:0}},e.displayName)),s.map((t,e)=>a.a.createElement("div",{key:e},a.a.createElement("label",{className:"searchGridKey"},t.label),a.a.createElement("label",{className:"searchGridValue"},t.text))))}componentDidUpdate(t,e,i){!e.open&&this.state.open&&this.searchRef.current&&this.searchRef.current.focus(),t.isMobile&&this.state.searchResult&&this.state.searchResult.length>0&&window.scroll(0,0)}render(){const{open:t,searchText:e,searchableDB:i,searchResult:s}=this.state,{isMobile:r}=this.props;let o=s&&s.length>0,l=r&&o;return a.a.createElement("div",{className:"searchContainer"+(l?" overlay":""),ref:this.searchMainRef},a.a.createElement("div",{style:{display:r?"block":t?"unset":"none"}},l&&a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",null,a.a.createElement("label",{className:"title"},"Search")),a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this._clearSearch},a.a.createElement("span",{className:"buttonIcon close"})))),a.a.createElement("div",{className:"searchBox"+(o?" hasResult":"")},a.a.createElement("input",{ref:this.searchRef,autoComplete:"off",id:"searchInputId",className:"searchInput",placeholder:r?"":this._placeholderText,onChange:t=>{this.searchDB(t.target.value)},type:"text"}),e?a.a.createElement(n.default,{className:"svg svgBlue cancelSVG",src:window.config.moduleUrl+"assets/svg/cancel.svg",onClick:this._clearSearch}):a.a.createElement(n.default,{className:"svg svgWhite searchSVG",src:window.config.moduleUrl+"assets/svg/search.svg",onClick:this.open}),o&&a.a.createElement("div",{className:"searchResultBox scrollable"},a.a.createElement("div",{className:"tabs"},["planets","stars"].map(t=>a.a.createElement("button",{key:t,className:t+" tab "+(i===t?"active":""),"data-db":t,"data-text":e,onClick:this._onTabSelect},t))),a.a.createElement("div",{className:"searchResultScrollBox"},this._renderResults(s,i))))),!r&&a.a.createElement(n.default,{className:"svg svgGray searchSVG toggle",style:{display:t?"none":"block"},src:window.config.moduleUrl+"assets/svg/search.svg",onClick:this.open}),r&&!o&&a.a.createElement("div",{className:"info"},a.a.createElement("label",null,this._placeholderText)))}}},,function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s);i(347);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={loading:!1}}render(){return this.state.loading?a.a.createElement("div",{className:"loading"},a.a.createElement("div",{className:"loading-roller"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))):null}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312),r=i(296),o=i(323),l=i(328),c=i(342);i(349);e.default=class extends s.PureComponent{constructor(t){super(t),this.state={open:!1},this.faq=a.a.createRef(),this.settings=a.a.createRef(),this._handleNavSelection=this._handleNavSelection.bind(this),this.handleProps=this.handleProps.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}handleProps(){this.settings&&this.settings.current&&this.settings.current.handleProps()}open(){this.setState({open:!0})}close(){this.setState({open:!1})}_handleNavSelection(t){this.close();let e,i=t.currentTarget.dataset.id;switch(i){case"earth":e="earth";break;case"home":case"space":e="/",this.props.resetHomeView();break;default:e="spacecraft/"+i}this.props.MainPathChanged(e)}render(){let{open:t}=this.state;const{isMobile:e}=this.props;return e&&a.a.createElement("div",null,a.a.createElement("div",{className:"mainMenu overlay"+(t?" active scrollable":" hidden")},a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerLeft"},a.a.createElement("a",{className:"nasa_logo",href:"https://www.nasa.gov",title:"visit nasa.gov",target:"_blank"}),a.a.createElement("button",{className:"brand_logo",title:"Eyes on Exoplanets home",onClick:()=>{this.props.MainPathChanged("/"),this.close()}},"Eyes on Exoplanets",a.a.createElement("span",{className:"beta"},"beta"))),a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton",onClick:()=>{this.close()}},a.a.createElement("span",{className:"buttonIcon close"})))),a.a.createElement("nav",{className:"siteNav"},a.a.createElement("ul",null,a.a.createElement("li",{className:"navItem"},a.a.createElement("div",{className:"headerButton galaxyIcon","data-id":"home",onClick:this._handleNavSelection},a.a.createElement(n.default,{className:"galaxySVG",src:window.config.moduleUrl+"assets/svg/galaxy_icon.svg"}),a.a.createElement("span",{className:"iconText"},"home")),a.a.createElement("ul",{className:"subNav"},a.a.createElement("li",{"data-id":"space",onClick:this._handleNavSelection},"Space"),a.a.createElement("li",{"data-id":"earth",onClick:this._handleNavSelection},"Earth"))),a.a.createElement("li",{className:"navItem",onClick:()=>{this.props.openPlanetBrowser(),this.close()}},"Browse Destinations"),a.a.createElement("li",{className:"navItem"},"Missions",a.a.createElement("ul",{className:"subNav"},r.default.MISSIONS.map(t=>a.a.createElement("li",{key:t.name+t.id+Math.random(),"data-id":t.id,onClick:this._handleNavSelection},t.name)))),a.a.createElement("li",{className:"navItem",onClick:()=>{this.settings.current.open()}},"Settings"),a.a.createElement("li",{className:"navItem",onClick:()=>{this.faq.current.open()}},"Help"))),a.a.createElement(c.default,{isMobile:e,closeMenu:this.close,getManager:this.props.getManager,MainPathChanged:this.props.MainPathChanged,scene:this.props.scene})),a.a.createElement(l.default,{ref:this.settings,pioneer:this.props.pioneer,scene:this.props.scene,isMobile:e,getManager:this.props.getManager}),a.a.createElement(o.default,{ref:this.faq,isMobile:e}))}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(304),r=i(351),o=i(335),l=i(305);i(353);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={planets:[],tabIndex:0,compareSC:"None",compareSS:!1},this._mobilePanelSC=a.a.createRef(),this._mobilePanelObj=a.a.createRef(),this.dropup=a.a.createRef(),this._resetCompare=this._resetCompare.bind(this),this._handleCompareSC=this._handleCompareSC.bind(this),this._compareSC=this._compareSC.bind(this),this._compareObj=this._compareObj.bind(this),this._goToObject=this._goToObject.bind(this),this._openPanel=this._openPanel.bind(this),this._getPanelContentSC=this._getPanelContentSC.bind(this),this._getPanelContentCmp=this._getPanelContentCmp.bind(this)}componentDidMount(){this.handleProps()}componentWillUnmount(){this.props.getManager("comparison").resetAll()}handleProps(){let{info:t}=this.props;if(!t)return;let e={},i=[];switch(t.controller){case"planet":e.tabIndex=0;break;case"system":e.tabIndex=1;break;case"star":e.tabIndex=2;break;case"spacecraft":e.tabIndex=0,i.push("_mobilePanelSC")}if(t.id){let s=0,a=0,r=this.props.getManager("content").getDB("stars")[t.id],o=this.props.getManager("content").getDB("planets")[t.id];!r&&o&&(r=this.props.getManager("content").getDB("stars")[o.pl_hostname]);let l=r;for(let e in n)if(n[e].stars){e===t.id?l=n[e].stars:"planet"===t.controller&&e===o.pl_hostname&&(l=n[e].stars);for(let i=0;i<n[e].stars.length;i++)if(n[e].stars[i].exo_id===t.id){l=n[e].stars,a=i,r=this.props.getManager("content").getDB("stars")[e];break}}if(r){for(let e=0;e<r.planets.length;e++)if(r.planets[e]===t.id){s=e;break}e.planets=r.planets.sort(),e.stars=l,e.listIndex=s,e.starListIndex=a,i.push("dropup"),i.push("_mobilePanelObj")}else"star"===t.controller&&(e.planets=[])}this.setState(e,()=>{this._resetCompare(),i.forEach(t=>{this[t]&&this[t].current&&this[t].current.handleProps()})})}_resetCompare(){this.setState({compareSC:"None",compareSS:!1},this.props.getManager("comparison").resetAll)}_handleCompareSC(t){let e=t.target.value;this.setState({compareSC:e},()=>{this._compareSC(this.props.info.id,e)})}async _compareSC(t,e){switch(e){case"None":this.props.getManager("comparison").reset(),this.props.MainPathChanged(`spacecraft/${t}`);break;default:await this.props.getManager("comparison").compare(t,e)}}async _compareObj(t,e,i){switch(e){case"None":this._resetCompare();break;default:switch(i){case"planet":await this.props.getManager("comparison").comparePlanet(t,e);break;case"system":this.setState({compareSS:!0},()=>{this.props.getManager("comparison").compareSystem(this.state.compareSS,t)});break;case"star":await this.props.getManager("comparison").compare(t,e)}}}_goToObject(t,e){if(!this.props||!e)return;let i=null;switch(t){case"planet":if(this.props.getManager("content").getDB("planets")[e])i=e;else if(this.props.getManager("content").getDB("stars")[e]){let t=this.props.getManager("content").getDB("stars")[e];i=t.planets.length>0?t.planets[0]:null}else for(let t in n)if(n[t].stars){let s=n[t].stars;for(let a=0;a<s.length;a++)if(s[a].exo_id===e){let e=this.props.getManager("content").getDB("stars")[t];i=e.planets.length>0?e.planets[0]:null}}break;case"system":case"star":if(n[e]&&n[e].stars)i="system"===t?e:n[e].stars[0].exo_id;else if(this.props.getManager("content").getDB("stars")[e])i=e;else if(this.props.getManager("content").getDB("planets")[e]){i=this.props.getManager("content").getDB("planets")[e].pl_hostname,"star"===t&&n[i]&&n[i].stars&&n[i].stars[0]&&n[i].stars[0].exo_id&&(i=n[i].stars[0].exo_id)}else for(let t=0;t<l.length;t+=1)l[t].exo_id===e&&(i=e);if(!i)for(let s in n)if(n[s].stars){let a=n[s].stars;for(let n=0;n<a.length;n++)if(a[n].exo_id===e){i="system"===t?s:e;break}}}"system"===t?this.props.getManager("comparison").reset():this._resetCompare(),this.props.MainPathChanged(`${t}/${i}`)}_openPanel(t){switch(t.currentTarget.id){case"compareBtnSC":this._mobilePanelSC.current.open();break;case"compareBtnObj":this._mobilePanelObj.current.open()}}_getPanelContentSC(t){return t?a.a.createElement("div",{className:"toggle-ui-mobile"},a.a.createElement(o.default,{ref:this._mobilePanelSC,title:"View Options",tabs:[{text:["Compare"],listIndex:2,list:[{id:"scientist",text:"Compare to Scientist"},{id:"school_bus",text:"Compare to School Bus"},{id:"None",text:"Compare to None"}],listRenderFunction:t=>t.text,listFunction:t=>{this._compareSC(this.props.info.id,t.id)}}]}),a.a.createElement("button",{id:"compareBtnSC",className:"rightPanelToggle",onClick:this._openPanel},a.a.createElement("span",{className:"rightPanelToggleIcon view"}))):a.a.createElement("div",{className:"dropUp toggle-ui-desktop"},a.a.createElement("select",{className:"dropdownInfo",value:this.state.compareSC,onChange:this._handleCompareSC},a.a.createElement("option",{value:"None"},"COMPARE SIZE"),a.a.createElement("option",{value:"scientist"},"SCIENTIST"),a.a.createElement("option",{value:"school_bus"},"SCHOOL BUS")))}_getPanelContentCmp(t){let e=[],i=this.props.info.id;switch(t){case"planet":e=[{id:"jupiter_fake",text:"Compare to Jupiter"},{id:"earth_fake",text:"Compare to Earth"},{id:"None",text:"Compare to None"}];break;case"system":e=[{id:i,text:"Compare to Our Solar System"},{id:"None",text:"Compare to None"}];break;case"star":e=[{id:"sun_fake",text:"Compare to Sun"},{id:"None",text:"Compare to None"}]}return{text:["Compare"],listIndex:e.length-1,list:e,listRenderFunction:t=>t.text,listFunction:e=>{this._compareObj(i,e.id,t)}}}render(){let{planets:t,tabIndex:e,listIndex:i,starListIndex:s,compareSS:h,stars:d}=this.state,{info:u,isMobile:p}=this.props;return"spacecraft"===u.controller?this._getPanelContentSC(p):p?a.a.createElement("div",{className:"toggle-ui-mobile",key:u.id+"mobile"},a.a.createElement(o.default,c({ref:this._mobilePanelObj,title:"View Options",tabIndex:e},this.props,{tabs:[{list:t,listIndex:i,text:["Planet"],listRenderFunction:t=>{let e=this.props.getManager("content").getDB("planets")[t]||null;return e?e.displayName:e},listFunction:t=>{let e=this.props.getManager("content").getDB("planets")[t]||null;e&&e.id&&(this._resetCompare(),this.props.MainPathChanged(`planet/${e.id}`))},tabFunction:()=>{this._goToObject("planet",u.id)}},{text:["System"],tabFunction:()=>{this._goToObject("system",u.id)}},{list:d,listIndex:s,text:["Star"],listRenderFunction:t=>t.displayName,listFunction:t=>{this.props.MainPathChanged(`star/${t.exo_id}`)},tabFunction:()=>{this._goToObject("star",u.id)}},this._getPanelContentCmp(u.controller)]})),a.a.createElement("button",{id:"compareBtnObj",className:"rightPanelToggle",onClick:this._openPanel},a.a.createElement("span",{className:"rightPanelToggleIcon view"}))):a.a.createElement(r.default,{key:Math.random()+"_dropuptab",ref:this.dropup,isMobile:p,title:"VIEW",tabIndex:e,tabs:[{svgPath:window.config.moduleUrl+"assets/svg/planet.svg",list:t,listIndex:i,text:["Planet"],subtitleHide:!u.id||!this.props.getManager("content").getDB("planets")[u.id]||!this.props.getManager("content").getDB("planets")[u.id].pl_rade,subtitleFormat:"dropdown",subtitleOptions:[{text:"COMPARE",f:async t=>{await this.props.getManager("comparison").comparePlanet(u.id)}},{text:"COMPARE TO EARTH",f:async t=>{await this.props.getManager("comparison").comparePlanet(u.id,"earth_fake")}},{text:"COMPARE TO JUPITER",f:async t=>{await this.props.getManager("comparison").comparePlanet(u.id,"jupiter_fake")}}],listRenderFunction:t=>{let e=this.props.getManager("content").getDB("planets")[t]||null;return e?e.displayName:e},listFunction:t=>{let e=this.props.getManager("content").getDB("planets")[t]||null;e&&e.id&&(this._resetCompare(),this.props.MainPathChanged(`planet/${e.id}`))},tabFunction:()=>{this._goToObject("planet",u.id)}},{svgPath:window.config.moduleUrl+"assets/svg/system.svg",text:["System"],subtitle:"COMPARE TO OUR SOLAR SYSTEM",subtitleFormat:"button",subtitleFunction:t=>{this.setState({compareSS:!h},()=>{this.props.getManager("comparison").compareSystem(this.state.compareSS,u.id)})},tabFunction:()=>{this._goToObject("system",u.id)}},{svgPath:window.config.moduleUrl+"assets/svg/star.svg",list:d,listIndex:s,text:["Star"],subtitleFormat:"dropdown",subtitleOptions:[{text:"COMPARE",f:t=>{this.props.getManager("comparison").reset(),this.props.getManager("camera").flyToObject(u.id,"star")}},{text:"COMPARE TO SUN",f:async t=>{let e=null;if(this.props.getManager("content").getDB("stars")[u.id])e=u.id;else for(let t in n)if(n[t]&&n[t].stars){let i=n[t].stars;for(let t=0;t<i.length;t++)if(i[t].exo_id===u.id){e=u.id;break}}if(!e)for(let t=0;t<l.length;t+=1)l[t].exo_id===u.id&&(e=u.id);e&&await this.props.getManager("comparison").compare(e,"sun_fake")}}],listRenderFunction:t=>t.displayName,listFunction:t=>{this.props.MainPathChanged(`star/${t.exo_id}`)},tabFunction:()=>{this._goToObject("star",u.id)}}]})}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312);i(352);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={dropDownIndex:0,hoverIndex:0,listIndex:0,tabIndex:0}}componentDidMount(){this.handleProps()}handleProps(){let t=this.props.tabIndex||0,e=this.props.tabs[t].listIndex||0;this.setState({tabIndex:this.props.tabIndex,listIndex:e})}render(){let{title:t,tabs:e,isMobile:i}=this.props,{dropDownIndex:s,hoverIndex:r,listIndex:o,tabIndex:l}=this.state;return e?i?null:a.a.createElement("div",{id:"dropUpId",className:"dropUp toggle-ui-desktop"},a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",{className:"titleLine"}),a.a.createElement("label",{className:"titleText"},t),a.a.createElement("div",{className:"titleLine"})),a.a.createElement("div",{style:{display:"flex",position:"relative"}},e.map((t,e)=>{let i="tab "+(e===l?"active":"inactive");if(t.list&&t.list.length>0)i+=" notempty";else if(t.list&&0===t.list.length)return null;return a.a.createElement("div",{key:e+Math.random(),className:i,onMouseOver:()=>{this.setState({hoverIndex:e})},onClick:()=>{this.setState({dropDownIndex:0}),t.tabFunction&&t.tabFunction(t)}},a.a.createElement(n.default,{className:"icon "+(e===l?"active":"inactive"),src:t.svgPath}),t.text.map((t,e)=>a.a.createElement("label",{key:t+e+Math.random()},t)),t.list&&t.list.length>1&&a.a.createElement("div",{className:"more"}))}),r>=0&&e[r]&&e[r].list&&e[r].list.length>1?a.a.createElement("div",{className:"list"},e[r].list.map((t,i)=>{let s=t;return e[r].listRenderFunction&&(s=e[r].listRenderFunction(s)),a.a.createElement("button",{key:s+i+Math.random(),className:"item "+(i===o?"active":""),onClick:()=>{e[r].listFunction&&(this.setState({dropDownIndex:0}),e[r].listFunction(t))}},s)})):null),a.a.createElement("div",{className:"compare"},e[l]&&e[l].subtitle&&"text"===e[l].subtitleFormat&&a.a.createElement("label",{style:{color:"#9299b5"}},e[l].subtitle),e[l]&&e[l].subtitle&&"button"===e[l].subtitleFormat&&a.a.createElement("button",{className:"compareSolarSystem",onClick:()=>{e[l].subtitleFunction&&e[l].subtitleFunction(e[l].subtitle)}},e[l].subtitle),e[l]&&"dropdown"===e[l].subtitleFormat&&e[l].subtitleOptions&&a.a.createElement("select",{className:"dropdownInfo",disabled:e[l].subtitleHide,style:{opacity:e[l].subtitleHide?0:1},value:s,onChange:t=>{if(e[l].subtitleOptions){let i=e[l].subtitleOptions;for(let e=0;e<i.length;e++)if(i[e].text===t.target.value){this.setState({dropDownIndex:t.target.value}),i[e].f&&i[e].f(t.target.value);break}}}},e[l].subtitleOptions.map((t,e)=>a.a.createElement("option",{key:t.text+e+Math.random(),value:t.text},t.text))))):null}}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(355),r=i.n(n),o=i(381),l=i(382),c=i(305),h=i(333);i(383);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(i,!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let m=null;const g={Featured:[{url:window.config.mbAPI+"/api/v1/planets/?category=199",showHover:!0,expandable:!0,unExpandText:"‹ Featured",displayName:"Featured Discoveries"},{url:window.config.mbAPI+"/api/v1/planets/?category=198",showHover:!0,expandable:!1,displayName:"Travel Bureau"},{url:window.config.mbAPI+"/api/v1/planets/?category=202",showHover:!0,expandable:!0,expandedByDefault:!1,unExpandText:"‹ Featured",displayName:"Weirdest Planets"}],Stars:[{showHover:!0,expandable:!1,expandedByDefault:!0,displayName:"Where We Explore Stars"}],"Planet Types":[{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Gas+Giant:planet_type&order=pl_hostname+asc",showHover:!0,expandable:!0,noSubtitle:!0,unExpandText:"‹ Planet Types",displayName:"Gas Giant",displayInfo:"These planets belong to a class known as gas giants, similar to Jupiter or Saturn in our solar system."},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Neptune-like:planet_type&order=pl_hostname+asc",showHover:!0,expandable:!0,noSubtitle:!0,unExpandText:"‹ Planet Types",displayName:"Neptune-like",displayInfo:"These planets are Neptunian worlds, similar to Uranus or Neptune in our solar system."},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Super+Earth:planet_type&order=pl_hostname+asc",showHover:!0,expandable:!0,noSubtitle:!0,unExpandText:"‹ Planet Types",displayName:"Super Earth",displayInfo:"Super Earths are exotic planets unlike any in our solar system—more massive than Earth yet lighter than gas giants like Neptune, and they can be made of gas, rock or a combination of both."},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Terrestrial:planet_type&order=pl_hostname+asc",showHover:!0,expandable:!0,noSubtitle:!0,unExpandText:"‹ Planet Types",displayName:"Terrestrial",displayInfo:"Terrestrial planets are rocky, with iron-rich cores, like Mercury, Venus, Earth and Mars in our solar system."},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Unknown:planet_type&order=pl_hostname+asc",showHover:!0,expandable:!0,noSubtitle:!0,unExpandText:"‹ Planet Types",displayName:"Unknown"}],"Mission Discoveries":[{url:window.config.mbAPI+"/api/v1/planets/?condition_1=true:pl_kepflag&order=pl_hostname+asc",showHover:!0,expandable:!0,displayName:"Kepler Discoveries",unExpandText:"‹ Mission Discoveries"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Transiting%20Exoplanet%20Survey%20Satellite%20%28TESS%29:pl_facility",showHover:!0,expandable:!0,displayName:"TESS Discoveries",unExpandText:"‹ Mission Discoveries"}],"Detection Method":[{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Astrometry:pl_discmethod&order=pl_hostname+asc",showHover:!0,unExpandText:"‹ Detection Method",displayName:"Astrometry"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Eclipse+Timing+Variations:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Eclipse Timing Variations"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Imaging:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Imaging"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Microlensing:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Microlensing"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Orbital+Brightness+Modulation:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Orbital Brightness Modulation"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Pulsar+Timing:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Pulsar Timing"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Pulsation+Timing+Variations:pl_discmethod&order=pl_hostname+asc",showHover:!0,unExpandText:"‹ Detection Method",displayName:"Pulsation Timing Variations"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Radial+Velocity:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Radial Velocity"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Transit:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Transit"},{url:window.config.mbAPI+"/api/v1/planets/?condition_1=Transit+Timing+Variations:pl_discmethod&order=pl_hostname+asc",showHover:!0,expandable:!0,unExpandText:"‹ Detection Method",displayName:"Transit Timing Variations"}],Observatory:[{url:window.config.mbAPI+"/eox_data/observatories.json",showHover:!1,expandable:!1,expandedByDefault:!0,displayName:"Browse planets by observatory",unpaginated:!0,formatItems:t=>(t.forEach(t=>{"Kepler"===t.exo_id?t.name="Kepler":"K2"===t.exo_id&&(t.name="K2"),t.list_image="/assets/eox/observatories/"+t.image,t.display_name=t.name,t.noSubtitle=!0}),null===m&&(m={},t.forEach(t=>{let e=t.exo_id;switch(e){case"XO Project":e="XO"}m[t.exo_id]=[{displayName:t.name,showHover:!0,expandable:!1,expandedByDefault:!0,Text:"‹ All Observatories",url:`${window.config.mbAPI}/api/v1/planets/?condition_1=${e}:pl_facility`}]})),t)}]};e.default=class extends s.Component{constructor(t){super(t);this._categories=Object.keys(g),this.state={open:!1,activeCategory:"Featured",activeGalleryPageName:"Featured",activeGalleryPage:[],lastExpandedPageNumber:-1},this.open=this.open.bind(this),this.close=this.close.bind(this),this.activateGalleryPage=this.activateGalleryPage.bind(this),this.expandGallery=this.expandGallery.bind(this),this.unExpandGallery=this.unExpandGallery.bind(this),this.getMorePages=this.getMorePages.bind(this),this.onPictureClick=this.onPictureClick.bind(this)}fetchActiveGalleryPage(t,e){let i=t[this.state.activeGalleryPageName];void 0===i&&(this.setState({activeGalleryPageName:"Observatory"}),i=t.Observatory),1===i.length&&this.setState({lastExpandedPageNumber:0});let s=i.map(t=>t.url?t.unpaginated?t.url:t.url+`&per_page=${t.expandedByDefault,30}&page=0`:null);s=s.filter(t=>!!t),r.a.all(s.map(t=>r.a.get(t))).then(t=>{this.setState({activeGalleryPage:t.map((t,e)=>{let s=(i[e].formatItems?i[e].formatItems:t=>t.items)(t.data),a=!1;return s.length>5&&(a=!0),u({},i[e],{expandable:a,items:s,isDisplayingMoreButton:s.length%30==0&&s.length>0})})},()=>{e&&e()})})}activateGalleryPage(t,e=g,i=null){this.needsToGetContent=!0;let s=this.state.activeCategory;-1!==this._categories.indexOf(t)&&(s=t),this.setState({activeCategory:s,activeGalleryPageName:t,activeGalleryPage:[],lastExpandedPageNumber:-1},()=>{this.fetchActiveGalleryPage(e,i)})}expandGalleryByNameType(t,e){if(g[t])for(let i=0;i<g[t].length;i++)if(g[t][i].displayName===e)return void this.activateGalleryPage(t,g,()=>{this.setState({open:!0},()=>{this.expandGallery(g[t][i])})})}expandGallery(t){let e=t.unpaginated?t.url:t.url+`&per_page=30&page=${this.state.lastExpandedPageNumber+1}`;r.a.get(e).then(e=>{this.setState({activeGalleryPage:[u({},t,{expanded:!0,items:e.data.items,isDisplayingMoreButton:e.data.items.length%30==0&&e.data.items.length>0})],lastExpandedPageNumber:this.state.lastExpandedPageNumber+1})})}getMorePages(t){let e=t.unpaginated?t.url:t.url+`&per_page=30&page=${this.state.lastExpandedPageNumber+1}`,i=t.items||[];r.a.get(e).then(e=>{this.setState({activeGalleryPage:[u({},t,{expanded:!0,items:i.concat(e.data.items),isDisplayingMoreButton:e.data.items.length%30==0&&e.data.items.length>0})],lastExpandedPageNumber:this.state.lastExpandedPageNumber+1})})}unExpandGallery(){this.fetchActiveGalleryPage(g),this.setState({lastExpandedPageNumber:-1})}componentDidMount(){this.activateGalleryPage(this.state.activeGalleryPageName)}onPictureClick(t){if("Observatory"===this.state.activeGalleryPageName)this.activateGalleryPage(t.exo_id,m);else if(t.pl_hostname&&this.props.getManager("content").getDB("planets")[t.exo_id])this.setState({open:!1}),this.props.MainPathChanged(`planet/${t.exo_id}`);else for(let e=0;e<c.length;e+=1)c[e].exo_id===t.exo_id&&this.setState({open:!1},()=>{this.props.MainPathChanged(`star/${t.exo_id}`)})}open(){this.setState({open:!0})}close(){this.setState({open:!1})}render(){let{open:t,activeCategory:e,activeGalleryPage:i,activeGalleryPageName:s,isDisplayingMoreButton:n}=this.state;const{isMobile:r,getManager:d}=this.props;if("Stars"===s){i=[{displayName:"Where We Explore Stars",expandable:!1,noSubtitle:!1,expandedByDefault:!0,subHeader:"Stars with the best prospect of discovering Earth-like planets with direct imaging.",isDisplayingMoreButton:!1,showHover:!0,items:c.map(t=>{let e="",i="",s="";for(let s=0;s<h.length;s+=1)t.exo_id===h[s].exo_id&&(e=h[s]["Existing info"]||h[s]["Pop culture"],i=h[s]["Existing info"]||h[s]["Pop culture"]);return s="F"===t.starType||"G"===t.starType?"Sun-like":"K"===t.starType?"Orange dwarf":"M"===t.starType?"Red dwarf":"Unknown",{description:e,categories:[],short_description:i,display_name:t.displayName,exo_id:t.exo_id,starType:s,local:!0,list_image:`${window.config.moduleUrl}assets/image/exostar/${l.default.THUMBNAILS.square[t.starType]}`}})}]}return a.a.createElement("div",{className:"planet-browser scrollable overlay",style:t?{display:"block"}:{display:"none"}},r?a.a.createElement("header",{className:"category-bar"},a.a.createElement("div",{className:"category-select"},a.a.createElement("select",{className:"dropdown",value:e,onChange:t=>{this.activateGalleryPage(t.target.value)}},this._categories.map((t,e)=>a.a.createElement("option",{key:e,value:t,className:"category"},t)))),a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"}))))):a.a.createElement("header",{className:"category-bar"},a.a.createElement("button",{className:"headerButton closeButton big",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})),a.a.createElement("ul",{className:"categories"},this._categories.map((t,i)=>a.a.createElement("li",{key:i,className:`category ${t===e?"active":""}`,onClick:()=>{this.activateGalleryPage(t)}},t)))),a.a.createElement(o.default,{getManager:d,galleryPage:i,expandGallery:this.expandGallery,unExpandGallery:this.unExpandGallery,getMorePages:this.getMorePages,onPictureClick:this.onPictureClick,isDisplayingMoreButton:n}))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(12),r=i.n(n);class o extends s.Component{constructor(t){super(t),this.state={galleriesByName:{}},this._touchStartX=null,this._touchStartY=null,this._oldX=null,this._element=null,this._isDragging=!1,this._imgBaseUrl=window.config.moduleUrl+"assets/image/generic/",this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchScroll=this._handleTouchScroll.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleDragStart=this._handleDragStart.bind(this),this._handleScroll=this._handleScroll.bind(this),this._onMouseClick=this._onMouseClick.bind(this),this._handleDragEnd=this._handleDragEnd.bind(this),this._handleMouseOut=this._handleMouseOut.bind(this)}componentDidMount(){let t=document.getElementsByClassName("planet-browser-body")[0];t.addEventListener("touchstart",this._handleTouchStart,{passive:!1}),t.addEventListener("touchmove",this._handleTouchScroll,{passive:!1}),t.addEventListener("touchend",this._handleTouchEnd,{passive:!1}),t.addEventListener("mousedown",this._handleMouseDown,{passive:!1}),t.addEventListener("mousemove",this._handleMouseMove,{passive:!1}),t.addEventListener("mouseup",this._handleMouseUp,{passive:!1}),t.addEventListener("mouseout",this._handleMouseOut,{passive:!1}),t.addEventListener("click",this._onMouseClick,!1)}componentWillUnmount(){let t=document.getElementsByClassName("planet-browser-body")[0];t.removeEventListener("touchstart",this._handleTouchStart),t.removeEventListener("touchmove",this._handleTouchScroll),t.removeEventListener("touchend",this._handleTouchEnd),t.removeEventListener("mousedown",this._handleMouseDown),t.removeEventListener("mousemove",this._handleMouseMove),t.removeEventListener("mouseup",this._handleMouseUp),t.removeEventListener("mouseup",this._handleMouseOut),t.removeEventListener("click",this._onMouseClick)}_handleMouseDown(t){this._touchStartX=t.clientX,this._touchStartY=t.clientY,this._handleDragStart(t)}_handleTouchStart(t){this._touchStartX=t.touches[0].clientX,this._touchStartY=t.touches[0].clientY,this._handleDragStart(t)}_handleDragStart(t){let e=document.getElementsByClassName("gallery");for(let i=0;i<e.length;i++){let s=e[i];if(!s.classList.contains("expanded")&&(s===t.target||s.contains(t.target))){if(this._element=s,this._element.childElementCount<=1)return void(this._element=null);let t=window.getComputedStyle(s),e=t.transform||t.webkitTransform||t.mozTransform,i=e.match(/^matrix3d\((.+)\)$/);i?this._oldX=parseFloat(i[1].split(", ")[13]):(i=e.match(/^matrix\((.+)\)$/),this._oldX=i?parseFloat(i[1].split(", ")[4]):0);break}}}_handleMouseMove(t){if(!this._element||!this._touchStartX)return;let e=t.clientX,i=t.clientY;this._handleScroll(t,e,i)}_handleTouchScroll(t){if(!this._element||!this._touchStartX||t.touches.length>1)return;let e=t.touches[0].clientX,i=t.touches[0].clientY;this._handleScroll(t,e,i)}_handleScroll(t,e,i){this._isDragging=!0;let s=e-this._touchStartX,a=Math.abs(this._touchStartY-i);if(Math.abs(s)>a&&this._element){t.stopPropagation(),a<50&&t.preventDefault();let e=this._oldX+s,i=-(this._element.childNodes.length-1.5)*this._element.childNodes[0].offsetWidth;e>0?e=0:e<i&&(e=i),this._element.style.transform="translate3D("+e+"px, 0px, 0px)"}}_handleMouseUp(){this._handleDragEnd()}_handleTouchEnd(){this._isDragging=!1,this._handleDragEnd()}_handleDragEnd(){this._touchStartX=null,this._touchStartY=null,this._oldX=null,this._element=null}_handleMouseOut(){this._isDragging=!1,this._handleDragEnd()}_onMouseClick(){this._isDragging=!1}render(){let{galleryPage:t,getManager:e}=this.props;const i=t=>t.expandedByDefault||t.expanded;let s=null;return a.a.createElement("div",{className:"planet-browser-body"},t.map((n,r)=>(void 0!==n.unExpandText&&(s=n.unExpandText),a.a.createElement("section",{key:n.displayName+r+Math.random(),className:r===t.length-1?"last":"",onMouseOut:this._handleMouseOut},a.a.createElement("header",{className:"category_header"},a.a.createElement("div",{className:"gallery-header"},a.a.createElement("h2",{className:"gallery_title"},n.displayName," "),n.displayInfo&&!i(n)&&a.a.createElement("span",{className:"info_tip"},a.a.createElement("div",{className:"info_icon"},a.a.createElement("span",{className:"info_image"})),a.a.createElement("div",{className:"info_text"},n.displayInfo)),n.subHeader&&a.a.createElement("span",{className:"subheader"},n.subHeader),i(n)?a.a.createElement("div",{className:"toggle-expand back",onClick:this.props.unExpandGallery},s):(t=>t.expandable)(n)?a.a.createElement("div",{className:"toggle-expand more",onClick:()=>this.props.expandGallery(n)},"view all ›"):a.a.createElement("div",null))),a.a.createElement("div",{className:"gallery"+(i(n)?" expanded":""),style:{transform:"translate3D(0)"}},(t=>{return(t.expanded||t.expandedByDefault?t.items:t.items.slice(0,5)).filter(i=>{if(t&&e&&e("content")&&e("content").getDB("stars")){const t=e("content").getDB("stars")[i.exo_id]||e("content").getDB("stars")[i.pl_hostname];if(t&&t.position&&(-1===t.position[0]||0===t.position[0]))return!1}return!0})})(n).map((t,e)=>{let i=t.short_description;return i&&(i=(i=i.replace("<p>","")).replace("</p>","")),a.a.createElement("div",{key:t+e+Math.random(),className:"gallery-item"},a.a.createElement("div",{className:"gallery-item-content"+("Browse planets by observatory"===n.displayName?" flex":"")},a.a.createElement("div",{onClick:()=>{t&&this.props&&this.props.onPictureClick&&this.props.onPictureClick(t)},className:"image"},a.a.createElement("div",{className:"image-container"},n.showHover&&a.a.createElement("div",{className:"rollover"},a.a.createElement("div",{className:"inner"},a.a.createElement("p",null,i))),a.a.createElement("img",{draggable:"false",src:t.local?`${t.list_image}`:`${window.config.mbAPI}/${t.list_image}`}))),a.a.createElement("div",{className:"title-container"},a.a.createElement("div",{className:"inner-title-container"},a.a.createElement("div",{className:`title ${t.noSubtitle?"no-subtitle":""}`},t.display_name),!n.noSubtitle&&a.a.createElement("div",{className:"subtitle"},"Where We Explore Stars"===n.displayName?t.starType:t.planet_type)))))})),i(n)&&n.isDisplayingMoreButton&&a.a.createElement("button",{className:"more-button",onClick:()=>this.props.getMorePages(n)},"more")))))}}o.propTypes={galleryPage:r.a.array},e.default=o},function(t,e,i){"use strict";i.r(e);e.default={THUMBNAILS:{square:{F:"F_sq.png",G:"G_sq.png",K:"K_sq.png",M:"M_sq.png"},rect:{F:"F_rect.png",G:"G_rect.png",K:"K_rect.png",M:"M_rect.png"}},METHODS:{radial:{header:"Radial Velocity",icon:"radial-velocity.svg",works:"When a planet orbits a star, it exerts a gravitational tug on the star, causing the star’s velocity to change. The radial velocity method searches for these velocity changes, which show up as slight shifts in the wavelength or spectral color of the star’s light. Carried out using telescopes on the ground, this method was the first used to detect exoplanets around Sun-like stars and is often used to confirm planets found with other methods.",more:"Radial velocity measurements require a precise accounting of changes in the system’s starlight. The motions of gas in the atmosphere of the star, known as its stellar or magnetic activity, can make it challenging to tell if the shifts in the star’s radial velocity come from a planet companion or the star itself. The more magnetic activity that a star has, the more challenging it is to detect planets with this method. Larger planets are easier to detect with current radial velocity technologies, but as they improve, smaller planets may be uncovered."},transit:{header:"Transit",icon:"transit.svg",works:"If a planet passes between Earth and its host star, it blocks some of the star's light, like an eclipse. For that brief period of time, the star appears dimmer. It's a tiny change, but it's enough to clue astronomers into the presence of an exoplanet around the star. By measuring these dips in stellar brightness with telescopes on the ground and in space, astronomers have discovered  thousands of exoplanets. This method reveals the radius of the planet and can also be used to study the planet’s atmosphere.",more:"Success with the transit method requires looking at stars for long periods of time, to spot any repeated dips, but also requires a certain amount of luck – that the planet’s orbit takes it across the face of the star, as seen from Earth. Because of the luck involved in that geometry, it is difficult to predict or improve the chances of finding a planet with a transit, apart from observing it for a longer period of time."},imaging:{header:"Imaging",icon:"imaging.svg",works:"Direct imaging involves taking pictures of planets – the only method that looks directly at the planet, rather than changes in starlight. Taking pictures of planets is extremely difficult because exoplanets are so far away and are millions of times dimmer than the stars they orbit. To see the planet and overcome the challenge of how bright the star is, astronomers use techniques to remove the star’s glare. By blocking this starlight, with techniques like a coronagraph or starshade, direct imaging can be used to find planets.",more:"So far only large planets, far from their host stars, have been found with direct imaging. Finding planets that are smaller and closer to their bright stars is more challenging, and rapidly advancing technology is working toward this goal. Direct imaging may eventually be used to look at details on planets, such as atmospheres, oceans, and land surfaces."},microlensing:{header:"Microlensing",icon:"micro-lensing.svg",prospect:"0 planets have been detected to date around this star using microlensing.",works:"The gravity from heavy objects warps the space around them, so light rays passing nearby will bend. The light behaves as if it were going through the lens of a magnifying glass. This means that when a planet passes in front of a faraway star, the planet’s gravity causes lensing and the star temporarily appears brighter. In the microlensing method of planet detection, astronomers search for these fleeting flashes across the sky, as indications of an exoplanet.",more:"Microlensing has been used to discover distant and, in principle, even free-floating planets not orbiting any star. As with the transit method, it is difficult to predict or improve the chances that a planetary system will have the right configuration to be detected with microlensing."},astrometry:{header:"Astrometry",prospect:"0 planets have been detected to date around this star using astrometry.",icon:"astrometry.svg",works:"When a planet orbits a star, its gravity can perturb (or alter) the motion of the star. The star’s resulting motion can be visible as changes to its position in the sky. Astrometry uses precise measurements of a star’s movement over time to find planets. The star’s position in the sky can appear to change by such a small amount that it can be difficult to detect planets with astrometry, especially relatively small ones the size of Earth.",more:"To date, a handful of planets have been detected by space missions focused on astrometry of Milky Way stars. As observations of these systems grow more precise and frequent, more planets will be discovered using the astrometric technique. Unique to this method, astrometry can even be used to collect accurate data about a planet’s mass and orbit."}},INFO:{output:"The power output of a star is also called its luminosity, which is the rate at which the star emits energy. Think of a lightbulb, with power measured in watts (abbreviated W). The higher the number, the more power the bulb emits and the brighter it will appear. The Sun’s power output is roughly 380 million billion billion watts. A star’s luminosity, and how it compares to the Sun, is important for exoplanet exploration because it sets a planet’s temperature and whether it will be temperate enough, like Earth, for liquid water and life.",temprature:"From the center of a star to the outer layers of its atmosphere, its temperature varies. With such a range of temperatures, astronomers use a quantity known as the star’s effective temperature.  Effective temperature roughly corresponds to the temperature in the star's atmosphere, where much of the light we see is emitted. Sometimes the effective temperature is called the surface temperature, but that name can be misleading because a star does not have a solid surface. The Sun’s effective temperature is 5,772 Kelvin, which is 5,499 degrees Celsius and 9,930 degrees Fahrenheit.",magnitude:"Astronomers use the term visual magnitude to describe how bright a star is. Note that the magnitude scale is upside down; the smaller the value, the brighter the star. The Sun has a visual magnitude of -26.7, and the human eye can perceive brightnesses down to a visual magnitude of roughly 6.5. For reference, Sirius is the brightest star in the night sky, and it has a visual magnitude of -1.46.",habzone:"For a planet, the habitable zone is the distance from a star that allows liquid water to persist on its surface, as long as that planet has a suitable atmosphere. Every star has a habitable zone, but where that zone lies is different for stars of varying sizes and brightness. Habitable zones are important in exoplanet exploration because they indicate where conditions might be just right for life to exist on a planet. The Earth lies within the habitable zone of the Sun. In the search for life beyond Earth, astronomers tend to focus on habitable zones."}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(294),r=i(385),o=i.n(r),l=i(399),c=i.n(l),h=i(296),d=i(460);i(338),i(462);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={ready:!1,speed:0,time:0,speedText:"Million miles per hour",timeText:"Years"},this.close=this.close.bind(this),this.updateTravel=this.updateTravel.bind(this),this.planetInfo=null,this.starInfo=null,this.APIData=null,this.data=null,this.apiURL=window.config.mbAPI+"/api/v1",this.observatoriesURL=window.config.mbAPI+"/eox_data/observatories.json",this.observatories=null,this.sizeRatio=.2,this.massRatio=1/15,this.activeTravelMode="auto",this.hourToYear=114155e-9,this.kmToMiles=.621371,this.map={displayName:{api:"display_name",db:"displayName"},subtitle:{api:"subtitle"},description:{api:"description"},long_description:{api:"long_description"},imageURL:{api:"image"},discoveryYear:{api:"discovery_date",db:"pl_disc"},discoveryMethod:{api:"pl_discmethod",db:"pl_discmethod"},discoveryFacility:{api:"pl_facility",db:"pl_facility"},planetType:{api:"planet_type",db:"plType"},orbitalRadius:{db:"semiMajor"},orbitalPeriod:{db:"pl_orbper"},orbitalPeriodDisplay:{db:"period_display"},orbitalEccentricity:{db:"pl_orbeccen"},orbitalEccentricityLimit:{db:"pl_eccenlim"},orbitalDistance:{db:"semiMajor"},parentStarName:{api:"pl_hostname",db:"pl_hostname"},parentStarType:{db:"starType"},radiusToJupiter:{db:"pl_radj"},radiusToEarth:{db:"pl_rade"},massToJupiter:{db:"pl_massj"},massToEarth:{db:"pl_masse"},massDisplay:{api:"mass_display",db:"mass_display"},massToJupiterBest:{db:"pl_bmassj"},massToEarthBest:{db:"pl_bmasse"},massToSun:{db:"st_mass"},radiusToSun:{db:"st_rad"},showEstimate:{db:"fpl_radreflink"},starPosition:{db:"position"}},this.travelInfo=new Map([["auto",{speed:60,unit:"mi/h",div:a.a.createRef(),text:"Auto"}],["train",{speed:120,unit:"mi/h",div:a.a.createRef(),text:"Bullet train"}],["jet",{speed:600,unit:"mi/h",div:a.a.createRef(),text:"Jet"}],["voyager",{speed:38e3,unit:"mi/h",div:a.a.createRef(),text:"Voyager"}],["lightspeed",{speed:670616629,unit:"mi/h",div:a.a.createRef(),text:"Light speed"}]]),Object(n.autoPlay)(!0)}componentDidMount(){this.props.info.id?(this.APIData=this.props.getManager("content").getAPIPlanet(this.props.info.id),this.planetInfo=this.props.getManager("content").getDB("planets")[this.props.info.id],this.planetInfo&&(this.starInfo=this.props.getManager("content").getDB("stars")[this.planetInfo.pl_hostname]),this.data=this.generateDataObj(),this.setState({ready:!0},()=>{this.updateTravel(null)})):this.close()}close(){this.props.closeDetailPanel()}generateDataObj(){let t=this.get("massToJupiterBest")||this.get("massToJupiter"),e="Jupiter";(t<=this.massRatio||this.isSuperEarth()||this.isTerrestrial())&&(t=this.get("massToEarthBest")||this.get("massToEarth"),e="Earth");let i=this.get("radiusToJupiter"),s="Jupiter";(i<=this.sizeRatio||this.isSuperEarth()||this.isTerrestrial())&&(i=this.get("radiusToEarth"),s="Earth");let n=i+" x "+s,l=this.get("massToSun"),c=this.get("radiusToSun"),h=c+" x Our Sun",d=0,u=this.get("orbitalEccentricityLimit");u<=0||this.isUnknown(u)?((d=this.get("orbitalEccentricity"))<=0||this.isUnknown(d))&&(d=0):d="< "+this.get("orbitalEccentricityLimit");let p=o()(this.get("description"),{replace:t=>{if(null===t.parent){if("text"===t.type&&void 0!==t.children)return a.a.createElement("p",null,Object(r.domToReact)(t.children));if("text"===t.type&&!this.isBlank(t.data))return a.a.createElement("p",null,t.data)}}}),m="",g="";return""!==this.get("subtitle")?(m=this.get("subtitle"),g=this.get("displayName")):(m=this.get("displayName"),g=null),{info:{displayName:g,subtitle:m,imageURL:this.get("imageURL"),description:p,long_description:this.get("long_description"),discoveryYear:this.get("discoveryYear"),discoveryMethod:this.get("discoveryMethod"),discoveryFacility:this.get("discoveryFacility"),discoveryFacilityImage:this.getObservatoryImage(this.get("discoveryFacility")),planetType:this.get("planetType"),parentStarName:this.get("parentStarName"),parentStarType:this.get("parentStarType",{db:"star"})},orbital:{radius:this.get("orbitalRadius"),period:"NA"===this.get("orbitalPeriod")?"N/A":this.get("orbitalPeriodDisplay"),eccentricity:d,distance:this.get("orbitalDistance")},compare:{planet:{title:s,class:(c<=0?" center":"")+(i<=0?" hidden":""),mass:{value:t,to:e,display:this.get("massDisplay")},size:{value:i,to:s,display:n,larger:i>=1,relativeOffset:i<1?100*i:100/i,showEstimate:1===parseInt(this.get("showEstimate"))}},star:{title:"Our Sun",class:(i<=0?" center":"")+(c<=0?" hidden":""),mass:{value:l,to:"Our Sun",display:l+" x Our Sun"},size:{value:c,to:"Our Sun",display:h,larger:c>=1,relativeOffset:c<1?100*c:100/c}}}}}get(t,{db:e="planet"}={}){let i=t,s=t;if(void 0!==this.map[t]&&(i=this.map[t].api,s=this.map[t].db),null!==this.APIData&&void 0!==this.APIData[i])return"imageURL"===t?window.config.mbAPI+this.APIData[i]:this.APIData[i];if("subtitle"===t){let t=this.planetInfo?this.planetInfo.plType:"";return this.generateSubtitle(t)}return"imageURL"===t?window.config.moduleUrl+"assets/image/exoplanet/gasgiant_sq2.png":"star"===e?this.starInfo?this.starInfo[s]:"":this.planetInfo?this.planetInfo[s]:""}getObservatoryImage(t){let e=this.props.getManager("content").getAPIObservatory(t);return null===e?null:window.config.mbAPI+"/assets/eox/observatories/"+e.image}getDiscoveryMethodText(t){return this.props.getManager("content").getAPIDiscovery(t)?this.props.getManager("content").getAPIDiscovery(t).body:""}getTravelTime(t,e,{unit:i="km/y"}={}){let s=0;return s=t/e,"mi/h"===i?(s*=this.hourToYear,s*=this.kmToMiles):"km/h"===i&&(s*=this.hourToYear),s}updateTravel(t){let e="auto";null!==t&&(e=t.currentTarget.dataset.id);let i=h.default.calculateRawDistance(this.get("starPosition",{db:"star"})),s=this.travelInfo.get(e),a=this.getTravelTime(i,s.speed,{unit:s.unit});a=this.formatTravelData(a,{outputUnit:"y",inputUnit:"y"});let n=this.formatTravelData(s.speed,{outputUnit:"mi/h",inputUnit:s.unit});this.setState({speedText:n.label,timeText:a.label}),this.animate({speed:n.value,time:a.value},500),this.travelInfo.get(this.activeTravelMode).div.current.classList.remove("active"),this.activeTravelMode=e,this.travelInfo.get(this.activeTravelMode).div.current.classList.add("active")}formatTravelData(t,{outputUnit:e="y",inputUnit:i="y"}={}){let s={value:t,label:""};"km/h"===i&&"mi/h"===e?t*=this.kmToMiles:"km/y"===i&&"mi/h"===e&&(t*=this.hourToYear,t*=this.kmToMiles);let a="years";return"mi/h"===e?a="miles per hour":"km/h"===e&&(a="km per hour"),t>=1e9?(s.value=Math.round(t/1e9),s.label="Billion "+a):t>=1e6?(s.value=Math.round(t/1e6),s.label="Million "+a):t>=1e3?(s.value=Math.round(t/1e3),s.label="Thousand "+a):(s.value=Math.round(t),s.label=this.capitalize(a)),s}animate(t,e=1e3){return new n.Tween({speed:this.state.speed,time:this.state.time}).to({speed:t.speed,time:t.time},e).on("update",({speed:t,time:e})=>{this.setState({speed:Math.round(t),time:Math.round(e)})}).start()}checkPlural(t,e){return e>=2?t+"s":t}formatNumber(t){return 0===t?t.toFixed(1):(Math.round(100*t)/100).toFixed(2)}capitalize(t){return"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)}isBlank(t){return!t||""===t||!/\w/g.test(t)}isUnknown(t){return"NA"===(t=String(t).toUpperCase())||"N/A"===t||"NULL"===t}isSuperEarth(){return!!["super-terrestrial","super earth"].includes(this.get("planetType").toLowerCase())}isTerrestrial(){return!!["terrestrial"].includes(this.get("planetType").toLowerCase())}generateSubtitle(t){switch(t){case"sub-Neptunian":return"A Neptune-like ice giant planet";case"super-Terrestrial":return"A potentially rocky world, larger than Earth";case"Terrestrial":return"A rocky world outside our solar system";case"Neptunian":return"A Neptune-like ice giant planet";case"Jovian":case"sub-Jovian":case"super-Jovian":return"A giant planet composed mainly of gas";case"Unknown":default:return""}}generateDescription(){let t="a";["A","O"].includes(this.data.info.parentStarType.toUpperCase())&&(t="an");let e=this.data.info.planetType.toLowerCase();this.isSuperEarth()&&(e="super Earth");let i="";return i+=this.data.info.displayName+" is a ",i+=e+" exoplanet that orbits ",i+=t+" "+this.data.info.parentStarType+"-type star. ",this.data.compare.planet.mass.value<=0?i+="Its mass is unknown, ":i+="Its mass is "+this.data.compare.planet.mass.value+" "+this.data.compare.planet.mass.to+", ",i+="it takes "+this.data.orbital.period+" days to complete one orbit of its star ",i+="and is "+this.data.orbital.distance+" AU from its star. ",i+="Its discovery was announced in "+this.data.info.discoveryYear+"."}scanDebug(){let t=this.props.getManager("content").getDB("planets");var e=[];for(var i in t){var s=t[i].plType;-1===e.indexOf(s)?(console.warn("Found new Key, Value = "+s),e.push(s)):console.warn("Key was already found, Value = "+s)}for(var a in e)for(var n in t)if(e[a]===t[n].plType){console.log("          Sample Datapoint: "+t[n].displayName);break}}render(){return this.state.ready?a.a.createElement("div",{className:"detail-overlay explore overlay scrollable"},this.props.isMobile?a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))):a.a.createElement("button",{className:"headerButton closeButton big",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})),a.a.createElement("section",{className:"top-feature-area"},a.a.createElement("header",null,this.data.info.displayName&&a.a.createElement("div",{className:"object-name"},this.data.info.displayName),a.a.createElement("h1",null,this.data.info.subtitle))),a.a.createElement("section",{className:"content-page"},a.a.createElement("article",{className:"content"},a.a.createElement("figure",{className:"image"},a.a.createElement("img",{src:this.data.info.imageURL}),a.a.createElement("figcaption",null,"Artist's concept")),a.a.createElement("div",{className:"planet-info block small"},a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"DISCOVERED"),a.a.createElement("span",{className:"value"},this.data.info.discoveryYear)),a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"PLANET TYPE"),a.a.createElement("span",{className:"value"},this.data.info.planetType)),a.a.createElement("div",{className:"description"},this.APIData&&c()(this.APIData.long_description||this.data.info.long_description||this.APIData.description||this.data.info.description))),a.a.createElement("div",{className:"planet-facts block"},a.a.createElement("div",{className:"fact first"},a.a.createElement("div",{className:"key"},"ORBITAL",a.a.createElement("br",null),"RADIUS"),a.a.createElement("div",{className:"value"},this.data.orbital.radius,a.a.createElement("span",null,"AU"))),a.a.createElement("div",{className:"fact second"},a.a.createElement("div",{className:"key"},"ORBITAL",a.a.createElement("br",null),"PERIOD"),a.a.createElement("div",{className:"value"},this.data.orbital.period)),a.a.createElement("div",{className:"fact last"},a.a.createElement("div",{className:"key"},"ORBITAL",a.a.createElement("br",null),"ECCENTRICITY"),a.a.createElement("div",{className:"value"},this.data.orbital.eccentricity))),a.a.createElement("div",{className:"size-compare block"},a.a.createElement(d.default,{data:this.data.compare.planet,side:"left",type:"planet",title:"Planet Comparison",objectName:this.data.info.displayName}),a.a.createElement(d.default,{data:this.data.compare.star,side:"right",type:"star",title:"Star Comparison",objectName:this.data.info.parentStarName})),a.a.createElement("div",{className:"time-compare block small"},a.a.createElement("h2",null,"How long to Travel Here from Earth?"),a.a.createElement("div",{className:"data-readouts"},a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"title"},"TRAVEL SPEED"),a.a.createElement("div",{className:"value"},this.state.speed),a.a.createElement("div",{className:"units"},this.state.speedText)),a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"title"},"TRAVEL TIME"),a.a.createElement("div",{className:"value"},this.state.time),a.a.createElement("div",{className:"units"},this.state.timeText))),a.a.createElement("div",{className:"options"},a.a.createElement("div",{className:"container"},Array.from(this.travelInfo).map(t=>{let e=t[0],i=t[1];return a.a.createElement("button",{key:e,"data-id":e,className:e,ref:i.div,onClick:this.updateTravel},a.a.createElement("div",{className:"icon"}),a.a.createElement("div",{className:"label"},i.text))})))),a.a.createElement("div",{className:"detection-method block small"},a.a.createElement("h2",null,"Detection Method: ",this.data.info.discoveryMethod),a.a.createElement("div",{className:"blurb"},this.getDiscoveryMethodText(this.data.info.discoveryMethod))),a.a.createElement("div",{className:"discovery-location block"},a.a.createElement("h2",null,"Observed By"),this.data.info.discoveryFacilityImage&&a.a.createElement("div",{className:"image"},a.a.createElement("img",{src:this.data.info.discoveryFacilityImage})),a.a.createElement("div",{className:"name"},this.data.info.discoveryFacility)))),a.a.createElement("div",{className:"close-button"},a.a.createElement("button",{onClick:this.close},"Close"))):null}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s);i(461);e.default=class extends a.a.PureComponent{render(){const{data:t,side:e,type:i,title:s,objectName:n}=this.props;return a.a.createElement("div",{className:"card "+e+" "+t.class},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"title"},s),a.a.createElement("div",{className:i+"-info"},a.a.createElement("div",{className:"names"},a.a.createElement("span",{className:`object exo${i}color`},n),a.a.createElement("span",{className:`to ${i}color`},t.title)),a.a.createElement("div",{className:"circles"},a.a.createElement("div",{className:(t.size.larger?"exo":"")+i+"color larger"}),a.a.createElement("div",{className:(t.size.larger?"":"exo")+i+"color smaller",style:{width:t.size.relativeOffset+"%",height:t.size.relativeOffset+"%",left:(100-t.size.relativeOffset)/2+"%",bottom:(100-t.size.relativeOffset)/2+"%"}}))),a.a.createElement("div",{className:"facts"},t.mass.value>0&&a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"MASS"),a.a.createElement("span",{className:"value"},t.mass.display)),t.size.value>0&&a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"RADIUS"),a.a.createElement("span",{className:"value"},t.size.display," ",t.size.showEstimate?"(estimate)":"")))))}}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(399),r=i.n(n),o=i(312),l=i(464),c=i(465),h=i(382),d=i(305),u=i(333);i(338),i(462),i(467);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={activeMethod:0,distance:"",displayName:"displayName",imageURL:"imageURL",starType:"starType",subtitle:"subtitle",planetCount:"planetCount",description:"description",eccentricity:"eccentricity",radius:"radius",period:"period",parentStarName:"parentStarName",planet:{},star:{},discoveryFacility:"discoveryFacility",discoveryMethod:"discoveryMethod",discoveryFacilityImage:"discoveryFacilityImage",timeline:"",rv:"",transit:"",imaging:"",microlensing:"",astrometry:"",methods:[]},this.close=this.close.bind(this),this.handleProps=this.handleProps.bind(this)}componentDidMount(){const{info:t}=this.props;if(!t||!t.id)return null;this.lastId=t.id;for(let e=0;e<u.length;e+=1)if(u[e].exo_id===t.id){const t=[{tab:{text:h.default.METHODS.radial.header,icon:h.default.METHODS.radial.icon},content:{header:h.default.METHODS.radial.header,prospects:u[e]["RV planets & prospects"]||h.default.METHODS.radial.prospect,works:h.default.METHODS.radial.works,more:h.default.METHODS.radial.more}},{tab:{text:h.default.METHODS.transit.header,icon:h.default.METHODS.transit.icon},content:{header:h.default.METHODS.transit.header,prospects:u[e]["Transit planets & prospects"]||h.default.METHODS.transit.prospect,works:h.default.METHODS.transit.works,more:h.default.METHODS.transit.more}},{tab:{text:h.default.METHODS.imaging.header,icon:h.default.METHODS.imaging.icon},content:{header:h.default.METHODS.imaging.header,prospects:u[e]["Imaging planets & prospects"]||h.default.METHODS.imaging.prospect,works:h.default.METHODS.imaging.works,more:h.default.METHODS.imaging.more}},{tab:{text:h.default.METHODS.microlensing.header,icon:h.default.METHODS.microlensing.icon},content:{header:h.default.METHODS.microlensing.header,prospects:h.default.METHODS.microlensing.prospect,works:h.default.METHODS.microlensing.works,more:h.default.METHODS.microlensing.more}},{tab:{text:h.default.METHODS.astrometry.header,icon:h.default.METHODS.astrometry.icon},content:{header:h.default.METHODS.astrometry.header,prospects:h.default.METHODS.astrometry.prospect+(u[e].Astrometry||""),works:h.default.METHODS.astrometry.works,more:h.default.METHODS.astrometry.more}}];let i=0;const{exo_id:s}=u[e];this.props.getManager("content").getDB("stars")[s]&&(i=this.props.getManager("content").getDB("stars")[s].planet_count||0),this.setState({methods:t,planetCount:i,displayName:u[e].displayName,subtitle:u[e].Tagline,description:u[e]["Existing info"],popCulture:u[e]["Pop culture"]||null,timeline:u[e]["Planet detection paragraph & timeline"],rv:u[e]["RV planets & prospects"],transit:u[e]["Transit planets & prospects"],imaging:u[e]["Imaging planets & prospects"],astrometry:u[e].Astrometry});break}for(let e=0;e<d.length;e+=1)d[e].exo_id===t.id&&this.setState({habzone:d[e].habZone,imageURL:h.default.THUMBNAILS.rect[d[e].starType]||null,orbitalRadius:d[e].st_eei_orbsep,starType:d[e].starType,tempratue:d[e].st_teff,output:d[e].st_lum,magnitude:d[e].sy_vmag,radius:d[e].st_rad,mass:d[e].st_mass,distance:(3.261564*d[e].sy_dist).toFixed(0)})}handleProps(){const{info:t}=this.props;this.lastId!==t.id&&this.close()}close(){this.props.closeDetailPanel()}render(){const{info:t}=this.props;if(!t||!t.id)return null;const{mass:e,methods:i,displayName:s,activeMethod:n,imageURL:d,starType:u,habzone:p,subtitle:m,planetCount:g,orbitalRadius:_,description:f,radius:y,distance:b,popCulture:T,timeline:v,tempratue:E,output:x,magnitude:S}=this.state;return a.a.createElement("div",{className:"detail-overlay explore overlay scrollable whereweexplore"},this.props.isMobile?a.a.createElement("div",{className:"headerBar"},a.a.createElement("div",{className:"headerRight"},a.a.createElement("button",{className:"headerButton closeButton",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})))):a.a.createElement("button",{className:"headerButton closeButton big",onClick:this.close},a.a.createElement("span",{className:"buttonIcon close"})),a.a.createElement("section",{className:"top-feature-area"},a.a.createElement("header",null,s&&a.a.createElement("div",{className:"object-name"},s),a.a.createElement("h1",null,m))),a.a.createElement("section",{className:"content-page"},a.a.createElement("article",{className:"content"},d&&a.a.createElement("figure",{className:"image"},a.a.createElement("div",null,a.a.createElement("img",{src:`${window.config.moduleUrl}assets/image/exostar/${d}`,alt:`Star Type ${u}`})),a.a.createElement("figcaption",null,"Artist's concept")),a.a.createElement("div",{className:"planet-info block small"},a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"STAR TYPE"),a.a.createElement("span",{className:"value"},u)),a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"DISTANCE"),a.a.createElement("span",{className:"value"},b," light-years away")),a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"CONFIRMED PLANETS"),a.a.createElement("span",{className:"value"},g)),a.a.createElement("div",{className:"description",style:{paddingTop:10}},r()(f)),T&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",null,"Pop Culture"),a.a.createElement("div",{className:"description"},r()(T)))),!isNaN(x)&&!isNaN(E)&&!isNaN(S)&&a.a.createElement("div",{className:"planet-facts block whereweexplore"},a.a.createElement("div",{className:"fact first"},a.a.createElement("div",{className:"key"},"STELLAR POWER OUTPUT"),a.a.createElement("div",{className:"value"},Math.pow(10,parseFloat(x)).toFixed(2)," x Our Sun"),a.a.createElement("div",{className:"sub"},"Sun: 3.8 x 10",a.a.createElement("sup",null,"26")," W"),a.a.createElement("span",{className:"info_tip"},a.a.createElement("div",{className:"info_icon"},a.a.createElement("span",{className:"info_image"})),a.a.createElement("div",{className:"info_text"},h.default.INFO.output))),a.a.createElement("div",{className:"fact second"},a.a.createElement("div",{className:"key"},"STELLAR TEMPERATURE"),a.a.createElement("div",{className:"value"},parseFloat(E).toFixed(0)," K"),a.a.createElement("div",{className:"sub"},"Sun: 5772 K"),a.a.createElement("span",{className:"info_tip"},a.a.createElement("div",{className:"info_icon"},a.a.createElement("span",{className:"info_image"})),a.a.createElement("div",{className:"info_text"},h.default.INFO.temprature))),a.a.createElement("div",{className:"fact last"},a.a.createElement("div",{className:"key"},"VISUAL MAGNITUDE"),a.a.createElement("div",{className:"value"},parseFloat(S).toFixed(2)),a.a.createElement("div",{className:"sub"},"Sun: -26.7"),a.a.createElement("span",{className:"info_tip"},a.a.createElement("div",{className:"info_icon"},a.a.createElement("span",{className:"info_image"})),a.a.createElement("div",{className:"info_text"},h.default.INFO.magnitude)))),a.a.createElement("div",{className:"size-compare block"},x&&y&&a.a.createElement(l.default,{data:{massDisplay:`${parseFloat(e).toFixed(2)} x Our Sun`,sizeDisplay:`${parseFloat(y).toFixed(2)} x Our Sun`,class:y<=0?" center":"",size:{value:y,larger:y>=1,relativeOffset:y<1?100*y:100/y}},side:"left",type:"star",title:"Star Comparison",toObject:"Our Sun",objectName:s}),a.a.createElement(c.default,{habzone:p,info:h.default.INFO.habzone,orbitalRadius:_,title:"Habitable Zone Comparison",toObject:"Solar System",objectName:s})),a.a.createElement("div",{className:"time-compare block small"},a.a.createElement("div",{className:"options"},a.a.createElement("div",{className:"container"})),a.a.createElement("h2",null,"Exploration and Planetary Discovery"),a.a.createElement("div",{className:"description"},r()(v)),i&&i.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"How to detect a planet in this system?"),a.a.createElement("div",{className:"methods"},i.map((t,e)=>{const{tab:i,content:s}=t,l=s.prospects.split(".");let c=l,h=null;return l.length>1&&(c=l[0]+".",h=l.splice(1).join(".")),[a.a.createElement("div",{key:"method_tab"+e,className:"tab tab"+(e+1)+(e===n?" active":" inactive"),onClick:()=>{this.setState({activeMethod:e})}},a.a.createElement("div",null,a.a.createElement(o.default,{className:"svg svgBlue",src:window.config.moduleUrl+"assets/svg/"+i.icon}),a.a.createElement("span",null,i.text))),a.a.createElement("div",{key:"method_content"+e,className:"panel"+(e===n?" active":" hidden")},s.header&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"title"},"METHOD"),a.a.createElement("span",{className:"header"},s.header)),s.prospects&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"title"},"PLANETS & PROSPECTS"),c&&a.a.createElement("span",{className:"text prospect"},r()(c)),h&&a.a.createElement("span",{className:"text"},r()(h))),s.works&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"title"},"HOW IT WORKS"),a.a.createElement("span",{className:"text"},s.works)),s.more&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"title"},"MORE"),a.a.createElement("span",{className:"text"},s.more)))]})))))),a.a.createElement("div",{className:"close-button"},a.a.createElement("button",{onClick:this.close},"Close")))}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s);i(461);e.default=class extends a.a.PureComponent{render(){const{data:t,side:e,type:i,title:s,objectName:n,toObject:r,info:o}=this.props;return a.a.createElement("div",{className:"whereweexplore card "+e+" "+t.class},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"title"},s),a.a.createElement("div",{className:i+"-info"},a.a.createElement("div",{className:"names"},a.a.createElement("span",{className:"object exostarcolor"},n),a.a.createElement("span",{className:"to starcolor"},r)),a.a.createElement("div",{className:"circles"},a.a.createElement("div",{className:"larger "+(t.size.larger?"exostarcolor":"starcolor")}),a.a.createElement("div",{className:"smaller "+(t.size.larger?"starcolor":"exostarcolor"),style:{width:t.size.relativeOffset+"%",height:t.size.relativeOffset+"%",left:(100-t.size.relativeOffset)/2+"%",bottom:(100-t.size.relativeOffset)/2+"%"}}))),a.a.createElement("div",{className:"facts"},t.massDisplay&&a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"MASS"),a.a.createElement("span",{className:"value"},t.massDisplay)),t.sizeDisplay&&a.a.createElement("div",{className:"fact"},a.a.createElement("span",{className:"key"},"RADIUS"),a.a.createElement("span",{className:"value"},t.sizeDisplay))),o&&a.a.createElement("span",{className:"info_tip"},a.a.createElement("div",{className:"info_icon"},a.a.createElement("span",{className:"info_image"})),a.a.createElement("div",{className:"info_text"},o))))}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(466),r=i.n(n);i(461),i(467),i(468);const o=[148886716.08557412,253241861.41313583];e.default=class extends a.a.PureComponent{render(){const{side:t="right",title:e,objectName:i,toObject:s,info:n,orbitalRadius:l,habzone:c}=this.props;if(!c)return null;let h=null,d=null;c[1]>o[1]?(d=[o[0]/c[1],o[1]/c[1]],h=[c[0]/c[1],1]):(d=[c[0]/o[1],c[1]/o[1]],h=[o[0]/o[1],1]);const u={hbLarge:{borderWidth:Math.round(131*(h[1]-h[0])/2*1)+"px"},hbSmall:{borderWidth:Math.round(131*(d[1]-d[0])/2*1)+"px",width:Math.round(d[1]/h[1]*100)+"%",height:Math.round(d[1]/h[1]*100)+"%"}};return d=[d[0].toFixed(2),d[1].toFixed(2)],h=[h[0].toFixed(2),h[1].toFixed(2)],a.a.createElement("div",{className:"whereweexplore habzone card "+t+" center"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"title"},e),a.a.createElement("div",{className:"star-info"},a.a.createElement("div",{className:"names larger"},a.a.createElement("span",{className:"object"},i),a.a.createElement("span",{className:"to"},s)),a.a.createElement("div",{className:"circles"},a.a.createElement("div",{className:"habzoneArea"},a.a.createElement("div",{className:`largehabzone ${c[1]>o[1]?" exostar":" solarsystem"}`,style:u.hbLarge},a.a.createElement("div",{className:"star"},a.a.createElement("img",{src:r.a}))),a.a.createElement("div",{className:`smallhabzone ${c[1]>o[1]?" solarsystem":" exostar"}`,style:u.hbSmall},a.a.createElement("div",{className:"star"},a.a.createElement("img",{src:r.a})))))),a.a.createElement("div",{className:"facts"},l&&a.a.createElement("div",{className:"fact",style:{display:"block",textAlign:"center"}},a.a.createElement("span",{className:"key"},"EARTH EQUIVALENT ORBITAL RADIUS"),a.a.createElement("span",{className:"value"},parseFloat(l).toFixed(2)+" x Earth-Sun Distance"))),n&&a.a.createElement("span",{className:"info_tip"},a.a.createElement("div",{className:"info_icon"},a.a.createElement("span",{className:"info_image"})),a.a.createElement("div",{className:"info_text"},n))))}}},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgd2lkdGg9IjIwcHgiIGhlaWdodD0iMjBweCIgdmlld0JveD0iMCAwIDIwLjAgMjAuMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PGNsaXBQYXRoIGlkPSJpMCI+PHBhdGggZD0iTTEwLDAgTDEyLjkzODkyNjMsNS45NTQ5MTUwMyBMMTkuNTEwNTY1Miw2LjkwOTgzMDA2IEwxNC43NTUyODI2LDExLjU0NTA4NSBMMTUuODc3ODUyNSwxOC4wOTAxNjk5IEwxMCwxNSBMNC4xMjIxNDc0OCwxOC4wOTAxNjk5IEw1LjI0NDcxNzQyLDExLjU0NTA4NSBMMC40ODk0MzQ4MzcsNi45MDk4MzAwNiBMNy4wNjEwNzM3NCw1Ljk1NDkxNTAzIEwxMCwwIFoiPjwvcGF0aD48L2NsaXBQYXRoPjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAgMS4wKSI+PGcgY2xpcC1wYXRoPSJ1cmwoI2kwKSI+PHBvbHlnb24gcG9pbnRzPSIwLjQ4OTQzNDgzNywwIDE5LjUxMDU2NTIsMCAxOS41MTA1NjUyLDE4LjA5MDE2OTkgMC40ODk0MzQ4MzcsMTguMDkwMTY5OSAwLjQ4OTQzNDgzNywwIiBzdHJva2U9Im5vbmUiIGZpbGw9IiNGRTlCMzQiPjwvcG9seWdvbj48L2c+PC9nPjwvc3ZnPg=="},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(334),r=i(351),o=i(335),l=i(321),c=i(470),h=i(322);e.default=class extends a.a.PureComponent{constructor(t){super(t);const e=this.props.getManager("content").getAPIObservatories();if(e)for(let t=0;t<n.HOME.length;t++)n.HOME[t].text&&n.HOME[t].text.indexOf("Observatory")>=0&&(n.HOME[t].list=[],n.HOME[t].list.push("All Observatories"),e.forEach(e=>{n.HOME[t].list.indexOf(e.name)<0&&n.HOME[t].list.push(e.name)}));this.state={isReady:!1,centerOpen:!1,data:n.HOME,tabIndex:0,listIndex:[0,0,0]},this.mobilePanel=a.a.createRef(),this.mobileHelperPanel=a.a.createRef(),this.alert=a.a.createRef(),this.dropup=a.a.createRef(),this.filterModal=a.a.createRef(),this._getTabsContent=this._getTabsContent.bind(this),this._openPanel=this._openPanel.bind(this),this._openHelper=this._openHelper.bind(this),this.setState=this.setState.bind(this),this.reset=this.reset.bind(this)}componentDidMount(){this.handleProps()}handleProps(){let{data:t}=this.state,{info:e,earthTipShown:i,setParentState:s}=this.props;if(!e)return;let n=null,r=0,o=[0,0,0],l=this.state.centerOpen;if("home"===e.controller&&"all"!==e.category||(l=!1,this.filterModal&&this.filterModal.current&&this.filterModal.current.close()),"earth"===e.controller&&(i||this.alert.current.open({message:a.a.createElement("p",null,"Click anywhere",a.a.createElement("br",null),"on the globe"),button:{text:"GOT IT",f:()=>{this.alert.current.close(),s({earthTipShown:!0})}}})),e.category&&t[0].list){let i=t[0].list;for(let t=0;t<i.length;t++)i&&i.link&&i.link.indexOf(e.category)>=0&&(o[0]=t);switch(e.category){case"GasGiant":n="Current filter: Gas Giant";break;case"NeptuneLike":n="Current filter: Neptune-like";break;case"SuperEarth":n="Current filter: Super Earth";break;case"Terrestrial":n="Current filter: Terrestrial";break;case"KeplerConfirmed":r=1,o[1]=0,n="Current filter: Kepler Confirmed";break;case"KeplerCandidates":r=1,o[1]=0,n="Current filter: Kepler Candidates";break;case"KeplerAllDiscoveries":r=1,o[1]=0,n="Current filter: Kepler All Discoveries";break;case"TESSConfirmed":r=1,o[1]=1,n="Current filter: TESS Confirmed";break;case"TESSCandidates":r=1,o[1]=1,n="Current filter: TESS Candidates";break;case"TESSAllDiscoveries":r=1,o[1]=1,n="Current filter: TESS All Discoveries";break;default:n="Current filter: All Planet Types"}}if(e.observatory){r=2;let i=e.observatory.replace(/_/g," "),s=t[2].list;for(let t=0;t<s.length;t++)if(s[t]===i){o[2]=t;break}n="Current filter: "+i}this.setState({subtitle:n,listIndex:o,tabIndex:r,centerOpen:l,isReady:!0},()=>{this.dropup&&this.dropup.current&&this.dropup.current.handleProps(),this.mobilePanel&&this.mobilePanel.current&&this.mobilePanel.current.handleProps()})}_getTabsContent(t,e){let{data:i}=this.state;const{MainPathChanged:s}=this.props;return[{svgPath:i[0].svgPath,listIndex:t[0],subtitle:e,subtitleFormat:"text",text:i[0].text,tabFunction:()=>{s("/"),this.filterModal.current.open(0,"PLANET TYPES","/")}},{svgPath:i[1].svgPath,subtitle:e,subtitleFormat:"text",listIndex:t[1],list:i[1].list,text:i[1].text,listRenderFunction:t=>t.text,listFunction:t=>{let e="";t&&"Kepler Discoveries"===t.text?s(e="filter/KeplerAllDiscoveries"):t&&"TESS Discoveries"===t.text&&s(e="filter/TESSAllDiscoveries"),this.filterModal.current.open(1,t,e)}},{svgPath:i[2].svgPath,listIndex:t[2],list:i[2].list,text:i[2].text,listRenderFunction:t=>t,listFunction:t=>{let e=t.replace(/ /g,"_");s("All_Observatories"===e?"/":`facility/${e}`)}}]}_openPanel(){this.mobilePanel.current.open()}_openHelper(){this.mobileHelperPanel.current.setState({open:!0})}reset(){this.filterModal.current&&this.filterModal.current.close(),this.props.getManager("scene").setFilter()}render(){let{isReady:t,listIndex:e,subtitle:i,tabIndex:s,centerOpen:n}=this.state,{info:d,isMobile:u,MainPathChanged:p}=this.props;if(d&&"earth"===d.controller)return a.a.createElement(l.default,{ref:this.alert,className:"telescope"});if(!t)return null;let m=a.a.createElement(c.default,{ref:this.filterModal,setParentState:this.setState,MainPathChanged:p});return u?a.a.createElement("div",{className:"toggle-ui-mobile"},a.a.createElement(h.default,{isMobile:!0,ref:this.mobileHelperPanel,default:d&&"home"===d.controller,openFAQ:()=>{this.faq.current.open()}}),a.a.createElement(o.default,{ref:this.mobilePanel,title:"Filter Galaxy",tabIndex:s,tabs:this._getTabsContent(e,i)}),!n&&a.a.createElement("div",null,a.a.createElement("button",{className:"rightPanelToggle",onClick:this._openPanel},a.a.createElement("span",{className:"rightPanelToggleIcon"})),a.a.createElement("button",{className:"rightPanelHelperToggle",onClick:this._openHelper},a.a.createElement("span",{className:"rightPanelHelperToggleIcon"}))),m):a.a.createElement("div",null,!n&&a.a.createElement(r.default,{ref:this.dropup,isMobile:u,title:"FILTER",tabIndex:s,tabs:this._getTabsContent(e,i)}),m)}}},function(t,e,i){"use strict";i.r(e);var s=i(1),a=i.n(s),n=i(312);i(471);e.default=class extends a.a.PureComponent{constructor(t){super(t),this.state={open:!1,index:0,item:{},activeLink:""},this._handleSelection=this._handleSelection.bind(this),this._getContent=this._getContent.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this)}_handleSelection(t){let e=t.currentTarget.dataset.id;this.setState({activeLink:e}),this.props.MainPathChanged(e)}_getContent(){let{index:t,item:e}=this.state;switch(t){case 0:return{header:"REFINE BY PLANET TYPE",buttons:[{text:"All",link:"/"},{text:"Gas Giant",link:"filter/GasGiant"},{text:"Neptune-like",link:"filter/NeptuneLike"},{text:"Super Earth",link:"filter/SuperEarth"},{text:"Terrestrial",link:"filter/Terrestrial"}]};case 1:return{header:"DISCOVERIES",buttons:[{text:"All",link:"Kepler Discoveries"===e.text?"filter/KeplerAllDiscoveries":"filter/TESSAllDiscoveries"},{text:"Confirmed",link:"Kepler Discoveries"===e.text?"filter/KeplerConfirmed":"filter/TESSConfirmed"},{text:"Candidates",link:"Kepler Discoveries"===e.text?"filter/KeplerCandidates":"filter/TESSCandidates"}]};default:return{}}}open(t,e,i){this.setState({open:!0,activeLink:i,index:t,item:e},()=>{this.props.setParentState({centerOpen:!0})})}close(){this.setState({open:!1},()=>{this.props.setParentState({centerOpen:!1}),this.props.MainPathChanged("/")})}render(){const{open:t,activeLink:e}=this.state,{header:i,buttons:s}=this._getContent();return a.a.createElement("div",{className:"centerController toggle-ui-desktop "+(t?"":" hidden")},a.a.createElement(n.default,{className:"svg svgBlue centerClose",src:window.config.moduleUrl+"assets/svg/cancel.svg",onClick:()=>{this.close()}}),i&&a.a.createElement("div",null,i),s&&a.a.createElement("div",{className:"filters"},s.map((t,i)=>a.a.createElement("button",{key:i,"data-id":t.link,className:e===t.link?"centerActiveButton":"centerInactiveButton",onClick:this._handleSelection},t.text))))}}},function(t,e,i){},function(t,e,i){}]);